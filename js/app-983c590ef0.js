!function(){"use strict";function DatePickerConfig(uibDatepickerConfig,uibDatepickerPopupConfig){uibDatepickerConfig.showWeeks=!1,uibDatepickerPopupConfig.showButtonBar=!1}function SetBuyerID(OrderCloud,buyerid){OrderCloud.BuyerID.Get()==buyerid?angular.noop():OrderCloud.BuyerID.Set(buyerid)}function Routing($urlRouterProvider,$urlMatcherFactoryProvider,$locationProvider){$urlMatcherFactoryProvider.strictMode(!1),$urlRouterProvider.otherwise("/home"),$locationProvider.html5Mode(!0)}function ErrorHandling($provide){function handler($delegate,$injector){return function(ex,cause){$delegate(ex,cause),$injector.get("toastr").error(ex.data?ex.data.error||(ex.data.Errors?ex.data.Errors[0].Message:ex.data):ex.message,"Error")}}handler.$inject=["$delegate","$injector"],$provide.decorator("$exceptionHandler",handler)}function AppCtrl($q,$rootScope,$state,$ocMedia,toastr,LoginService,appname,anonymous){function cleanLoadingIndicators(){vm.contentLoading&&vm.contentLoading.promise&&!vm.contentLoading.promise.$cgBusyFulfilled&&vm.contentLoading.resolve()}var vm=this;vm.name=appname,vm.title=appname,vm.$state=$state,vm.$ocMedia=$ocMedia,vm.contentLoading=void 0,vm.isTouchDevice=function(){var el=document.createElement("div");return el.setAttribute("ongesturestart","return;"),"function"==typeof el.ongesturestart}(),vm.logout=function(){LoginService.Logout()},$rootScope.$on("$stateChangeStart",function(e,toState){cleanLoadingIndicators();var defer=$q.defer();defer.wrapperClass="indicator-container",toState.data&&toState.data.loadingMessage?defer.message=toState.data.loadingMessage:defer.message=null,defer.templateUrl="common/loading-indicators/templates/view.loading.tpl.html",vm.contentLoading=defer}),$rootScope.$on("$stateChangeSuccess",function(e,toState){cleanLoadingIndicators(),toState.data&&toState.data.componentName?vm.title=toState.data.componentName+" | "+appname:vm.title=appname}),$rootScope.$on("$stateChangeError",function(event,toState,toParams,fromState,fromParams,error){cleanLoadingIndicators(),console.log(error)}),$rootScope.$on("OC:AccessInvalidOrExpired",function(){anonymous||LoginService.RememberMe()}),$rootScope.$on("OC:AccessForbidden",function(){toastr.warning("You do not have permission to access this page.")})}function Interceptor($httpProvider){$httpProvider.interceptors.push(["$q","$rootScope",function($q,$rootScope){return{responseError:function(rejection){return rejection.config.url.indexOf("ordercloud.io")>-1&&401==rejection.status&&$rootScope.$broadcast("OC:AccessInvalidOrExpired"),rejection.config.url.indexOf("ordercloud.io")>-1&&403==rejection.status&&$rootScope.$broadcast("OC:AccessForbidden"),$q.reject(rejection)}}}])}SetBuyerID.$inject=["OrderCloud","buyerid"],Routing.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],ErrorHandling.$inject=["$provide"],Interceptor.$inject=["$httpProvider"],AppCtrl.$inject=["$q","$rootScope","$state","$ocMedia","toastr","LoginService","appname","anonymous"],DatePickerConfig.$inject=["uibDatepickerConfig","uibDatepickerPopupConfig"],angular.module("orderCloud",["ngSanitize","ngAnimate","ngMessages","ngTouch","snap","ui.tree","ui.router","ui.bootstrap","orderCloud.sdk","LocalForageModule","toastr","cgBusy","jcs-autoValidate","ordercloud-infinite-scroll","ordercloud-buyer-select","ordercloud-search","ordercloud-assignment-helpers","ordercloud-paging-helpers","ordercloud-auto-id","ordercloud-current-order","ordercloud-address","ordercloud-lineitems","ordercloud-geography"]).run(SetBuyerID).config(Routing).config(ErrorHandling).config(Interceptor).controller("AppCtrl",AppCtrl).config(DatePickerConfig)}(),function(){"use strict";!function(){angular.module("orderCloud").run(["$templateCache",function($templateCache){$templateCache.put("account/templates/account.tpl.html",'<article id="COMPONENT_Account" ui-view class="container-fluid">\r\n\t<h3 class="page-header">Account</h3>\r\n\t<form name="ProfileUpdateForm" ng-submit="account.update()" novalidate autocomplete="off">\r\n\t\t<div class="row">\r\n\t\t\t<div class="form-group col-sm-6">\r\n\t\t\t\t<label>First Name</label>\r\n\t\t\t\t<input type="text" ng-model="account.profile.FirstName" class="form-control" required/>\r\n\t\t\t</div>\r\n\t\t\t<div class="form-group col-sm-6">\r\n\t\t\t\t<label>Last Name</label>\r\n\t\t\t\t<input type="text" ng-model="account.profile.LastName" class="form-control" required/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="form-group">\r\n\t\t\t<label>User ID</label>\r\n\t\t\t<input type="text" ng-model="account.profile.ID" class="form-control" required/>\r\n\t\t</div>\r\n\t\t<div class="form-group">\r\n\t\t\t<label>Username</label>\r\n\t\t\t<input type="text" ng-model="account.profile.Username" class="form-control" required/>\r\n\t\t</div>\r\n\t\t<div class="form-group">\r\n\t\t\t<label>Email</label>\r\n\t\t\t<input type="email" ng-model="account.profile.Email" class="form-control" required/>\r\n\t\t</div>\r\n\t\t<div class="form-group">\r\n\t\t\t<label>Phone</label>\r\n\t\t\t<input type="tel" ng-model="account.profile.Phone" class="form-control"/>\r\n\t\t</div>\r\n\t\t<button type="submit" class="btn btn-primary" ng-disabled="ProfileUpdateForm.$invalid || ProfileUpdateForm.$pristine">Save Changes</button>\r\n\t\t<button type="button" class="btn btn-default" ng-disabled="ProfileUpdateForm.$pristine" ng-click="account.resetForm(ProfileUpdateForm)">Revert Changes</button>\r\n\t\t<button type="button" class="btn btn-default" ui-sref=".changePassword">Change Password</button>\r\n\t</form>\r\n</article>'),$templateCache.put("account/templates/changePassword.tpl.html",'<h3 class="page-header">Change Password</h3>\r\n<form name="ChangePasswordForm" ng-submit="changePassword.changePassword()" novalidate autocomplete="off">\r\n    <div class="form-group">\r\n        <label>Current Password</label>\r\n        <input type="password" ng-model="changePassword.currentUser.CurrentPassword" class="form-control" required />\r\n    </div>\r\n    <div class="form-group">\r\n        <label>New Password</label>\r\n        <input type="password" ng-model="changePassword.currentUser.NewPassword" pattern="^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$" pattern-err-type="customPassword" class="form-control" confirmpassword="{{changePassword.currentUser.ConfirmPassword}}" required />\r\n    </div>\r\n    <div class="form-group">\r\n        <label>Confirm Password</label>\r\n        <input type="password" ng-model="changePassword.currentUser.ConfirmPassword" pattern="^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$" pattern-err-type="customPassword" class="form-control" confirmpassword="{{changePassword.currentUser.NewPassword}}" required />\r\n    </div>\r\n    <button type="submit" class="btn btn-primary" ng-disabled="ChangePasswordForm.$invalid || changePassword.currentUser.NewPassword != changePassword.currentUser.ConfirmPassword">Submit</button>\r\n    <button type="button" class="btn btn-default" ui-sref="^">Back to Account</button>\r\n</form>'),$templateCache.put("account/templates/confirmPassword.modal.tpl.html",'<div class="modal-body">\r\n    <form name="ConfirmPasswordForm" ng-submit="confirmPassword.submit()">\r\n        <div class="form-group">\r\n            <label>Please confirm your password</label>\r\n            <input type="password" ng-model="confirmPassword.password" class="form-control" autofocus required />\r\n        </div>\r\n        <button class="btn btn-primary" type="submit" ng-disabled="ConfirmPasswordForm.$invalid">Submit</button>\r\n        <button class="btn btn-default" type="button" ng-click="confirmPassword.cancel()">Cancel</button>\r\n    </form>\r\n</div>'),$templateCache.put("base/templates/base.bottom.tpl.html",'<nav class="navbar navbar-default">\r\n    <div class="container-fluid">\r\n        <!-- Brand and toggle get grouped for better mobile display -->\r\n        <div class="navbar-header">\r\n            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#BASE_BOTTOM_COLLAPSE" aria-expanded="false">\r\n                <span class="sr-only">Toggle navigation</span>\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n            </button>\r\n            <a class="navbar-brand" href="" ui-sref="home">{{application.name}}</a>\r\n        </div>\r\n\r\n        <!-- Collect the nav links, forms, and other content for toggling -->\r\n        <div class="collapse navbar-collapse" id="BASE_BOTTOM_COLLAPSE">\r\n            <ul class="nav navbar-nav navbar-right">\r\n                <li uib-dropdown ng-if="!base.currentUser.Anonymous">\r\n                    <a href="#" uib-dropdown-toggle role="button"><i class="fa fa-user"></i> Account <span class="caret"></span></a>\r\n                    <ul uib-dropdown-menu>\r\n                        <li class="dropdown-header">{{base.currentUser.FirstName + \' \' + base.currentUser.LastName}}</li>\r\n                        <li><a href="" ui-sref="account">Account</a></li>\r\n                        <li class="divider"></li>\r\n                        <li><a ng-click="application.logout()">Logout</a></li>\r\n                    </ul>\r\n                </li>\r\n                <li ng-if="base.currentUser.Anonymous && base.registrationAvailable">\r\n                    <a href="" ui-sref="registration" ui-sref-active="active">Register</a>\r\n                </li>\r\n                <li>\r\n                    <ordercloud-minicart order="catalog.currentOrder"></ordercloud-minicart>\r\n                </li>\r\n            </ul>\r\n        </div><!-- /.navbar-collapse -->\r\n    </div><!-- /.container-fluid -->\r\n</nav>\r\n'),$templateCache.put("base/templates/base.left.tpl.html",'<aside id="BASE_LEFT" snap-drawer class="hidden-print">\r\n    <nav>\r\n        <ul class="nav nav-pills nav-stacked">\r\n            <li role="presentation" ui-sref-active="active">\r\n                <a href="" ui-sref="home"><i class="fa fa-home"></i> Home</a>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n    <nav ng-if="base.catalogItems.length">\r\n        <h4 class="text-primary"><b>Organization</b></h4>\r\n        <ul class="nav nav-pills nav-stacked">\r\n            <li role="presentation" ng-repeat="item in base.catalogItems | occomponents | orderBy:\'Display\'" ui-sref-active="active">\r\n                <a href="" ui-sref="{{item.StateRef}}">{{item.Display}}</a>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n    <nav ng-if="base.organizationItems.length">\r\n        <h4 class="text-primary"><b>Buyer Company</b></h4>\r\n        <ordercloud-select-buyer></ordercloud-select-buyer>\r\n        <ul class="nav nav-pills nav-stacked">\r\n            <li role="presentation" ng-repeat="item in base.organizationItems | occomponents | orderBy:\'Display\'" ui-sref-active="active">\r\n                <a href="" ui-sref="{{item.StateRef}}">{{item.Display}}</a>\r\n                <div ng-if="item.Display == \'Catalog\' && application.$state.includes(\'catalog\')">\r\n                    <catalog-tree></catalog-tree>\r\n                    <ordercloud-catalog-facets></ordercloud-catalog-facets>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n</aside>\r\n\r\n\r\n\r\n'),$templateCache.put("base/templates/base.right.tpl.html",'<aside id="BASE_RIGHT" snap-drawer="right" class="hidden-print">\r\n    <nav>\r\n        <ul class="nav nav-pills nav-stacked">\r\n            <li role="presentation" ui-sref-active="active">\r\n                <a href="" ui-sref="home"><i class="fa fa-home"></i> Home</a>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n    <nav ng-if="base.catalogItems.length">\r\n        <h4 class="text-primary"><b>Organization</b></h4>\r\n        <ul class="nav nav-pills nav-stacked">\r\n            <li role="presentation" ng-repeat="item in base.catalogItems | occomponents | orderBy:\'Display\'" ui-sref-active="active">\r\n                <a href="" ui-sref="{{item.StateRef}}">{{item.Display}}</a>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n    <nav ng-if="base.organizationItems.length">\r\n        <h4 class="text-primary"><b>Buyer Company</b></h4>\r\n        <ordercloud-select-buyer align="right"></ordercloud-select-buyer>\r\n        <ul class="nav nav-pills nav-stacked">\r\n            <li role="presentation" ng-repeat="item in base.organizationItems | occomponents | orderBy:\'Display\'" ui-sref-active="active">\r\n                <a href="" ui-sref="{{item.StateRef}}">{{item.Display}}</a>\r\n                <div ng-if="item.Display == \'Catalog\' && application.$state.includes(\'catalog\')">\r\n                    <catalog-tree></catalog-tree>\r\n                    <ordercloud-catalog-facets></ordercloud-catalog-facets>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n</aside>\r\n\r\n\r\n\r\n'),$templateCache.put("base/templates/base.top.tpl.html",'<nav class="navbar navbar-default">\r\n    <div class="container-fluid">\r\n        <!-- Brand and toggle get grouped for better mobile display -->\r\n        <div class="navbar-header">\r\n            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#BASE_TOP_COLLAPSE" aria-expanded="false">\r\n                <span class="sr-only">Toggle navigation</span>\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n            </button>\r\n            <a class="navbar-brand" href="" ui-sref="home">{{application.name}}</a>\r\n        </div>\r\n\r\n        <!-- Collect the nav links, forms, and other content for toggling -->\r\n        <div class="collapse navbar-collapse" id="BASE_TOP_COLLAPSE">\r\n            <ul class="nav navbar-nav navbar-right">\r\n                <li uib-dropdown ng-if="!base.currentUser.Anonymous">\r\n                    <a href="#" uib-dropdown-toggle role="button"><i class="fa fa-user"></i> Account <span class="caret"></span></a>\r\n                    <ul uib-dropdown-menu>\r\n                        <li class="dropdown-header">{{base.currentUser.FirstName + \' \' + base.currentUser.LastName}}</li>\r\n                        <li><a href="" ui-sref="account">Account</a></li>\r\n                        <li class="divider"></li>\r\n                        <li><a ng-click="application.logout()">Logout</a></li>\r\n                    </ul>\r\n                </li>\r\n                <li ng-if="base.currentUser.Anonymous && base.registrationAvailable">\r\n                    <a href="" ui-sref="registration" ui-sref-active="active">Register/Login</a>\r\n                </li>\r\n                <li>\r\n                    <ordercloud-minicart order="catalog.currentOrder"></ordercloud-minicart>\r\n                </li>\r\n            </ul>\r\n        </div><!-- /.navbar-collapse -->\r\n    </div><!-- /.container-fluid -->\r\n</nav>\r\n'),$templateCache.put("base/templates/base.tpl.html",'<div ui-view="left"></div>\r\n<div ui-view="right"></div>\r\n<snap-content id="BASE" snap-id="\'MAIN\'" snap-options="base.snapOptions" ng-class="{\'desktop-left\':base.left, \'desktop-right\':base.right}" cg-busy="application.contentLoading">\r\n    <header id="BASE_TOP" ui-view="top"></header>\r\n    <main ui-view></main>\r\n    <footer id="BASE_BOTTOM" ui-view="bottom"></footer>\r\n</snap-content>\r\n\r\n'),$templateCache.put("home/templates/home.tpl.html",'<article id="COMPONENT_Home">\r\n    <div class="container">\r\n        <header class="jumbotron">\r\n            <h1 ng-bind="application.name"></h1>\r\n            <p>A quick preview of common UI elements within an OrderCloud Application. Feel free to delete this content or use it as a reference when you theme your Application!</p>\r\n            <p><a class="btn btn-primary btn-large">Learn more »</a></p>\r\n        </header>\r\n        <div class="row">\r\n            <div class="col-lg-6">\r\n                <div class="panel panel-default" id="headings">\r\n                    <div class="panel-heading">Headings</div>\r\n                    <div class="panel-body">\r\n                        <h1 class="page-header">Page Header <small>With Small Text</small></h1>\r\n                        <h1>This is an h1 heading</h1>\r\n                        <h2>This is an h2 heading</h2>\r\n                        <h3>This is an h3 heading</h3>\r\n                        <h4>This is an h4 heading</h4>\r\n                        <h5>This is an h5 heading</h5>\r\n                        <h6>This is an h6 heading</h6>\r\n                    </div>\r\n                </div>\r\n                <div class="panel panel-default" id="tables">\r\n                    <div class="panel-heading">Tables\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <table class="table table-hover">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>First Name</th>\r\n                                <th>Tables</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            <tr>\r\n                                <td>1</td>\r\n                                <td>Michael</td>\r\n                                <td>Are formatted like this</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>2</td>\r\n                                <td>Lucille</td>\r\n                                <td>Do you like them?</td>\r\n                            </tr>\r\n                            <tr class="success">\r\n                                <td>3</td>\r\n                                <td>Success</td>\r\n                                <td></td>\r\n                            </tr>\r\n                            <tr class="danger">\r\n                                <td>4</td>\r\n                                <td>Danger</td>\r\n                                <td></td>\r\n                            </tr>\r\n                            <tr class="warning">\r\n                                <td>5</td>\r\n                                <td>Warning</td>\r\n                                <td></td>\r\n                            </tr>\r\n                            <tr class="active">\r\n                                <td>6</td>\r\n                                <td>Active</td>\r\n                                <td></td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </table>\r\n                        <table class="table table-striped table-bordered table-condensed">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>First Name</th>\r\n                                <th>Tables</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            <tr>\r\n                                <td>1</td>\r\n                                <td>Michael</td>\r\n                                <td>This one is bordered and condensed</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>2</td>\r\n                                <td>Lucille</td>\r\n                                <td>Do you still like it?</td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-6">\r\n                <div class="panel panel-default" id="content-formatting">\r\n                    <div class="panel-heading">Content Formatting\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <p class="lead">This is a lead paragraph.</p>\r\n                        <p>This is an <b>ordinary paragraph</b> that is <i>long enough</i> to wrap to <u>multiple lines</u> so that you can see how the line spacing looks.</p>\r\n                        <p class="text-muted">Muted color paragraph.</p>\r\n                        <p class="text-warning">Warning color paragraph.</p>\r\n                        <p class="text-danger">Danger color paragraph.</p>\r\n                        <p class="text-info">Info color paragraph.</p>\r\n                        <p class="text-success">Success color paragraph.</p>\r\n                        <p><small>This is text in a <code>small</code> wrapper. <abbr title="No Big Deal">NBD</abbr>, right?</small></p>\r\n                        <hr>\r\n                        <address>                <strong>Twitter, Inc.</strong><br>                795 Folsom Ave, Suite 600<br>                San Francisco, CA 94107<br>                <abbr title="Phone">P:</abbr> (123) 456-7890              </address><address class="col-6">                <strong>Full Name</strong><br>                <a href="mailto:#">first.last@example.com</a>              </address>\r\n                        <hr>\r\n                        <blockquote>Here\'s what a blockquote looks like in Bootstrap. <small>Use <code>small</code> to identify the source.</small>\r\n                        </blockquote>\r\n                        <hr>\r\n                        <div class="row">\r\n                            <div class="col-xs-6">\r\n                                <ul>\r\n                                    <li>Normal Unordered List</li>\r\n                                    <li>Can Also Work\r\n                                        <ul>\r\n                                            <li>With Nested Children</li>\r\n                                        </ul>\r\n                                    </li>\r\n                                    <li>Adds Bullets to Page</li>\r\n                                </ul>\r\n                            </div>\r\n                            <div class="col-xs-6">\r\n                                <ol>\r\n                                    <li>Normal Ordered List</li>\r\n                                    <li>Can Also Work\r\n                                        <ol>\r\n                                            <li>With Nested Children</li>\r\n                                        </ol>\r\n                                    </li>\r\n                                    <li>Adds Bullets to Page</li>\r\n                                </ol>\r\n                            </div>\r\n                        </div>\r\n                        <hr>\r\n                        <pre>function preFormatting() {  // looks like this;  var something = somethingElse;  return true;}</pre>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default" id="forms">\r\n            <div class="panel-heading">Forms\r\n            </div>\r\n            <div class="panel-body">\r\n                <form>\r\n                    <fieldset>\r\n                        <legend>Legend</legend>\r\n                        <div class="form-group">\r\n                            <label for="exampleInputEmail">Email address</label>\r\n                            <input type="text" class="form-control" id="exampleInputEmail" placeholder="Enter email">\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label for="exampleInputPassword">Password</label>\r\n                            <input type="password" class="form-control" id="exampleInputPassword" placeholder="Password">\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label for="exampleInputFile">File input</label>\r\n                            <input type="file" id="exampleInputFile">\r\n                            <p class="help-block">Example block-level help text here.</p>\r\n                        </div>\r\n                        <div class="checkbox">\r\n                            <label>\r\n                                <input type="checkbox">Check me out</label>\r\n                        </div>\r\n                        <button type="submit" class="btn btn-default">Submit</button>\r\n                    </fieldset>\r\n                </form>\r\n                <hr>\r\n                <form class="form-inline">\r\n                    <input type="text" class="form-control" placeholder="Email" style="width: 200px;">\r\n                    <input type="password" class="form-control" placeholder="Password" style="width: 200px;">\r\n                    <div class="checkbox">\r\n                        <label>\r\n                            <input type="checkbox">Remember me</label>\r\n                    </div>\r\n                    <button type="submit" class="btn btn-default">Sign in</button>\r\n                </form>\r\n                <hr>\r\n                <form class="form-horizontal">\r\n                    <div class="form-group">\r\n                        <label for="inputEmail" class="col-lg-2 control-label">Email</label>\r\n                        <div class="col-lg-10">\r\n                            <input type="text" class="form-control" id="inputEmail" placeholder="Email">\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group has-warning">\r\n                        <label for="inputEmail" class="col-lg-2 control-label">Email</label>\r\n                        <div class="col-lg-10">\r\n                            <input type="text" class="form-control" id="inputEmail" placeholder="Email">\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group has-error">\r\n                        <label for="inputEmail" class="col-lg-2 control-label">Email</label>\r\n                        <div class="col-lg-10">\r\n                            <input type="text" class="form-control" id="inputEmail" placeholder="Email">\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group has-success">\r\n                        <label for="inputEmail" class="col-lg-2 control-label">Email</label>\r\n                        <div class="col-lg-10">\r\n                            <input type="text" class="form-control" id="inputEmail" placeholder="Email">\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label for="inputPassword" class="col-lg-2 control-label">Password</label>\r\n                        <div class="col-lg-10">\r\n                            <input type="password" class="form-control" id="inputPassword" placeholder="Password">\r\n                            <div class="checkbox">\r\n                                <label>\r\n                                    <input type="checkbox">Remember me</label>\r\n                            </div>\r\n                            <button type="submit" class="btn btn-default">Sign in</button>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-lg-8">\r\n                <div class="panel panel-default" id="buttons">\r\n                    <div class="panel-heading">Buttons\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <p>\r\n                            <button type="button" class="btn btn-lg btn-default">Default</button>\r\n                            <button type="button" class="btn btn-lg btn-primary">Primary</button>\r\n                            <button type="button" class="btn btn-lg btn-success">Success</button>\r\n                            <button type="button" class="btn btn-lg btn-info">Info</button>\r\n                            <button type="button" class="btn btn-lg btn-warning">Warning</button>\r\n                            <button type="button" class="btn btn-lg btn-danger">Danger</button>\r\n                            <button type="button" class="btn btn-lg btn-link">Link</button>\r\n                        </p>\r\n                        <p>\r\n                            <button type="button" class="btn btn-default">Default</button>\r\n                            <button type="button" class="btn btn-primary">Primary</button>\r\n                            <button type="button" class="btn btn-success">Success</button>\r\n                            <button type="button" class="btn btn-info">Info</button>\r\n                            <button type="button" class="btn btn-warning">Warning</button>\r\n                            <button type="button" class="btn btn-danger">Danger</button>\r\n                            <button type="button" class="btn btn-link">Link</button>\r\n                        </p>\r\n                        <p>\r\n                            <button type="button" class="btn btn-sm btn-default">Default</button>\r\n                            <button type="button" class="btn btn-sm btn-primary">Primary</button>\r\n                            <button type="button" class="btn btn-sm btn-success">Success</button>\r\n                            <button type="button" class="btn btn-sm btn-info">Info</button>\r\n                            <button type="button" class="btn btn-sm btn-warning">Warning</button>\r\n                            <button type="button" class="btn btn-sm btn-danger">Danger</button>\r\n                            <button type="button" class="btn btn-sm btn-link">Link</button>\r\n                        </p>\r\n                        <p>\r\n                            <button type="button" class="btn btn-xs btn-default">Default</button>\r\n                            <button type="button" class="btn btn-xs btn-primary">Primary</button>\r\n                            <button type="button" class="btn btn-xs btn-success">Success</button>\r\n                            <button type="button" class="btn btn-xs btn-info">Info</button>\r\n                            <button type="button" class="btn btn-xs btn-warning">Warning</button>\r\n                            <button type="button" class="btn btn-xs btn-danger">Danger</button>\r\n                            <button type="button" class="btn btn-xs btn-link">Link</button>\r\n                        </p>\r\n                        <p>\r\n                            <button type="button" class="btn btn-default"><span class="glyphicon glyphicon-star"></span> Glyphicons!</button>\r\n                            <button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-edit"></span></button>\r\n                            <button type="button" class="btn btn-success"><span class="glyphicon glyphicon-plus"></span></button>\r\n                            <button type="button" class="btn btn-info"><span class="glyphicon glyphicon-info-sign"></span></button>\r\n                            <button type="button" class="btn btn-warning"><span class="glyphicon glyphicon-flash"></span></button>\r\n                            <button type="button" class="btn btn-danger"><span class="glyphicon glyphicon-ban-circle"></span></button>\r\n                            <button type="button" class="btn btn-link"><span class="glyphicon glyphicon-arrow-right"></span></button>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-4">\r\n                <div class="panel panel-default" id="images">\r\n                    <div class="panel-heading">Images\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <p><img src="http://placehold.it/100x100" class="img-rounded">\r\n                            <img src="http://placehold.it/100x100" class="img-circle">\r\n                            <img src="http://placehold.it/100x100" class="img-thumbnail"></p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-lg-3">\r\n                <div class="panel panel-default" id="dropdowns">\r\n                    <div class="panel-heading">Dropdowns\r\n                    </div>\r\n                    <div class="panel-body clearfix">\r\n                        <div class="dropdown">\r\n                            <!-- Link or button to toggle dropdown -->\r\n                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display: block; position: static;">\r\n                                <li class="dropdown-header">Dropdown header</li>\r\n                                <li class="disabled">\r\n                                    <a tabindex="-1" href="#">Action</a>\r\n                                </li>\r\n                                <li>\r\n                                    <a tabindex="-1" href="#">Another action</a>\r\n                                </li>\r\n                                <li>\r\n                                    <a tabindex="-1" href="#">Something else here</a>\r\n                                </li>\r\n                                <li class="divider"></li>\r\n                                <li>\r\n                                    <a tabindex="-1" href="#">Separated link</a>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-9">\r\n                <div class="panel panel-default" id="input-groups">\r\n                    <div class="panel-heading">Input Groups\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <div class="input-group">\r\n                            <span class="input-group-btn">                <button class="btn btn-default" type="button">Go!</button>              </span><input type="text" class="form-control" placeholder="Username">\r\n                        </div><br>\r\n                        <div class="input-group">\r\n                            <input type="text" class="form-control input-large">\r\n                            <span class="input-group-addon input-large">.00</span>\r\n                        </div><br>\r\n                        <div class="input-group">\r\n                            <span class="input-group-addon">$</span><input type="text" class="form-control">\r\n                            <span class="input-group-addon">.00</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-lg-6">\r\n                <div class="panel panel-default" id="navs">\r\n                    <div class="panel-heading">Navs\r\n                    </div>\r\n                    <div class="panel-body clearfix">\r\n                        <ul class="nav nav-tabs">\r\n                            <li class="active">\r\n                                <a href="#">Home</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">About</a>\r\n                            </li>\r\n                        </ul>\r\n                        <p></p>\r\n                        <p></p>\r\n                        <ul class="nav nav-pills">\r\n                            <li class="active">\r\n                                <a href="#">Home</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">About</a>\r\n                            </li>\r\n                        </ul>\r\n                        <p></p>\r\n                        <p></p>\r\n                        <ul class="nav nav-stacked nav-pills">\r\n                            <li class="active">\r\n                                <a href="#">Home</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">About</a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-6" id="navbar">\r\n                <div class="panel panel-default">\r\n                    <div class="panel-heading">Navbar\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <p></p>\r\n                        <div class="navbar">\r\n                            <div class="navbar-header">\r\n                                <a href="#" class="navbar-brand">Your Company</a>\r\n                            </div>\r\n                            <div class="navbar-collapse">\r\n                                <ul class="nav navbar-nav navbar-right">\r\n                                    <li class="active">\r\n                                        <a href="#">Home</a>\r\n                                    </li>\r\n                                    <li>\r\n                                        <a href="#">About</a>\r\n                                    </li>\r\n                                    <li>\r\n                                        <a href="#">Contact</a>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                        <div class="navbar navbar-inverse">\r\n                            <div class="navbar-header">\r\n                                <a href="#" class="navbar-brand">Your Company</a>\r\n                            </div>\r\n                            <div class="navbar-collapse">\r\n                                <ul class="nav navbar-nav navbar-right">\r\n                                    <li class="active">\r\n                                        <a href="#">Home</a>\r\n                                    </li>\r\n                                    <li>\r\n                                        <a href="#">About</a>\r\n                                    </li>\r\n                                    <li>\r\n                                        <a href="#">Contact</a>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                        <div class="navbar">\r\n                            <div class="collapse navbar-collapse">\r\n                                <a class="btn btn-primary navbar-btn">Navbar Button</a>\r\n                                <p class="navbar-text navbar-right">Navbar Text</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-lg-6">\r\n                <div class="panel panel-default" id="pagination">\r\n                    <div class="panel-heading">Pagination\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <ul class="pagination" style="margin-right: 10px;">\r\n                            <li>\r\n                                <a href="#">Prev</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">1</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">2</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">3</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">4</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">Next</a>\r\n                            </li>\r\n                        </ul>\r\n                        <ul class="pagination pagination-lg">\r\n                            <li>\r\n                                <a href="#">Prev</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">1</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">2</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">3</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">4</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">Next</a>\r\n                            </li>\r\n                        </ul>\r\n                        <ul class="pager">\r\n                            <li>\r\n                                <a href="#">Prev</a>\r\n                            </li>\r\n                            <li>\r\n                                <a href="#">Next</a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <div class="panel panel-default" id="labels">\r\n                    <div class="panel-heading">Labels and Badges\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <h3><span class="label label-default">Default</span>&nbsp;<span class="label label-success">Success</span>&nbsp;<span class="label label-warning">Warning</span>&nbsp;<span class="label label-danger">Danger</span>&nbsp;<span class="label label-info">Info</span></h3>\r\n                        <p class="lead"><a href="#">Inbox <span class="badge">42</span></a></p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-6">\r\n                <div class="panel panel-default" id="alerts">\r\n                    <div class="panel-heading">Alerts\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <div>\r\n                            <div class="alert alert-danger">\r\n                                <button type="button" class="close" data-dismiss="alert">×</button>\r\n                                <strong>Oh snap!</strong> <a href="#" class="alert-link">Change a few things up</a> and try submitting again.\r\n                            </div>\r\n                            <div class="alert alert-success">\r\n                                <button type="button" class="close" data-dismiss="alert">×</button>\r\n                                <strong>Well done!</strong> You successfully read <a href="#" class="alert-link">this important alert message</a>.\r\n                            </div>\r\n                            <div class="alert alert-warning">\r\n                                <button type="button" class="close" data-dismiss="alert">×</button>\r\n                                <strong>Heads up!</strong> This <a href="#" class="alert-link">alert needs your attention</a>, but it\'s not super important.\r\n                            </div>\r\n                            <div class="alert alert-info">\r\n                                <button type="button" class="close" data-dismiss="alert">×</button>\r\n                                <strong>Heads up!</strong> This <a href="#" class="alert-link">alert needs your attention</a>, but it\'s not super important.\r\n                            </div>\r\n                            <div class="alert">\r\n                                <button type="button" class="close" data-dismiss="alert">×</button>\r\n                                <h4>Warning!</h4>\r\n                                <p>This is a block style alert.</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-lg-6">\r\n                <div class="panel panel-default" id="progress">\r\n                    <div class="panel-heading">Progress Bars\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <div class="progress">\r\n                            <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;"><span class="sr-only">60% Complete</span></div>\r\n                        </div>\r\n                        <div class="progress">\r\n                            <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%"><span class="sr-only">40% Complete (success)</span></div>\r\n                        </div>\r\n                        <div class="progress">\r\n                            <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%"><span class="sr-only">20% Complete</span></div>\r\n                        </div>\r\n                        <div class="progress">\r\n                            <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%"><span class="sr-only">60% Complete (warning)</span></div>\r\n                        </div>\r\n                        <div class="progress">\r\n                            <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%"><span class="sr-only">80% Complete (danger)</span></div>\r\n                        </div>\r\n                        <div class="progress">\r\n                            <div class="progress-bar progress-bar-success" style="width: 35%"><span class="sr-only">35% Complete (success)</span></div>\r\n                            <div class="progress-bar progress-bar-warning" style="width: 20%"><span class="sr-only">20% Complete (warning)</span></div>\r\n                            <div class="progress-bar progress-bar-danger" style="width: 10%"><span class="sr-only">10% Complete (danger)</span></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-6">\r\n                <div class="panel panel-default" id="media-object">\r\n                    <div class="panel-heading">Media Object\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <p></p>\r\n                        <div class="media">\r\n                            <a class="pull-left" href="#">    <img class="media-object" src="https://app.divshot.com/img/placeholder-64x64.gif">  </a>\r\n                            <div class="media-body">\r\n                                <h4 class="media-heading">Media heading</h4>\r\n                                <p>This is the content for your media.</p>\r\n                                <div class="media">\r\n                                    <a class="pull-left" href="#">    <img class="media-object" src="https://app.divshot.com/img/placeholder-64x64.gif">  </a>\r\n                                    <div class="media-body">\r\n                                        <h4 class="media-heading">Media heading</h4>\r\n                                        <p>This is the content for your media.</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-lg-4">\r\n                <ul class="list-group">\r\n                    <li class="list-group-item">Cras justo odio</li>\r\n                    <li class="list-group-item">Dapibus ac facilisis in</li>\r\n                    <li class="list-group-item">Morbi leo risus</li>\r\n                    <li class="list-group-item">Porta ac consectetur ac</li>\r\n                    <li class="list-group-item">Vestibulum at eros</li>\r\n                </ul>\r\n            </div>\r\n            <div class="col-lg-4">\r\n                <div class="list-group">\r\n                    <a href="#" class="list-group-item active">          Cras justo odio        </a><a href="#" class="list-group-item">Dapibus ac facilisis in        </a><a href="#" class="list-group-item">Morbi leo risus        </a><a href="#" class="list-group-item">Porta ac consectetur ac        </a><a href="#" class="list-group-item">Vestibulum at eros        </a>\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-4">\r\n                <div class="list-group">\r\n                    <a href="#" class="list-group-item active">          <h4 class="list-group-item-heading">List group item heading</h4>          <p class="list-group-item-text">Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.</p>        </a><a href="#" class="list-group-item">          <h4 class="list-group-item-heading">List group item heading</h4>          <p class="list-group-item-text">Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.</p>        </a><a href="#" class="list-group-item">          <h4 class="list-group-item-heading">List group item heading</h4>          <p class="list-group-item-text">Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.</p>        </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-lg-3">\r\n                <div class="panel panel-primary" id="panels">\r\n                    <div class="panel-heading">This is a header\r\n                    </div>\r\n                    <p class="panel-body">This is a panel</p>\r\n                    <div class="panel-footer">This is a footer\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-3">\r\n                <div class="panel panel-success">\r\n                    <div class="panel-heading">This is a header\r\n                    </div>\r\n                    <div class="panel-body">This is a panel</div>\r\n                    <div class="panel-footer">This is a footer\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-3">\r\n                <div class="panel panel-danger">\r\n                    <div class="panel-heading">This is a header\r\n                    </div>\r\n                    <div class="panel-body">This is a panel</div>\r\n                    <div class="panel-footer">This is a footer\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-3">\r\n                <div class="panel panel-warning">\r\n                    <div class="panel-heading">This is a header\r\n                    </div>\r\n                    <div class="panel-body">This is a panel</div>\r\n                    <div class="panel-footer">This is a footer\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-lg-3">\r\n                <div class="panel panel-info">\r\n                    <div class="panel-heading">This is a header\r\n                    </div>\r\n                    <p class="panel-body">This is a panel</p>\r\n                    <div class="panel-footer">This is a footer\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-3">\r\n                <div class="panel panel-default">\r\n                    <div class="panel-heading">This is a header\r\n                    </div>\r\n                    <div class="panel-body">This is a panel</div>\r\n                    <ul class="list-group list-group-flush">\r\n                        <li class="list-group-item">First Item</li>\r\n                        <li class="list-group-item">Second Item</li>\r\n                        <li class="list-group-item">Third Item</li>\r\n                    </ul>\r\n                    <div class="panel-footer">This is a footer\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-3">\r\n                <div class="well" id="wells">Default Well\r\n                </div>\r\n                <div class="well well-small">Small Well\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-3">\r\n                <div class="well well-large">Large Padding Well\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</article>'),
$templateCache.put("login/templates/login.tpl.html",'<main id="COMPONENT_Login" ng-switch="login.form">\r\n    <div class="panel panel-default" ng-switch-when="login">\r\n        <form class="panel-body" name="LoginForm" ng-submit="login.submit()" >\r\n            <h1 class="text-center">Login</h1>\r\n            <div class="form-group">\r\n                <label for="Username">Username</label>\r\n                <input type="text" class="form-control" id="Username" ng-model="login.credentials.Username" ng-required="true" />\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="Password">Password</label>\r\n                <input type="password" class="form-control" id="Password" ng-model="login.credentials.Password" ng-required="true" />\r\n            </div>\r\n            <div class="form-group">\r\n                <label>\r\n                    <input type="checkbox" ng-model="login.rememberStatus">\r\n                    Remember Me\r\n                </label>\r\n            </div>\r\n            <button id="submit_login" type="submit" class="btn btn-primary" ng-disabled="LoginForm.$invalid">Submit</button>\r\n            <a id="forgot_password" class="btn btn-link" ng-click="login.setForm(\'forgot\')">Forgot Password?</a> <!--TODO: should this be functional in the Seed Project?-->\r\n        </form>\r\n    </div>\r\n    <div class="panel panel-default" ng-switch-when="forgot">\r\n        <form class="panel-body" name="ForgotPasswordForm" ng-submit="login.forgotPassword()">\r\n            <h1 class="text-center">Forgot Password</h1>\r\n            <div class="form-group">\r\n                <label for="Email">Email</label>\r\n                <input type="text" class="form-control" id="Email" ng-model="login.credentials.Email" ng-required="true" />\r\n            </div>\r\n            <button type="submit" id="email_submit" class="btn btn-primary" ng-disabled="ForgotPasswordForm.$invalid">Submit</button>\r\n            <a id="back_to_login" class="btn btn-link" ng-click="login.setForm(\'login\')">Back to Login</a>\r\n        </form>\r\n    </div>\r\n    <div class="panel panel-default" ng-switch-when="reset">\r\n        <form class="panel-body" name="ResetPasswordForm" ng-submit="login.resetPassword()" >\r\n            <h1 class="text-center">Reset Password</h1>\r\n            <div class="form-group">\r\n                <label for="ResetUsername">Username</label>\r\n                <input type="text" class="form-control" id="ResetUsername" ng-model="login.credentials.ResetUsername" ng-required="true" />\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="NewPassword">New Password</label>\r\n                <input type="password" class="form-control" id="NewPassword" ng-model="login.credentials.NewPassword" ng-required="true" />\r\n            </div>\r\n            <div class="form-group">\r\n                <label for="ConfirmPassword">Confirm Password</label>\r\n                <input type="password" class="form-control" id="ConfirmPassword" ng-model="login.credentials.ConfirmPassword" ng-required="true" />\r\n            </div>\r\n            <button type="submit" id="reset_submit" class="btn btn-primary" ng-disabled="ResetPasswordForm.$invalid || login.credentials.NewPassword != login.credentials.ConfirmPassword">Submit</button>\r\n        </form>\r\n    </div>\r\n    <div class="panel panel-default" ng-switch-when="verificationCodeSuccess">\r\n        <form class="panel-body" name="VerificationCodeSuccessForm">\r\n            <h1 class="text-center">Forgot Password</h1>\r\n            <div class="alert alert-info" id="forgot_message">Forgot Password email has been sent. Please check your email in order to reset your password.</div>\r\n        </form>\r\n    </div>\r\n    <div class="panel panel-default" ng-switch-when="resetSuccess">\r\n        <form class="panel-body" name="ResetSuccessForm">\r\n            <h1 class="text-center">Reset Password</h1>\r\n            <div class="alert alert-info">Your password has been reset.</div>\r\n            <a class="btn btn-link" id="back_to_login2" ng-click="login.setForm(\'login\')">Back to Login</a>\r\n        </form>\r\n    </div>\r\n</main>\r\n'),$templateCache.put("common/address/templates/address.form.tpl.html",'<div class="form-group" ng-form="address_form">\r\n    <div class="row">\r\n        <div class="col-md-6">\r\n            <label for="address_name">Name</label>\r\n            <input required="true" id="address_name" type="text" ng-model="address.AddressName" class="form-control">\r\n        </div>\r\n        <div class="col-md-6">\r\n            <label for="address_company">Company</label>\r\n            <input id="address_company" type="text" ng-model="address.CompanyName" class="form-control">\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-md-6">\r\n            <label for="address_firstname">First Name</label>\r\n            <input ng-required="isbilling" id="address_firstname" type="text" ng-model="address.FirstName" class="form-control">\r\n        </div>\r\n        <div class="col-md-6">\r\n            <label for="address_lastname">Last Name</label>\r\n            <input ng-required="isbilling" id="address_lastname" type="text" ng-model="address.LastName" class="form-control">\r\n        </div>\r\n    </div>\r\n    <div>\r\n        <label for="address_street1">Line 1</label>\r\n        <input required="true" id="address_street1" type="text" ng-model="address.Street1" class="form-control">\r\n    </div>\r\n    <div>\r\n        <label for="address_street2">Line 2</label>\r\n        <input id="address_street2" type="text" ng-model="address.Street2" class="form-control">\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-md-4">\r\n            <label for="address_city">City</label>\r\n            <input required="true" id="address_city" type="text" ng-model="address.City" class="form-control">\r\n        </div>\r\n        <div class="col-md-4">\r\n            <label for="address_state">State</label>\r\n            <select class="form-control" id="address_state" ng-model="address.State" ng-options="state.value as state.label for state in states" required/>\r\n        </div>\r\n        <div class="col-md-4">\r\n            <label for="address_zip">Zip</label>\r\n            <input required="true" id="address_zip" type="number" ng-model="address.Zip" class="form-control" maxlength="5" minlength="5">\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-md-6">\r\n            <label for="address_country">Country</label>\r\n            <select class="form-control" id="address_country" ng-model="address.Country" ng-options="country.value as country.label for country in countries" required/>\r\n        </div>\r\n        <div class="col-md-6">\r\n            <label for="address_phone">Phone</label>\r\n            <input id="address_phone" type="text" ng-model="address.Phone" class="form-control">\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("common/buyer-select/templates/buyer-select.tpl.html",'<div>\r\n    <div uib-dropdown dropdown-append-to-body="true" ng-if="selectBuyer.BuyerList.Items.length > 1">\r\n        <button class="btn btn-default btn-block btn-select-buyer" uib-dropdown-toggle>\r\n            <span class="text-primary"><small>Selected Buyer:</small></span>\r\n            <span class="buyer-name"><b>{{selectBuyer.selectedBuyer.Name}}</b></span>\r\n        </button>\r\n        <div class="buyer-list-menu" ng-class="{\'dropdown-menu-right\':selectBuyer.align == \'right\'}" uib-dropdown-menu role="menu">\r\n            <section class="table-fixed-header">\r\n                <div class="table-header-bg"></div>\r\n                <div class="table-container" ordercloud-infinite-scroll controlleras="selectBuyer">\r\n                    <table class="table table-hover">\r\n                        <colgroup>\r\n                        </colgroup>\r\n                        <thead>\r\n                        <tr>\r\n                            <th>\r\n                                <div>ID</div>\r\n                            </th>\r\n                            <th>\r\n                                <div>Name</div>\r\n                            </th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <tr role="menuitem" ng-repeat="buyer in selectBuyer.BuyerList.Items" ng-click="selectBuyer.ChangeBuyer(buyer)">\r\n                            <td>{{buyer.ID}}</td>\r\n                            <td>{{buyer.Name}}</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </section>\r\n            <!--<li class="list-group-item">\r\n                <p>ID</p>\r\n                <p>Name</p>\r\n            </li>\r\n            <div ordercloud-infinite-scroll pagingfunction="selectBuyer.PagingFunction()">\r\n                <li class="list-group-item" role="menuitem" ng-repeat="buyer in selectBuyer.BuyerList.Items" ng-click="selectBuyer.ChangeBuyer(buyer)">\r\n                    <p>{{buyer.ID}}</p>\r\n                    <p>{{buyer.Name}}</p>\r\n                </li>\r\n            </div>-->\r\n        </div>\r\n    </div>\r\n    <button class="btn btn-default btn-block btn-select-buyer" ng-if="selectBuyer.BuyerList.Items.length == 1">\r\n        <span class="text-muted"><small>Active Buyer:</small></span>\r\n        <span class="buyer-name"><b>{{selectBuyer.selectedBuyer.Name}}</b></span>\r\n    </button>\r\n</div>\r\n'),$templateCache.put("common/files/templates/files.tpl.html",'<div class="form-group" ng-class="{\'has-error\': invalidExtension}">\r\n    <figure ng-if="model.xp[keyname].URL && model.xp[keyname].Type.indexOf(\'image\') > -1">\r\n        <img class="img-responsive" ng-src="{{model.xp[keyname].URL}}" alt="Product Image">\r\n    </figure>\r\n    <label>{{label}}</label>\r\n    <p>\r\n        <button type="button" class="btn btn-default" ng-click="upload()">{{model.xp[keyname].URL ? \'Replace\' : \'Upload\'}}</button>\r\n        <button type="button" class="btn btn-default" ng-click="remove()" ng-if="model.xp[keyname].URL"><i class="fa fa-trash text-danger"></i></button>\r\n    </p>\r\n    <input class="ng-hide" name="upload" type="file" id="orderCloudUpload" />\r\n    <span class="help-block error-msg" ng-show="invalidExtension">Invalid File Type</span>\r\n</div>\r\n'),$templateCache.put("common/lineitems/templates/shipping.tpl.html",'<div class="modal-content">\r\n    <div class="modal-body">\r\n        <form ng-submit="liModal.submit();" name="li_modal_form">\r\n            <ordercloud-address-form address="liModal.address"></ordercloud-address-form>\r\n            <div class="modal_buttons">\r\n                <button ng-disabled="li_modal_form.$invalid" type="submit" class="btn btn-success pull-left">Submit</button>\r\n                <button ng-click="liModal.cancel();" type="button" class="btn btn-danger pull-right">Cancel</button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>'),$templateCache.put("common/loading-indicators/templates/view.loading.tpl.html",'<div class="indicator">\r\n\t<div class="animation">\r\n\t\t<div class="dot"></div>\r\n\t\t<div class="dot"></div>\r\n\t\t<div class="dot"></div>\r\n\t</div>\r\n\t<div class="message" ng-bind="$message"></div>\r\n</div>\r\n\r\n'),$templateCache.put("common/ordercloud-logo/templates/ordercloud-logo.tpl.html",'<figure style="width:{{OrderCloudLogo.width}}; height:{{OrderCloudLogo.maxHeight}}; margin:0 auto;">\r\n\t<svg ng-if="OrderCloudLogo.Icon" style="display:block; max-height:{{OrderCloudLogo.maxHeight}}; padding-top:15px; padding-bottom:15px; margin:0 auto;" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t viewBox="0 0 77.7 64.5" enable-background="new 0 0 77.7 64.5" xml:space="preserve">\r\n\t<g fill="{{OrderCloudLogo.fillColor}}">\r\n\t\t<g>\r\n\t\t\t<path d="M72.3,46.4l-8.2-3.7c-0.4-0.2-0.8-0.1-1,0.4c-1.4,3.3-3.8,5.8-8.1,5.8c-1.8,0-3.3-0.4-4.5-1.2c0,0.1-0.1,0.2-0.1,0.3\r\n\t\t\t\tc-1.1,3.4-2.8,6.3-5,8.6c2.7,1.3,5.9,2,9.5,2c8.6,0,14.9-4.2,17.8-11.3C72.9,46.9,72.7,46.5,72.3,46.4z"/>\r\n\t\t\t<path d="M72.7,17.3C69.8,10.2,63.5,6,54.9,6c-5.8,0-10.6,1.8-14,5.3c0,0,0,0,0,0c-1.8,1.9-3.2,4.3-4.1,7.2\r\n\t\t\t\tc-1,3.1-1.4,5.5-1.4,12.1l0,0c0,0.5,0,1.1,0,1.7c0,6.7-0.2,9.1-0.8,10.9c-1.1,3.5-3.8,5.6-8,5.6s-6.9-2.1-8-5.6\r\n\t\t\t\tc-0.6-1.8-0.8-4.3-0.8-10.9s0.2-9.1,0.8-10.9c1.1-3.5,3.8-5.6,8-5.6c2,0,3.6,0.5,4.9,1.3c0-0.1,0.1-0.2,0.1-0.3\r\n\t\t\t\tc1.1-3.4,2.8-6.3,4.9-8.7C33.5,6.7,30.1,6,26.5,6c-8.9,0-16,4.1-18.6,12.4c-1.1,3.5-1.4,6.4-1.4,13.9s0.3,10.4,1.4,13.9\r\n\t\t\t\tc2.6,8.2,9.7,12.4,18.6,12.4c5.9,0,10.9-1.8,14.4-5.3c0,0,0,0,0,0c1.8-1.9,3.3-4.2,4.2-7c1-3.3,1.4-6,1.4-12.5l0,0\r\n\t\t\t\tc0-0.5,0-1,0-1.5c0-7.3,0.2-9.1,0.8-10.9c1.1-3.5,3.7-5.6,7.6-5.6c4.3,0,6.7,2.5,8.1,5.8c0.2,0.4,0.6,0.6,1,0.4l8.2-3.7\r\n\t\t\t\tC72.7,18.1,72.9,17.7,72.7,17.3z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t</svg>\r\n\r\n\t<svg  ng-if="!OrderCloudLogo.Icon" style="display:block; max-height:{{OrderCloudLogo.maxHeight}}; padding-top:15px; padding-bottom:15px; margin:0 auto;" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t viewBox="0 0 543.5 61.5" enable-background="new 0 0 543.5 61.5" xml:space="preserve">\r\n<g fill="{{OrderCloudLogo.fillColor}}">\r\n\t<path d="M112.4,43.3h6c1.6,0,3,0.5,3.8,1.3c0.6,0.6,0.9,1.4,0.9,2.3v0c0,2-1.3,3-2.5,3.5c1.8,0.5,3.3,1.5,3.3,3.5v0\r\n\t\tc0,2.4-2.1,4-5.2,4h-6.3V43.3z M118.3,50.1c2.2,0,3.8-1.1,3.8-3v0c0-1.6-1.3-2.7-3.7-2.7h-4.9v5.7H118.3z M118.8,56.9\r\n\t\tc2.5,0,4.1-1.1,4.1-3v0c0-1.8-1.6-2.8-4.4-2.8h-5v5.9H118.8z"/>\r\n\t<path d="M131.6,52.2l-6.3-8.8h1.4l5.5,7.9l5.5-7.9h1.3l-6.3,8.8v5.8h-1.1V52.2z"/>\r\n\t<path d="M148.1,43.3h10.3v1h-9.2v6h8.3v1h-8.3v6.6h-1.1V43.3z"/>\r\n\t<path d="M160.7,50.7L160.7,50.7c0-4,2.9-7.6,7.4-7.6c4.4,0,7.3,3.5,7.3,7.5v0c0,4-2.9,7.6-7.4,7.6\r\n\t\tC163.6,58.2,160.7,54.7,160.7,50.7z M174.3,50.7L174.3,50.7c0-3.7-2.6-6.6-6.2-6.6c-3.6,0-6.2,2.9-6.2,6.5v0c0,3.6,2.6,6.6,6.2,6.6\r\n\t\tC171.7,57.2,174.3,54.3,174.3,50.7z"/>\r\n\t<path d="M178.9,51.9v-8.5h1.1v8.4c0,3.4,1.9,5.4,5,5.4c3,0,4.9-1.8,4.9-5.3v-8.5h1.1v8.4c0,4.2-2.4,6.4-6,6.4\r\n\t\tC181.4,58.2,178.9,56,178.9,51.9z"/>\r\n\t<path d="M195,43.3h6.1c1.8,0,3.2,0.6,4.1,1.4c0.7,0.7,1.1,1.7,1.1,2.7v0c0,2.4-1.8,3.8-4.3,4.2l4.8,6.2h-1.4l-4.7-6.1h-4.8v6.1H195\r\n\t\tV43.3z M201,50.9c2.4,0,4.3-1.2,4.3-3.3v0c0-2-1.5-3.2-4.2-3.2h-5v6.6H201z"/>\r\n\t<path d="M209.1,55.8l0.8-0.8c1.3,1.3,2.8,2.2,4.4,2.2c2.3,0,3.9-1.6,3.9-3.7v0c0-2-1.7-3.5-4-3.5c-1.4,0-2.4,0.4-3.3,0.9l-0.8-0.5\r\n\t\tl0.4-7.1h8.2v1h-7.2l-0.4,5.5c0.9-0.5,1.9-0.8,3.2-0.8c2.8,0,5,1.8,5,4.4v0c0,2.8-2.2,4.7-5.1,4.7\r\n\t\tC212.2,58.2,210.4,57.1,209.1,55.8z"/>\r\n\t<path d="M224.3,44.3l-2.8,1l-0.3-0.9l3.3-1.2h0.8v14.7h-1.1V44.3z"/>\r\n</g>\r\n<g fill="{{OrderCloudLogo.fillColor}}">\r\n\t<g>\r\n\t\t<path d="M68.6,45l-8.2-3.7c-0.4-0.2-0.8-0.1-1,0.4c-1.4,3.3-3.8,5.8-8.1,5.8c-1.8,0-3.3-0.4-4.5-1.2c0,0.1-0.1,0.2-0.1,0.3\r\n\t\t\tc-1.1,3.4-2.8,6.3-5,8.6c2.7,1.3,5.9,2,9.5,2c8.6,0,14.9-4.2,17.8-11.3C69.2,45.6,69,45.2,68.6,45z"/>\r\n\t\t<path d="M68.9,15.9C66.1,8.8,59.8,4.6,51.2,4.6c-5.8,0-10.6,1.8-14,5.3c0,0,0,0,0,0c-1.8,1.9-3.2,4.3-4.1,7.2\r\n\t\t\tc-1,3.1-1.4,5.5-1.4,12.1l0,0c0,0.5,0,1.1,0,1.7c0,6.7-0.2,9.1-0.8,10.9c-1.1,3.5-3.8,5.6-8,5.6s-6.9-2.1-8-5.6\r\n\t\t\tc-0.6-1.8-0.8-4.3-0.8-10.9s0.2-9.1,0.8-10.9c1.1-3.5,3.8-5.6,8-5.6c2,0,3.6,0.5,4.9,1.3c0-0.1,0.1-0.2,0.1-0.3\r\n\t\t\tc1.1-3.4,2.8-6.3,4.9-8.7c-2.8-1.4-6.2-2.1-9.8-2.1c-8.9,0-16,4.1-18.6,12.4C3,20.5,2.7,23.4,2.7,30.9S3,41.4,4.2,44.9\r\n\t\t\tc2.6,8.2,9.7,12.4,18.6,12.4c5.9,0,10.9-1.8,14.4-5.3l0,0c1.8-1.9,3.3-4.2,4.2-7c1-3.3,1.4-6,1.4-12.5l0,0c0-0.5,0-1,0-1.5\r\n\t\t\tc0-7.3,0.2-9.1,0.8-10.9c1.1-3.5,3.7-5.6,7.6-5.6c4.3,0,6.7,2.5,8.1,5.8c0.2,0.4,0.6,0.6,1,0.4l8.2-3.7\r\n\t\t\tC69,16.7,69.2,16.3,68.9,15.9z"/>\r\n\t</g>\r\n</g>\r\n<rect fill="{{OrderCloudLogo.fillColor}}" x="87.7" y="3.3" width="2" height="55"/>\r\n<g fill="{{OrderCloudLogo.fillColor}}">\r\n\t<path d="M110.5,27.3c-0.6-2-0.8-3.6-0.8-7.8s0.2-5.8,0.8-7.8c1.5-4.6,5.4-6.9,10.4-6.9s8.9,2.3,10.4,6.9c0.6,2,0.8,3.6,0.8,7.8\r\n\t\ts-0.2,5.8-0.8,7.8c-1.5,4.6-5.4,6.9-10.4,6.9S112,31.9,110.5,27.3z M125.4,25.6c0.3-1,0.5-2.4,0.5-6.1s-0.1-5.1-0.5-6.1\r\n\t\tc-0.6-2-2.1-3.1-4.5-3.1s-3.8,1.2-4.5,3.1c-0.3,1-0.5,2.4-0.5,6.1s0.1,5.1,0.5,6.1c0.6,2,2.1,3.1,4.5,3.1S124.7,27.6,125.4,25.6z"\r\n\t\t/>\r\n\t<path d="M137.1,33.7c-0.3,0-0.4-0.2-0.4-0.4V13.9c0-0.3,0.2-0.4,0.4-0.4h5c0.3,0,0.4,0.2,0.4,0.4v1.7h0c1-1.6,2.8-2.6,5.3-2.6\r\n\t\tc1.3,0,2.7,0.5,3.6,1.2c0.2,0.2,0.3,0.3,0.1,0.6l-2.3,4.3c-0.2,0.2-0.3,0.2-0.6,0.1c-1-0.6-1.9-1-2.9-0.9c-2.2,0.1-3.1,1.7-3.1,4.4\r\n\t\tv10.7c0,0.3-0.2,0.4-0.4,0.4H137.1z"/>\r\n\t<path d="M166.1,33.7c-0.3,0-0.4-0.2-0.4-0.4v-1.5h0c-1,1.4-2.6,2.3-5.3,2.3c-3.4,0-5.8-1.7-6.9-4.9c-0.5-1.6-0.7-3.1-0.7-5.7\r\n\t\tc0-2.6,0.2-4.1,0.7-5.7c1-3.2,3.5-4.9,6.9-4.9c2.7,0,4.4,1,5.3,2.3h0V5.7c0-0.3,0.2-0.4,0.4-0.4h5c0.3,0,0.4,0.2,0.4,0.4v27.6\r\n\t\tc0,0.3-0.2,0.4-0.4,0.4H166.1z M165.3,27.1c0.3-0.8,0.4-1.7,0.4-3.5s-0.1-2.7-0.4-3.5c-0.5-1.5-1.5-2.2-3.1-2.2\r\n\t\tc-1.6,0-2.7,0.7-3.1,2.2c-0.3,0.8-0.4,1.7-0.4,3.5s0.1,2.7,0.4,3.5c0.5,1.4,1.5,2.2,3.1,2.2C163.7,29.3,164.8,28.5,165.3,27.1z"/>\r\n\t<path d="M176.5,28.4c-0.4-1.3-0.7-2.7-0.7-4.8c0-2.1,0.3-3.6,0.7-4.9c1.2-3.6,4.4-5.7,8.7-5.7c4.5,0,7.6,2.1,8.7,5.7\r\n\t\tc0.4,1.3,0.7,2.8,0.7,6.2c0,0.3-0.2,0.4-0.5,0.4h-12.3c-0.2,0-0.3,0.1-0.3,0.3c0,0.4,0.1,0.8,0.3,1.1c0.5,1.8,2.1,2.7,4.2,2.7\r\n\t\tc2,0,3.5-0.7,4.6-1.8c0.2-0.2,0.4-0.2,0.6,0l2.8,2.6c0.2,0.2,0.2,0.4,0,0.6c-1.9,2-4.9,3.4-8.6,3.4\r\n\t\tC180.8,34.2,177.7,32.1,176.5,28.4z M188.5,21.5c0.2,0,0.3-0.1,0.3-0.3c0-0.6-0.1-1.1-0.2-1.5c-0.5-1.4-1.7-2.2-3.4-2.2\r\n\t\ts-2.9,0.8-3.4,2.2c-0.1,0.4-0.2,0.9-0.2,1.5c0,0.2,0.1,0.3,0.3,0.3H188.5z"/>\r\n\t<path d="M199.2,33.7c-0.3,0-0.4-0.2-0.4-0.4V13.9c0-0.3,0.2-0.4,0.4-0.4h5c0.3,0,0.4,0.2,0.4,0.4v1.7h0c1-1.6,2.8-2.6,5.3-2.6\r\n\t\tc1.3,0,2.7,0.5,3.6,1.2c0.2,0.2,0.3,0.3,0.1,0.6l-2.3,4.3c-0.2,0.2-0.3,0.2-0.6,0.1c-1-0.6-1.9-1-2.9-0.9c-2.2,0.1-3.1,1.7-3.1,4.4\r\n\t\tv10.7c0,0.3-0.2,0.4-0.4,0.4H199.2z"/>\r\n\t<path d="M216,19.5c0-4.4,0.2-5.9,0.8-7.7c1.5-4.6,5.1-7,10.1-7c4.8,0,8.3,2.3,9.9,6.3c0.1,0.2,0,0.4-0.2,0.5l-4.6,2\r\n\t\tc-0.3,0.1-0.5,0-0.6-0.2c-0.8-1.8-2.1-3.2-4.5-3.2c-2.2,0-3.6,1.2-4.3,3.1c-0.3,1-0.5,2-0.5,6.1s0.1,5.1,0.5,6.1\r\n\t\tc0.6,2,2,3.1,4.3,3.1c2.4,0,3.7-1.4,4.5-3.2c0.1-0.3,0.3-0.3,0.6-0.2l4.6,2.1c0.3,0.1,0.3,0.3,0.2,0.5c-1.6,4-5.1,6.3-9.9,6.3\r\n\t\tc-5,0-8.6-2.3-10.1-7C216.1,25.4,216,23.9,216,19.5z"/>\r\n\t<path d="M246.9,34c-4.5,0-6.3-2-6.3-6.4V5.7c0-0.3,0.2-0.4,0.4-0.4h5c0.3,0,0.4,0.2,0.4,0.4v21.4c0,1.4,0.5,1.9,1.8,1.9h0.9\r\n\t\tc0.3,0,0.4,0.2,0.4,0.4v4.1c0,0.3-0.2,0.4-0.4,0.4H246.9z"/>\r\n\t<path d="M253.1,28.5c-0.5-1.5-0.7-2.9-0.7-4.9c0-2,0.2-3.4,0.7-4.9c1.2-3.7,4.5-5.7,8.8-5.7s7.6,2,8.8,5.7c0.5,1.5,0.7,2.9,0.7,4.9\r\n\t\tc0,2-0.2,3.4-0.7,4.9c-1.2,3.7-4.5,5.7-8.8,5.7S254.3,32.2,253.1,28.5z M265,27.1c0.3-0.9,0.4-1.8,0.4-3.5c0-1.7-0.1-2.6-0.4-3.5\r\n\t\tc-0.5-1.4-1.6-2.2-3.1-2.2c-1.5,0-2.7,0.8-3.1,2.2c-0.3,0.9-0.4,1.8-0.4,3.5c0,1.7,0.1,2.6,0.4,3.5c0.5,1.4,1.6,2.2,3.1,2.2\r\n\t\tC263.4,29.3,264.5,28.5,265,27.1z"/>\r\n\t<path d="M287.8,33.7c-0.3,0-0.4-0.2-0.4-0.4v-1.5h0c-1,1.4-2.6,2.3-5.2,2.3c-4.5,0-6.8-3.1-6.8-7.5V13.9c0-0.3,0.2-0.4,0.4-0.4h5\r\n\t\tc0.3,0,0.4,0.2,0.4,0.4v11.6c0,2.2,1,3.7,3.1,3.7c2,0,3.1-1.5,3.1-3.7V13.9c0-0.3,0.2-0.4,0.4-0.4h5c0.3,0,0.4,0.2,0.4,0.4v19.4\r\n\t\tc0,0.3-0.2,0.4-0.4,0.4H287.8z"/>\r\n\t<path d="M310.9,33.7c-0.3,0-0.4-0.2-0.4-0.4v-1.5h0c-1,1.4-2.6,2.3-5.3,2.3c-3.4,0-5.8-1.7-6.9-4.9c-0.5-1.6-0.7-3.1-0.7-5.7\r\n\t\tc0-2.6,0.2-4.1,0.7-5.7c1-3.2,3.5-4.9,6.9-4.9c2.7,0,4.4,1,5.3,2.3h0V5.7c0-0.3,0.2-0.4,0.4-0.4h5c0.3,0,0.4,0.2,0.4,0.4v27.6\r\n\t\tc0,0.3-0.2,0.4-0.4,0.4H310.9z M310.1,27.1c0.3-0.8,0.4-1.7,0.4-3.5s-0.1-2.7-0.4-3.5c-0.5-1.5-1.5-2.2-3.1-2.2\r\n\t\tc-1.6,0-2.7,0.7-3.1,2.2c-0.3,0.8-0.4,1.7-0.4,3.5s0.1,2.7,0.4,3.5c0.5,1.4,1.5,2.2,3.1,2.2C308.6,29.3,309.6,28.5,310.1,27.1z"/>\r\n</g>\r\n<g fill="{{OrderCloudLogo.fillColor}}">\r\n\t<path d="M339.8,5.7c0-0.3,0.2-0.4,0.4-0.4h10.6c5,0,8.5,2.1,9.8,6.4c0.5,1.6,0.8,3.2,0.8,7.8s-0.3,6.2-0.8,7.8\r\n\t\tc-1.4,4.3-4.9,6.4-9.8,6.4h-10.6c-0.3,0-0.4-0.2-0.4-0.4V5.7z M346.2,28.3h3.2c2.8,0,4.6-0.8,5.3-3.1c0.3-0.8,0.5-1.9,0.5-5.6\r\n\t\ts-0.2-4.8-0.5-5.6c-0.7-2.3-2.4-3.1-5.3-3.1h-3.2c-0.2,0-0.3,0.1-0.3,0.3v17C346,28.2,346.1,28.3,346.2,28.3z"/>\r\n\t<path d="M365.5,28.4c-0.4-1.3-0.7-2.7-0.7-4.8c0-2.1,0.3-3.6,0.7-4.9c1.2-3.6,4.4-5.7,8.7-5.7c4.5,0,7.6,2.1,8.7,5.7\r\n\t\tc0.4,1.3,0.7,2.8,0.7,6.2c0,0.3-0.2,0.4-0.5,0.4h-12.3c-0.2,0-0.3,0.1-0.3,0.3c0,0.4,0.1,0.8,0.3,1.1c0.5,1.8,2.1,2.7,4.2,2.7\r\n\t\tc2,0,3.5-0.7,4.6-1.8c0.2-0.2,0.4-0.2,0.6,0l2.8,2.6c0.2,0.2,0.2,0.4,0,0.6c-1.9,2-4.9,3.4-8.6,3.4\r\n\t\tC369.9,34.2,366.7,32.1,365.5,28.4z M377.6,21.5c0.2,0,0.3-0.1,0.3-0.3c0-0.6-0.1-1.1-0.2-1.5c-0.5-1.4-1.7-2.2-3.4-2.2\r\n\t\ts-2.9,0.8-3.4,2.2c-0.1,0.4-0.2,0.9-0.2,1.5c0,0.2,0.1,0.3,0.3,0.3H377.6z"/>\r\n\t<path d="M393,33.7c-0.3,0-0.4-0.2-0.5-0.4l-7.2-19.4c-0.1-0.3,0-0.4,0.3-0.4h5.3c0.3,0,0.5,0.1,0.5,0.4l3.9,12h0.1l3.8-12\r\n\t\tc0.1-0.3,0.3-0.4,0.5-0.4h5.2c0.3,0,0.4,0.2,0.3,0.4l-7.2,19.4c-0.1,0.3-0.3,0.4-0.5,0.4H393z"/>\r\n\t<path d="M417.2,19.5c0-4.4,0.2-5.9,0.8-7.7c1.5-4.6,5.1-7,10.1-7c4.8,0,8.3,2.3,9.9,6.3c0.1,0.2,0,0.4-0.2,0.5l-4.6,2\r\n\t\tc-0.3,0.1-0.5,0-0.6-0.2c-0.8-1.8-2.1-3.2-4.5-3.2c-2.2,0-3.6,1.2-4.3,3.1c-0.3,1-0.5,2-0.5,6.1s0.1,5.1,0.5,6.1\r\n\t\tc0.6,2,2,3.1,4.3,3.1c2.4,0,3.7-1.4,4.5-3.2c0.1-0.3,0.3-0.3,0.6-0.2l4.6,2.1c0.3,0.1,0.3,0.3,0.2,0.5c-1.6,4-5.1,6.3-9.9,6.3\r\n\t\tc-5,0-8.6-2.3-10.1-7C417.3,25.4,417.2,23.9,417.2,19.5z"/>\r\n\t<path d="M441.3,28.4c-0.4-1.3-0.7-2.7-0.7-4.8c0-2.1,0.3-3.6,0.7-4.9c1.2-3.6,4.4-5.7,8.7-5.7c4.5,0,7.6,2.1,8.7,5.7\r\n\t\tc0.4,1.3,0.7,2.8,0.7,6.2c0,0.3-0.2,0.4-0.5,0.4h-12.3c-0.2,0-0.3,0.1-0.3,0.3c0,0.4,0.1,0.8,0.3,1.1c0.5,1.8,2.1,2.7,4.2,2.7\r\n\t\tc2,0,3.5-0.7,4.6-1.8c0.2-0.2,0.4-0.2,0.6,0l2.8,2.6c0.2,0.2,0.2,0.4,0,0.6c-1.9,2-4.9,3.4-8.6,3.4\r\n\t\tC445.7,34.2,442.5,32.1,441.3,28.4z M453.4,21.5c0.2,0,0.3-0.1,0.3-0.3c0-0.6-0.1-1.1-0.2-1.5c-0.5-1.4-1.7-2.2-3.4-2.2\r\n\t\tc-1.7,0-2.9,0.8-3.4,2.2c-0.1,0.4-0.2,0.9-0.2,1.5c0,0.2,0.1,0.3,0.3,0.3H453.4z"/>\r\n\t<path d="M475.9,33.7c-0.3,0-0.4-0.2-0.4-0.4V21.7c0-2.2-1-3.7-3.1-3.7c-2,0-3.2,1.5-3.2,3.7v11.6c0,0.3-0.2,0.4-0.4,0.4h-5\r\n\t\tc-0.3,0-0.4-0.2-0.4-0.4V13.9c0-0.3,0.2-0.4,0.4-0.4h5c0.3,0,0.4,0.2,0.4,0.4v1.4h0c0.9-1.3,2.6-2.3,5.2-2.3c4.5,0,6.9,3.1,6.9,7.5\r\n\t\tv12.8c0,0.3-0.2,0.4-0.4,0.4H475.9z"/>\r\n\t<path d="M493.1,34c-4.7,0-6.4-2.1-6.4-6.7V18c0-0.2-0.1-0.3-0.3-0.3h-1.3c-0.3,0-0.4-0.2-0.4-0.4v-3.5c0-0.3,0.2-0.4,0.4-0.4h1.3\r\n\t\tc0.2,0,0.3-0.1,0.3-0.3V7.8c0-0.3,0.2-0.4,0.4-0.4h5c0.3,0,0.4,0.2,0.4,0.4v5.4c0,0.2,0.1,0.3,0.3,0.3h2.6c0.3,0,0.4,0.2,0.4,0.4\r\n\t\tv3.5c0,0.3-0.2,0.4-0.4,0.4h-2.6c-0.2,0-0.3,0.1-0.3,0.3v9c0,1.5,0.5,2,1.8,2h1c0.3,0,0.4,0.2,0.4,0.4v4.1c0,0.3-0.2,0.4-0.4,0.4\r\n\t\tH493.1z"/>\r\n\t<path d="M499.5,28.4c-0.4-1.3-0.7-2.7-0.7-4.8c0-2.1,0.3-3.6,0.7-4.9c1.2-3.6,4.4-5.7,8.7-5.7c4.5,0,7.6,2.1,8.7,5.7\r\n\t\tc0.4,1.3,0.7,2.8,0.7,6.2c0,0.3-0.2,0.4-0.5,0.4h-12.3c-0.2,0-0.3,0.1-0.3,0.3c0,0.4,0.1,0.8,0.3,1.1c0.5,1.8,2.1,2.7,4.2,2.7\r\n\t\tc2,0,3.5-0.7,4.6-1.8c0.2-0.2,0.4-0.2,0.6,0l2.8,2.6c0.2,0.2,0.2,0.4,0,0.6c-1.9,2-4.9,3.4-8.6,3.4\r\n\t\tC503.8,34.2,500.6,32.1,499.5,28.4z M511.5,21.5c0.2,0,0.3-0.1,0.3-0.3c0-0.6-0.1-1.1-0.2-1.5c-0.5-1.4-1.7-2.2-3.4-2.2\r\n\t\tc-1.7,0-2.9,0.8-3.4,2.2c-0.1,0.4-0.2,0.9-0.2,1.5c0,0.2,0.1,0.3,0.3,0.3H511.5z"/>\r\n\t<path d="M521.9,33.7c-0.3,0-0.4-0.2-0.4-0.4V13.9c0-0.3,0.2-0.4,0.4-0.4h5c0.3,0,0.4,0.2,0.4,0.4v1.7h0c1-1.6,2.8-2.6,5.3-2.6\r\n\t\tc1.3,0,2.7,0.5,3.6,1.2c0.2,0.2,0.3,0.3,0.1,0.6l-2.3,4.3c-0.2,0.2-0.3,0.2-0.6,0.1c-1-0.6-1.9-1-2.9-0.9c-2.2,0.1-3.1,1.7-3.1,4.4\r\n\t\tv10.7c0,0.3-0.2,0.4-0.4,0.4H521.9z"/>\r\n</g>\r\n<path fill="{{OrderCloudLogo.fillColor}}" d="M321.4,11.4c-0.1,0-0.2-0.1-0.2-0.2V6.1c0-0.1,0-0.1-0.1-0.1h-1.7c-0.1,0-0.2-0.1-0.2-0.2V5.6c0-0.1,0.1-0.2,0.2-0.2h4.2\r\n\tc0.1,0,0.2,0.1,0.2,0.2v0.3c0,0.1-0.1,0.2-0.2,0.2H322c-0.1,0-0.1,0-0.1,0.1v5.1c0,0.1-0.1,0.2-0.2,0.2H321.4z M329.8,11.4\r\n\tc-0.1,0-0.2-0.1-0.2-0.2V6.9h0l-1.7,3.5c0,0.1-0.1,0.1-0.2,0.1h-0.3c-0.1,0-0.1,0-0.2-0.1l-1.7-3.5h0v4.3c0,0.1-0.1,0.2-0.2,0.2\r\n\th-0.3c-0.1,0-0.2-0.1-0.2-0.2V5.6c0-0.1,0.1-0.2,0.2-0.2h0.3c0.1,0,0.2,0,0.2,0.1l2,4.2h0l2-4.2c0-0.1,0.1-0.1,0.2-0.1h0.4\r\n\tc0.1,0,0.2,0.1,0.2,0.2v5.7c0,0.1-0.1,0.2-0.2,0.2H329.8z"/>\r\n</svg>\r\n</figure>\r\n'),$templateCache.put("common/search/templates/search.tpl.html",'<form name="OrderCloudSearchFrom">\r\n    <div class="form-group">\r\n        <input type="search" class="form-control" placeholder="{{placeholder}}" ng-model="searchTerm"/>\r\n    </div>\r\n</form>'),$templateCache.put("catalog/templates/catalog.tpl.html",'<article id="COMPONENT_Catalog" ui-view class="container-fluid">\r\n    <ordercloud-category-list categorylist="catalog.categories.Items"></ordercloud-category-list>\r\n</article>\r\n\r\n'),$templateCache.put("catalog/templates/catalogFacets.tpl.html",'<div class="facet-list-container" ng-if="facetList">\r\n    <h4 class=facet-list>Refine by</h4>\r\n    <div ng-repeat="(facetName, facet) in facetList" class="facet-list text-capitalize">\r\n        <b>{{facetName}}</b>\r\n        <fieldset class="facet-values" ng-repeat="(facetKey, facetSelected) in facet">\r\n            <label>\r\n                <input type="checkbox" ng-model="facetList[facetName][facetKey]"> {{facetKey}}\r\n            </label>\r\n        </fieldset>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n'),$templateCache.put("catalog/templates/category.list.tpl.html",'<article id="CategoryList">\r\n    <h3 ng-if="categorylist.length > 0" class="page-header">\r\n        {{categorylist.length > 1 ? \'Categories\' : \'Category\'}}\r\n    </h3>\r\n    <div class="category-list row">\r\n        <div class="category-list-item col-md-3" ng-repeat="category in categorylist">\r\n            <div class="thumbnail" ui-sref="catalog.category({categoryid: category.ID})">\r\n                <figure ng-if="category.xp.image">\r\n                    <img class="img-responsive" ng-src="{{category.xp.image.URL}}" alt="Category Image">\r\n                </figure>\r\n                <div class="caption">\r\n                    <h4 class="text-center">{{category.Name || category.ID}}</h4>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</article>'),$templateCache.put("catalog/templates/product.list.tpl.html",'<article>\r\n    <h3 ng-if="productlist.length > 0" class="page-header">\r\n        {{productlist.length > 1 ? \'Products\' : \'Product\'}}\r\n    </h3>\r\n    <div class="product-list row">\r\n        <div class="col-md-3" ng-repeat="product in productlist">\r\n            <div class="product-item" ui-sref="catalog.product({productid: product.ID})">\r\n                <h3 class="item-name">{{product.Name || product.ID}}</h3>\r\n                <p class="item-id" ng-if="product.Name">{{product.ID}}</p>\r\n                <div class="thumbnail-image">\r\n                    <span class="fa-stack fa-5x" ng-if="!product.xp.image">\r\n                        <i class="fa fa-camera fa-stack-1x"></i>\r\n                        <i class="fa fa-ban fa-stack-2x text-danger"></i>\r\n                    </span>\r\n                    <div ng-if="product.xp.image">\r\n                        <img class="img-responsive" ng-src="{{product.xp.image.URL}}" alt="Product Image">\r\n                    </div>\r\n                </div>\r\n                <div class="item-price"><p>{{product.StandardPriceSchedule.PriceBreaks[0].Price | currency}} x {{product.StandardPriceSchedule.PriceBreaks[0].Quantity}}</p></div>\r\n                <div class="item-description" ng-if="product.Description"><p>{{product.Description}}</p></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</article>'),$templateCache.put("adminUsers/templates/adminUserCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New Admin User</b>\r\n</h3>\r\n<form name="AdminUserCreateForm" ng-submit="adminUserCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userIDInput">User ID</label>\r\n            <input id="userIDInput" ordercloud-auto-id type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="adminUserCreate.adminUser.ID"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="userNameInput">User Name</label>\r\n            <input id="userNameInput" type="text"  class="form-control" ng-model="adminUserCreate.adminUser.Username" required/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userFirstNameInput">First Name</label>\r\n            <input id="userFirstNameInput" type="text" class="form-control" ng-model="adminUserCreate.adminUser.FirstName" required/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userLastNameInput">Last Name</label>\r\n            <input id="userLastNameInput" type="text" class="form-control" ng-model="adminUserCreate.adminUser.LastName" required/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <!-- TODO: make phonefield -->\r\n            <label for="userPhoneNumberInput">Phone Number</label>\r\n            <input id="userPhoneNumberInput" type="text" class="form-control" ng-model="adminUserCreate.adminUser.Phone" />\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="userEmailAddressInput">Email Address</label>\r\n            <input id="userEmailAddressInput" type="email" class="form-control" ng-model="adminUserCreate.adminUser.Email" required/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userPasswordInput">Password</label>\r\n            <input id="userPasswordInput" type="password" pattern=\'^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$\' pattern-err-type="customPassword" class="form-control" ng-model="adminUserCreate.adminUser.Password" confirmpassword="{{adminUserCreate.PasswordConfirm}}" required/>\r\n        </div>\r\n         <div class="col-sm-6 form-group">\r\n            <label for="userPasswordConfirmInput">Confirm Password</label>\r\n            <input id="userPasswordConfirmInput" type="password" pattern=\'^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$\' pattern-err-type="customPassword"  class="form-control" ng-model="adminUserCreate.PasswordConfirm" confirmpassword="{{adminUserCreate.adminUser.Password}}" required/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userActiveCheckbox">\r\n            <input id="userActiveCheckbox" type="checkbox" ng-model="adminUserCreate.adminUser.Active"/>\r\n            Active</label>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userTermsAcceptedCheckbox">\r\n            <input id="userTermsAcceptedCheckbox" type="checkbox" ng-model="adminUserCreate.TermsAccepted" required/>\r\n            Terms & Conditions\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="AdminUserCreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>\r\n'),$templateCache.put("adminUsers/templates/adminUserEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit Admin User:</b> {{adminUserEdit.adminUserName}}\r\n</h3>\r\n<form name="AdminUserEditForm" ng-submit="adminUserEdit.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userIDInput">User ID</label>\r\n            <input id="userIDInput" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="adminUserEdit.adminUser.ID"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="userNameInput">User Name</label>\r\n            <input id="userNameInput" type="text"  class="form-control" ng-model="adminUserEdit.adminUser.Username" ng-required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userFirstNameInput">First Name</label>\r\n            <input id="userFirstNameInput" type="text" class="form-control" ng-model="adminUserEdit.adminUser.FirstName" ng-required="true"/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userLastNameInput">Last Name</label>\r\n            <input id="userLastNameInput" type="text" class="form-control" ng-model="adminUserEdit.adminUser.LastName" ng-required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <!-- TODO: make phonefield -->\r\n            <label for="userPhoneNumberInput">Phone Number</label>\r\n            <input id="userPhoneNumberInput" type="text" class="form-control" ng-model="adminUserEdit.adminUser.Phone" />\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="userEmailAddressInput">Email Address</label>\r\n            <input id="userEmailAddressInput" type="email" class="form-control" ng-model="adminUserEdit.adminUser.Email" ng-required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userPasswordInput">Password</label>\r\n            <input id="userPasswordInput" type="password" pattern=\'^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$\' pattern-err-type="customPassword" class="form-control" ng-model="adminUserEdit.adminUser.Password" required/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userPasswordConfirmInput">Confirm Password</label>\r\n            <input id="userPasswordConfirmInput" type="password" pattern=\'^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$\' pattern-err-type="customPassword" class="form-control" ng-model="adminUserEdit.PasswordConfirm" required/>\r\n        </div>\r\n    </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userActiveCheckbox">\r\n            <input id="userActiveCheckbox" type="checkbox" ng-model="adminUserEdit.adminUser.Active"/>\r\n            Active</label>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userTermsAcceptedCheckbox">\r\n            <input id="userTermsAcceptedCheckbox" type="checkbox" ng-model="adminUserEdit.TermsAccepted" ng-required="true"/>\r\n            Terms & Conditions</label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="AdminUserEditForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n        <button type="button" class="btn btn-default" ng-click="adminUserEdit.Delete()"><i class="fa fa-trash text-danger"></i></button>\r\n    </div>\r\n</form>\r\n'),
$templateCache.put("adminUsers/templates/adminUsers.tpl.html",'<article id="COMPONENT_AdminUsers" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <h3>Admin Users</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="AdminUsersSearchForm" class="form-inline" ng-submit="adminUsers.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search admin users..." ng-model="adminUsers.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n                <span ng-class="{\'btn-group\':adminUsers.searchResults}">\r\n                    <button type="submit" class="btn btn-primary">Search</button>\r\n                    <button ng-if="adminUsers.searchResults" ng-click="adminUsers.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n                </span>\r\n                <span ng-class="{\'btn-group\':adminUsers.filtersApplied}" ng-show="application.$ocMedia(\'max-width:767px\')">\r\n                    <button type="button" class="btn btn-default" ng-click="adminUsers.showFilters = !adminUsers.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n                    <button ng-if="adminUsers.filtersApplied" ng-click="adminUsers.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n                </span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!adminUsers.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':adminUsers.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="adminUsers.sortSelection" ng-change="adminUsers.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="FirstName">First Name</option>\r\n                        <option value="LastName">Last Name</option>\r\n                        <option value="Username">Username</option>\r\n                        <option value="Email">Email</option>\r\n                    </select>\r\n                    <div ng-if="adminUsers.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="adminUsers.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!adminUsers.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="adminUsers.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? adminUsers.list.Meta.ItemRange[0] : \'1\') + \' - \'\r\n            + adminUsers.list.Meta.ItemRange[1] + \' of \' + adminUsers.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover table-condensed oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="adminUsers.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="adminUsers.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="adminUsers.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="adminUsers.updateSort(\'FirstName\')">\r\n                        First Name\r\n                        <i class="fa fa-caret-down" ng-show="adminUsers.parameters.sortBy == \'FirstName\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="adminUsers.parameters.sortBy == \'!FirstName\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="adminUsers.updateSort(\'LastName\')">\r\n                        Last Name\r\n                        <i class="fa fa-caret-down" ng-show="adminUsers.parameters.sortBy == \'LastName\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="adminUsers.parameters.sortBy == \'!LastName\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="adminUsers.updateSort(\'Username\')">\r\n                        Username\r\n                        <i class="fa fa-caret-down" ng-show="adminUsers.parameters.sortBy == \'Username\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="adminUsers.parameters.sortBy == \'!Username\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="adminUsers.updateSort(\'Email\')">\r\n                        Email\r\n                        <i class="fa fa-caret-down" ng-show="adminUsers.parameters.sortBy == \'Email\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="adminUsers.parameters.sortBy == \'!Email\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col"></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="user in adminUsers.list.Items">\r\n                <th scope="row">{{user.ID}}</th>\r\n                <td data-title="FirstName">{{user.FirstName}}</td>\r\n                <td data-title="LastName">{{user.LastName}}</td>\r\n                <td data-title="Username">{{user.Username}}</td>\r\n                <td data-title="Email">{{user.Email}}</td>\r\n                <td class="actions-cell">\r\n                    <button type="button" ui-sref="adminUsers.edit({adminuserid: user.ID})" class="btn btn-default btn-sm">\r\n                        Edit\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && adminUsers.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="adminUsers.list.Meta.TotalPages > 5" max-size="5"\r\n                            total-items="adminUsers.list.Meta.TotalCount" items-per-page="adminUsers.list.Meta.PageSize"\r\n                            ng-model="adminUsers.list.Meta.Page" ng-change="adminUsers.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="adminUsers.list.Meta.Page < adminUsers.list.Meta.TotalPages"\r\n                ng-click="adminUsers.loadMore()">Load More\r\n        </button>\r\n    </div>\r\n</article>\r\n'),$templateCache.put("cart/templates/cart.tpl.html",'<article id="COMPONENT_Cart" class="container-fluid">\r\n    <h3 class="page-header">Shopping Cart</h3>\r\n    <div class="panel panel-default">\r\n        <div class="panel-heading">\r\n            <h3 class="panel-title">\r\n                <ng-pluralize count="cart.lineItems.Meta.TotalCount" when="{\r\n\t\t\t\t\t\t\t\'1\': \'1 Item in Your Cart\',\r\n\t\t\t\t\t\t\t\'other\': \'{} Items in Your Cart\'\r\n\t\t\t\t\t\t}"></ng-pluralize>\r\n            </h3>\r\n        </div>\r\n        <div style="max-height:750px; overflow-y:auto;" ordercloud-infinite-scroll controlleras="cart">\r\n            <table class="table table-hover">\r\n                <colgroup>\r\n                    <col style="width:100px;">\r\n                    <col style="width:100px;">\r\n                    <col>\r\n                    <col style="width:75px;">\r\n                    <col style="width:75px;">\r\n                </colgroup>\r\n                <tbody>\r\n                    <tr ng-repeat="lineItem in cart.lineItems.Items track by $index">\r\n                        <td>\r\n                            <form name="{{\'lineitem_\' + $index + \'_quantity\'}}" ng-submit="cart.updateQuantity(cart.order, lineItem)" class="form-group">\r\n                                <div ng-form="lineitem_quantity">\r\n                                    <input tabindex="{{$index + 1}}" ng-change="cart.updateQuantity(cart.order, lineItem)" type="number" min="{{lineItem.Product.StandardPriceSchedule.MinQuantity}}" max="{{lineItem.Product.StandardPriceSchedule.MaxQuantity}}" required="true" class="form-control text-center" ng-model="lineItem.Quantity">\r\n                                </div>\r\n                            </form>\r\n                        </td>\r\n                        <td>\r\n                            <figure style="width: 100px;">\r\n                                <img ng-if="lineItem.Product.xp.image" class="img-responsive" ng-src="{{lineItem.Product.xp.image.URL}}" alt="Product Image">\r\n                            </figure>\r\n                        </td>\r\n                        <td>\r\n                            <a href="#">{{lineItem.Product.Name}}</a><br>\r\n                            <small class="text-muted">{{lineItem.ProductID}}</small>\r\n                        </td>\r\n                        <td>\r\n                            <small class="text-success">{{lineItem.LineTotal | currency}}</small>\r\n                        </td>\r\n                        <td>\r\n                            <div class="btn-group-vertical">\r\n                                <button ng-if="lineItem.Specs.length" class="btn btn-default" ui-sref="catalog.lineitem({lineitemid: lineItem.ID, specformid: lineItem.Product.xp.specform})">\r\n                                    <i class="fa fa-edit text-warning"></i>\r\n                                </button>\r\n                                <button ng-click="cart.removeItem(cart.order, lineItem)" class="btn btn-default">\r\n                                    <i class="fa fa-trash text-danger"></i>\r\n                                </button>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div class="panel-footer">\r\n            <h4>Subtotal: <span class="text-success pull-right">{{cart.order.Subtotal | currency}}</span></h4>\r\n            <div ng-if="cart.promotions.Items.length">\r\n                <h5 ng-repeat="promotion in cart.promotions.Items">\r\n                    <span class="pull-right">{{promotion.Name}} ({{promotion.Amount | currency}}) <ordercloud-remove-promotion order="cart.order" promotion="promotion"></ordercloud-remove-promotion></span>\r\n                    <div class="clearfix"></div>\r\n                </h5>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-3 pull-right">\r\n            <ordercloud-promotion-input order="cart.order" orderpromotions="cart.promotions"></ordercloud-promotion-input>\r\n        </div>\r\n    </div>\r\n    <button type="button" ui-sref="checkout" class="btn btn-lg btn-success pull-right">Checkout</button>\r\n</article>'),$templateCache.put("cart/templates/minicart.tpl.html",'\r\n<div id="minicart" class="dropdown" uib-dropdown is-open="minicart.showLineItems" ng-if="minicart.LineItems.Items.length">\r\n    <!--<div class="btn-group" uib-dropdown-toggle >-->\r\n        <!--<div class="btn btn-default">-->\r\n            <!--<span>-->\r\n                <!--<i class="fa fa-shopping-cart"></i>-->\r\n                <!--<i class="badge">{{minicart.LineItems.Meta.TotalCount}}</i>-->\r\n            <!--</span>-->\r\n        <!--</div>-->\r\n        <!--<div class="btn btn-default">{{order.Subtotal | currency}} <span class="caret"></span></div>-->\r\n    <!--</div>-->\r\n    <!--//When mobile-->\r\n    <div uib-dropdown-toggle>\r\n        <div id="minicartButton" ng-click="minicart.toggleDropdown($event)">\r\n            <span>\r\n                <i class="fa fa-shopping-cart"></i>\r\n                <i class="badge">{{minicart.LineItems.Meta.TotalCount}}</i>\r\n                <i ng-if="!minicart.$ocMedia(\'max-width:767px\')" class="caret"></i>\r\n            </span>\r\n        </div>\r\n        <!--<div class="btn btn-default">{{order.Subtotal | currency}}</div>-->\r\n    </div>\r\n    <!--//DropDown-->\r\n    <div ng-if="!minicart.$ocMedia(\'max-width:767px\')" id="minicart_line_item_list" uib-dropdown-menu role="menu" class="panel panel-primary">\r\n        <div class="panel-heading">\r\n            <div class="panel-title">\r\n            <ng-pluralize count="minicart.LineItems.Meta.TotalCount"\r\n                          when="{\r\n                     \'one\': \'1 item in your cart\',\r\n                     \'other\': \'{} items in your cart\'}">\r\n            </ng-pluralize>\r\n            </div>\r\n        </div>\r\n        <div class="minicart-body">\r\n            <table class="table table-hover table-striped">\r\n\r\n\r\n                <tr ng-repeat="lineItem in minicart.LineItems.Items">\r\n                    <td>{{lineItem.Quantity}}</td>\r\n                    <td>\r\n                        <a href="#">{{lineItem.Product.Name}}</a><br>\r\n                        <small class="text-muted">{{lineItem.ProductID}}</small>\r\n                        </br>\r\n                    </td>\r\n                    <td style="padding-right: 25px;">\r\n                        <b class="text-success">{{lineItem.LineTotal | currency}}</b>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n        <div class="panel-footer">\r\n            <div class="row">\r\n                <div ng-class="{\'col-xs-6\': minicart.checkForCheckout(), \'col-xs-12\': !minicart.checkForCheckout()}">\r\n                    <button class="btn btn-info btn-block" ng-click="minicart.goToCart()">Cart</button>\r\n                </div>\r\n                <div class="col-xs-6"  ng-if="minicart.checkForCheckout()">\r\n                    <button class="btn btn-success btn-block" ui-sref="checkout">Checkout</button>\r\n                </div>\r\n            </div>\r\n            <div class="row express-checkout" ng-if="minicart.checkForExpress()">\r\n                <div class="col-xs-12">\r\n                    <button class="btn btn-success btn-block" ui-sref="expressCheckout">Express Checkout</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("cart/templates/modalMinicart.tpl.html",'<div id="modalMinicart" >\r\n    <div class="panel panel-primary">\r\n        <div class="panel-heading">\r\n            <div class="panel-title">\r\n                <ng-pluralize count="minicartModal.lineItemsLength"\r\n                              when="{\r\n                     \'one\': \'1 item in your cart\',\r\n                     \'other\': \'{} items in your cart\'}">\r\n                </ng-pluralize>\r\n                <i class="fa fa-times-circle pull-right" ng-click="minicartModal.cancel()"></i>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="minicart-body">\r\n            <table class="table table-hover table-striped">\r\n                <tr ng-repeat="lineItem in minicartModal.lineItems">\r\n                    <td>{{lineItem.Quantity}}</td>\r\n                    <td>\r\n                        <a href="#">{{lineItem.Product.Name}}</a><br>\r\n                        <small class="text-muted">{{lineItem.ProductID}}</small>\r\n                        </br>\r\n                    </td>\r\n                    <td style="padding-right: 25px;">\r\n                        <b class="text-success">{{lineItem.LineTotal | currency}}</b>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n        <div class="modal-footer">\r\n            <div class="row">\r\n                <div class="col-xs-6">\r\n                    <button class="btn btn-info btn-block" ng-click="minicartModal.goToCart()">Cart</button>\r\n                </div>\r\n                <div class="col-xs-6">\r\n                    <button class="btn btn-success btn-block" ng-click="minicartModal.goToCheckout()">Checkout</button>\r\n                </div>\r\n            </div>\r\n            <div class="row express-checkout">\r\n                <div class="col-xs-12">\r\n                    <button class="btn btn-success btn-block" ng-click="minicartModal.goToExpressCheckout()">Express\r\n                        Checkout\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n'),$templateCache.put("buyers/templates/buyerCreate.tpl.html",'<h3>\r\n    <b>Create Buyer</b>\r\n</h3>\r\n<form ng-submit="buyer.Submit()" name="BuyerEditForm" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="buyer_id">ID</label>\r\n            <input id="buyer_id" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ordercloud-auto-id ng-model="buyerCreate.buyer.ID" class="form-control">\r\n        </div>\r\n        <div class="form-group col-md-6">\r\n            <label for="buyer_name">Name</label>\r\n            <input id="buyer_name" type="text" ng-model="buyerCreate.buyer.Name" class="form-control" required>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="buyer_analytics">Analytics ID</label>\r\n            <input id="buyer_analytics" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="buyerCreate.buyer.xp.analytics_code" class="form-control">\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="buyer_active">\r\n                <input id="buyer_active" type="checkbox" ng-model="buyerCreate.buyer.Active"> Active\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button class="btn btn-primary" ng-click="buyerCreate.Submit();" type="button" ng-disabled="BuyerEditForm.$invalid">Save</button>\r\n        <button class="btn btn-default" ui-sref="^" type="button">Cancel</button>\r\n    </div>\r\n</form>\r\n'),$templateCache.put("buyers/templates/buyerEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit Buyer:</b> {{buyerEdit.buyerName}}\r\n</h3>\r\n<form ng-submit="buyerEdit.Submit()" name="BuyerEditForm" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="buyer_id">ID</label>\r\n            <input id="buyer_id" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="buyerEdit.buyer.ID" class="form-control">\r\n        </div>\r\n        <div class="form-group col-md-6">\r\n            <label for="buyer_name">Name</label>\r\n            <input id="buyer_name" type="text" ng-model="buyerEdit.buyer.Name" class="form-control" required>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label id="buyer_analytics">Analytics ID</label>\r\n            <input for="buyer_analytics" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="buyerEdit.buyer.xp.analytics_code" class="form-control">\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="buyer_active">\r\n                <input id="buyer_active" type="checkbox" ng-model="buyerEdit.buyer.Active"> Active\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button class="btn btn-primary" type="submit" ng-disabled="BuyerEditForm.$invalid">Save</button>\r\n        <button class="btn btn-default" ui-sref="^" type="button">Cancel</button>\r\n        <!--<button class="btn btn-primary" ng-click="buyerEdit.Delete();" type="button"><i class="fa fa-trash text-danger"></i> Delete</button>-->\r\n    </div>\r\n</form>\r\n'),$templateCache.put("buyers/templates/buyers.tpl.html",'<article id="COMPONENT_Buyers" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <h3>Buyers</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="BuyersSearchForm" class="form-inline" ng-submit="buyers.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search buyers..." ng-model="buyers.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':buyers.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="buyers.searchResults" ng-click="buyers.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n            <!-- Commented out until API supports sorting for buyers -->\r\n            <!--\r\n            <span ng-class="{\'btn-group\':buyers.filtersApplied}" >\r\n                <button type="button" class="btn btn-default" ng-click="buyers.showFilters = !buyers.showFilters" ng-show="application.$ocMedia(\'max-width:767px\')"><i class="fa fa-filter"></i> Filters</button>\r\n                <button ng-if="buyers.filtersApplied" ng-click="buyers.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n            </span>\r\n            -->\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!buyers.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':buyers.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="buyers.sortSelection" ng-change="buyers.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Name">Name</option>\r\n                    </select>\r\n                    <div ng-if="buyers.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="buyers.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!buyers.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="buyers.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? buyers.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n            buyers.list.Meta.ItemRange[1] + \' of \' + buyers.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover table-condensed oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <!-- Commented out until API supports sorting for buyers -->\r\n                    <!-- <a href="#" role="button" ng-click="buyers.updateSort(\'ID\')"> -->\r\n                    ID\r\n                    <i class="fa fa-caret-down" ng-show="buyers.parameters.sortBy == \'ID\'"></i>\r\n                    <i class="fa fa-caret-up" ng-show="buyers.parameters.sortBy == \'!ID\'"></i>\r\n                    <!-- </a> -->\r\n                </th>\r\n                <th scope="col">\r\n                    <!-- Commented out until API supports sorting for buyers -->\r\n                    <!-- <a href="#" role="button" ng-click="buyers.updateSort(\'Name\')"> -->\r\n                    Name\r\n                    <i class="fa fa-caret-down" ng-show="buyers.parameters.sortBy == \'Name\'"></i>\r\n                    <i class="fa fa-caret-up" ng-show="buyers.parameters.sortBy == \'!Name\'"></i>\r\n                    <!-- </a> -->\r\n                </th>\r\n                <th class="text-center" scope="col">\r\n                    Active\r\n                </th>\r\n                <th scope="col"></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="buyer in buyers.list.Items">\r\n                <th scope="row">{{buyer.ID}}</th>\r\n                <td data-title="Name">{{buyer.Name}}</td>\r\n                <td class="text-center" data-title="Active"><i class="fa fa-circle" aria-hidden="true"\r\n                                                               ng-class="{\'active\':buyer.Active}"></i></td>\r\n                <td class="actions-cell">\r\n                    <button type="button" ui-sref="buyers.edit({buyerid: buyer.ID})" class="btn btn-default btn-sm">Edit\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && buyers.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="buyers.list.Meta.TotalPages > 5" max-size="5"\r\n                            total-items="buyers.list.Meta.TotalCount" items-per-page="buyers.list.Meta.PageSize"\r\n                            ng-model="buyers.list.Meta.Page" ng-change="buyers.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="buyers.list.Meta.Page < buyers.list.Meta.TotalPages"\r\n                ng-click="buyers.loadMore()">Load More\r\n        </button>\r\n    </div>\r\n</article>\r\n'),$templateCache.put("addresses/templates/addressAssign.tpl.html",'<h3 class="page-header">\r\n    Assignments for {{addressAssign.Address.AddressName}}\r\n</h3>\r\n<div class="well well-lg text-center" ng-if="!addressAssign.list.Items.length">\r\n    <b>The selected buyer does not have any user groups, </b>\r\n    <a type="button" ui-sref="^.groupCreate">create one now</a>\r\n</div>\r\n<ordercloud-search servicename="UserGroups" controlleras="addressAssign"></ordercloud-search>\r\n<section class="table-fixed-header" ng-if="addressAssign.list.Items.length">\r\n    <div class="table-header-bg"></div>\r\n    <div class="table-container" ordercloud-infinite-scroll controlleras="addressAssign" servicename="UserGroups" idname="UserGroupID" disable-dynamic-validation>\r\n        <table class="table table-hover">\r\n            <colgroup>\r\n                <col class="action-column"/>\r\n            </colgroup>\r\n            <thead>\r\n            <tr>\r\n                <th>\r\n                </th>\r\n                <th>\r\n                    <div>ID</div>\r\n                </th>\r\n                <th>\r\n                    <div>Name</div>\r\n                </th>\r\n                <th>\r\n                    <div>Is Shipping</div>\r\n                </th>\r\n                <th>\r\n                    <div>Is Billing</div>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="group in addressAssign.list.Items track by $index" >\r\n                <td class="text-center">\r\n                    <input name="{{\'address_assign_\' + $index}}"  type="checkbox" ng-model="group.selected">\r\n                </td>\r\n                <td>\r\n                    {{group.ID}}\r\n                </td>\r\n                <td>{{group.Name}}</td>\r\n                <td class="text-center">\r\n                    <input name="{{\'is_shipping_\' + $index}}" type="checkbox" ng-model="group.IsShipping" />\r\n                </td>\r\n                <td class="text-center">\r\n                    <input name="{{\'is_billing_\' + $index}}" type="checkbox" ng-model="group.IsBilling" />\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>\r\n<button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n<button type="button" class="btn btn-primary" ng-click="addressAssign.saveAssignments()">Update Assignments</button>\r\n'),$templateCache.put("addresses/templates/addressCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New Address</b>\r\n</h3>\r\n<form name="AddressCreateForm" ng-submit="addressCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="addressIDInput">Address ID</label>\r\n            <input id="addressIDInput" type="text" class="form-control" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ordercloud-auto-id ng-model="addressCreate.address.ID"/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="addressNameInput">Address Name</label>\r\n            <input id="addressNameInput" type="text" class="form-control" ng-model="addressCreate.address.AddressName" required/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-12 form-group">\r\n            <label for="addressCompanyNameInput">Company Name</label>\r\n            <input id="addressCompanyNameInput" type="text" class="form-control" ng-model="addressCreate.address.CompanyName"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="addressFirstNameInput">First Name</label>\r\n            <input id="addressFirstNameInput" type="text" class="form-control" ng-model="addressCreate.address.FirstName"/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="addressLastNameInput">Last Name</label>\r\n            <input id="addressLastNameInput" type="text" class="form-control" ng-model="addressCreate.address.LastName"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="addressStreet1Input">Street 1</label>\r\n            <input id="addressStreet1Input" type="text" class="form-control" ng-model="addressCreate.address.Street1" required/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="addressStreet2Input">Street 2</label>\r\n            <input id="addressStreet2Input" type="text" class="form-control" ng-model="addressCreate.address.Street2"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="addressCityInput">City</label>\r\n            <input id="addressCityInput" type="text" class="form-control" ng-model="addressCreate.address.City" required/>\r\n        </div>\r\n        <div class="col-sm-3 form-group" ng-show="addressCreate.address.Country == \'US\' || addressCreate.address.Country == \'CA\'">\r\n            <label for="addressStateInput">State</label>\r\n            <select  id="addressStateInput" class="form-control" ng-options="state.value as state.label for state in addressCreate.states" ng-model="addressCreate.address.State" required/>\r\n        </div>\r\n        <div class="col-sm-3 form-group" ng-hide="addressCreate.address.Country == \'US\' || addressCreate.address.Country == \'CA\'">\r\n            <label for="addressStateInput">State</label>\r\n            <input  id="addressStateInput" class="form-control" ng-model="addressCreate.address.State" required/>\r\n        </div>\r\n        <div class="col-sm-3 form-group">\r\n            <label for="addressZipInput">Zip</label>\r\n            <input id="addressZipInput" type="text" class="form-control" ng-model="addressCreate.address.Zip" required/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="addressCountryInput">Country</label>\r\n            <select  id="addressCountryInput" class="form-control" ng-options="country.value as country.label for country in addressCreate.countries" ng-model="addressCreate.address.Country" required/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="addressPhoneInput">Phone Number</label>\r\n            <input id="addressPhoneInput" type="text" class="form-control" ng-model="addressCreate.address.Phone"/>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="AddressCreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>\r\n'),
$templateCache.put("addresses/templates/addressEdit.tpl.html",'<h3 class="page-header">\r\n\t<b>Edit Address:</b> {{addressEdit.addressName}}\r\n</h3>\r\n<form name="AddressEditForm" ng-submit="addressEdit.Submit()" novalidate>\r\n\t<div class="row">\r\n\t\t<div class="col-sm-6 form-group">\r\n\t\t\t<label for="addressIDInput">Address ID</label>\r\n\t\t\t<input id="addressIDInput" type="text" class="form-control" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="addressEdit.address.ID"/>\r\n\t\t</div>\r\n\t\t<div class="col-sm-6 form-group">\r\n\t\t\t<label for="addressNameInput">Address Name</label>\r\n\t\t\t<input id="addressNameInput" type="text" class="form-control"  ng-model="addressEdit.address.AddressName" required/>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row">\r\n\t\t<div class="col-sm-12 form-group">\r\n\t\t\t<label for="addressCompanyNameInput">Company Name</label>\r\n\t\t\t<input id="addressCompanyNameInput" type="text" class="form-control" ng-model="addressEdit.address.CompanyName"/>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row">\r\n\t\t<div class="col-sm-6 form-group">\r\n\t\t\t<label for="addressFirstNameInput">First Name</label>\r\n\t\t\t<input id="addressFirstNameInput" type="text" class="form-control" ng-model="addressEdit.address.FirstName"/>\r\n\t\t</div>\r\n\t\t<div class="col-sm-6 form-group">\r\n\t\t\t<label for="addressLastNameInput">Last Name</label>\r\n\t\t\t<input id="addressLastNameInput" type="text" class="form-control" ng-model="addressEdit.address.LastName"/>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row">\r\n\t\t<div class="col-sm-6 form-group">\r\n\t\t\t<label for="addressStreet1Input">Street 1</label>\r\n\t\t\t<input id="addressStreet1Input" type="text" class="form-control" ng-model="addressEdit.address.Street1" required/>\r\n\t\t</div>\r\n\t\t<div class="col-sm-6 form-group">\r\n\t\t\t<label for="addressStreet2Input">Street 2</label>\r\n\t\t\t<input id="addressStreet2Input" type="text" class="form-control" ng-model="addressEdit.address.Street2"/>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row">\r\n\t\t<div class="col-sm-6 form-group">\r\n\t\t\t<label for="addressCityInput">City</label>\r\n\t\t\t<input id="addressCityInput" type="text" class="form-control" ng-model="addressEdit.address.City" required/>\r\n\t\t</div>\r\n\t\t<div class="col-sm-3 form-group" ng-show="addressEdit.address.Country == \'US\' || addressEdit.address.Country == \'CA\'">\r\n\t\t\t<label for="addressStateInput">State</label>\r\n\t\t\t<select id="addressStateInput" class="form-control" ng-options="state.value as state.label for state in addressEdit.states" ng-model="addressEdit.address.State" required/>\r\n\t\t</div>\r\n\t\t<div class="col-sm-3 form-group"  ng-hide="addressEdit.address.Country == \'US\' || addressEdit.address.Country == \'CA\'">\r\n\t\t\t<label for="addressStateInput">State</label>\r\n\t\t\t<input id="addressStateInput" class="form-control" ng-model="addressEdit.address.State" required/>\r\n\t\t</div>\r\n\t\t<div class="col-sm-3 form-group">\r\n\t\t\t<label for="addressZipInput">Zip</label>\r\n\t\t\t<input id="addressZipInput" type="text" class="form-control" ng-model="addressEdit.address.Zip" required/>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="row">\r\n\t\t<div class="col-sm-6 form-group">\r\n\t\t\t<label for="addressCountryInput">Country</label>\r\n\t\t\t<select id="addressCountryInput" class="form-control" ng-options="country.value as country.label for country in addressEdit.countries" ng-model="addressEdit.address.Country" required/>\r\n\t\t</div>\r\n\t\t<div class="col-sm-6 form-group">\r\n\t\t\t<label for="addressPhoneInput">Phone Number</label>\r\n\t\t\t<input id="addressPhoneInput" type="text" class="form-control" ng-model="addressEdit.address.Phone"/>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="form-group">\r\n\t\t<button type="submit" class="btn btn-primary" ng-disabled="AddressEditForm.$invalid">Save</button>\r\n\t\t<button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n\t\t<button type="button" class="btn btn-default" ng-click="addressEdit.Delete()"><i class="fa fa-trash text-danger"></i></button>\r\n\t</div>\r\n\t<!--TODO: The Address Edit state should also include Address Assignments-->\r\n</form>\r\n'),$templateCache.put("addresses/templates/addresses.tpl.html",'<article id="COMPONENT_Addresses" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <h3>Addresses</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="AddressesSearchForm" class="form-inline" ng-submit="addresses.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search Addresses..." ng-model="addresses.parameters.search"\r\n                   class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':addresses.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="addresses.searchResults" ng-click="addresses.clearSearch()" type="button"\r\n                    class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':addresses.filtersApplied}" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n\t\t\t<button type="button" class="btn btn-default" ng-click="addresses.showFilters = !addresses.showFilters"><i\r\n                    class="fa fa-filter"></i> Filters\r\n\t\t\t</button>\r\n\t\t\t<button ng-if="addresses.filtersApplied" ng-click="addresses.clearFilters()" type="button"\r\n                    class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" uib-collapse="!addresses.showFilters">\r\n        <hr>\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':addresses.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="addresses.sortSelection"\r\n                            ng-change="addresses.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="AddressName">Name</option>\r\n                        <option value="Street1">Address</option>\r\n                    </select>\r\n                    <div ng-if="addresses.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="addresses.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <hr>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!addresses.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="addresses.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? addresses.list.Meta.ItemRange[0] : \'1\') + \' - \' +\r\n            addresses.list.Meta.ItemRange[1] + \' of \' + addresses.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover table-condensed oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="addresses.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="addresses.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="addresses.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="addresses.updateSort(\'AddressName\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="addresses.parameters.sortBy == \'AddressName\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="addresses.parameters.sortBy == \'!AddressName\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="addresses.updateSort(\'Street1\')">\r\n                        Address\r\n                        <i class="fa fa-caret-down" ng-show="addresses.parameters.sortBy == \'Street1\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="addresses.parameters.sortBy == \'!Street1\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    Phone\r\n                </th>\r\n                <th scope="col"></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="address in addresses.list.Items">\r\n                <th scope="row">{{address.ID}}</th>\r\n                <td data-title="Name">{{address.AddressName || \'---\'}}</td>\r\n                <td data-title="Address">{{address.Street1 + (address.Street2 ? (\' \' + address.Street2) : \'\')}} <br\r\n                        ng-if="application.$ocMedia(\'max-width:767px\')"> {{address.City + \', \' + address.State + \' \' +\r\n                    address.Zip}}\r\n                </td>\r\n                <td data-title="Phone">{{address.Phone || \'---\'}}</td>\r\n                <td class="actions-cell">\r\n                    <button type="button" class="btn btn-default btn-sm" ui-sref=".edit({addressid: address.ID})">Edit\r\n                    </button>\r\n                    <button type="button" class="btn btn-default btn-sm" ui-sref=".assign({addressid: address.ID})">Assign\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && addresses.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="addresses.list.Meta.TotalPages > 5" max-size="5"\r\n                            total-items="addresses.list.Meta.TotalCount" items-per-page="addresses.list.Meta.PageSize"\r\n                            ng-model="addresses.list.Meta.Page" ng-change="addresses.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="addresses.list.Meta.Page < addresses.list.Meta.TotalPages"\r\n                ng-click="addresses.loadMore()">Load More\r\n        </button>\r\n    </div>\r\n</article>\r\n'),$templateCache.put("categories/templates/categories.tpl.html",'<article id="COMPONENT_Categories" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <div class="btn-toolbar pull-right">\r\n            <button type="button" class="btn btn-success" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n            <button ui-sref=".tree" class="btn btn-default"><i class="fa fa-sitemap"></i> View Tree</button>\r\n        </div>\r\n        <h3>Categories</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="CategoriesSearchForm" class="form-inline" ng-submit="categories.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search Categories..." ng-model="categories.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':categories.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="categories.searchResults" ng-click="categories.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':categories.filtersApplied}" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n\t\t\t<button type="button" class="btn btn-default" ng-click="categories.showFilters = !categories.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n\t\t\t<button ng-if="categories.filtersApplied" ng-click="categories.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!categories.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':categories.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="categories.sortSelection" ng-change="categories.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Name">Name</option>\r\n                    </select>\r\n                    <div ng-if="categories.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="categories.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!categories.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="categories.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? categories.list.Meta.ItemRange[0] : \'1\') + \' - \' +  categories.list.Meta.ItemRange[1] + \' of \' + categories.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive" servicename="Categories" controlleras="categories">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="categories.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="categories.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="categories.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="categories.updateSort(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="categories.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="categories.parameters.sortBy == \'!Name\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="category in categories.list.Items track by $index">\r\n                <th scope="row">{{category.ID}}</th>\r\n                <td data-title="Name">{{category.Name}}</td>\r\n                <td class="actions-cell">\r\n                    <button ui-sref=".edit({categoryid: category.ID})" class="btn btn-default btn-sm">Edit</button>\r\n                    <div class="btn-group" uib-dropdown dropdown-append-to-body>\r\n                        <button type="button" class="btn btn-default btn-sm" uib-dropdown-toggle>Assign <span class="caret"></span></button>\r\n                        <ul class="dropdown-menu-right" uib-dropdown-menu role="menu">\r\n                            <li role="menuitem"><a ui-sref=".assignParty({categoryid: category.ID})">Party</a></li>\r\n                            <li role="menuitem"><a ui-sref=".assignProduct({categoryid: category.ID})">Product</a></li>\r\n                        </ul>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && categories.list.Meta.TotalPages > 1"">\r\n        <uib-pagination boundary-links="categories.list.Meta.TotalPages > 5"\r\n                        max-size="5" total-items="categories.list.Meta.TotalCount"\r\n                        items-per-page="categories.list.Meta.PageSize"\r\n                        ng-model="categories.list.Meta.Page"\r\n                        ng-change="categories.pageChanged()"></uib-pagination>\r\n    </div>\r\n    <button type="button"\r\n            ng-if="application.$ocMedia(\'max-width:767px\')"\r\n            class="btn btn-default btn-block btn-lg"\r\n            ng-show="categories.list.Meta.Page < categories.list.Meta.TotalPages"\r\n            ng-click="categories.loadMore()">Load More</button>\r\n    </div>\r\n</article>\r\n'),$templateCache.put("categories/templates/categoryAssignParty.tpl.html",'<h3 class="page-header">\r\n    Party Assignments for {{categoryAssignParty.Category.Name}}\r\n</h3>\r\n<div class="well well-lg text-center" ng-if="!categoryAssignParty.list.Items.length">\r\n    <b>The selected buyer does not have any user groups, </b>\r\n    <a type="button" ui-sref="^.groupCreate">create one now</a>\r\n</div>\r\n<ordercloud-search servicename="UserGroups" controlleras="categoryAssignParty"></ordercloud-search>\r\n<section class="table-fixed-header" ng-if="categoryAssignParty.list.Items.length">\r\n    <div class="table-header-bg"></div>\r\n    <div class="table-container" ordercloud-infinite-scroll servicename="UserGroups" controlleras="categoryAssignParty" idname="UserGroupID" disable-dynamic-validation>\r\n        <table class="table table-hover">\r\n            <colgroup>\r\n                <col class="action-column"/>\r\n            </colgroup>\r\n            <thead>\r\n            <tr>\r\n                <th>\r\n                </th>\r\n                <th>\r\n                    <div>ID</div>\r\n                </th>\r\n                <th>\r\n                    <div>Name</div>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="group in categoryAssignParty.list.Items track by $index">\r\n                <td class="text-center">\r\n                    <input name="{{\'category_assign_\' + $index}}" type="checkbox" ng-model="group.selected">\r\n                </td>\r\n                <td>{{group.ID}}</td>\r\n                <td>{{group.Name}}</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>\r\n<div class="form-group">\r\n    <button type="button" ui-sref="^" class="btn btn-default"><i class="fa fa-arrow-left"></i> Back</button>\r\n    <button type="button" ng-click="categoryAssignParty.saveAssignments()" class="btn btn-primary">Update Category Assignments</button>\r\n    <button type="button" ui-sref="^.assignProduct({categoryid: categoryAssignParty.Category.ID})" class="btn btn-default">Assign Products</button>\r\n</div>'),$templateCache.put("categories/templates/categoryAssignProduct.tpl.html",'<h3 class="page-header">\r\n    Product Assignments for {{categoryAssignProd.Category.Name}}\r\n</h3>\r\n<ordercloud-search servicename="Products" controlleras="categoryAssignProd"></ordercloud-search>\r\n<div class="well well-lg text-center" ng-if="!categoryAssignProd.list.Items.length">\r\n    <b>The selected buyer does not have any products, </b>\r\n    <a type="button" ui-sref="^.productCreate">create one now</a>\r\n</div>\r\n<section class="table-fixed-header" ng-if="categoryAssignProd.list.Items.length">\r\n    <div class="table-header-bg"></div>\r\n    <div class="table-container" ordercloud-infinite-scroll servicename="Products" controlleras="categoryAssignProd" idname="ProductID" disable-dynamic-validation>\r\n        <table class="table table-hover">\r\n            <colgroup>\r\n                <col class="action-column"/>\r\n            </colgroup>\r\n            <thead>\r\n            <tr>\r\n                <th>\r\n                </th>\r\n                <th>\r\n                    <div>ID</div>\r\n                </th>\r\n                <th>\r\n                    <div>Name</div>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="product in categoryAssignProd.list.Items track by $index">\r\n                <td class="text-center">\r\n                    <input name="{{\'product_assign_\' + $index}}"  type="checkbox" ng-model="product.selected">\r\n                </td>\r\n                <td>{{product.ID}}</td>\r\n                <td>{{product.Name}}</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>\r\n<div class="form-group">\r\n    <button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n    <button type="button" class="btn btn-primary" ng-click="categoryAssignProd.saveAssignments()">Update Product Assignments</button>\r\n    <button type="button" class="btn btn-default" ui-sref="^.assignParty({categoryid: categoryAssignProd.Category.ID})">Assign Parties</button>\r\n</div>'),$templateCache.put("categories/templates/categoryCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New Category</b>\r\n</h3>\r\n<form name="CategoryCreateForm" ng-submit="categoryCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="categoryIDInput">Category ID</label>\r\n            <input id="categoryIDInput" ordercloud-auto-id type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="categoryCreate.category.ID"/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="categoryNameInput">Category Name</label>\r\n            <input id="categoryNameInput" type="text" class="form-control" ng-model="categoryCreate.category.Name" required/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="categoryDescriptionInput">Description</label>\r\n            <textarea id="categoryDescriptionInput" type="text" class="form-control" ng-model="categoryCreate.category.Description"></textarea>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="categoryParentIDInput">Parent ID</label>\r\n            <input\r\n                    id="categoryParentIDInput"\r\n                    type="text"\r\n                    class="form-control"\r\n                    placeholder="Search"\r\n                    ng-model="categoryCreate.category.ParentID"\r\n                    uib-typeahead="category.ID as category.Name for category in categoryCreate.typeAhead($viewValue)"\r\n                    typeahead-template-url="categories/templates/parentIDtypeAhead.tpl.html"\r\n                    typeahead-on-select="catalogSearch.onSelect($item)"\r\n                    typeahead-focus-first="false"\r\n                    ng-model-options="{debounce:{\'default\':300,\'blur\':0}}"\r\n            />\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="categoryOrderInput">List Order</label>\r\n            <input id="categoryOrderInput" type="number" class="form-control" ng-model="categoryCreate.category.ListOrder"/>\r\n        </div>\r\n        <div class="col-sm-6">\r\n            <ordercloud-file-upload model="categoryCreate.category" keyname="image" label="Image"></ordercloud-file-upload>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="categoryActiveInput">\r\n                <input id="categoryActiveInput" type="checkbox" ng-model="categoryCreate.category.Active"/>\r\n                Active\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="CategoryCreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>'),$templateCache.put("categories/templates/categoryEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit Category:</b> {{categoryEdit.categoryName}}\r\n</h3>\r\n<form name="CategoryEditForm" ng-submit="categoryEdit.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="categoryIDInput">Category ID</label>\r\n            <input id="categoryIDInput" type="text" class="form-control" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="categoryEdit.category.ID" ng-required="true"/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="categoryNameInput">Category Name</label>\r\n            <input id="categoryNameInput" type="text" class="form-control" required="true" ng-model="categoryEdit.category.Name"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="categoryDescriptionInput">Description</label>\r\n            <textarea id="categoryDescriptionInput" type="text" class="form-control" ng-model="categoryEdit.category.Description"></textarea>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="categoryParentIDInput">Parent ID</label>\r\n            <input\r\n                    id="categoryParentIDInput"\r\n                    type="text"\r\n                    class="form-control"\r\n                    placeholder="Search"\r\n                    ng-model="categoryEdit.category.ParentID"\r\n                    uib-typeahead="category.ID as category.Name for category in categoryEdit.typeAhead($viewValue)"\r\n                    typeahead-template-url="categories/templates/parentIDtypeAhead.tpl.html"\r\n                    typeahead-on-select="catalogSearch.onSelect($item)"\r\n                    typeahead-focus-first="false"\r\n                    ng-model-options="{debounce:{\'default\':300,\'blur\':0}}"\r\n            />\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="categoryOrderInput">List Order</label>\r\n            <input id="categoryOrderInput" type="number" class="form-control" ng-model="categoryEdit.category.ListOrder"/>\r\n        </div>\r\n        <div class="col-sm-6">\r\n            <ordercloud-file-upload model="categoryEdit.category" keyname="image" label="Image"></ordercloud-file-upload>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="categoryActiveInput">\r\n                <input id="categoryActiveInput" type="checkbox" ng-model="categoryEdit.category.Active"/>\r\n                Active\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="CategoryEditForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n        <button type="button" class="btn btn-default" ng-click="categoryEdit.Delete()"><i class="fa fa-trash text-danger"></i></button>\r\n    </div>\r\n    </div>\r\n</form>'),$templateCache.put("categories/templates/categoryTree.tpl.html",'<div class="page-header">\r\n    <div class="btn-toolbar pull-right">\r\n        <button type="button" class="btn btn-success" ui-sref="^.create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <button ui-sref="^" class="btn btn-default"><i class="fa fa-table"></i> Category List</button>\r\n    </div>\r\n    <h3>Categories</h3>\r\n</div><script type="text/ng-template" id="nodes_renderer.html">\r\n    <div ui-tree-handle class="tree-node tree-node-content" ng-class="{\'inactive-node\':!node.Active}">\r\n        <i ng-if="node.children && node.children.length > 0" data-nodrag ng-click="toggle(this)"\r\n           class="fa"\r\n           ng-class="{\r\n              \'fa-folder\': collapsed,\r\n              \'fa-folder-open\': !collapsed\r\n           }">\r\n        </i>\r\n        <p>{{node.Name}}</p>\r\n        <a class="btn btn-default" data-nodrag ui-sref="^.edit({categoryid: node.ID})"><i class="fa fa-edit"></i> Edit</a>\r\n    </div>\r\n    <ol ui-tree-nodes ng-model="node.children" uib-collapse="collapsed">\r\n        <li ng-repeat="node in node.children" ui-tree-node ng-include="\'nodes_renderer.html\'">\r\n        </li>\r\n    </ol>\r\n</script>\r\n\r\n<section>\r\n    <div ui-tree="categoryTree.treeOptions" id="tree-root">\r\n        <ol ui-tree-nodes ng-model="categoryTree.tree">\r\n            <li ng-repeat="node in categoryTree.tree" ui-tree-node ng-include="\'nodes_renderer.html\'"></li>\r\n        </ol>\r\n    </div>\r\n</section>\r\n<section></section>\r\n'),$templateCache.put("categories/templates/parentIDtypeAhead.tpl.html",'<a>\r\n    <span ng-bind-html="match.model.ID | uibTypeaheadHighlight:query"></span>\r\n     (<span ng-bind-html="match.model.Name | uibTypeaheadHighlight:query"></span>)\r\n</a>'),$templateCache.put("catalogSearch/templates/catalogSearchDirective.popup-categories.tpl.html",'<div class="categories-popup-results">\r\n    <ul class="dropdown-menu" role="listbox">\r\n        <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }"\r\n            ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">\r\n            <div ng-if="match.model.NameType===\'Category\'" uib-typeahead-match index="$index" match="match" query="query"></div>\r\n        </li>\r\n    </ul>\r\n</div>\r\n'),$templateCache.put("catalogSearch/templates/catalogSearchDirective.popup-products.tpl.html",'<div class="products-popup-results">\r\n    <ul class="dropdown-menu" role="listbox">\r\n        <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }"\r\n            ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">\r\n            <div ng-if="match.model.NameType===\'Product\'" uib-typeahead-match index="$index" match="match" query="query" ></div>\r\n        </li>\r\n    </ul>\r\n</div>'),$templateCache.put("catalogSearch/templates/catalogSearchDirective.popup.tpl.html",'<div class="custom-popup-wrapper"\r\n     ng-show="isOpen() && !moveInProgress"\r\n     aria-hidden="{{!isOpen()}}">\r\n    <p class="popup-headers text-primary" ng-if="$parent.catalogSearch.productData.length">Products</p>\r\n    <div class="products-popup-results" ng-include="\'./catalogSearch/templates/catalogSearchDirective.popup-products.tpl.html\'"></div>\r\n    <p class="popup-headers text-primary" ng-if="$parent.catalogSearch.categoryData.length">Categories</p>\r\n    <div class="categories-popup-results" ng-include="\'./catalogSearch/templates/catalogSearchDirective.popup-categories.tpl.html\'"></div>\r\n</div>\r\n'),$templateCache.put("catalogSearch/templates/catalogSearchDirective.tpl.html",'<div id="catalogSearchbar" class="form-group">\r\n    <form name="ProductCategorySearch" ng-submit="catalogSearch.onHardEnter(catalogSearch.searchTerm)">\r\n        <div class="input-group">\r\n            <input\r\n                    type="text"\r\n                    class="form-control"\r\n                    placeholder="Search"\r\n                    ng-model="catalogSearch.searchTerm"\r\n                    uib-typeahead="item as item.Name for item in catalogSearch.popupResults($viewValue)"\r\n                    typeahead-popup-template-url="catalogSearch/templates/catalogSearchDirective.popup.tpl.html"\r\n                    typeahead-on-select="catalogSearch.onSelect($item)"\r\n                    typeahead-focus-first="false"\r\n                    ng-model-options="{debounce:{\'default\':300,\'blur\':0}}"\r\n            />\r\n            <span class="input-group-btn">\r\n                <button ng-click="catalogSearch.onHardEnter(catalogSearch.searchTerm)" class="btn btn-primary"><i\r\n                        class="fa fa-search"></i></button>\r\n            </span>\r\n        </div>\r\n    </form>\r\n</div>'),
$templateCache.put("catalogSearch/templates/catalogSearchResults.tpl.html",'<article class="container-fluid">\r\n    <h3 ng-if="catalogSearchResults.products.Items.length" class="page-header">\r\n        {{catalogSearchResults.products.Items.length > 1 ? \'Products\' : \'Product\'}}\r\n    </h3>\r\n    <div class="product-list row">\r\n        <div class="col-md-3 " ng-repeat="product in catalogSearchResults.products.Items">\r\n            <div class="product-item" ui-sref="catalog.product({productid: product.ID})">\r\n                <h3 class="item-name">{{product.Name || product.ID}}</h3>\r\n                <p class="item-id" ng-if="product.Name">{{product.ID}}</p>\r\n                <div class="thumbnail-image">\r\n                    <span class="fa-stack fa-5x" ng-if="!product.xp.image">\r\n                        <i class="fa fa-camera fa-stack-1x"></i>\r\n                        <i class="fa fa-ban fa-stack-2x text-danger"></i>\r\n                    </span>\r\n                    <div ng-if="product.xp.image">\r\n                        <img class="img-responsive" ng-src="{{product.xp.image.URL}}" alt="Product Image">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n                <ordercloud-product-quick-view product="product"></ordercloud-product-quick-view>\r\n        </div>\r\n    </div>\r\n    <h3 ng-if="catalogSearchResults.categories.Items.length" class="page-header">\r\n        {{catalogSearchResults.categories.Items.length > 1 ? \'Categories\' : \'Category\'}}\r\n    </h3>\r\n    <div class="product-list row">\r\n        <div class="col-md-3 " ng-repeat="category in catalogSearchResults.categories.Items">\r\n            <div class="product-item" ui-sref="catalog.category({categoryid: category.ID})">\r\n                <h3 class="item-name text-center">{{category.Name || category.ID}}</h3>\r\n\r\n                <div class="thumbnail-image">\r\n                     <span class="fa-stack fa-5x" ng-if="!category.xp.image">\r\n                        <i class="fa fa-camera fa-stack-1x"></i>\r\n                         <i class="fa fa-ban fa-stack-2x text-danger"></i>\r\n                    </span>\r\n                    <div>\r\n                        <img class="img-responsive" ng-src="{{category.xp.image.URL}}" alt="Category Image">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div class="well well-lg text-center" ng-if="!catalogSearchResults.categories.Items.length && !catalogSearchResults.products.Items.length">\r\n        <b><i class="fa fa-search"></i> No products or categories match your search.</b>\r\n    </div>\r\n</article>\r\n'),$templateCache.put("costCenters/templates/costCenterAssign.tpl.html",'<h3 class="page-header">\r\n    Assignments for {{costCenterAssign.CostCenter.Name}}\r\n</h3>\r\n<div class="well well-lg text-center" ng-if="!costCenterAssign.list.Items.length">\r\n    <b>The selected buyer does not have any user groups, </b>\r\n    <a type="button" ui-sref="^.groupCreate">create one now</a>\r\n</div>\r\n<ordercloud-search servicename="UserGroups" controlleras="costCenterAssign"></ordercloud-search>\r\n<section class="table-fixed-header" ng-if="costCenterAssign.list.Items.length">\r\n    <div class="table-header-bg"></div>\r\n    <div class="table-container" ordercloud-infinite-scroll servicename="UserGroups" controlleras="costCenterAssign" idname="UserGroupID" disable-dynamic-validation>\r\n        <table class="table table-hover">\r\n            <colgroup>\r\n                <col class="action-column"/>\r\n            </colgroup>\r\n            <thead>\r\n            <tr>\r\n                <th>\r\n                </th>\r\n                <th>\r\n                    <div>ID</div>\r\n                </th>\r\n                <th>\r\n                    <div>Name</div>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="group in costCenterAssign.list.Items track by $index">\r\n                <td class="text-center">\r\n                    <input name="{{\'costCenter_assign_\' + $index}}"  type="checkbox" ng-model="group.selected">\r\n                </td>\r\n                <td>\r\n                    {{group.ID}}\r\n                </td>\r\n                <td>{{group.Name}}</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>\r\n<button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n<button type="button" class="btn btn-primary" ng-click="costCenterAssign.saveAssignments()">Update Assignments</button>'),$templateCache.put("costCenters/templates/costCenterCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New Cost Center</b>\r\n</h3>\r\n<form name="CostCenterCreateForm" ng-submit="costCenterCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="costCenterIDInput">CostCenter ID</label>\r\n            <input id="costCenterIDInput" ordercloud-auto-id type="text" class="form-control" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="costCenterCreate.costCenter.ID"/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="costCenterNameInput">CostCenter Name</label>\r\n            <input id="costCenterNameInput" type="text" class="form-control" ng-model="costCenterCreate.costCenter.Name" required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-12 form-group">\r\n            <label for="costCenterDescriptionInput">Description</label>\r\n            <textarea id="costCenterDescriptionInput" type="text" class="form-control" ng-model="costCenterCreate.costCenter.Description"></textarea>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="CostCenterCreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>'),$templateCache.put("costCenters/templates/costCenterEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit Cost Center:</b> {{costCenterEdit.costCenterName}}\r\n</h3>\r\n<form name="CostCenterEditForm" ng-submit="costCenterEdit.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="CostCenterIDInput">CostCenter ID</label>\r\n            <input id="CostCenterIDInput" type="text" class="form-control" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="costCenterEdit.costCenter.ID" ng-required="true"/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="CostCenterNameInput">CostCenter Name</label>\r\n            <input id="CostCenterNameInput" type="text" class="form-control" ng-model="costCenterEdit.costCenter.Name" required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-12 form-group">\r\n            <label for="CostCenterDescriptionInput">Description</label>\r\n            <textarea id="CostCenterDescriptionInput" type="text" class="form-control" ng-model="costCenterEdit.costCenter.Description"></textarea>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="CostCenterEditForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n        <button type="button" class="btn btn-default" ng-click="costCenterEdit.Delete()"><i class="fa fa-trash text-danger"></i></button>\r\n        </div>\r\n    </div>\r\n</form>'),$templateCache.put("costCenters/templates/costCenters.tpl.html",'<article id="COMPONENT_CostCenter" class="container-fluid" ui-view>\r\n    <div class="page-header ">\r\n        <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <h3 class="">Cost Centers</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="CostCentersSearchForm" class="form-inline" ng-submit="costCenters.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search Cost Centers..." ng-model="costCenters.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':costCenters.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="costCenters.searchResults" ng-click="costCenters.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':costCenters.filtersApplied}" ng-show="application.$ocMedia(\'max-width:767px\')">\r\n\t\t\t<button type="button" class="btn btn-default" ng-click="costCenters.showFilters = !costCenters.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n\t\t\t<button ng-if="costCenters.filtersApplied" ng-click="costCenters.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!costCenters.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':costCenters.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="costCenters.sortSelection" ng-change="costCenters.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Name">Name</option>\r\n                        <option value="Description">Description</option>\r\n                    </select>\r\n                    <div ng-if="costCenters.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="costCenters.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!costCenters.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="costCenters.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? costCenters.list.Meta.ItemRange[0] : \'1\') + \' - \' +  costCenters.list.Meta.ItemRange[1] + \' of \' + costCenters.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="costCenters.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="costCenters.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="costCenters.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="costCenters.updateSort(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="costCenters.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="costCenters.parameters.sortBy == \'!Name\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="costCenters.updateSort(\'Description\')">\r\n                        Description\r\n                        <i class="fa fa-caret-down" ng-show="costCenters.parameters.sortBy == \'Description\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="costCenters.parameters.sortBy == \'!Description\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="costCenter in costCenters.list.Items" ui-sref="costCenters.edit({costcenterid: costCenter.ID})">\r\n                <th scope="row">{{costCenter.ID}}</th>\r\n                <td data-title="Name">{{costCenter.Name}}</td>\r\n                <td data-title="Description">{{costCenter.Description}}</td>\r\n                <td class="actions-cell">\r\n                    <button class="btn btn-default btn-sm">Edit</button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\')&& costCenters.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="costCenters.list.Meta.TotalPages > 5"\r\n                            max-size="5"\r\n                            total-items="costCenters.list.Meta.TotalCount"\r\n                            items-per-page="costCenters.list.Meta.PageSize"\r\n                            ng-model="costCenters.list.Meta.Page"\r\n                            ng-change="costCenters.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="costCenters.list.Meta.Page < costCenters.list.Meta.TotalPages"\r\n                ng-click="costCenters.loadMore()">Load More</button>\r\n    </div>\r\n</article>'),$templateCache.put("myOrders/templates/myOrderEdit.tpl.html",'<article class="container-fluid">\r\n    <h3 class="page-header">\r\n        <b>Edit {{myOrderEdit.order.Type}} Order:</b> {{myOrderEdit.orderID}}\r\n    </h3>\r\n    <h4>\r\n        From User: <a ui-sref="users.edit({userid: myOrderEdit.order.FromUserID})" target="_blank">{{myOrderEdit.order.FromUserID}}</a>\r\n    </h4>\r\n    <div ng-form="EditForm">\r\n        <div ng-form="GeneralOrderInfo">\r\n            <div class="row">\r\n                <div class="form-group col-sm-6">\r\n                    <label for="orderIDInput">Order ID</label>\r\n                    <input id="orderIDInput" type="text" class="form-control" ng-model="myOrderEdit.order.ID" required/>\r\n                </div>\r\n                <div class="form-group col-sm-6">\r\n                    <label for="orderCommentsInput">Order Comments</label>\r\n                    <input id="orderCommentsInput" type="text" class="form-control" ng-model="myOrderEdit.order.Comments" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default" ng-form="PaymentInfo">\r\n            <div class="panel-heading" ng-click="isCollapsedPayment = !isCollapsedPayment">\r\n                <h4 class="panel-title">\r\n                    Payments\r\n                </h4>\r\n            </div>\r\n            <div class="panel-body" uib-collapse="isCollapsedPayment">\r\n                <section class="table-fixed-header" ng-if="myOrderEdit.list.Items.length">\r\n                    <div class="row" ordercloud-infinite-scroll controlleras="myOrderEdit">\r\n                        <div class="col-sm-6 col-md-4" ng-repeat="pay in myOrderEdit.paymentList | orderBy:\'Type\' ">\r\n                            <div class="payment-item well">\r\n                                <strong>Payment Type:</strong> {{pay.Type}}<br>\r\n                                <strong>Amount:</strong> {{pay.Amount | currency}}<br>\r\n                                <div ng-if="pay.Type ===\'CreditCard\'">\r\n                                    <strong>Cardholder Name:</strong> {{pay.creditCards.CardholderName}}<br>\r\n                                    <strong> <i class="fa fa-cc-visa"></i> Ending in:</strong>\r\n                                    {{pay.creditCards.PartialAccountNumber}}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <div class="well well-lg text-center" ng-if="!myOrderEdit.list.Items.length">\r\n                    <b>This order does not have any line items</b>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading" ng-click="isCollapsedBilling = !isCollapsedBilling">\r\n                <h4 class="panel-title">\r\n                    Billing Address\r\n                </h4>\r\n            </div>\r\n            <div class="panel-body" uib-collapse="isCollapsedBilling">\r\n                <div class="row">\r\n                    <div class="col-sm-6" ng-form="BillingAddressID">\r\n                        <fieldset class="form-group">\r\n                            <label for="orderBillAddInput">Billing Address ID\r\n                                <i class="fa fa-question-circle" uib-tooltip="Updates Billing Address ID for entire Order."></i>\r\n                            </label>\r\n                            <input id="orderBillAddInput"\r\n                                name="orderBillAddInput"\r\n                                type="text"\r\n                                class="form-control"\r\n                                ng-model="myOrderEdit.order.BillingAddressID"\r\n                                uib-typeahead="address.ID as address.AddressName for address in myOrderEdit.billingAddressTypeAhead($viewValue, myOrderEdit.order.FromUserID)"/>\r\n                        </fieldset>\r\n                        <fieldset class="form-group">\r\n                            <label>Billing Address</label>\r\n                            <div class="panel panel-default">\r\n                                <div class="panel-body">\r\n                                    <p>\r\n                                        {{myOrderEdit.order.BillingAddress.AddressName}}\r\n                                        <br>{{myOrderEdit.order.BillingAddress.FirstName}} {{myOrderEdit.order.BillingAddress.LastName}}\r\n                                        <br>{{myOrderEdit.order.BillingAddress.Street1}} {{myOrderEdit.order.BillingAddress.Street2}}\r\n                                        <br>{{myOrderEdit.order.BillingAddress.City}}, {{myOrderEdit.order.BillingAddress.State}} {{myOrderEdit.order.BillingAddress.Zip}}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </fieldset>\r\n                    </div>\r\n                    <div class="col-sm-6" ng-form="CustomBillingAddress = true">\r\n                        <button type="button" class="btn btn-default btn-block" ng-click="customAddress = !customAddress">Use Custom Address</button>\r\n                        <div uib-collapse="!customAddress">\r\n                            <hr>\r\n                            <div class="well well-lg">\r\n                                <div class="row">\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderNameInput">Address Name</label>\r\n                                        <input id="orderNameInput" type="text" class="form-control" ng-model="myOrderEdit.order.BillingAddress.AddressName"/>\r\n                                    </div>\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderCompanyNameInput">Company Name</label>\r\n                                        <input id="orderCompanyNameInput" type="text" class="form-control" ng-model="myOrderEdit.order.BillingAddress.CompanyName"/>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row">\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderFirstNameInput">First Name</label>\r\n                                        <input id="orderFirstNameInput" ng-required="true" type="text" class="form-control" ng-model="myOrderEdit.order.BillingAddress.FirstName"/>\r\n                                    </div>\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderLastNameInput">Last Name</label>\r\n                                        <input id="orderLastNameInput" type="text" class="form-control" ng-model="myOrderEdit.order.BillingAddress.LastName"/>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row">\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderStreet1Input">Street 1</label>\r\n                                        <input id="orderStreet1Input" type="text" class="form-control" ng-model="myOrderEdit.order.BillingAddress.Street1"/>\r\n                                    </div>\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderStreet2Input">Street 2</label>\r\n                                        <input id="orderStreet2Input" type="text" class="form-control" ng-model="myOrderEdit.order.BillingAddress.Street2"/>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row">\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderCityInput">City</label>\r\n                                        <input id="orderCityInput" type="text" class="form-control" ng-model="myOrderEdit.order.BillingAddress.City"/>\r\n                                    </div>\r\n                                    <div class="col-sm-3 form-group">\r\n                                        <label for="orderStateInput">State</label>\r\n                                        <select id="orderStateInput" class="form-control" ng-options="state.value as state.label for state in myOrderEdit.states" ng-model="myOrderEdit.order.BillingAddress.State" required/>\r\n                                    </div>\r\n                                    <div class="col-sm-3 form-group">\r\n                                        <label for="orderZipInput">Zip</label>\r\n                                        <input id="orderZipInput" type="text" class="form-control" ng-model="myOrderEdit.order.BillingAddress.Zip"/>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row">\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderCountryInput">Country</label>\r\n                                        <select id="orderCountryInput" class="form-control" ng-options="country.value as country.label for country in myOrderEdit.countries" ng-model="myOrderEdit.order.BillingAddress.State" required/>\r\n                                    </div>\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderPhoneInput">Phone Number</label>\r\n                                        <input id="orderPhoneInput" type="text" class="form-control" ng-model="myOrderEdit.order.BillingAddress.Phone"/>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="form-group">\r\n                                    <button type="button" class="btn btn-primary" ng-click="myOrderEdit.updateBillingAddress()" ng-disabled="CustomBillingAddress.$invalid">Save</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading" ng-click="isCollapsedShipping = !isCollapsedShipping">\r\n                <h4 class="panel-title">\r\n                    Shipping Address\r\n                </h4>\r\n            </div>\r\n            <div class="panel-body" uib-collapse="isCollapsedShipping">\r\n                <div class="row">\r\n                    <div class="form-group col-sm-6" ng-form="ShippingAdddressID">\r\n                        <label for="orderShipAddInput">Shipping Address ID\r\n                            <i class="fa fa-question-circle"\r\n                               uib-tooltip="Updates the Shipping Address ID on all Line Items associated with this Order. If all Line Items associated with this Order share the same Shipping Address ID, this field\'s value will be provided. Otherwise, null."></i>\r\n                        </label>\r\n                        <input\r\n\r\n                                id="orderShipAddInput"\r\n                                type="text"\r\n                                class="form-control"\r\n                                ng-model="myOrderEdit.order.ShippingAddressID"\r\n                                uib-typeahead="address.ID as address.AddressName for address in myOrderEdit.shippingAddressTypeAhead($viewValue)"\r\n                        />\r\n                    </div>\r\n                    <div class="form-group col-sm-6" ng-form="CustomShippingAddress">\r\n                        <button type="button" class="btn btn-default btn-block"\r\n                                ng-click="customShippingAddress = !customShippingAddress">Use Custom Address\r\n                        </button>\r\n                        <div uib-collapse="!customShippingAddress">\r\n                            <hr>\r\n                            <div class="well well-lg">\r\n                                <div class="row">\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderSNameInput">Address Name</label>\r\n                                        <input id="orderSNameInput" type="text" class="form-control"\r\n                                               ng-model="myOrderEdit.ShippingAddress.AddressName"/>\r\n                                    </div>\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderSCompanyNameInput">Company Name</label>\r\n                                        <input id="orderSCompanyNameInput" type="text" class="form-control"\r\n                                               ng-model="myOrderEdit.ShippingAddress.CompanyName"/>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row">\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderSFirstNameInput">First Name</label>\r\n                                        <input id="orderSFirstNameInput" ng-required="true" type="text" class="form-control"\r\n                                               ng-model="myOrderEdit.ShippingAddress.FirstName"/>\r\n                                    </div>\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderSLastNameInput">Last Name</label>\r\n                                        <input id="orderSLastNameInput" type="text" class="form-control"\r\n                                               ng-model="myOrderEdit.ShippingAddress.LastName"/>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row">\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderSStreet1Input">Street 1</label>\r\n                                        <input id="orderSStreet1Input" type="text" class="form-control"\r\n                                               ng-model="myOrderEdit.ShippingAddress.Street1"/>\r\n                                    </div>\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderSStreet2Input">Street 2</label>\r\n                                        <input id="orderSStreet2Input" type="text" class="form-control"\r\n                                               ng-model="myOrderEdit.ShippingAddress.Street2"/>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row">\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderSCityInput">City</label>\r\n                                        <input id="orderSCityInput" type="text" class="form-control"\r\n                                               ng-model="myOrderEdit.ShippingAddress.City"/>\r\n                                    </div>\r\n                                    <div class="col-sm-3 form-group">\r\n                                        <label for="orderSStateInput">State</label>\r\n                                        <input id="orderSStateInput" type="text" class="form-control"\r\n                                               ng-model="myOrderEdit.ShippingAddress.State"/>\r\n                                    </div>\r\n                                    <div class="col-sm-3 form-group">\r\n                                        <label for="orderSZipInput">Zip</label>\r\n                                        <input id="orderSZipInput" type="text" class="form-control"\r\n                                               ng-model="myOrderEdit.ShippingAddress.Zip"/>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="row">\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderSCountryInput">Country</label>\r\n                                        <input id="orderSCountryInput" type="text" class="form-control"\r\n                                               ng-model="myOrderEdit.ShippingAddress.Country" maxlength="2"/>\r\n                                    </div>\r\n                                    <div class="col-sm-6 form-group">\r\n                                        <label for="orderSPhoneInput">Phone Number</label>\r\n                                        <input id="orderSPhoneInput" type="text" class="form-control"\r\n                                               ng-model="myOrderEdit.ShippingAddress.Phone"/>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="form-group">\r\n                                    <button type="button" class="btn btn-primary"\r\n                                            ng-click="myOrderEdit.updateShippingAddress()"\r\n                                            ng-disabled="CustomShippingAddress.$invalid">Save\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading" ng-click="isCollapsedLineItems = !isCollapsedLineItems">\r\n                <h4 class="panel-title">\r\n                    Line Items\r\n                </h4>\r\n            </div>\r\n            <div class="panel-body" uib-collapse="isCollapsedLineItems">\r\n                <section class="table-fixed-header" ng-if="myOrderEdit.list.Items.length">\r\n                    <div class="table-header-bg"></div>\r\n                    <div class="table-container" ordercloud-infinite-scroll controlleras="myOrderEdit">\r\n                        <table class="table table-hover">\r\n                            <colgroup>\r\n                                <col class="action-column"/>\r\n                            </colgroup>\r\n                            <thead>\r\n                            <tr>\r\n                                <th></th>\r\n                                <th>\r\n                                    <div>ID</div>\r\n                                </th>\r\n                                <th>\r\n                                    <div>Product ID</div>\r\n                                </th>\r\n                                <th>\r\n                                    <div>Shipping Address ID</div>\r\n                                </th>\r\n                                <th>\r\n                                    <div>Quantity</div>\r\n                                </th>\r\n                                <th>\r\n                                    <div>Unit Price</div>\r\n                                </th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody ng-form="LineItems" class="form-group">\r\n                            <tr ng-repeat="li in myOrderEdit.list.Items track by $index">\r\n                                <td class="text-center">\r\n                                   <button class="btn btn-default"><i class="fa fa-trash text-danger" ng-if="myOrderEdit.order.Status == \'Open\' || \'Unsubmitted\'" ng-click="$event.stopPropagation(); myOrderEdit.deleteLineItem(li)"></i></button>\r\n                                </td>\r\n                                <td>\r\n                                    {{li.ID}}\r\n                                </td>\r\n                                <td>\r\n                                    <a ui-sref="products.edit({productid: li.ProductID})" target="_blank">{{li.ProductID}}</a>\r\n                                </td>\r\n                                <td>\r\n                                    {{li.ShippingAddressID || li.ShippingAddress.ID}}\r\n                                </td>\r\n                                <td><input type="number" name="{{\'Quantity\' + $index}}" ng-model="li.Quantity" class="form-control" /></td>\r\n                                <td><input type="number" name="{{\'UnitPrice\' + $index}}" ng-model="li.UnitPrice" class="form-control" /></td>\r\n                            </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </section>\r\n                <div class="well well-lg text-center" ng-if="!myOrderEdit.list.Items.length">\r\n                    <b>This order does not have any line items</b>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <button type="button" class="btn btn-primary" ng-click="myOrderEdit.Submit()" ng-disabled="GeneralOrderInfo.$invalid || PaymentInformation.$invalid || LineItems.$invalid">Save</button>\r\n            <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n            <button type="button" class="btn btn-default" ng-if="myOrderEdit.order.Status == \'Open\' || \'Unsubmitted\'" ng-click="myOrderEdit.Delete()"><i class="fa fa-trash text-danger"></i></button>\r\n        </div>\r\n    </div>\r\n</article>\r\n'),
$templateCache.put("myOrders/templates/myOrders.tpl.html",'<article id="COMPONENT_MyOrders" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <h3>My Orders</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="OrdersSearchForm" class="form-inline" ng-submit="myOrders.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search order history..." ng-model="myOrders.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n            <span ng-class="{\'btn-group\':myOrders.searchResults}">\r\n                <button type="submit" class="btn btn-primary">Search</button>\r\n                <button ng-if="myOrders.searchResults" ng-click="myOrders.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n            </span>\r\n            <span ng-class="{\'btn-group\':myOrders.filtersApplied}">\r\n                <button type="button" class="btn btn-default" ng-click="myOrders.showFilters = !myOrders.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n                <button ng-if="myOrders.filtersApplied" ng-click="myOrders.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n            </span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!myOrders.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':myOrders.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="myOrders.sortSelection" ng-change="myOrders.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Status">Status</option>\r\n                        <option value="DateCreated">Date Created/Submitted</option>\r\n                    </select>\r\n                    <div ng-if="myOrders.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="myOrders.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-6">\r\n                    <div class="form-group">\r\n                        <label>Order Type</label>\r\n                        <select ng-model="myOrders.parameters.filters.type" ng-change="myOrders.filter(true)" class="form-control">\r\n                            <option value="">All</option>\r\n                            <option value="Standard">Standard</option>\r\n                            <option value="Replenishment">Replenishment</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class="col-sm-6">\r\n                    <div class="form-group">\r\n                        <label>Order Status</label>\r\n                        <select ng-model="myOrders.parameters.filters.status" ng-change="myOrders.filter(true)" class="form-control">\r\n                            <option value="">All</option>\r\n                            <option value="Open">Open</option>\r\n                            <option value="AwaitingApproval">Awaiting Approval</option>\r\n                            <option value="Completed">Completed</option>\r\n                            <option value="Declined">Declined</option>\r\n                            <option value="Cancelled">Cancelled</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="row">\r\n                <div class="col-sm-6">\r\n                    <div class="form-group">\r\n                        <label>From Date</label>\r\n                        <input ng-if="application.isTouchDevice" type="date" class="form-control" ng-blur="myOrders.filter(true)" ng-model="myOrders.parameters.from">\r\n                        <input ng-if="!application.isTouchDevice" uib-datepicker-popup datepicker-options="{maxDate:myOrders.parameters.to}" is-open="fromDate.open"  ng-change="myOrders.filter(true)" ng-click="fromDate.open = !fromDate.open" type="date" class="form-control" ng-model="myOrders.parameters.from">\r\n                    </div>\r\n                </div>\r\n                <div class="col-sm-6">\r\n                    <div class="form-group">\r\n                        <label>To Date</label>\r\n                        <input ng-if="application.isTouchDevice" type="date" class="form-control" ng-blur="myOrders.filter(true)" ng-model="myOrders.parameters.to">\r\n                        <input ng-if="!application.isTouchDevice" uib-datepicker-popup datepicker-options="{minDate:myOrders.parameters.from}" is-open="toDate.open" ng-change="myOrders.filter(true)" ng-click="toDate.open = !toDate.open" type="date" class="form-control" ng-model="myOrders.parameters.to">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!myOrders.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="myOrders.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? myOrders.list.Meta.ItemRange[0] : \'1\') + \' - \' +  myOrders.list.Meta.ItemRange[1] + \' of \' + myOrders.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="myOrders.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="myOrders.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="myOrders.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="myOrders.updateSort(\'Status\')">\r\n                        Status\r\n                        <i class="fa fa-caret-down" ng-show="myOrders.parameters.sortBy == \'Status\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="myOrders.parameters.sortBy == \'!Status\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="myOrders.updateSort(\'DateCreated\')">\r\n                        Date Created/Submitted\r\n                        <i class="fa fa-caret-down" ng-show="myOrders.parameters.sortBy == \'DateCreated\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="myOrders.parameters.sortBy == \'!DateCreated\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">Total</th>\r\n                <th></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="order in myOrders.list.Items" ui-sref="myOrders.edit({orderid: order.ID})">\r\n                <th scope="row">{{order.ID}}</th>\r\n                <td data-title="Status">{{order.Status}}</td>\r\n                <td data-title="Date Created/Submitted">{{(order.DateSubmitted ||  order.DateCreated) | date}}</td>\r\n                <td data-title="Total">{{order.Total | currency}}</td>\r\n                <td class="actions-cell">\r\n                    <button class="btn btn-default btn-sm">Edit</button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && myOrders.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="myOrders.list.Meta.TotalPages > 5"\r\n                            max-size="5" total-items="myOrders.list.Meta.TotalCount"\r\n                            items-per-page="myOrders.list.Meta.PageSize"\r\n                            ng-model="myOrders.list.Meta.Page"\r\n                            ng-change="myOrders.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="myOrders.list.Meta.Page < myOrders.list.Meta.TotalPages"\r\n                ng-click="myOrders.loadMore()">Load More</button>\r\n    </div>\r\n</article>'),$templateCache.put("checkout/templates/checkout.lineitems.tpl.html",'<div id="LineItems" class="panel panel-default">\r\n    <div class="panel-heading">\r\n        <h3 class="panel-title">\r\n            <ng-pluralize count="checkoutLI.lineItems.Meta.TotalCount" when="{\r\n\t\t\t\t\t\t\t\'1\': \'1 Item in Your Cart\',\r\n\t\t\t\t\t\t\t\'other\': \'{} Items in Your Cart\'\r\n\t\t\t\t\t\t}"></ng-pluralize>\r\n        </h3>\r\n    </div>\r\n    <div style="max-height:500px; overflow-y:auto;" ordercloud-infinite-scroll controlleras="checkoutLI">\r\n        <table class="table table-hover">\r\n            <tbody>\r\n            <colgroup>\r\n                <col style="width:100px;">\r\n                <col>\r\n                <col style="width:75px;">\r\n            </colgroup>\r\n            <tr ng-repeat-start="lineItem in checkoutLI.lineItems.Items track by $index" class="item_info">\r\n                <td>\r\n                    <form class="form-group" name="{{\'lineitem_\' + $index + \'_quantity\'}}">\r\n                        <input tabindex="{{$index + 1}}" type="number" ng-change="checkoutLI.UpdateQuantity(order, lineItem)" class="form-control text-center" ng-model="lineItem.Quantity">\r\n                    </form>\r\n                </td>\r\n                <td>\r\n                    <a href="#">{{lineItem.Product.Name}}</a><br>\r\n                    <small class="text-muted">{{lineItem.ProductID}}</small></br>\r\n                </td>\r\n                <td>\r\n                    <button ng-click="checkoutLI.RemoveItem(order, lineItem)" class="btn btn-default btn-block">\r\n                        <i class="fa fa-trash text-danger"></i>\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            <tr ng-if="lineItem.ShippingAddress">\r\n                <td colspan="3">\r\n                    <p>Shipping To:</p>\r\n                    <p>{{lineItem.ShippingAddress | address:\'full\'}}</p>\r\n                </td>\r\n            </tr>\r\n            <tr ng-repeat-end class="shipping_info">\r\n                <div ng-if="checkout.isMultipleAddressShipping">\r\n                    <td colspan="3">\r\n                        <label>Change Shipping Address:</label>\r\n                        <div class="input-group">\r\n                            <span class="input-group-addon"><i class="fa fa-truck"></i></span>\r\n                            <select required="true" ng-change="checkoutLI.UpdateShipping(order, lineItem, lineItem.ShippingAddressID);" ng-model="lineItem.ShippingAddress.ID" class="form-control" ng-options="address.ID as (address.AddressName || address.Street1) for address in addresses"></select>\r\n                            <span ng-click="checkoutLI.setCustomShipping(order, lineItem);" class="btn-success input-group-addon"><i class="fa fa-plus-circle"></i></span>\r\n                        </div>\r\n                    </td>\r\n                </div>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div class="panel-footer">\r\n        <h4>Subtotal: <span class="text-success pull-right">{{order.Subtotal | currency}}</span></h4>\r\n        <!--<div ng-if="checkoutLI.taxInformation">-->\r\n            <!--<p class="lead">Tax: <span class="text-success pull-right">{{checkoutLI.taxInformation | currency}}</span></p>-->\r\n            <!--<p class="lead">Grand Total: <span class="text-success pull-right">{{order.Subtotal + checkoutLI.taxInformation | currency}}</span></p>-->\r\n        <!--</div>-->\r\n        <!--<div ng-if="!checkoutLI.taxInformation && checkoutLI.calculatingTax">-->\r\n            <!--<p class="lead">Tax: <span class="text-muted pull-right">Calculating Tax</span></p>-->\r\n            <!--<p class="lead">Grand Total: <span class="text-success pull-right">{{order.Subtotal | currency}}</span></p>-->\r\n        <!--</div>-->\r\n    <!--</div>-->\r\n</div>'),$templateCache.put("checkout/templates/checkout.tpl.html",'<article id="COMPONENT_Checkout" class="container-fluid">\r\n\t<h3 class="page-header">\r\n\t\tCheckout\r\n\t</h3>\r\n\t<div class="row">\r\n\t\t<div class="col-sm-8">\r\n\t\t\t<nav id="checkout_nav">\r\n\t\t\t\t<ul class="nav nav-pills">\r\n\t\t\t\t\t<li role="presentation" ui-sref-active="active">\r\n\t\t\t\t\t\t<a ui-sref=".shipping">Shipping</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li role="presentation" ui-sref-active="active">\r\n\t\t\t\t\t\t<a ui-sref=".billing">Billing</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li role="presentation" ui-sref-active="active">\r\n\t\t\t\t\t\t<a ui-sref=".payment">Payment</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li role="presentation" ui-sref-active="active" ng-if="checkout.orderIsValid()">\r\n\t\t\t\t\t\t<a ng-click="checkout.checkShippingAddresses()">Confirmation</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</nav>\r\n\t\t\t<ui-view></ui-view>\r\n\t\t</div>\r\n\t\t<div class="col-sm-4">\r\n            <ordercloud-checkout-lineitems addresses="checkout.shippingAddresses" order="checkout.currentOrder"></ordercloud-checkout-lineitems>\r\n\t\t</div>\r\n\t</div>\r\n</article>'),$templateCache.put("checkout/templates/confirmation.lineitems.tpl.html",'<div class="panel panel-default">\r\n    <div class="panel-heading"><b>Line Items</b></div>\r\n    <div class="panel-body">\r\n        <div style="max-height:500px; overflow-y:auto;" ordercloud-infinite-scroll controlleras="orderConfirmation">\r\n            <table class="table table-hover">\r\n                <tbody>\r\n                    <colgroup>\r\n                        <col style="width:100px;">\r\n                        <col>\r\n                        <col style="width:75px;">\r\n                    </colgroup>\r\n                    <tr ng-repeat-start="lineItem in confirmationLI.lineItems.Items track by $index" class="item_info">\r\n                        <td>\r\n                            {{lineItem.Quantity}}\r\n                        </td>\r\n                        <td>\r\n                            <a href="#">{{lineItem.Product.Name}}</a><br>\r\n                            <small class="text-muted">{{lineItem.ProductID}}</small></br>\r\n                        </td>\r\n                    </tr>\r\n                    <tr ng-repeat-end class="shipping_info" ng-if="confirmationLI.isMultipleAddressShipping && lineItem.ShippingAddress && !order.ShippingAddressID">\r\n                        <div>\r\n                            <td colspan="3">\r\n                                <label>Shipping To:</label>\r\n                                <p>{{lineItem.ShippingAddress | address}}</p>\r\n                            </td>\r\n                        </div>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("checkout/templates/confirmation.tpl.html",'<article id="COMPONENT_Confirmation" class="container-fluid">\r\n\t<h3 class="page-header">\r\n\t\tOrder Confirmation\r\n\t</h3>\r\n    <div class="panel panel-default">\r\n        <div class="panel-heading"><b>Billing Address</b></div>\r\n        <div class="panel-body">\r\n            <div>\r\n                <p id="address_paragraph">{{orderConfirmation.currentOrder.BillingAddress | address: \'full\'}}</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="panel panel-default" ng-if="!orderConfirmation.isMultipleAddressShipping">\r\n        <div class="panel-heading"><b>Shipping Address</b></div>\r\n        <div class="panel-body">\r\n            <div>\r\n                <p id="address_paragraph">{{orderConfirmation.lineItems.Items[0].ShippingAddress | address: \'full\'}}</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="panel panel-default">\r\n        <div class="panel-heading"><b>Payment Information</b></div>\r\n        <div class="panel-body">\r\n            <div ng-repeat="payment in orderConfirmation.orderPayments">\r\n                <div ng-if="payment.Type == \'CreditCard\'">\r\n                    <p>Cardholder Name: {{orderConfirmation.orderPayments[$index].creditCardDetails.CardholderName}}</p>\r\n                    <p><i class="fa fa-2x"\r\n                          ng-class="{\'fa-cc-visa\': orderConfirmation.orderPayments[$index].creditCardDetails.CardType == \'Visa\',\r\n                          \'fa-cc-mastercard\': orderConfirmation.orderPayments[$index].creditCardDetails.CardType == \'Master Card\',\r\n                          \'fa-cc-amex\': orderConfirmation.orderPayments[$index].creditCardDetails.CardType == \'American Expresss\',\r\n                          \'fa-cc-discover\': orderConfirmation.orderPayments[$index].creditCardDetails.CardType == \'Discover\'}">\r\n                    </i>\r\n                        ending in {{orderConfirmation.orderPayments[$index].creditCardDetails.PartialAccountNumber}}</p>\r\n                </div>\r\n                <div ng-if="payment.Type == \'SpendingAccount\'">\r\n                    Spending Account ID: {{orderConfirmation.orderPayments[$index].spendingAccountDetails.Name}}\r\n                </div>\r\n                <div ng-if="payment.Type == \'PurchaseOrder\'">\r\n                    Purchase Order\r\n                    <span ng-if="payment.xp.PONumber">\r\n                       : {{orderConfirmation.orderPayments[$index].xp.PONumber}}\r\n                    </span>\r\n                </div>\r\n                <!--<div>-->\r\n                <!--Subtotal: {{orderConfirmation.currentOrder.Subtotal | currency}}-->\r\n                <!--</div>-->\r\n                <!--<div ng-if="orderConfirmation.currentOrder.xp.taxInfo">-->\r\n                <!--Tax: {{orderConfirmation.currentOrder.xp.taxInfo | currency}}-->\r\n                <!--</div>-->\r\n                Amount: {{payment.Amount | currency}}\r\n                <hr>\r\n            </div>\r\n            <div>\r\n                Total: {{orderConfirmation.currentOrder.Subtotal | currency}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <ordercloud-confirmation-lineitems order="orderConfirmation.currentOrder"></ordercloud-confirmation-lineitems>\r\n    <div class="form-group pull-right">\r\n        <button class="btn btn-default" ui-sref="checkout.shipping">Back</button>\r\n        <button class="btn btn-primary" ng-click="orderConfirmation.submitOrder()">Submit Order</button>\r\n    </div>\r\n</article>'),$templateCache.put("checkout/templates/review.tpl.html",'<article id="COMPONENT_OrderReview" class="container-fluid">\r\n    <div class="order-review-header">\r\n\t    <h3 class="page-header">\r\n\t\t    Order Review\r\n\t    </h3>\r\n        <div class="hidden-print form-group">\r\n            <button class="btn btn-default" ng-click="orderReview.print()">Print</button>\r\n            <button class="btn btn-info" ng-click="orderReview.removeFromFavorites()" ng-if="orderReview.submittedOrder.xp.favorite">\r\n                <i class="fa fa-star"> </i> Remove from Favorites\r\n            </button>\r\n            <button class="btn btn-primary" ng-click="orderReview.addToFavorites()" ng-if="!(orderReview.submittedOrder.xp.favorite)">\r\n                <i class="fa fa-star"> </i> Favorite This Order\r\n            </button>\r\n        </div>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading"><b>Billing Address</b></div>\r\n            <div class="panel-body">\r\n                <div>\r\n                    <p id="address_paragraph">{{orderReview.submittedOrder.BillingAddress | address: \'full\'}}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default" ng-if="orderReview.submittedOrder.ShippingAddressID">\r\n            <div class="panel-heading"><b>Shipping Address</b></div>\r\n            <div class="panel-body">\r\n                <div>\r\n                    <p id="address_paragraph">{{orderReview.LineItems.Items[0].ShippingAddress | address: \'full\'}}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading"><b>Payment Information</b></div>\r\n            <div class="panel-body">\r\n                <div ng-repeat="payment in orderReview.orderPayments">\r\n                    <div ng-if="payment.Type == \'CreditCard\'">\r\n                        <p>Cardholder Name: {{orderReview.orderPayments[$index].creditCardDetails.CardholderName}}</p>\r\n                        <p><i class="fa fa-2x"\r\n                              ng-class="{\'fa-cc-visa\': orderReview.orderPayments[$index].creditCardDetails.CardType == \'Visa\',\r\n                          \'fa-cc-mastercard\': orderReview.orderPayments[$index].creditCardDetails.CardType == \'Master Card\',\r\n                          \'fa-cc-amex\': orderReview.orderPayments[$index].creditCardDetails.CardType == \'American Expresss\',\r\n                          \'fa-cc-discover\': orderReview.orderPayments[$index].creditCardDetails.CardType == \'Discover\'}">\r\n                        </i>\r\n                            ending in {{orderReview.orderPayments[$index].creditCardDetails.PartialAccountNumber}}</p>\r\n                    </div>\r\n                    <div ng-if="payment.Type == \'SpendingAccount\'">\r\n                        Spending Account ID: {{orderReview.orderPayments[$index].spendingAccountDetails.Name}}\r\n                    </div>\r\n                    <div ng-if="payment.Type == \'PurchaseOrder\'">\r\n                        Purchase Order\r\n                        <span ng-if="payment.xp.PONumber">\r\n                         : {{orderReview.orderPayments[$index].xp.PONumber}}\r\n                        </span>\r\n                    </div>\r\n                    <!--<div>-->\r\n                    <!--Subtotal: {{orderConfirmation.currentOrder.Subtotal | currency}}-->\r\n                    <!--</div>-->\r\n                    <!--<div ng-if="orderConfirmation.currentOrder.xp.taxInfo">-->\r\n                    <!--Tax: {{orderConfirmation.currentOrder.xp.taxInfo | currency}}-->\r\n                    <!--</div>-->\r\n                    Amount: {{payment.Amount | currency}}\r\n                    <hr>\r\n                </div>\r\n                <div>\r\n                    Total: {{orderReview.submittedOrder.Total | currency}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading"><b>Line Items</b></div>\r\n            <div class="panel-body">\r\n                <div>\r\n                    <table class="table table-hover">\r\n                        <tbody>\r\n                        <colgroup>\r\n                            <col style="width:100px;">\r\n                            <col>\r\n                            <col style="width:75px;">\r\n                        </colgroup>\r\n                        <tr ng-repeat-start="lineItem in orderReview.LineItems.Items track by $index" class="item_info">\r\n                            <td>\r\n                                {{lineItem.Quantity}}\r\n                            </td>\r\n                            <td>\r\n                                <a href="#">{{lineItem.Product.Name}}</a><br>\r\n                                <small class="text-muted">{{lineItem.ProductID}}</small></br>\r\n                            </td>\r\n                        </tr>\r\n                        <tr ng-repeat-end class="shipping_info" ng-if="!orderReview.submittedOrder.ShippingAddressID">\r\n                            <div>\r\n                                <td colspan="3">\r\n                                    <label>Shipping To:</label>\r\n                                    <p>{{lineItem.ShippingAddress | address}}</p>\r\n                                </td>\r\n                            </div>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n</article>'),$templateCache.put("orders/templates/orders.detail.lineItem.tpl.html",'<h3 class="page-header">\r\n    <b>Line Item - {{ordersDetailLineItem.lineItem.ID}}</b>\r\n</h3>\r\n<form name="OrdersDetailLineItemForm" class="form-horizontal">\r\n    <div class="form-group">\r\n        <label class="col-sm-1">Product ID:</label>\r\n        <div class="col-sm-11">\r\n            {{ordersDetailLineItem.lineItem.Product.ID}}\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <label class="col-sm-1">Product Name:</label>\r\n        <div class="col-sm-11">\r\n            {{ordersDetailLineItem.lineItem.Product.Name}}\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <label class="col-sm-1">Unit Price:</label>\r\n        <div class="col-sm-11">\r\n            {{ordersDetailLineItem.lineItem.UnitPrice | currency}}\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <label class="col-sm-1">Quantity:</label>\r\n        <div class="col-sm-11">\r\n            {{ordersDetailLineItem.lineItem.Quantity}}\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <label class="col-sm-1">Price:</label>\r\n        <div class="col-sm-11">\r\n            {{ordersDetailLineItem.lineItem.LineTotal | currency}}\r\n        </div>\r\n    </div>\r\n    <div class="form-group" ng-if="ordersDetailLineItem.lineItem.Specs.length">\r\n        <label class="col-sm-1">Specs:</label>\r\n        <div class="col-sm-11">\r\n            <div class="form-group" ng-repeat="spec in ordersDetailLineItem.lineItem.Specs" ng-if="spec.Value">\r\n                <span class="col-sm-1">{{spec.Name}}:</span>\r\n                <div class="col-sm-11">\r\n                    {{spec.Value}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="form-group" ng-if="ordersDetailLineItem.lineItem.ShippingAddress">\r\n        <label class="col-sm-1">Ship To:</label>\r\n        <div class="col-sm-11">\r\n            <span ng-if="ordersDetailLineItem.lineItem.ShippingAddress.CompanyName">{{ordersDetailLineItem.lineItem.ShippingAddress.CompanyName}}<br /></span>\r\n            <span ng-if="ordersDetailLineItem.lineItem.ShippingAddress.FirstName || ordersDetailLineItem.lineItem.ShippingAddress.LastName">{{ordersDetailLineItem.lineItem.ShippingAddress.FirstName + \' \' + ordersDetailLineItem.lineItem.ShippingAddress.LastName}}<br /></span>\r\n            <span>{{ordersDetailLineItem.lineItem.ShippingAddress.Street1}}<br /></span>\r\n            <span ng-if="ordersDetailLineItem.lineItem.ShippingAddress.Street2">{{ordersDetailLineItem.lineItem.ShippingAddress.Street2}}<br /></span>\r\n            <span>{{ordersDetailLineItem.lineItem.ShippingAddress.City + \', \' + ordersDetailLineItem.lineItem.ShippingAddress.State + \' \' + ordersDetailLineItem.lineItem.ShippingAddress.Zip}}<br /></span>\r\n        </div>\r\n    </div>\r\n    <button type="button" class="btn btn-default" ui-sref="^">Back to Order</button>\r\n</form>'),$templateCache.put("orders/templates/orders.detail.tpl.html",'<ui-view>\r\n    <h3 class="page-header">\r\n        <b>{{ordersDetail.order.Type}} Order - {{ordersDetail.order.ID}}</b>\r\n    </h3>\r\n    <form name="OrderHistoryDetailForm" class="form-horizontal">\r\n        <div class="group-input">\r\n            <div class="toggle-favorites-button">\r\n                <button class="btn btn-info" ng-click="ordersDetail.removeFromFavorites()" ng-if="ordersDetail.order.xp.favorite">\r\n                    <i class="fa fa-star"> </i> Remove from Favorites\r\n                </button>\r\n                <button class="btn btn-primary" ng-click="ordersDetail.addToFavorites()" ng-if="!(ordersDetail.order.xp.favorite)">\r\n                    <i class="fa fa-star"> </i> Add To Favorites\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-sm-1">Order ID:</label>\r\n            <div class="col-sm-11">\r\n                {{ordersDetail.order.ID}}\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-sm-1">Date {{ordersDetail.order.DateSubmitted ? \'Submitted\' : \'Created\'}}:</label>\r\n            <div class="col-sm-11">\r\n                {{(ordersDetail.order.DateSubmitted || ordersDetail.order.DateCreated) | date:\'medium\'}}\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-sm-1">Created By:</label>\r\n            <div class="col-sm-11">\r\n                {{ordersDetail.order.FromUserFirstName + \' \' + ordersDetail.order.FromUserLastName}}\r\n            </div>\r\n        </div>\r\n        <div class="form-group" ng-if="ordersDetail.order.PaymentMethod">\r\n            <label class="col-sm-1">Payment Method:</label>\r\n            <div class="col-sm-11">\r\n                {{ordersDetail.order.PaymentMethod | paymentmethods}}\r\n            </div>\r\n        </div>\r\n        <div class="form-group" ng-if="[\'CreditCard\', \'SpendingAccount\'].indexOf(ordersDetail.order.PaymentMethod) > -1">\r\n            <label class="col-sm-1">{{ordersDetail.order.PaymentMethod == \'CreditCard\' ? \'Credit Card\' : \'Spending Account\'}}:</label>\r\n            <div class="col-sm-11">\r\n                {{ordersDetail.order.PaymentMethod == \'CreditCard\' ? (ordersDetail.order.CreditCard.CardType + \' \' + ordersDetail.order.CreditCard.PartialAccountNumber) : ordersDetail.order.SpendingAccount.Name}}\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-sm-1">Status:</label>\r\n            <div class="col-sm-11">\r\n                {{ordersDetail.order.Status}}\r\n            </div>\r\n        </div>\r\n        <div class="form-group" ng-if="ordersDetail.order.BillingAddress">\r\n            <label class="col-sm-1">Bill To:</label>\r\n            <div class="col-sm-11">\r\n                <span ng-if="ordersDetail.order.BillingAddress.CompanyName">{{ordersDetail.order.BillingAddress.CompanyName}}<br /></span>\r\n                <span ng-if="ordersDetail.order.BillingAddress.FirstName || ordersDetail.order.BillingAddress.LastName">{{ordersDetail.order.BillingAddress.FirstName + \' \' + ordersDetail.order.BillingAddress.LastName}}<br /></span>\r\n                <span>{{ordersDetail.order.BillingAddress.Street1}}<br /></span>\r\n                <span ng-if="ordersDetail.order.BillingAddress.Street2">{{ordersDetail.order.BillingAddress.Street2}}<br /></span>\r\n                <span>{{ordersDetail.order.BillingAddress.City + \', \' + ordersDetail.order.BillingAddress.State + \' \' + ordersDetail.order.BillingAddress.Zip}}<br /></span>\r\n            </div>\r\n        </div>\r\n        <div class="form-group" ng-if="ordersDetail.order.ShippingAddress">\r\n            <label class="col-sm-1">Ship To:</label>\r\n            <div class="col-sm-11">\r\n                <span ng-if="ordersDetail.order.ShippingAddress.CompanyName">{{ordersDetail.order.ShippingAddress.CompanyName}}<br /></span>\r\n                <span ng-if="ordersDetail.order.ShippingAddress.FirstName || ordersDetail.order.ShippingAddress.LastName">{{ordersDetail.order.ShippingAddress.FirstName + \' \' + ordersDetail.order.ShippingAddress.LastName}}<br /></span>\r\n                <span>{{ordersDetail.order.ShippingAddress.Street1}}<br /></span>\r\n                <span ng-if="ordersDetail.order.ShippingAddress.Street2">{{ordersDetail.order.ShippingAddress.Street2}}<br /></span>\r\n                <span>{{ordersDetail.order.ShippingAddress.City + \', \' + ordersDetail.order.ShippingAddress.State + \' \' + ordersDetail.order.ShippingAddress.Zip}}<br /></span>\r\n            </div>\r\n        </div>\r\n        <div class="form-group" ng-if="ordersDetail.order.CostCenter">\r\n            <label class="col-sm-1">Cost Center:</label>\r\n            <div class="col-sm-11">\r\n                {{ordersDetail.order.CostCenter}}\r\n            </div>\r\n        </div>\r\n        <div class="form-group" ng-if="ordersDetail.order.Comments">\r\n            <label class="col-sm-1">Comments:</label>\r\n            <div class="col-sm-11">\r\n                {{ordersDetail.order.Comments}}\r\n            </div>\r\n        </div>\r\n        <div ng-if="ordersDetail.order.LineItems.length">\r\n            <section class="table-fixed-header">\r\n                <div class="table-header-bg"></div>\r\n                <div class="table-container" ordercloud-infinite-scroll controlleras="orderEdit">\r\n                    <table class="table table-hover">\r\n                        <colgroup>\r\n                            <col class="action-column"/>\r\n                        </colgroup>\r\n                        <thead>\r\n                        <tr>\r\n                            <th>\r\n                                <div>ID</div>\r\n                            </th>\r\n                            <th>\r\n                                <div>Product</div>\r\n                            </th>\r\n                            <th>\r\n                                <div>Unit Price</div>\r\n                            </th>\r\n                            <th>\r\n                                <div>Quantity</div>\r\n                            </th>\r\n                            <th>\r\n                                <div>Price</div>\r\n                            </th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <tr ng-repeat="li in ordersDetail.order.LineItems track by $index">\r\n                            <td>\r\n                                <a ui-sref="orders.detail.lineItem({lineitemid: li.ID})">{{li.ID}}</a>\r\n                            </td>\r\n                            <td>\r\n                                {{li.Product.Name}}\r\n                            </td>\r\n                            <td>{{li.UnitPrice | currency}}</td>\r\n                            <td>{{li.Quantity}}</td>\r\n                            <td>{{li.LineTotal | currency}}</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <div class="well well-lg text-center" ng-if="!ordersDetail.order.LineItems.length">\r\n            <b>This order does not have any line items</b>\r\n        </div>\r\n        <div class="form-group">\r\n            <span class="col-sm-2">Subtotal:</span>\r\n            <div class="col-sm-10">\r\n                {{ordersDetail.order.Subtotal | currency}}\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <span class="col-sm-2">Estimated Shipping & Handling:</span>\r\n            <div class="col-sm-10">\r\n                {{ordersDetail.order.ShippingCost | currency}}\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <span class="col-sm-2">Tax:</span>\r\n            <div class="col-sm-10">\r\n                {{ordersDetail.order.TaxCost | currency}}\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <label class="col-sm-2">Total:</label>\r\n            <div class="col-sm-10">\r\n                {{ordersDetail.order.Total | currency}}\r\n            </div>\r\n        </div>\r\n        <button type="button" class="btn btn-default" ui-sref="orders">Back to List</button>\r\n    </form>\r\n</ui-view>'),
$templateCache.put("orders/templates/orders.tpl.html",'<article id="COMPONENT_Orders" class="container-fluid" ui-view>\r\n\t<h3 class="page-header">Orders</h3>\r\n\r\n\t<!--====== SEARCH/FILTERS ======-->\r\n\t<form name="OrdersSearchForm" class="form-inline" ng-submit="orders.search()">\r\n\t\t<fieldset class="form-group">\r\n\t\t\t<input type="search" placeholder="Search orders..." ng-model="orders.parameters.search" class="form-control">\r\n\t\t</fieldset>\r\n\t\t<fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':orders.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="orders.searchResults" ng-click="orders.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':orders.filtersApplied}">\r\n\t\t\t<button type="button" class="btn btn-default" ng-click="orders.showFilters = !orders.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n\t\t\t<button ng-if="orders.filtersApplied" ng-click="orders.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t</fieldset>\r\n\t</form>\r\n\t<div class="row" style="margin-top:15px;" uib-collapse="!orders.showFilters">\r\n\t\t<div class="col-md-6 col-lg-4">\r\n\t\t\t<div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n\t\t\t\t<label>Sort By:</label>\r\n\t\t\t\t<div ng-class="{\'input-group\':orders.sortSelection}">\r\n\t\t\t\t\t<select placeholder="Sort" class="form-control" ng-model="orders.sortSelection" ng-change="orders.updateSort()">\r\n\t\t\t\t\t\t<option value="">None</option>\r\n\t\t\t\t\t\t<option value="ID">ID</option>\r\n\t\t\t\t\t\t<option value="Status">Status</option>\r\n\t\t\t\t\t\t<option value="DateCreated">Date Created/Submitted</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<div ng-if="orders.sortSelection" class="input-group-btn">\r\n\t\t\t\t\t\t<button class="btn btn-default" ng-click="orders.reverseSort()">\r\n\t\t\t\t\t\t\t<i class="fa fa-sort"></i>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-sm-6">\r\n\t\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t\t<label>Order Type</label>\r\n\t\t\t\t\t\t<select ng-model="orders.parameters.filters.type" ng-change="orders.filter(true)" class="form-control">\r\n\t\t\t\t\t\t\t<option value="">All</option>\r\n\t\t\t\t\t\t\t<option value="Standard">Standard</option>\r\n\t\t\t\t\t\t\t<option value="Replenishment">Replenishment</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="col-sm-6">\r\n\t\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t\t<label>Order Status</label>\r\n\t\t\t\t\t\t<select ng-model="orders.parameters.filters.status" ng-change="orders.filter(true)" class="form-control">\r\n\t\t\t\t\t\t\t<option value="">All</option>\r\n\t\t\t\t\t\t\t<option value="Open">Open</option>\r\n\t\t\t\t\t\t\t<option value="AwaitingApproval">Awaiting Approval</option>\r\n\t\t\t\t\t\t\t<option value="Completed">Completed</option>\r\n\t\t\t\t\t\t\t<option value="Declined">Declined</option>\r\n\t\t\t\t\t\t\t<option value="Cancelled">Cancelled</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="col-md-6 col-lg-4">\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-sm-6">\r\n\t\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t\t<label>From Date</label>\r\n\t\t\t\t\t\t<input ng-if="application.isTouchDevice" type="date" class="form-control" ng-blur="orders.filter(true)" ng-model="orders.parameters.from">\r\n\t\t\t\t\t\t<input ng-if="!application.isTouchDevice" uib-datepicker-popup datepicker-options="{maxDate:orders.parameters.to}" is-open="fromDate.open"  ng-change="orders.filter(true)" ng-click="fromDate.open = !fromDate.open" type="date" class="form-control" ng-model="orders.parameters.from">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="col-sm-6">\r\n\t\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t\t<label>To Date</label>\r\n\t\t\t\t\t\t<input ng-if="application.isTouchDevice" type="date" class="form-control" ng-blur="orders.filter(true)" ng-model="orders.parameters.to">\r\n\t\t\t\t\t\t<input ng-if="!application.isTouchDevice" uib-datepicker-popup datepicker-options="{minDate:orders.parameters.from}" is-open="toDate.open" ng-change="orders.filter(true)" ng-click="toDate.open = !toDate.open" type="date" class="form-control" ng-model="orders.parameters.to">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<!--====== LIST ======-->\r\n\t<div class="well text-center" ng-if="!orders.list.Items.length">\r\n\t\t<b>No matches found.</b>\r\n\t</div>\r\n\t<div ng-if="orders.list.Items.length">\r\n\t\t<b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? orders.list.Meta.ItemRange[0] : \'1\') + \' - \' +  orders.list.Meta.ItemRange[1] + \' of \' + orders.list.Meta.TotalCount + \' results\'}}</b>\r\n\t\t<table class="table table-hover oc-table-responsive">\r\n\t\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<th scope="col">\r\n\t\t\t\t\t<a href="#" role="button" ng-click="orders.updateSort(\'ID\')">\r\n\t\t\t\t\t\tID\r\n\t\t\t\t\t\t<i class="fa fa-caret-down" ng-show="orders.parameters.sortBy == \'ID\'"></i>\r\n\t\t\t\t\t\t<i class="fa fa-caret-up" ng-show="orders.parameters.sortBy == \'!ID\'"></i>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</th>\r\n\t\t\t\t<th scope="col">\r\n\t\t\t\t\t<a href="#" role="button" ng-click="orders.updateSort(\'Status\')">\r\n\t\t\t\t\t\tStatus\r\n\t\t\t\t\t\t<i class="fa fa-caret-down" ng-show="orders.parameters.sortBy == \'Status\'"></i>\r\n\t\t\t\t\t\t<i class="fa fa-caret-up" ng-show="orders.parameters.sortBy == \'!Status\'"></i>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</th>\r\n\t\t\t\t<th scope="col">\r\n\t\t\t\t\t<a href="#" role="button" ng-click="orders.updateSort(\'DateCreated\')">\r\n\t\t\t\t\t\tDate Created/Submitted\r\n\t\t\t\t\t\t<i class="fa fa-caret-down" ng-show="orders.parameters.sortBy == \'DateCreated\'"></i>\r\n\t\t\t\t\t\t<i class="fa fa-caret-up" ng-show="orders.parameters.sortBy == \'!DateCreated\'"></i>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</th>\r\n\t\t\t\t<th scope="col">Total</th>\r\n\t\t\t\t<th></th>\r\n\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t<tr ng-repeat="order in orders.list.Items" ui-sref="orders.detail({orderid: order.ID})">\r\n\t\t\t\t<th scope="row">{{order.ID}}</th>\r\n\t\t\t\t<td data-title="Status">{{order.Status}}</td>\r\n\t\t\t\t<td data-title="Date Created/Submitted">{{(order.DateSubmitted ||  order.DateCreated) | date}}</td>\r\n\t\t\t\t<td data-title="Total">{{order.Total | currency}}</td>\r\n\t\t\t\t<td class="actions-cell">\r\n\t\t\t\t\t<button ui-sref="orders.detail({orderid: order.ID})" class="btn btn-default btn-sm">View</button>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t\t<div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && orders.list.Meta.TotalPages > 1">\r\n\t\t\t<uib-pagination boundary-links="orders.list.Meta.TotalPages > 5"\r\n\t\t\t\t\t\t\tmax-size="5" total-items="orders.list.Meta.TotalCount"\r\n\t\t\t\t\t\t\titems-per-page="orders.list.Meta.PageSize"\r\n\t\t\t\t\t\t\tng-model="orders.list.Meta.Page"\r\n\t\t\t\t\t\t\tng-change="orders.pageChanged()"></uib-pagination>\r\n\t\t</div>\r\n\t\t<button type="button"\r\n\t\t\t\tng-if="application.$ocMedia(\'max-width:767px\')"\r\n\t\t\t\tclass="btn btn-default btn-block btn-lg"\r\n\t\t\t\tng-show="orders.list.Meta.Page < orders.list.Meta.TotalPages"\r\n\t\t\t\tng-click="orders.loadMore()">Load More</button>\r\n\t</div>\r\n</article>'),$templateCache.put("expressCheckout/templates/expressCheckout.tpl.html",'<article id="COMPONENT_ExpressCheckout" class="container-fluid">\r\n    <h3 class="page-header">\r\n        Express Checkout\r\n    </h3>\r\n    <form name="expressCheckoutForm" ng-submit="expressCheckout.submitOrder()" novalidate>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading"><b>Billing Address</b></div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <select id="billing_address" ng-required="true" name="BillingAddress" ng-change="expressCheckout.saveBillAddress();" ng-model="expressCheckout.currentOrder.BillingAddressID" class="form-control" ng-options="address.ID as (address.AddressName || address.Street1) for address in expressCheckout.billingAddresses"></select>\r\n                </div>\r\n                <div>\r\n                    <p ng-if="expressCheckout.currentOrder.BillingAddress" id="address_paragraph">{{expressCheckout.currentOrder.BillingAddress | address: \'full\'}}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading"><b>Shipping Address</b></div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <select id="shipping_address" ng-required="true" name="ShippingAddress" ng-change="expressCheckout.saveShipAddress();" ng-model="expressCheckout.currentOrder.ShippingAddressID" class="form-control" ng-options="address.ID as (address.AddressName || address.Street1) for address in expressCheckout.shippingAddresses"></select>\r\n                </div>\r\n                <div>\r\n                    <p ng-if="expressCheckout.currentOrder.ShippingAddressID" id="address_paragraph">{{expressCheckout.currentOrder.lineItems[0].ShippingAddress | address: \'full\'}}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading"><b>Payment Information</b></div>\r\n            <div class="panel-body">\r\n                <div class="form-group">\r\n                    <label for="payment_method">Payment Method</label>\r\n                    <select id="payment_method" required="true" ng-change="expressCheckout.setPaymentMethod(expressCheckout.currentOrder)" class="form-control" ng-model="expressCheckout.orderPayments[0].Type" ng-options="paymentMethod.Value as paymentMethod.Display for paymentMethod in expressCheckout.paymentMethods"></select>\r\n                    <div ng-if="expressCheckout.orderPayments[0].Type == \'CreditCard\'">\r\n                        <label for="credit_card">Credit Card</label>\r\n                        <select id="credit_card" ng-required="expressCheckout.orderPayments[0].Type == \'CreditCard\'" ng-change="expressCheckout.setCreditCard(expressCheckout.currentOrder)" class="form-control" ng-model="expressCheckout.orderPayments[0].CreditCardID" ng-options="creditCard.ID as (\'XXXX-XXXX-XXXX-\' + creditCard.PartialAccountNumber) for creditCard in expressCheckout.creditCards.Items"></select>\r\n                        </br>\r\n                        <p ng-if="expressCheckout.creditCardDetails.CardholderName">Cardholder Name: {{expressCheckout.creditCardDetails.CardholderName}}</p>\r\n                        <p ng-if="expressCheckout.creditCardDetails.PartialAccountNumber"><i class="fa fa-cc-visa fa-2x"></i> ending in {{expressCheckout.creditCardDetails.PartialAccountNumber}}</p>\r\n                    </div>\r\n                    <div ng-if="expressCheckout.orderPayments[0].Type == \'SpendingAccount\'">\r\n                        <label for="spending_account">Spending Account</label>\r\n                        <select id="spending_account" ng-required="expressCheckout.orderPayments[0].Type == \'SpendingAccount\'" ng-change="expressCheckout.setSpendingAccount(expressCheckout.currentOrder)" class="form-control" ng-model="expressCheckout.orderPayments[0].SpendingAccountID" ng-options="spendingAccount.ID as spendingAccount.Name for spendingAccount in expressCheckout.spendingAccounts.Items"></select>\r\n                    </div>\r\n                    <div ng-if="expressCheckout.orderPayments[0].Type == \'PurchaseOrder\'">\r\n                        <label for="poNumber">PO Number</label>\r\n                        <div class="input-group">\r\n                            <input id="poNumber" class="form-control" type="text" ng-model="expressCheckout.orderPayments[0].xp.PONumber"/>\r\n                            <span class="input-group-btn"><button type="button" class="btn btn-success" ng-click="expressCheckout.savePONumber(expressCheckout.currentOrder)"><i class="fa fa-plus"></i> </button></span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <ordercloud-confirmation-lineitems order="expressCheckout.currentOrder"></ordercloud-confirmation-lineitems>\r\n        <div class="form-group pull-right">\r\n            <button class="btn btn-default" ui-sref="catalog">Continue Shopping</button>\r\n            <button class="btn btn-primary" type="submit" ng-disabled="expressCheckoutForm.$invalid">Submit Order</button>\r\n        </div>\r\n    </form>\r\n</article>'),$templateCache.put("expressCheckout/templates/expressCheckoutReview.tpl.html",'<article id="COMPONENT_ExpressCheckoutReview" class="container-fluid">\r\n    <div class="order-review-header">\r\n        <h3 class="page-header">\r\n            Order Review\r\n        </h3>\r\n        <div class="hidden-print form-group">\r\n            <button class="btn btn-default" ng-click="expressOrderReview.print()">Print</button>\r\n            <button class="btn btn-info" ng-click="expressOrderReview.removeFromFavorites()" ng-if="expressOrderReview.submittedOrder.xp.favorite">\r\n                <i class="fa fa-star"> </i> Remove from Favorites\r\n            </button>\r\n            <button class="btn btn-primary" ng-click="expressOrderReview.addToFavorites()" ng-if="!(expressOrderReview.submittedOrder.xp.favorite)">\r\n                <i class="fa fa-star"> </i> Favorite This Order\r\n            </button>\r\n        </div>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading"><b>Billing Address</b></div>\r\n            <div class="panel-body">\r\n                <div>\r\n                    <p id="address_paragraph">{{expressOrderReview.submittedOrder.BillingAddress | address: \'full\'}}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default" ng-if="expressOrderReview.submittedOrder.ShippingAddressID">\r\n            <div class="panel-heading"><b>Shipping Address</b></div>\r\n            <div class="panel-body">\r\n                <div>\r\n                    <p id="address_paragraph">{{expressOrderReview.LineItems.Items[0].ShippingAddress | address: \'full\'}}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading"><b>Payment Information</b></div>\r\n            <div class="panel-body">\r\n                <div ng-repeat="payment in expressOrderReview.orderPayments">\r\n                    <div ng-if="payment.Type == \'CreditCard\'">\r\n                        <p>Cardholder Name: {{expressOrderReview.orderPayments[$index].creditCardDetails.CardholderName}}</p>\r\n                        <p><i class="fa fa-2x"\r\n                              ng-class="{\'fa-cc-visa\': expressOrderReview.orderPayments[$index].creditCardDetails.CardType == \'Visa\',\r\n                          \'fa-cc-mastercard\': expressOrderReview.orderPayments[$index].creditCardDetails.CardType == \'Master Card\',\r\n                          \'fa-cc-amex\': expressOrderReview.orderPayments[$index].creditCardDetails.CardType == \'American Expresss\',\r\n                          \'fa-cc-discover\': expressOrderReview.orderPayments[$index].creditCardDetails.CardType == \'Discover\'}">\r\n                        </i>\r\n                            ending in {{expressOrderReview.orderPayments[$index].creditCardDetails.PartialAccountNumber}}</p>\r\n                    </div>\r\n                    <div ng-if="payment.Type == \'SpendingAccount\'">\r\n                        Spending Account ID: {{expressOrderReview.orderPayments[$index].spendingAccountDetails.Name}}\r\n                    </div>\r\n                    <div ng-if="payment.Type == \'PurchaseOrder\'">\r\n                        Purchase Order\r\n                        <span ng-if="payment.xp.PONumber">\r\n                            : {{expressOrderReview.orderPayments[$index].xp.PONumber}}\r\n                        </span>\r\n                    </div>\r\n                    <!--<div>-->\r\n                    <!--Subtotal: {{orderConfirmation.currentOrder.Subtotal | currency}}-->\r\n                    <!--</div>-->\r\n                    <!--<div ng-if="orderConfirmation.currentOrder.xp.taxInfo">-->\r\n                    <!--Tax: {{orderConfirmation.currentOrder.xp.taxInfo | currency}}-->\r\n                    <!--</div>-->\r\n                    Amount: {{payment.Amount | currency}}\r\n                    <hr>\r\n                </div>\r\n                <div>\r\n                    Total: {{expressOrderReview.submittedOrder.Total | currency}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading"><b>Line Items</b></div>\r\n            <div class="panel-body">\r\n                <div>\r\n                    <table class="table table-hover">\r\n                        <tbody>\r\n                        <colgroup>\r\n                            <col style="width:100px;">\r\n                            <col>\r\n                            <col style="width:75px;">\r\n                        </colgroup>\r\n                        <tr ng-repeat-start="lineItem in expressOrderReview.LineItems.Items track by $index" class="item_info">\r\n                            <td>\r\n                                {{lineItem.Quantity}}\r\n                            </td>\r\n                            <td>\r\n                                <a href="#">{{lineItem.Product.Name}}</a><br>\r\n                                <small class="text-muted">{{lineItem.ProductID}}</small></br>\r\n                            </td>\r\n                        </tr>\r\n                        <tr ng-repeat-end class="shipping_info" ng-if="!expressOrderReview.submittedOrder.ShippingAddressID">\r\n                            <div>\r\n                                <td colspan="3">\r\n                                    <label>Shipping To:</label>\r\n                                    <p>{{lineItem.ShippingAddress | address}}</p>\r\n                                </td>\r\n                            </div>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</article>'),$templateCache.put("expressCheckout/templates/expressCheckoutUserDefaults.tpl.html",'<form>\r\n    <h4>User Defaults for Express Checkout</h4>\r\n    <div class="row">\r\n        <div class="col-sm-12 form-group">\r\n            <label for="credit_card">Credit Card</label>\r\n            <select id="credit_card" ng-change="expressCheckoutUserDefaults.updateDefault()" class="form-control" ng-model="expressCheckoutUserDefaults.me.xp.defaultCreditCardID" ng-options="creditCard.ID as (\'XXXX-XXXX-XXXX-\' + creditCard.PartialAccountNumber) for creditCard in expressCheckoutUserDefaults.creditCards.Items"></select>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-12 form-group">\r\n            <label for="shipping_address">Shipping Address</label>\r\n            <select id="shipping_address" ng-change="expressCheckoutUserDefaults.updateDefault()" ng-model="expressCheckoutUserDefaults.me.xp.defaultShippingAddressID" class="form-control" ng-options="address.ID as (address.AddressName || address.Street1 + \' \' + address.Street2) for address in expressCheckoutUserDefaults.shippingAddresses"></select>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-12 form-group">\r\n            <label for="billing_address">Billing Address</label>\r\n            <select id="billing_address"  ng-change="expressCheckoutUserDefaults.updateDefault()" ng-model="expressCheckoutUserDefaults.me.xp.defaultBillingAddressID" class="form-control" ng-options="address.ID as (address.AddressName || address.Street1 + \' \' + address.Street2) for address in expressCheckoutUserDefaults.billingAddresses"></select>\r\n        </div>\r\n    </div>\r\n</form>'),$templateCache.put("creditCards/templates/creditCardAssign.tpl.html",'<h3 class="page-header">\r\n    Assignments for {{creditCardAssign.creditCard.ID}}\r\n</h3>\r\n\r\n<!--====== SEARCH/FILTERS ======-->\r\n<form name="CreditCardAssignSearchForm" class="form-inline" ng-submit="creditCardAssign.search()">\r\n    <fieldset class="form-group">\r\n        <input type="search" placeholder="Search User Groups..." ng-model="creditCardAssign.parameters.search" class="form-control">\r\n    </fieldset>\r\n    <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':creditCardAssign.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="creditCardAssign.searchResults" ng-click="creditCardAssign.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':creditCardAssign.filtersApplied}">\r\n\t\t\t<button type="button" class="btn btn-default" ng-if="application.$ocMedia(\'max-width:767px\')" ng-click="creditCardAssign.showFilters = !creditCardAssign.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n\t\t\t<button ng-if="creditCardAssign.filtersApplied" ng-click="creditCardAssign.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n    </fieldset>\r\n</form>\r\n<div class="row" style="margin-top:15px;" uib-collapse="!creditCardAssign.showFilters">\r\n    <div class="col-md-6 col-lg-4">\r\n        <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n            <label>Sort By:</label>\r\n            <div ng-class="{\'input-group\':creditCardAssign.sortSelection}">\r\n                <select placeholder="Sort" class="form-control" ng-model="creditCardAssign.sortSelection" ng-change="creditCardAssign.updateSort()">\r\n                    <option value="">None</option>\r\n                    <option value="ID">ID</option>\r\n                    <option value="Name">User Group Name</option>\r\n                </select>\r\n                <div ng-if="creditCardAssign.sortSelection" class="input-group-btn">\r\n                    <button class="btn btn-default" ng-click="creditCardAssign.reverseSort()">\r\n                        <i class="fa fa-sort"></i>\r\n                    </button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!--====== LIST ======-->\r\n<div ng-if="creditCardAssign.list.Items.length">\r\n    <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? creditCardAssign.list.Meta.ItemRange[0] : \'1\') + \' - \'\r\n        + creditCardAssign.list.Meta.ItemRange[1] + \' of \' + creditCardAssign.list.Meta.TotalCount + \' results\'}}</b>\r\n    <table class="table table-hover oc-table-responsive">\r\n        <thead>\r\n        <tr>\r\n            <th scope="col">\r\n            </th>\r\n\r\n            <th scope="col">\r\n                <a href="#" role="button" ng-click="creditCardAssign.updateSort(\'ID\')">\r\n                    ID\r\n                    <i class="fa fa-caret-down" ng-show="creditCardAssign.parameters.sortBy == \'ID\'"></i>\r\n                    <i class="fa fa-caret-up" ng-show="creditCardAssign.parameters.sortBy == \'!ID\'"></i>\r\n                </a>\r\n            </th>\r\n            <th scope="col">\r\n                <a href="#" role="button" ng-click="creditCardAssign.updateSort(\'Name\')">\r\n                    User Group Name\r\n                    <i class="fa fa-caret-down" ng-show="creditCardAssign.parameters.sortBy == \'Name\'"></i>\r\n                    <i class="fa fa-caret-up" ng-show="creditCardAssign.parameters.sortBy == \'!Name\'"></i>\r\n                </a>\r\n            </th>\r\n\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr ng-repeat="group in creditCardAssign.list.Items">\r\n            <th>\r\n                <input name="{{\'assignCheckbox\' + $index}}" type="checkbox" ng-model="group.selected">\r\n            </th>\r\n            <td data-title="ID">{{group.ID}}</td>\r\n            <td data-title="Name">{{group.Name}}</td>\r\n\r\n        </tr>\r\n        </tbody>\r\n    </table>\r\n    <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && creditCardAssign.list.Meta.TotalPages > 1">\r\n        <uib-pagination boundary-links="creditCardAssign.list.Meta.TotalPages > 5"\r\n                        max-size="5"\r\n                        total-items="creditCardAssign.list.Meta.TotalCount"\r\n                        items-per-page="creditCardAssign.list.Meta.PageSize"\r\n                        ng-model="creditCardAssign.list.Meta.Page"\r\n                        ng-change="creditCardAssign.pageChanged()"></uib-pagination>\r\n    </div>\r\n    <button type="button"\r\n            ng-if="application.$ocMedia(\'max-width:767px\')"\r\n            class="btn btn-default btn-block btn-lg"\r\n            ng-show="creditCardAssign.list.Meta.Page < creditCardAssign.list.Meta.TotalPages"\r\n            ng-click="creditCardAssign.loadMore()">Load More\r\n    </button>\r\n</div>\r\n\r\n<button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n<button type="button" class="btn btn-primary" ng-click="creditCardAssign.saveAssignments()">Update Assignments</button>\r\n\r\n\r\n\r\n\r\n'),$templateCache.put("creditCards/templates/creditCardCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New Credit Card</b>\r\n</h3>\r\n<form name="CreditCardCreateForm" ng-submit="creditCardCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="creditCardIDInput">Credit Card ID</label>\r\n            <input id="creditCardIDInput" ordercloud-auto-id type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="creditCardCreate.creditCard.ID"/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="creditCardNumberInput">Partial Account Number</label>\r\n            <input id="creditCardNumberInput" type="text" class="form-control" ng-model="creditCardCreate.creditCard.PartialAccountNumber" minlength="4" maxlength="5" ng-pattern="/^[0-9]+$/" ng-pattern-err-type="number" required/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="creditCardNameInput">Cardholder Name</label>\r\n            <input id="creditCardNameInput" type="text" class="form-control" ng-model="creditCardCreate.creditCard.CardholderName"/>\r\n        </div>\r\n        <div class="col-sm-3 form-group">\r\n            <label for="creditCardTypeInput">Card Type</label>\r\n            <select id="creditCardTypeInput" class="form-control" ng-model="creditCardCreate.creditCard.CardType">\r\n                <option value="Visa">Visa</option>\r\n                <option value="MasterCard">MasterCard</option>\r\n                <option value="AmericanExpress">American Express</option>\r\n                <option value="Discover">Discover</option>\r\n            </select>\r\n        </div>\r\n        <div class="col-sm-3 form-group">\r\n            <label>Expiration Date</label>\r\n            <div class="row">\r\n                <div class="col-sm-6 col-md-4 exp-mo">\r\n                    <select class="form-control" ng-model="creditCardCreate.selectedExpireMonth" ng-options="cc.string for cc in creditCardCreate.expireMonth"></select>\r\n                </div>\r\n                <div class="col-sm-6 col-md-8 exp-yr">\r\n                    <select class="form-control" ng-model="creditCardCreate.selectedExpireYear" ng-options="cc for cc in creditCardCreate.expireYear"></select>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="CreditCardCreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>'),$templateCache.put("creditCards/templates/creditCardEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit Credit Card:</b> {{creditCardEdit.creditCardName}}\r\n</h3>\r\n<form name="CreditCardEditForm" ng-submit="creditCardEdit.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="creditCardIDInput">Credit Card ID</label>\r\n            <input id="creditCardIDInput" type="text" class="form-control" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="creditCardEdit.creditCard.ID" required/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="creditCardNumberInput">Partial Account Number\r\n                <i class="fa fa-question-circle" uib-tooltip="You cannot edit a partial account number after your credit card has been created. Alternatively, you can delete this card and create a new one"></i>\r\n            </label>\r\n            <input id="creditCardNumberInput" type="text" class="form-control" ng-model="creditCardEdit.creditCard.PartialAccountNumber" minlength="4"  maxlength="5" ng-pattern="/^[0-9]+$/" required disabled/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="creditCardNameInput">Cardholder Name</label>\r\n            <input id="creditCardNameInput" type="text" class="form-control" ng-model="creditCardEdit.creditCard.CardholderName"/>\r\n        </div>\r\n        <div class="col-sm-3 form-group">\r\n            <label for="creditCardTypeInput">Card Type</label>\r\n            <select id="creditCardTypeInput" class="form-control" ng-model="creditCardEdit.creditCard.CardType">\r\n                <option value="Visa">Visa</option>\r\n                <option value="MasterCard">MasterCard</option>\r\n                <option value="AmericanExpress">American Express</option>\r\n                <option value="Discover">Discover</option>\r\n            </select>\r\n        </div>\r\n        <div class="form-group col-sm-3">\r\n        <label >Expiration Date</label>\r\n            <div class="row">\r\n                <div class="col-sm-6 col-md-4 exp-mo">\r\n                    <select class="form-control" ng-model="creditCardEdit.creditCard.selectedExpireMonth" ng-options="cc.string for cc in creditCardEdit.expireMonth"></select>\r\n                </div>\r\n                <div class="col-sm-6 col-md-8 exp-yr">\r\n                    <select class="form-control" ng-model="creditCardEdit.creditCard.selectedExpireYear" ng-options="cc for cc in creditCardEdit.expireYear"></select>\r\n                </div>\r\n            </div>\r\n    </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="CreditCardEditForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n        <button type="button" class="btn btn-default" ng-click="creditCardEdit.Delete()"><i class="fa fa-trash text-danger"></i></button>\r\n    </div>\r\n</form>'),
$templateCache.put("creditCards/templates/creditCards.tpl.html",'<article id="COMPONENT_CreditCards" ui-view class="container-fluid" >\r\n   <div class="page-header">\r\n       <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n       <h3 >Credit Cards</h3>\r\n   </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="CreditCardsSearchForm" class="form-inline" ng-submit="creditCards.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search creditCards..." ng-model="creditCards.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':creditCards.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="creditCards.searchResults" ng-click="creditCards.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':creditCards.filtersApplied}" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n\t\t\t<button type="button" class="btn btn-default" ng-click="creditCards.showFilters = !creditCards.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n\t\t\t<button ng-if="creditCards.filtersApplied" ng-click="creditCards.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!creditCards.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':creditCards.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="creditCards.sortSelection" ng-change="creditCards.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="CardholderName">Card Holder Name</option>\r\n                        <option value="CardType">Card Type</option>\r\n                        <option value="ExpirationDate">Expiration Date</option>\r\n                    </select>\r\n                    <div ng-if="creditCards.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="creditCards.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!creditCards.list.Items.length">\r\n        <b>The selected buyer does not have any credit cards.</b>\r\n    </div>\r\n    <div ng-if="creditCards.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? creditCards.list.Meta.ItemRange[0] : \'1\') + \' - \' +  creditCards.list.Meta.ItemRange[1] + \' of \' + creditCards.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="creditCards.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="creditCards.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="creditCards.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="creditCards.updateSort(\'CardholderName\')">\r\n                        Card Holder Name\r\n                        <i class="fa fa-caret-down" ng-show="creditCards.parameters.sortBy == \'CardholderName\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="creditCards.parameters.sortBy == \'!CardholderName\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="creditCards.updateSort(\'CardType\')">\r\n                        Card Type\r\n                        <i class="fa fa-caret-down" ng-show="creditCards.parameters.sortBy == \'CardType\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="creditCards.parameters.sortBy == \'CardType\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="creditCards.updateSort(\'ExpirationDate\')">\r\n                        Expiration Date\r\n                        <i class="fa fa-caret-down" ng-show="creditCards.parameters.sortBy == \'ExpirationDate\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="creditCards.parameters.sortBy == \'!ExpirationDate\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="card in creditCards.list.Items">\r\n                <th scope="row">{{card.ID}}</th>\r\n                <td data-title="CardholderName">{{card.CardholderName}}</td>\r\n                <td data-title="PartialAccountNumber">{{card.CardType}}</td>\r\n                <td data-title="ExpirationDate">{{card.ExpirationDate | date:\'shortDate\'}}</td>\r\n                <td class="actions-cell">\r\n                    <button ui-sref=".edit({creditcardid:card.ID})" class="btn btn-default btn-sm">Edit</button>\r\n                    <button ui-sref=".assign({creditcardid:card.ID})" class="btn btn-default btn-sm">Assign</button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && creditCards.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="creditCards.list.Meta.TotalPages > 5"\r\n                            max-size="5" total-items="creditCards.list.Meta.TotalCount"\r\n                            items-per-page="creditCards.list.Meta.PageSize"\r\n                            ng-model="creditCards.list.Meta.Page"\r\n                            ng-change="creditCards.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="creditCards.list.Meta.Page < creditCards.list.Meta.TotalPages"\r\n                ng-click="creditCards.loadMore()">Load More</button>\r\n    </div>\r\n</article>'),$templateCache.put("products/templates/productAssignments.tpl.html",'<div class="page-header">\r\n\t<div class="btn-toolbar pull-right">\r\n\t\t<button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n\t\t<button class="btn btn-success" ui-sref="^.createAssignment({productid:productAssignments.productID})"><i class="fa fa-plus-circle"></i> New Assignment</button>\r\n\t</div>\r\n\t<h3>Assignments for {{productAssignments.productName}}</h3>\r\n</div>\r\n<div class="well well-lg text-center" ng-if="!productAssignments.list.length">\r\n\t<b>This product does not have any assignments for the active Buyer company.</b>\r\n</div>\r\n\r\n<!--====== LIST ======-->\r\n<div ng-if="productAssignments.list.length">\r\n\t<table class="table table-hover table-condensed oc-table-responsive" controlleras="productAssignments">\r\n\t\t<thead>\r\n\t\t<tr>\r\n\t\t\t<th>\r\n\t\t\t\t<div>Party ID</div>\r\n\t\t\t</th>\r\n\t\t\t<th>\r\n\t\t\t\t<div>Standard Price Schedule</div>\r\n\t\t\t</th>\r\n\t\t\t<th>\r\n\t\t\t\t<div>Replenishment Price Schedule</div>\r\n\t\t\t</th>\r\n\t\t\t<th></th>\r\n\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody>\r\n\t\t<tr ng-repeat="assignment in productAssignments.list">\r\n\t\t\t<th scope="row">{{assignment.UserID || assignment.UserGroupID || assignment.BuyerID}} <small class="text-muted" ng-if="!assignment.UserID && !assignment.UserGroupID">(Buyer)</small></th>\r\n\t\t\t<td data-title="Standard Price Schedule">{{assignment.StandardPriceScheduleID}}  <span class="text-muted" ng-if="!assignment.StandardPriceScheduleID">None</span></td>\r\n\t\t\t<td data-title="Replenishment Price Schedule">{{assignment.ReplenishmentPriceScheduleID}} <span class="text-muted" ng-if="!assignment.ReplenishmentPriceScheduleID">None</span></td>\r\n\t\t\t<td class="actions-cell">\r\n\t\t\t\t<button type="button" class="btn btn-danger btn-sm" uib-tooltip="Delete Assignment" tooltip-placement="left" ng-click="productAssignments.Delete(this)"><i class="fa fa-trash"></i></button>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\r\n\t<div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && productAssignments.list.Meta.TotalPages > 1"">\r\n\t<uib-pagination boundary-links="productAssignments.list.Meta.TotalPages > 5"\r\n\t\t\t\t\tmax-size="5" total-items="productAssignments.list.Meta.TotalCount"\r\n\t\t\t\t\titems-per-page="productAssignments.list.Meta.PageSize"\r\n\t\t\t\t\tng-model="productAssignments.list.Meta.Page"\r\n\t\t\t\t\tng-change="productAssignments.pageChanged()"></uib-pagination>\r\n</div>\r\n<button type="button"\r\n\t\tng-if="application.$ocMedia(\'max-width:767px\')"\r\n\t\tclass="btn btn-default btn-block btn-lg"\r\n\t\tng-show="productAssignments.list.Meta.Page < productAssignments.list.Meta.TotalPages"\r\n\t\tng-click="productAssignments.loadMore()">Load More</button>\r\n</div>\r\n'),$templateCache.put("products/templates/productCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New Product</b>\r\n</h3>\r\n<form name="CreateForm" ng-submit="productCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="productIDInput">Product ID</label>\r\n            <input id="productIDInput" ordercloud-auto-id type="text" class="form-control" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="productCreate.product.ID"/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="productNameInput">Product Name</label>\r\n            <input id="productNameInput" type="text" class="form-control" ng-model="productCreate.product.Name" ng-required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-12 form-group">\r\n            <label for="productDescriptionInput">Description</label>\r\n            <textarea id="productDescriptionInput" type="text" class="form-control" ng-model="productCreate.product.Description"></textarea>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="productQuantityMultInput">Quantity Multiplier</label>\r\n            <input id="productQuantityMultInput" type="number" pattern="^[0-9]*[1-9][0-9]*$" pattern-err-type="positiveInteger" class="form-control" ng-model="productCreate.product.QuantityMultiplier" ng-required="true"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="productShipWeightInput">Ship Weight</label>\r\n            <input id="productShipWeightInput" type="number" step="any" class="form-control" ng-model="productCreate.product.ShipWeight"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="productTypeInput">Product Type</label>\r\n            <select id="productTypeInput" class="form-control" ng-model="productCreate.product.Type" ng-required="true">\r\n                <option value="Static">Static</option>\r\n                <option value="VariableText">Variable Text</option>\r\n                <option value="Kit">Kit</option>\r\n            </select>\r\n        </div>\r\n        <div class="form-group col-sm-6" ng-show="productCreate.product.InventoryEnabled">\r\n            <label for="productInventoryInput">Inventory Notification Point</label>\r\n            <input id="productInventoryInput" type="number" class="form-control" ng-model="productCreate.product.InventoryNotificationPoint"/>\r\n        </div>\r\n    </div>\r\n    <div class="panel panel-default col-sm-6">\r\n        <div class="panel-body">\r\n            <div class="row">\r\n                <div class="form-group col-sm-6">\r\n                    Inventory Options:\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-6 form-group">\r\n                    <label for="productInventory2Input">\r\n                        <input id="productInventory2Input" type="checkbox" ng-model="productCreate.product.InventoryEnabled"/>\r\n                        Track Inventory\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div ng-show="productCreate.product.InventoryEnabled"><div class="row">\r\n                <div class="col-sm-6 form-group">\r\n                    <label for="productInventory3Input">\r\n                        <input id="productInventory3Input" type="checkbox" ng-model="productCreate.product.VariantLevelInventory"/>\r\n                        Variant Level Inventory\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-6 form-group">\r\n                    <label for="productInventory4Input">\r\n                        <input id="productInventory4Input" type="checkbox" ng-model="productCreate.product.ExceedInventory"/>\r\n                        Can Exceed Inventory\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-6 form-group">\r\n                    <label for="productInventory5Input">\r\n                        <input id="productInventory5Input" type="checkbox" ng-model="productCreate.product.DisplayInventory"/>\r\n                        Display Inventory\r\n                    </label>\r\n                </div>\r\n            </div></div>\r\n        </div>\r\n    </div>\r\n    <div class="col-sm-6">\r\n        <ordercloud-file-upload model="productCreate.product" keyname="image" label="Image" extensions="jpg, png, gif, jpeg, tiff"></ordercloud-file-upload>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-12">\r\n            <label for="productActiveInput">\r\n                <input id="productActiveInput" type="checkbox" ng-model="productCreate.product.Active"/>\r\n                Active\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="CreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>'),$templateCache.put("products/templates/productCreateAssignment.tpl.html",'<div class="well well-lg text-center" ng-if="(!((productCreateAssignment.priceSchedules | filter:{OrderType:\'Replenishment\'}).length) && !((productCreateAssignment.priceSchedules | filter:{OrderType:\'Standard\'}).length))">\r\n\t<b>The selected buyer does not have any Standard or Replenishment price schedules.</b><br>\r\n\t<b>If you have included the Price Schedules component you can create them there.</b>\r\n</div>\r\n\r\n<div ng-if="(productCreateAssignment.priceSchedules | filter:{OrderType:\'Replenishment\'}).length || (productCreateAssignment.priceSchedules | filter:{OrderType:\'Standard\'}).length">\r\n\t<h3>Choose the assignee(s)</h3>\r\n\t<p class="text-muted">You can assign a product to a specific UserGroup or to the entire Buyer Company.  UserGroup assignments will take precedent over Buyer assignments.</p>\r\n\t<div class="row" >\r\n\t\t<div class="col-sm-6">\r\n\t\t\t<div class="form-group">\r\n\t\t\t\t<button class="btn btn-block btn-default" ng-class="{active: productCreateAssignment.assignBuyer}" ng-click="productCreateAssignment.assignBuyer = !productCreateAssignment.assignBuyer">\r\n\t\t\t\t\t<i class="fa" ng-class="{\'fa-square-o\':!productCreateAssignment.assignBuyer, \'fa-check-square-o\':productCreateAssignment.assignBuyer}"></i> Assign at the Buyer Level\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div uib-collapse="productCreateAssignment.assignBuyer">\r\n\t\t\t\t<ordercloud-search servicename="UserGroups" controlleras="productCreateAssignment"></ordercloud-search>\r\n\t\t\t\t<div class="well well-lg text-center" ng-if="!productCreateAssignment.list.Items.length">\r\n\t\t\t\t\t<b><i class="fa fa-search"></i> No UserGroups match your search</b>\r\n\t\t\t\t</div>\r\n\t\t\t\t<section class="table-fixed-header" ng-if="productCreateAssignment.list.Items.length">\r\n\t\t\t\t\t<div class="table-header-bg"></div>\r\n\t\t\t\t\t<div class="table-container" ordercloud-infinite-scroll servicename="UserGroups" controlleras="productCreateAssignment" style="max-height:160px;">\r\n\t\t\t\t\t\t<table class="table table-hover">\r\n\t\t\t\t\t\t\t<colgroup>\r\n\t\t\t\t\t\t\t\t<col class="action-column"/>\r\n\t\t\t\t\t\t\t</colgroup>\r\n\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t<div>ID</div>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t<div>Name</div>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t<tr ng-repeat="group in productCreateAssignment.list.Items track by $index">\r\n\t\t\t\t\t\t\t\t<td class="text-center">\r\n\t\t\t\t\t\t\t\t\t<input type="checkbox" ng-model="group.selected">\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>{{group.ID}}</td>\r\n\t\t\t\t\t\t\t\t<td>{{group.Name}}</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="col-sm-6" uib-collapse="productCreateAssignment.assignBuyer" ng-if="productCreateAssignment.list.Items.length  || (!productCreateAssignment.list.Items.length && productCreateAssignment.groupSearchTerm)">\r\n\t\t\t<div class="well well-lg text-center" ng-if="!(productCreateAssignment.list.Items | filter:{selected:true}).length">\r\n\t\t\t\t<b>No User Group(s) Selected</b>\r\n\t\t\t</div>\r\n\t\t\t<section class="table-fixed-header"  ng-if="(productCreateAssignment.list.Items | filter:{selected:true}).length">\r\n\t\t\t\t<div class="table-header-bg"></div>\r\n\t\t\t\t<div class="table-container" style="max-height:160px;">\r\n\t\t\t\t\t<table class="table table-hover">\r\n\t\t\t\t\t\t<colgroup>\r\n\t\t\t\t\t\t\t<col class="action-column"/>\r\n\t\t\t\t\t\t</colgroup>\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\tID<div>ID</div>\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\tName<div>Name</div>\r\n\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr ng-repeat="group in productCreateAssignment.list.Items | filter:{selected:true} track by $index">\r\n\t\t\t\t\t\t\t<td>{{group.ID}}</td>\r\n\t\t\t\t\t\t\t<td>{{group.Name}}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t</div>\r\n\t<h3>Choose the price schedule(s)</h3>\r\n\t<p class="text-muted">Each product assignment can have one Standard and/or one Replenishment price schedule. You must choose at least one.</p>\r\n\t<div class="row">\r\n\t\t<div class="col-sm-6" ng-show="(productCreateAssignment.priceSchedules | filter:{OrderType:\'Standard\'}).length">\r\n\t\t\t<h4>Standard Price Schedules</h4>\r\n\t\t\t<ul class="list-group">\r\n\t\t\t\t<li class="list-group-item" ng-repeat="priceSchedule in productCreateAssignment.priceSchedules | filter:{OrderType:\'Standard\'} track by $index" ng-class="{active: priceSchedule.ID == productCreateAssignment.model.StandardPriceScheduleID}" ng-click="productCreateAssignment.toggleStandardPS(priceSchedule.ID)">\r\n\t\t\t\t\t{{priceSchedule.ID}}\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t<div class="col-sm-6" ng-show="(productCreateAssignment.priceSchedules | filter:{OrderType:\'Replenishment\'}).length">\r\n\t\t\t<h4>Replenishment Price Schedules</h4>\r\n\t\t\t<ul class="list-group">\r\n\t\t\t\t<li class="list-group-item" ng-repeat="priceSchedule in productCreateAssignment.priceSchedules | filter:{OrderType:\'Replenishment\'} track by $index" ng-class="{active: priceSchedule.ID == productCreateAssignment.model.ReplenishmentPriceScheduleID}" ng-click="productCreateAssignment.toggleReplenishmentPS(priceSchedule.ID)">\r\n\t\t\t\t\t{{priceSchedule.ID}}\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n\t<button type="button" class="btn btn-default" ui-sref="^.assignments({productid:productCreateAssignment.model.ProductID})">Cancel</button>\r\n\t<button type="button" class="btn btn-primary" ng-click="productCreateAssignment.submit()" ng-disabled="!(((productCreateAssignment.list.Items | filter:{selected:true}).length || productCreateAssignment.assignBuyer) && (productCreateAssignment.model.StandardPriceScheduleID.length || productCreateAssignment.model.ReplenishmentPriceScheduleID.length))">Save Assignment</button>\r\n</div>\r\n\r\n'),$templateCache.put("products/templates/productEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit Product:</b> {{productEdit.productName}}\r\n</h3>\r\n<form name="EditForm" ng-submit="productEdit.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="productIDInput">Product ID</label>\r\n            <input id="productIDInput" type="text" class="form-control" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="productEdit.product.ID" ng-required="true"/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="productNameInput">Product Name</label>\r\n            <input id="productNameInput" type="text" class="form-control" ng-model="productEdit.product.Name" ng-required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-12 form-group">\r\n            <label for="productDescriptionInput">Description</label>\r\n            <textarea id="productDescriptionInput" type="text" class="form-control" ng-model="productEdit.product.Description"></textarea>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="productQuantityMultInput">Quantity Multiplier</label>\r\n            <input id="productQuantityMultInput" type="number" pattern="^[0-9]*[1-9][0-9]*$" pattern-err-type="positiveInteger" class="form-control" ng-model="productEdit.product.QuantityMultiplier" ng-required="true"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="productShipWeightInput">Ship Weight</label>\r\n            <input id="productShipWeightInput" type="number" step="any" class="form-control" ng-model="productEdit.product.ShipWeight"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="productTypeInput">Product Type</label>\r\n            <select id="productTypeInput" class="form-control" ng-model="productEdit.product.Type" ng-required="true">\r\n                <option value="Static">Static</option>\r\n                <option value="VariableText">Variable Text</option>\r\n                <option value="Kit">Kit</option>\r\n            </select>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="productInventoryInput">Inventory Notification Point</label>\r\n            <input id="productInventoryInput" type="number" class="form-control" ng-model="productEdit.product.InventoryNotificationPoint"/>\r\n        </div>\r\n    </div>\r\n    <div class="panel panel-default col-sm-6">\r\n        <div class="panel-body">\r\n            <div class="row">\r\n                <div class="form-group col-sm-6">\r\n                    Inventory Options:\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-6 form-group">\r\n                    <label for="productInventory2Input">\r\n                        <input id="productInventory2Input" type="checkbox" ng-model="productEdit.product.InventoryEnabled"/>\r\n                        Track Inventory\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-6 form-group">\r\n                    <label for="productInventory3Input">\r\n                        <input id="productInventory3Input" type="checkbox" ng-model="productEdit.product.VariantLevelInventory"/>\r\n                        Variant Level Inventory\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-6 form-group">\r\n                    <label for="productInventory4Input">\r\n                        <input id="productInventory4Input" type="checkbox" ng-model="productEdit.product.ExceedInventory"/>\r\n                        Can Exceed Inventory\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-6 form-group">\r\n                    <label for="productInventory5Input">\r\n                        <input id="productInventory5Input" type="checkbox" ng-model="productEdit.product.DisplayInventory"/>\r\n                        Display Inventory\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="col-sm-6">\r\n        <ordercloud-file-upload model="productEdit.product" keyname="image" label="Image" extensions="jpg, png, gif, jpeg, tiff"></ordercloud-file-upload>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-12">\r\n            <label for="productActiveInput">\r\n                <input id="productActiveInput" type="checkbox" ng-model="productEdit.product.Active"/>\r\n                Active\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="ProductEditForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n        <button type="button" class="btn btn-default" ng-click="productEdit.Delete()"><i class="fa fa-trash text-danger"></i></button>\r\n    </div>\r\n</form>'),$templateCache.put("products/templates/products.tpl.html",'<article id="COMPONENT_Products" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <h3>Products</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="ProductsSearchForm" class="form-inline" ng-submit="products.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search Products..." ng-model="products.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':products.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="products.searchResults" ng-click="products.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':products.filtersApplied}" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n\t\t\t<button type="button" class="btn btn-default" ng-click="products.showFilters = !products.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n\t\t\t<button ng-if="products.filtersApplied" ng-click="products.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!products.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':products.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="products.sortSelection" ng-change="products.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Name">Name</option>\r\n                    </select>\r\n                    <div ng-if="products.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="products.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!products.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="products.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? products.list.Meta.ItemRange[0] : \'1\') + \' - \' +  products.list.Meta.ItemRange[1] + \' of \' + products.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive" servicename="Products" controlleras="products">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="products.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="products.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="products.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th>\r\n                    <a href="#" role="button" ng-click="products.updateSort(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="products.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="products.parameters.sortBy == \'!Name\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th class="text-center">Active</th>\r\n                <th></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="product in products.list.Items">\r\n                <th scope="row">{{product.ID}}</th>\r\n                <td data-title="Name">{{product.Name}}</td>\r\n                <td class="text-center" data-title="Active">\r\n                    <i class="fa fa-circle" aria-hidden="true" ng-class="{\'active\':product.Active}"></i>\r\n                </td>\r\n                <td class="actions-cell">\r\n                    <button ui-sref=".edit({productid:product.ID})" class="btn btn-default btn-sm">Edit</button>\r\n                    <button ui-sref=".assignments({productid:product.ID})" class="btn btn-default btn-sm">Assign</button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && products.list.Meta.TotalPages > 1"">\r\n        <uib-pagination boundary-links="products.list.Meta.TotalPages > 5"\r\n                        max-size="5" total-items="products.list.Meta.TotalCount"\r\n                        items-per-page="products.list.Meta.PageSize"\r\n                        ng-model="products.list.Meta.Page"\r\n                        ng-change="products.pageChanged()"></uib-pagination>\r\n    </div>\r\n    <button type="button"\r\n            ng-if="application.$ocMedia(\'max-width:767px\')"\r\n            class="btn btn-default btn-block btn-lg"\r\n            ng-show="products.list.Meta.Page < products.list.Meta.TotalPages"\r\n            ng-click="products.loadMore()">Load More</button>\r\n    </div>\r\n</article>'),
$templateCache.put("giftCards/templates/giftCardAssignGroup.tpl.html",'<h3 class="page-header">Assignments for {{giftCardAssign.giftCard.Name}}</h3>\r\n<div class="well well-lg text-center" ng-if="!giftCardAssign.list.Items.length">\r\n    <b>There are no User Groups under the active Buyer company</b>\r\n</div>\r\n<ordercloud-search servicename="UserGroups" controlleras="giftCardAssign"></ordercloud-search>\r\n<section class="table-fixed-header" ng-if="giftCardAssign.list.Items.length">\r\n    <div class="table-header-bg"></div>\r\n    <div class="table-container" ordercloud-infinite-scroll servicename="UserGroups" controlleras="giftCardAssign" idname="UserGroupID">\r\n        <table class="table table-hover">\r\n            <colgroup>\r\n                <col class="action-column">\r\n            </colgroup>\r\n            <thead>\r\n            <tr>\r\n                <th></th>\r\n                <th>\r\n                    <div>ID</div>\r\n                </th>\r\n                <th>\r\n                    <div>Name</div>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="group in giftCardAssign.list.Items track by $index">\r\n                <td class="text-center">\r\n                    <input name="{{\'assignCheckbox\' + $index}}" type="checkbox" ng-model="group.selected">\r\n                </td>\r\n                <td><p>{{group.ID}}</p></td>\r\n                <td><p>{{group.Name}}</p></td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>\r\n<div class="form-group">\r\n    <button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n    <button type="button" class="btn btn-primary" ng-click="giftCardAssign.saveAssignments()">Update Group Assignments</button>\r\n    <button type="button" class="btn btn-default" ui-sref="^.assignUser({giftcardid: giftCardAssign.giftCard.ID})">Assign Users</button>\r\n</div>'),$templateCache.put("giftCards/templates/giftCardAssignUser.tpl.html",'<h3 class="page-header">Assignments for {{giftCardAssignUser.giftCard.Name}}</h3>\r\n<div class="well well-lg text-center" ng-if="!giftCardAssignUser.list.Items.length">\r\n    <b>There are no User Groups under the active Buyer company</b>\r\n</div>\r\n<ordercloud-search servicename="Users" controlleras="giftCardAssignUser"></ordercloud-search>\r\n<section class="table-fixed-header" ng-if="giftCardAssignUser.list.Items.length">\r\n    <div class="table-header-bg"></div>\r\n    <div class="table-container" ordercloud-infinite-scroll servicename="Users" controlleras="giftCardAssignUser" idname="UserID">\r\n        <table class="table table-hover">\r\n            <colgroup>\r\n                <col class="action-column">\r\n            </colgroup>\r\n            <thead>\r\n            <tr>\r\n                <th></th>\r\n                <th>\r\n                    <div>ID</div>\r\n                </th>\r\n                <th>\r\n                    <div>Name</div>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="group in giftCardAssignUser.list.Items track by $index">\r\n                <td class="text-center">\r\n                    <input name="{{\'assignCheckbox\' + $index}}" type="checkbox" ng-model="group.selected">\r\n                </td>\r\n                <td><p>{{group.ID}}</p></td>\r\n                <td><p>{{group.Username}}</p></td>\r\n\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>\r\n<div class="form-group">\r\n    <button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n    <button type="button" class="btn btn-primary" ng-click="giftCardAssignUser.saveAssignments()">Update User Assignments</button>\r\n    <button type="button" class="btn btn-default" ui-sref="^.assignGroup({giftcardid: giftCardAssignUser.giftCard.ID})">Assign Groups</button>\r\n</div>'),$templateCache.put("giftCards/templates/giftCardCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New Gift Card</b>\r\n</h3>\r\n<form name="GiftCardCreateForm" ng-submit="giftCardCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="giftCardIDInput">Gift Card ID</label>\r\n            <input id="giftCardIDInput" type="text" class="form-control" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ordercloud-auto-id ng-model="giftCardCreate.giftCard.ID">\r\n        </div>\r\n        <div class="form-group col-md-6">\r\n            <label for="giftCardNameInput">Gift Card Name</label>\r\n            <input id="giftCardNameInput" type="text" class="form-control" required ng-model="giftCardCreate.giftCard.Name">\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="giftCardStartDate">Start Date</label>\r\n            <input class="form-control" ng-show="application.$ocMedia(\'max-width: 767px\')" type="date" id="giftcardcreateStartinput2" ng-model="giftCardCreate.giftCard.StartDate"/>\r\n            <input id="giftCardStartDate" ng-hide="application.$ocMedia(\'max-width: 767px\')" type="text" ng-click="open1 = !open1" is-open="open1" uib-datepicker-popup="{{giftCardCreate.format}}" datepicker-append-to-body="true" class="form-control" ng-model="giftCardCreate.giftCard.StartDate">\r\n        </div>\r\n        <div class="form-group col-md-6">\r\n            <label for="giftCardExpirationDate">End Date</label>\r\n            <input class="form-control"  ng-disabled="!giftCardCreate.giftCard.StartDate" ng-show="application.$ocMedia(\'max-width: 767px\')" type="date" id="giftcardStartcreateinput2" ng-model="giftCardCreate.giftCard.EndDate"/>\r\n            <input id="giftCardExpirationDate" ng-hide="application.$ocMedia(\'max-width: 767px\')"  type="text" ng-click="open2 = !open2" is-open="open2" min-date="giftCardCreate.giftCard.StartDate" ng-disabled="!giftCardCreate.giftCard.StartDate" uib-datepicker-popup="{{giftCardCreate.format}}" datepicker-append-to-body="true" class="form-control" ng-model="giftCardCreate.giftCard.EndDate">\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="giftCardBalance">Balance</label>\r\n            <input id="giftCardBalance" type="number" class="form-control" required ng-model="giftCardCreate.giftCard.Balance">\r\n        </div>\r\n        <div class="form-group col-md-6">\r\n            <label for="giftCardCode">RedemptionCode</label>\r\n            <div class="input-group">\r\n                <input id="giftCardCode" type="text" class="form-control" required ng-model="giftCardCreate.giftCard.RedemptionCode">\r\n                <span class="input-group-btn">\r\n                    <button class="btn btn-default" type="button" ng-click="giftCardCreate.giftCard.RedemptionCode = giftCardCreate.createCode()">Generate Code</button>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="GiftCardCreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>'),$templateCache.put("giftCards/templates/giftCardEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit Gift Card:</b> {{giftCardEdit.giftCard.Name}}\r\n</h3>\r\n<form name="GiftCardEditForm" ng-submit="giftCardEdit.Submit(giftCardEdit.giftCard)" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="giftcardIDInput">Gift Card ID</label>\r\n            <input required id="giftcardIDInput" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="giftCardEdit.giftCard.ID">\r\n        </div>\r\n        <div class="form-group col-md-6">\r\n            <label for="giftcardNameInput">Gift Card Name</label>\r\n            <input required id="giftcardNameInput" type="text"  class="form-control" ng-model="giftCardEdit.giftCard.Name">\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="giftcardStartDate">Start Date</label>\r\n            <input class="form-control" ng-show="application.$ocMedia(\'max-width: 767px\')" type="date" id="giftcardStartinput2" ng-model="giftCardEdit.giftCard.StartDate"/>\r\n            <input class="form-control" type="text" is-open="open1" uib-datepicker-popup="MM/dd/yyyy" ng-click="open1 = !open1" id="giftcardStartDate" datepicker-append-to-body="true" show-weeks="false"  ng-model="giftCardEdit.giftCard.StartDate">\r\n        </div>\r\n        <div class="form-group col-md-6">\r\n            <label for="giftcardExpirationDate">End Date</label>\r\n            <input class="form-control" ng-show="application.$ocMedia(\'max-width: 767px\')" type="date" id="giftcardStartinputvv2" ng-model="giftCardEdit.giftCard.EndDate"/>\r\n            <input class="form-control" ng-hide="application.$ocMedia(\'max-width: 767px\')" type="text" is-open="open2" uib-datepicker-popup="MM/dd/yyyy" ng-click="open2 = !open2" id="giftcardExpirationDate" datepicker-append-to-body="true" show-weeks="false"  ng-model="giftCardEdit.giftCard.EndDate" min-date="giftCardEdit.giftCard.StartDate">\r\n        </div>\r\n\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="giftcardBalance">Balance</label>\r\n            <input required id="giftcardBalance" type="number" step="any" min="0" class="form-control" ng-model="giftCardEdit.giftCard.Balance">\r\n        </div>\r\n        <div class="form-group col-md-6">\r\n            <label for="giftcardMaxPercentOfTotal">Redemption Code</label>\r\n            <input required id="giftcardMaxPercentOfTotal" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="giftCardEdit.giftCard.RedemptionCode">\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="GiftCardEditForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n        <button type="button" class="btn btn-default" ng-click="giftCardEdit.Delete(giftCardEdit.giftCard)"><i class="fa fa-trash text-danger"></i></button>\r\n    </div>\r\n</form>'),$templateCache.put("giftCards/templates/giftCards.tpl.html",'<article id="COMPONENT_GiftCards" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <h3>Gift Cards</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="giftCardsSearchForm" class="form-inline" ng-submit="giftCards.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search giftCards..." ng-model="giftCards.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':giftCards.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="giftCards.searchResults" ng-click="giftCards.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':giftCards.filtersApplied}"  ng-if="application.$ocMedia(\'max-width:767px\')">\r\n\t\t\t<button type="button" class="btn btn-default" ng-click="giftCards.showFilters = !giftCards.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n\t\t\t<button ng-if="giftCards.filtersApplied" ng-click="giftCards.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!giftCards.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':giftCards.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="giftCards.sortSelection" ng-change="giftCards.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Name">Gift Card Name</option>\r\n\r\n                    </select>\r\n                    <div ng-if="giftCards.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="giftCards.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!giftCards.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="giftCards.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? giftCards.list.Meta.ItemRange[0] : \'1\') + \' - \' +  giftCards.list.Meta.ItemRange[1] + \' of \' + giftCards.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="giftCards.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="giftCards.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="giftCards.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="giftCards.updateSort(\'Name\')">\r\n                        Gift Card Name\r\n                        <i class="fa fa-caret-down" ng-show="giftCards.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="giftCards.parameters.sortBy == \'!Name\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    Balance\r\n                </th>\r\n                <th scope="col">\r\n                    Start Date\r\n                </th>\r\n                <th scope="col">\r\n                    End Date\r\n                </th>\r\n                <th scope="col"></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="giftCard in giftCards.list.Items">\r\n                <th scope="row">{{giftCard.ID}}</th>\r\n                <td data-title="Name">{{giftCard.Name}}</td>\r\n                <td data-title="Balance">{{giftCard.Balance | currency }}</td>\r\n                <td data-title="Start Date">{{giftCard.StartDate | date:\'MM/dd/yyyy\'}}</td>\r\n                <td data-title="End Date">{{giftCard.EndDate | date:\'MM/dd/yyyy\'}}</td>\r\n                <td class="actions-cell">\r\n                    <button ui-sref=".edit({giftcardid:giftCard.ID})" class="btn btn-default btn-sm">Edit</button>\r\n                    <div class="btn-group" uib-dropdown dropdown-append-to-body>\r\n                        <button type="button" class="btn btn-default btn-sm" uib-dropdown-toggle>Assign <span class="caret"></span></button>\r\n                        <ul class="dropdown-menu-right" uib-dropdown-menu role="menu">\r\n                            <li role="menuitem"><a ui-sref=".assignGroup({giftcardid:giftCard.ID})">User Group</a></li>\r\n                            <li role="menuitem"><a ui-sref=".assignUser({giftcardid:giftCard.ID})">User</a></li>\r\n                        </ul>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && giftCards.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="giftCards.list.Meta.TotalPages > 5"\r\n                            max-size="5" total-items="giftCards.list.Meta.TotalCount"\r\n                            items-per-page="giftCards.list.Meta.PageSize"\r\n                            ng-model="giftCards.list.Meta.Page"\r\n                            ng-change="giftCards.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="giftCards.list.Meta.Page < giftCards.list.Meta.TotalPages"\r\n                ng-click="giftCards.loadMore()">Load More</button>\r\n    </div>\r\n</article>'),$templateCache.put("priceSchedules/templates/priceScheduleCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New Price Schedule</b>\r\n</h3>\r\n<form name="PriceScheduleCreateForm" ng-submit="priceScheduleCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="priceScheduleIDInput">Price Schedule ID</label>\r\n            <input id="priceScheduleIDInput" ordercloud-auto-id type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="priceScheduleCreate.priceSchedule.ID"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="priceScheduleNameInput">Price Schedule Name</label>\r\n            <input id="priceScheduleNameInput" type="text" class="form-control"  ng-model="priceScheduleCreate.priceSchedule.Name" ng-required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row form-group">\r\n        <div class="col-sm-6 col-no-padding">\r\n            <div class="col-sm-6">\r\n                Apply:\r\n                <div>\r\n                    <label for="priceScheduleApplyShippingInput">\r\n                        <input id="priceScheduleApplyShippingInput" type="checkbox" ng-model="priceScheduleCreate.priceSchedule.ApplyShipping"/>\r\n                        Shipping\r\n                    </label>\r\n                </div>\r\n                <div>\r\n                    <label for="priceScheduleApplyTaxInput">\r\n                        <input id="priceScheduleApplyTaxInput" type="checkbox" ng-model="priceScheduleCreate.priceSchedule.ApplyTax"/>\r\n                        Tax\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="col-xs-6">\r\n                Quantity Selection:\r\n                <div>\r\n                    <label for="priceScheduleCumlative">\r\n                        <input id="priceScheduleCumlative" type="radio" name="selection" ng-value="false" ng-model="priceScheduleCreate.priceSchedule.RestrictedQuantity"/>\r\n                        Open\r\n                    </label>\r\n                </div>\r\n                <div>\r\n                    <label for="priceScheduleRestricted">\r\n                        <input id="priceScheduleRestricted" type="radio" name="selection" ng-value="true" ng-model="priceScheduleCreate.priceSchedule.RestrictedQuantity"/>\r\n                        Restricted\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-6 col-no-padding">\r\n            <div class="col-sm-6">\r\n                <label for="priceScheduleMinQInput">Minumum Quantity</label>\r\n                <input id="priceScheduleMinQInput" ng-class="{\'input-disabled\': priceScheduleCreate.priceSchedule.RestrictedQuantity}" pattern="^[0-9]*[1-9][0-9]*$" pattern-err-type="positiveInteger" ng-disabled="priceScheduleCreate.priceSchedule.RestrictedQuantity" type="number" class="form-control" ng-model="priceScheduleCreate.priceSchedule.MinQuantity"/>\r\n            </div>\r\n            <div class="col-sm-6">\r\n                <label for="priceScheduleMaxQInput">Maximum Quantity</label>\r\n                <input id="priceScheduleMaxQInput" ng-class="{\'input-disabled\': priceScheduleCreate.priceSchedule.RestrictedQuantity}" pattern="^[0-9]*[1-9][0-9]*$" pattern-err-type="positiveInteger" ng-disabled="priceScheduleCreate.priceSchedule.RestrictedQuantity" type="number" class="form-control" ng-model="priceScheduleCreate.priceSchedule.MaxQuantity"/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="priceScheduleTypeInput">Price Schedule Type</label>\r\n            <select id="priceScheduleTypeInput" class="form-control" ng-model="priceScheduleCreate.priceSchedule.OrderType">\r\n                <option value="Standard">Standard</option>\r\n                <option value="Replenishment">Replenishment</option>\r\n                <option value="PriceRequest">Price Request</option>\r\n            </select>\r\n        </div>\r\n        <div class="col-sm-2 form-group">\r\n            <label for="priceSchedulePBQInput">Quantity</label>\r\n            <input id="priceSchedulePBQInput" type="number" pattern="^[0-9]*[1-9][0-9]*$" pattern-err-type="positiveInteger" class="form-control" ng-model="priceScheduleCreate.quantity"/>\r\n        </div>\r\n        <div class="col-sm-2 form-group">\r\n            <label for="priceSchedulePBPInput">Price (each)</label>\r\n            <input id="priceSchedulePBPInput" type="number" step="any" class="form-control" ng-model="priceScheduleCreate.price"/>\r\n        </div>\r\n        <div class="col-sm-2 form-group">\r\n            <button type="button" class="btn btn-default form-control addps" ng-disabled="!priceScheduleCreate.price || !priceScheduleCreate.quantity" ng-click="priceScheduleCreate.addPriceBreak()">Add</button>\r\n        </div>\r\n    </div>\r\n    <div class="row" ng-if="priceScheduleCreate.priceSchedule.PriceBreaks.length">\r\n        <div class="col-sm-6 col-sm-offset-6">\r\n            <section class="table-fixed-header">\r\n                <div class="table-header-bg"></div>\r\n                <div class="table-container">\r\n                    <table class="table table-hover">\r\n                        <colgroup>\r\n                            <col class="action-column"/>\r\n                        </colgroup>\r\n                        <thead>\r\n                        <tr>\r\n                            <th>\r\n                            </th>\r\n                            <th>\r\n                                <div>Quantity</div>\r\n                            </th>\r\n                            <th>\r\n                                <div>{{priceScheduleCreate.priceHeader}}</div>\r\n                            </th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <tr ng-repeat="pricebreak in priceScheduleCreate.priceSchedule.PriceBreaks | orderBy: \'Quantity\' track by $index">\r\n                            <td class="text-center">\r\n                                <a class="fa fa-trash text-danger" ng-click="priceScheduleCreate.deletePriceBreak(priceScheduleCreate.priceSchedule, $index)"></a>\r\n                            </td>\r\n                            <td ng-if="priceScheduleCreate.priceSchedule.RestrictedQuantity">{{pricebreak.Quantity}}</td>\r\n                            <td ng-if="!priceScheduleCreate.priceSchedule.RestrictedQuantity">{{pricebreak.displayQuantity}} </td>\r\n\r\n                            <td ng-if="priceScheduleCreate.priceSchedule.RestrictedQuantity">{{pricebreak.Price * pricebreak.Quantity | currency}}</td>\r\n                            <td ng-if="!priceScheduleCreate.priceSchedule.RestrictedQuantity">{{pricebreak.Price | currency}}</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="PriceScheduleCreateForm.$invalid || !priceScheduleCreate.priceSchedule.PriceBreaks.length">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>'),$templateCache.put("priceSchedules/templates/priceScheduleEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit Price Schedule:</b> {{priceScheduleEdit.priceScheduleName}}\r\n</h3>\r\n<form name="PriceScheduleEditForm" ng-submit="priceScheduleEdit.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="priceScheduleIDInput">Price Schedule ID</label>\r\n            <input id="priceScheduleIDInput" type="text" class="form-control" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="priceScheduleEdit.priceSchedule.ID" ng-required="true"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="priceScheduleNameInput">Price Schedule Name</label>\r\n            <input id="priceScheduleNameInput" type="text" class="form-control" ng-model="priceScheduleEdit.priceSchedule.Name" ng-required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row form-group">\r\n        <div class="col-sm-6 col-no-padding">\r\n            <div class="col-sm-6">\r\n                Apply:\r\n                <div>\r\n                    <label for="priceScheduleApplyShippingInput">\r\n                        <input id="priceScheduleApplyShippingInput" type="checkbox" ng-model="priceScheduleEdit.priceSchedule.ApplyShipping"/>\r\n                        Shipping\r\n                    </label>\r\n                </div>\r\n                <div>\r\n                    <label for="priceScheduleApplyTaxInput">\r\n                        <input id="priceScheduleApplyTaxInput" type="checkbox" ng-model="priceScheduleEdit.priceSchedule.ApplyTax"/>\r\n                        Tax\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="col-xs-6">\r\n                Quantity Selection:\r\n                <div>\r\n                    <label for="priceScheduleCumlative">\r\n                        <input id="priceScheduleCumlative" type="radio" name="selection" ng-value="false" ng-model="priceScheduleEdit.priceSchedule.RestrictedQuantity"/>\r\n                        Open\r\n                    </label>\r\n                </div>\r\n                <div>\r\n                    <label for="priceScheduleRestricted">\r\n                        <input id="priceScheduleRestricted" type="radio" name="selection" ng-value="true" ng-model="priceScheduleEdit.priceSchedule.RestrictedQuantity"/>\r\n                        Restricted\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-6 col-no-padding">\r\n            <div class="col-sm-6">\r\n                <label for="priceScheduleMinQInput">Minumum Quantity</label>\r\n                <input id="priceScheduleMinQInput" ng-class="{\'input-disabled\': priceScheduleEdit.priceSchedule.RestrictedQuantity}" pattern="^[0-9]*[1-9][0-9]*$" pattern-err-type="positiveInteger" ng-disabled="priceScheduleEdit.priceSchedule.RestrictedQuantity" type="number" class="form-control" ng-model="priceScheduleEdit.priceSchedule.MinQuantity"/>\r\n            </div>\r\n            <div class="col-sm-6">\r\n                <label for="priceScheduleMaxQInput">Maximum Quantity</label>\r\n                <input id="priceScheduleMaxQInput" ng-class="{\'input-disabled\': priceScheduleEdit.priceSchedule.RestrictedQuantity}" pattern="^[0-9]*[1-9][0-9]*$" pattern-err-type="positiveInteger" ng-disabled="priceScheduleEdit.priceSchedule.RestrictedQuantity" type="number" class="form-control" ng-model="priceScheduleEdit.priceSchedule.MaxQuantity"/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="priceScheduleTypeInput">Price Schedule Type</label>\r\n            <select id="priceScheduleTypeInput" class="form-control" ng-model="priceScheduleEdit.priceSchedule.OrderType">\r\n                <option value="Standard">Standard</option>\r\n                <option value="Replenishment">Replenishment</option>\r\n                <option value="PriceRequest">Price Request</option>\r\n            </select>\r\n        </div>\r\n        <div class="col-sm-2 form-group">\r\n            <label for="priceSchedulePBQInput">Quantity</label>\r\n            <input id="priceSchedulePBQInput" type="number" class="form-control" pattern="^[0-9]*[1-9][0-9]*$" pattern-err-type="positiveInteger" ng-model="priceScheduleEdit.quantity"/>\r\n        </div>\r\n        <div class="col-sm-2 form-group">\r\n            <label for="priceSchedulePBPInput">Price (each)</label>\r\n            <input id="priceSchedulePBPInput" type="number" step="any" class="form-control" ng-model="priceScheduleEdit.price"/>\r\n        </div>\r\n        <div class="col-sm-2 form-group">\r\n            <label class="invisible hidden-xs">Add</label><br/>\r\n            <button type="button" class="btn btn-default" ng-disabled="!priceScheduleEdit.price || !priceScheduleEdit.quantity" ng-click="priceScheduleEdit.addPriceBreak()">Add</button>\r\n        </div>\r\n    </div>\r\n    <div class="row" ng-if="priceScheduleEdit.priceSchedule.PriceBreaks.length">\r\n        <div class="col-sm-6 col-sm-offset-6">\r\n            <section class="table-fixed-header">\r\n                <div class="table-header-bg"></div>\r\n                <div class="table-container">\r\n                    <table class="table table-hover">\r\n                        <colgroup>\r\n                            <col class="action-column"/>\r\n                        </colgroup>\r\n                        <thead>\r\n                        <tr>\r\n                            <th>\r\n                            </th>\r\n                            <th>\r\n                                <div>Quantity</div>\r\n                            </th>\r\n                            <th>\r\n                                <div>{{priceScheduleEdit.priceHeader}}</div>\r\n                            </th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <tr ng-repeat="pricebreak in priceScheduleEdit.priceSchedule.PriceBreaks track by $index">\r\n                            <td class="text-center">\r\n                                <a class="fa fa-trash text-danger" ng-click="priceScheduleEdit.deletePriceBreak(priceScheduleEdit.priceSchedule, $index)"></a>\r\n                            </td>\r\n                            <td ng-if="priceScheduleEdit.priceSchedule.RestrictedQuantity">{{pricebreak.Quantity}}</td>\r\n                            <td ng-if="!priceScheduleEdit.priceSchedule.RestrictedQuantity">{{pricebreak.displayQuantity}} </td>\r\n                            <td ng-if="priceScheduleEdit.priceSchedule.RestrictedQuantity">{{pricebreak.Price * pricebreak.Quantity | currency}}</td>\r\n                            <td ng-if="!priceScheduleEdit.priceSchedule.RestrictedQuantity">{{pricebreak.Price | currency}}</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="PriceScheduleEditForm.$invalid || !priceScheduleEdit.priceSchedule.PriceBreaks.length">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n        <button type="button" class="btn btn-default" ng-click="priceScheduleEdit.Delete()"><i class="fa fa-trash text-danger"></i></button>\r\n    </div>\r\n</form>'),
$templateCache.put("priceSchedules/templates/priceSchedules.tpl.html",'<article id="COMPONENT_PriceSchedules" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <h3>Price Schedules</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="PriceSchedulesSearchForm" class="form-inline" ng-submit="priceSchedules.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search Price Schedules..." ng-model="priceSchedules.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':priceSchedules.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="priceSchedules.searchResults" ng-click="priceSchedules.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':priceSchedules.filtersApplied}">\r\n\t\t\t<button type="button" class="btn btn-default" ng-click="priceSchedules.showFilters = !priceSchedules.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n\t\t\t<button ng-if="priceSchedules.filtersApplied" ng-click="priceSchedules.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!priceSchedules.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':priceSchedules.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="priceSchedules.sortSelection" ng-change="priceSchedules.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Name">Name</option>\r\n                        <option value="OrderType">Order Type</option>\r\n                    </select>\r\n                    <div ng-if="priceSchedules.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="priceSchedules.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-6">\r\n                    <div class="form-group">\r\n                        <label>Order Type</label>\r\n                        <select ng-model="priceSchedules.parameters.filters.orderType" ng-change="priceSchedules.filter(true)" class="form-control">\r\n                            <option value="">All</option>\r\n                            <option value="Standard">Standard</option>\r\n                            <option value="Replenishment">Replenishment</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!priceSchedules.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="priceSchedules.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? priceSchedules.list.Meta.ItemRange[0] : \'1\') +\r\n            \' - \' + priceSchedules.list.Meta.ItemRange[1] + \' of \' + priceSchedules.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover table-condensed oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="priceSchedules.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="priceSchedules.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="priceSchedules.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="priceSchedules.updateSort(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="priceSchedules.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="priceSchedules.parameters.sortBy == \'!Name\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="priceSchedules.updateSort(\'OrderType\')">\r\n                        Order Type\r\n                        <i class="fa fa-caret-down" ng-show="priceSchedules.parameters.sortBy == \'OrderType\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="priceSchedules.parameters.sortBy == \'!OrderType\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col"></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="priceSchedule in priceSchedules.list.Items">\r\n                <th scope="row">{{priceSchedule.ID}}</th>\r\n                <td data-title="Name">{{priceSchedule.Name}}</td>\r\n                <td data-title="Type">{{priceSchedule.OrderType}}</td>\r\n                <td class="actions-cell">\r\n                    <button type="button" class="btn btn-default btn-sm"\r\n                            ui-sref="priceSchedules.edit({pricescheduleid: priceSchedule.ID})">Edit\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && priceSchedules.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="priceSchedules.list.Meta.TotalPages > 5" max-size="5"\r\n                            total-items="priceSchedules.list.Meta.TotalCount"\r\n                            items-per-page="priceSchedules.list.Meta.PageSize" ng-model="priceSchedules.list.Meta.Page"\r\n                            ng-change="priceSchedules.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="priceSchedules.list.Meta.Page < priceSchedules.list.Meta.TotalPages"\r\n                ng-click="priceSchedules.loadMore()">Load More\r\n        </button>\r\n    </div>\r\n</article>'),$templateCache.put("promotions/templates/promotion-input.tpl.html",'<div id="promotion_input">\r\n    <form name="promotion_input_form" ng-submit="promotionInput.Submit()" class="form-horizontal form-group">\r\n        <div class="input-group">\r\n            <input type="text" class="form-control" ng-model="promotionInput.code" placeholder="Promotion Code">\r\n            <div class="input-group-btn">\r\n                <button class="btn btn-primary" type="submit">Apply</button>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n'),$templateCache.put("promotions/templates/promotionAssignGroup.tpl.html",'<h3 class="page-header">\r\n    User Group Assignments for {{promotionAssignGroup.promotion.Name}}\r\n</h3>\r\n<ordercloud-search servicename="UserGroups" controlleras="promotionAssignGroup"></ordercloud-search>\r\n<section class="table-fixed-header">\r\n    <div class="table-header-bg"></div>\r\n    <div class="table-container" ordercloud-infinite-scroll servicename="UserGroups" controlleras="promotionAssignGroup" idname="UserGroupID" disable-dynamic-validation>\r\n        <table class="table table-hover">\r\n            <colgroup>\r\n                <col class="action-column">\r\n            </colgroup>\r\n            <thead>\r\n            <tr>\r\n                <th></th>\r\n                <th>\r\n                    <div>ID</div>\r\n                </th>\r\n                <th>\r\n                    <div>Name</div>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="group in promotionAssignGroup.list.Items track by $index">\r\n                <td class="text-center">\r\n                    <input name="{{\'assignCheckbox\' + $index}}" type="checkbox" ng-model="group.selected">\r\n                </td>\r\n                <td>{{group.ID}}</td>\r\n                <td>{{group.Name}}</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>\r\n<div class="form-group">\r\n    <button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n    <button type="button" class="btn btn-primary" ng-click="promotionAssignGroup.saveAssignments()">Update Group Assignments</button>\r\n    <button type="button" class="btn btn-default" ui-sref="^.assignUser({promotionid: promotionAssignGroup.promotion.ID})">Assign Users</button>\r\n</div>'),$templateCache.put("promotions/templates/promotionAssignUser.tpl.html",'<h3 class="page-header">\r\n    User Assignments for {{promotionAssignUser.promotion.Name}}\r\n</h3>\r\n<ordercloud-search servicename="Users" controlleras="promotionAssignUser"></ordercloud-search>\r\n<section class="table-fixed-header">\r\n    <div class="table-header-bg"></div>\r\n    <div class="table-container" ordercloud-infinite-scroll servicename="Users" controlleras="promotionAssignUser" idname="UserID" disable-dynamic-validation>\r\n        <table class="table table-hover">\r\n            <colgroup>\r\n                <col class="action-column">\r\n            </colgroup>\r\n            <thead>\r\n            <tr>\r\n                <th></th>\r\n                <th>\r\n                    <div>ID</div>\r\n                </th>\r\n                <th>\r\n                    <div>Username</div>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="user in promotionAssignUser.list.Items track by $index">\r\n                <td class="text-center">\r\n                    <input name="{{\'assignCheckbox\' + $index}}" type="checkbox" ng-model="user.selected">\r\n                </td>\r\n                <td>{{user.ID}}</td>\r\n                <td>{{user.Username}}</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>\r\n<div class="form-group">\r\n    <button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n    <button type="button" class="btn btn-primary" ng-click="promotionAssignUser.saveAssignments()">Update Party Assignments</button>\r\n    <button type="button" class="btn btn-default" ui-sref="^.assignGroup({promotionid: promotionAssignUser.promotion.ID})">Assign Groups</button>\r\n</div>'),$templateCache.put("promotions/templates/promotionCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New Promotion</b>\r\n</h3>\r\n<form name="PromotionCreateForm" ng-submit="promotionCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionIDInput">ID</label>\r\n            <input id="promotionIDInput" ordercloud-auto-id type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="promotionCreate.promotion.ID"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionNameInput">Promotion Name</label>\r\n            <input id="promotionNameInput" type="text" class="form-control" ng-model="promotionCreate.promotion.Name" ng-required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionCodeInput">Promotion Code</label>\r\n            <input id="promotionCodeInput" type="text" class="form-control" ng-model="promotionCreate.promotion.Code" ng-required="true"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionRedemptionCountInput">Redemption Count</label>\r\n            <input id="promotionRedemptionCountInput" type="number" class="form-control" ng-model="promotionCreate.promotion.RedemptionCount"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionRedemptionLimitInput">Redemption Limit</label>\r\n            <input id="promotionRedemptionLimitInput" type="number" class="form-control" ng-model="promotionCreate.promotion.RedemptionLimit"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionRedemptionLimitPerUserInput">Redemption Limit Per User</label>\r\n            <input id="promotionRedemptionLimitPerUserInput" type="number" class="form-control" ng-model="promotionCreate.promotion.RedemptionLimitPerUser"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="promotionDescriptionInput">Description</label>\r\n            <textarea id="promotionDescriptionInput" class="form-control" ng-model="promotionCreate.promotion.Description"></textarea>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="promotionFinePrintInput">Fine Print</label>\r\n            <textarea id="promotionFinePrintInput" class="form-control" ng-model="promotionCreate.promotion.FinePrint"></textarea>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionStartDateInput">Start Date</label>\r\n            <input class="form-control" ng-show="application.isTouchDevice" type="date" id="promotionStartDateInput2" ng-model="promotionCreate.promotion.StartDate"/>\r\n            <input id="promotionStartDateInput" ng-hide="application.isTouchDevice" type="text" ng-click="open1 = !open1" is-open="open1" uib-datepicker-popup="MM/dd/yyyy" datepicker-append-to-body="true" class="form-control" ng-model="promotionCreate.promotion.StartDate">\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionEndDateInput">End Date</label>\r\n            <input class="form-control" ng-show="application.isTouchDevice" type="date" id="promotionEndDateInput2" ng-model="promotionCreate.promotion.ExpirationDate"/>\r\n            <input id="promotionEndDateInput" ng-hide="application.isTouchDevice" type="text" ng-click="open2 = !open2" is-open="open2" uib-datepicker-popup="MM/dd/yyyy" datepicker-append-to-body="true" class="form-control" ng-model="promotionCreate.promotion.EndDate">\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="promotionCanCombineInput">\r\n            <input id="promotionCanCombineInput" type="checkbox" ng-model="promotionCreate.promotion.CanCombine"/>\r\n            Can Combine\r\n        </label>\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="promotionEligibleExpressionInput">Eligible Expression</label>\r\n        <div class="input-group">\r\n            <input id="promotionEligibleExpressionInput" type="text" class="form-control" ng-model="promotionCreate.promotion.EligibleExpression" ng-readonly="!promotionCreate.promotion.xp.OverrideEligibleExpression" ng-required="true"/>\r\n            <div class="input-group-btn">\r\n                <button type="button" class="btn btn-default" ng-class="{\'active\': promotionCreate.promotion.xp.OverrideEligibleExpression}" ng-click="promotionCreate.overrideEligibleExpression()"><i class="fa fa-edit"></i></button>\r\n                <button type="button" class="btn btn-info" ng-if="!promotionCreate.eligibleConditions.length" ng-click="promotionCreate.addEligibleCondition()" ng-disabled="promotionCreate.promotion.xp.OverrideEligibleExpression"><i class="fa fa-plus"></i> Add Condition</button>\r\n                <button type="button" class="btn btn-info dropdown-toggle" ng-if="promotionCreate.eligibleConditions.length" data-toggle="dropdown"><i class="fa fa-plus"></i> Add Condition <i class="fa fa-caret-down"></i></button>\r\n                <ul class="dropdown-menu">\r\n                    <li><a href="#" ng-click="promotionCreate.addEligibleCondition(\'or\')">Or</a></li>\r\n                    <li><a href="#" ng-click="promotionCreate.addEligibleCondition(\'and\')">And</a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row rule-condition" ng-repeat="condition in promotionCreate.eligibleConditions" ng-if="!promotionCreate.promotion.xp.OverrideEligibleExpression">\r\n        <div ng-if="condition.LogicalOperator">\r\n            <div class="form-group col-sm-1">\r\n                <select class="form-control" ng-model="condition.Value" ng-options="logicalOperator as logicalOperator for logicalOperator in [\'or\', \'and\']"></select>\r\n            </div>\r\n        </div>\r\n        <div ng-if="!condition.LogicalOperator">\r\n            <div class="form-group col-sm-1">\r\n                <label for="eligibleConditionObject{{$index}}">Object</label>\r\n                <select id="eligibleConditionObject{{$index}}" class="form-control" ng-model="condition.Object" ng-options="object.Value as object.Name for object in promotionCreate.expressionObjects" ng-change="promotionCreate.updateEligibleExpressionObject($index)"></select>\r\n            </div>\r\n\r\n            <div ng-if="condition.Object == \'order\'">\r\n                <div class="form-group col-sm-2">\r\n                    <label for="eligibleConditionOrderProperty{{$index}}">Property</label>\r\n                    <select id="eligibleConditionOrderProperty{{$index}}" class="form-control" ng-model="condition.Property" ng-options="property.Value as property.Name for property in promotionCreate.expressionProperties | promotionproperties:\'eligible\':condition.Object"></select>\r\n                </div>\r\n                <div class="form-group col-sm-2" ng-if="condition.Property == \'xp\'">\r\n                    <label for="eligibleConditionOrderXPProperty{{$index}}">XP Property</label>\r\n                    <input id="eligibleConditionOrderXPProperty{{$index}}" class="form-control" ng-model="condition.XPProperty" />\r\n                </div>\r\n                <div class="form-group col-sm-1">\r\n                    <label for="eligibleConditionOrderOperator{{$index}}">Operator</label>\r\n                    <select id="eligibleConditionOrderOperator{{$index}}" class="form-control" ng-model="condition.Operator" ng-options="operator as operator for operator in promotionCreate.expressionComparisonOperators | comparisonoperators:condition.Property"></select>\r\n                </div>\r\n                <div class="form-group col-sm-2">\r\n                    <label>Value</label>\r\n                    <div class="input-group">\r\n                        <input type="text" ng-if="condition.ValueType == \'String\'" class="form-control" ng-model="condition.Value" />\r\n                        <input type="number" ng-if="condition.ValueType == \'Number\'" class="form-control" ng-model="condition.Value" />\r\n                        <input type="text" ng-if="condition.ValueType == \'Date\'" class="form-control" uib-datepicker-popup="shortDate" ng-focus="promotionCreate.openEligibleConditionDate($index)" is-open="condition.DatePickerOpen" ng-model="condition.Value" />\r\n                        <div class="input-group-btn">\r\n                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa" ng-class="{\'fa-font\': condition.ValueType == \'String\', \'fa-hashtag\': condition.ValueType == \'Number\', \'fa-calendar\': condition.ValueType == \'Date\'}"></i> <i class="fa fa-caret-down"></i></button>\r\n                            <ul class="dropdown-menu dropdown-menu-right">\r\n                                <li><a href="#" ng-click="promotionCreate.changeEligibleConditionValueType(\'String\', $index)">String</a></li>\r\n                                <li><a href="#" ng-click="promotionCreate.changeEligibleConditionValueType(\'Number\', $index)">Number</a></li>\r\n                                <li><a href="#" ng-click="promotionCreate.changeEligibleConditionValueType(\'Date\', $index)">Date</a></li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div ng-if="condition.Object == \'items\'">\r\n                <div class="form-group col-sm-1">\r\n                    <label for="eligibleConditionFunction{{$index}}">Function</label>\r\n                    <select id="eligibleConditionFunction{{$index}}" class="form-control" ng-model="condition.Function" ng-options="function.Value as function.Name for function in promotionCreate.expressionFunctions | promotionfunctions:\'eligible\'"></select>\r\n                </div>\r\n                <div class="col-sm-6 panel panel-default" ng-if="condition.Function">\r\n                    <div ng-repeat="item in condition.ItemConditions" class="row">\r\n                        <div ng-if="item.LogicalOperator">\r\n                            <div class="form-group col-sm-2">\r\n                                <select class="form-control" ng-model="item.Value" ng-options="logicalOperator as logicalOperator for logicalOperator in [\'or\', \'and\']"></select>\r\n                            </div>\r\n                        </div>\r\n                        <div ng-if="!item.LogicalOperator">\r\n                            <div class="form-group col-sm-3">\r\n                                <label for="eligibleConditionItemProperty{{$index}}">Property {{($index + 2)/2}}</label>\r\n                                <select id="eligibleConditionItemProperty{{$index}}" class="form-control" ng-model="condition.ItemConditions[$index].Property" ng-options="property.Value as property.Name for property in promotionCreate.expressionProperties | promotionproperties:\'eligible\':condition.Object"></select>\r\n                            </div>\r\n                            <div class="form-group col-sm-3" ng-if="condition.ItemConditions[$index].Property == \'xp\'">\r\n                                <label for="eligibleConditionItemXPProperty{{$index}}">XP Property {{($index + 2)/2}}</label>\r\n                                <input id="eligibleConditionItemXPProperty{{$index}}" class="form-control" ng-model="condition.ItemConditions[$index].XPProperty" />\r\n                            </div>\r\n                            <div class="form-group col-sm-2">\r\n                                <label for="eligibleConditionItemConditionOperator{{$index}}">Operator</label>\r\n                                <select id="eligibleConditionItemConditionOperator{{$index}}" class="form-control" ng-model="condition.ItemConditions[$index].Operator" ng-options="operator as operator for operator in promotionCreate.expressionComparisonOperators | comparisonoperators:condition.ItemConditions[$index].Property"></select>\r\n                            </div>\r\n                            <div class="form-group" ng-class="{\'col-sm-5\': condition.ItemConditions[$index].Property != \'xp\', \'col-sm-3\': condition.ItemConditions[$index].Property == \'xp\'}">\r\n                                <label>Value</label>\r\n                                <div class="input-group">\r\n                                    <input type="text" ng-if="condition.ItemConditions[$index].ValueType == \'String\'" class="form-control" ng-model="condition.ItemConditions[$index].Value" />\r\n                                    <input type="number" ng-if="condition.ItemConditions[$index].ValueType == \'Number\'" class="form-control" ng-model="condition.ItemConditions[$index].Value" />\r\n                                    <input type="text" ng-if="condition.ItemConditions[$index].ValueType == \'Date\'" class="form-control" uib-datepicker-popup="shortDate" ng-focus="promotionCreate.openEligibleConditionItemConditionDate($parent.$index, $index)" is-open="condition.ItemConditions[$index].DatePickerOpen" ng-model="condition.ItemConditions[$index].Value" />\r\n                                    <div class="input-group-btn">\r\n                                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa" ng-class="{\'fa-font\': item.ValueType == \'String\', \'fa-hashtag\': item.ValueType == \'Number\', \'fa-calendar\': item.ValueType == \'Date\'}"></i> <i class="fa fa-caret-down"></i></button>\r\n                                        <ul class="dropdown-menu dropdown-menu-right">\r\n                                            <li><a href="#" ng-click="promotionCreate.changeEligibleConditionItemConditionValueType(\'String\', $parent.$parent.$parent.$index, $index)">String</a></li>\r\n                                            <li><a href="#" ng-click="promotionCreate.changeEligibleConditionItemConditionValueType(\'Number\', $parent.$parent.$parent.$index, $index)">Number</a></li>\r\n                                            <li><a href="#" ng-click="promotionCreate.changeEligibleConditionItemConditionValueType(\'Date\', $parent.$parent.$parent.$index, $index)">Date</a></li>\r\n                                        </ul>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="form-group col-sm-1 pull-right">\r\n                                <div class="btn-group" ng-if="$index == 0">\r\n                                    <button type="button" class="btn btn-info dropdown-toggle btn-inline-condition" data-toggle="dropdown"><i class="fa fa-plus"></i> <i class="fa fa-caret-down"></i></button>\r\n                                    <ul class="dropdown-menu">\r\n                                        <li><a href="#" ng-click="promotionCreate.addEligibleConditionItemCondition(\'or\', $parent.$index)">Or</a></li>\r\n                                        <li><a href="#" ng-click="promotionCreate.addEligibleConditionItemCondition(\'and\', $parent.$index)">And</a></li>\r\n                                    </ul>\r\n                                </div>\r\n                                <button type="button" class="btn btn-danger btn-inline-condition" ng-if="$index > 0" ng-click="promotionCreate.removeEligibleConditionItemCondition($parent.$parent.$parent.$index, $index)"><i class="fa fa-times"></i></button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div ng-if="condition.Function && (promotionCreate.expressionComparisonOperators | comparisonoperators:condition.Function).length">\r\n                    <div class="form-group col-sm-1">\r\n                        <label for="eligibleConditionItemOperator{{$index}}">Operator</label>\r\n                        <select id="eligibleConditionItemOperator{{$index}}" class="form-control" ng-model="condition.Operator" ng-options="operator as operator for operator in promotionCreate.expressionComparisonOperators | comparisonoperators:condition.Function"></select>\r\n                    </div>\r\n                    <div class="form-group col-sm-2">\r\n                        <label>Value</label>\r\n                        <div class="input-group">\r\n                            <input type="text" ng-if="condition.ValueType == \'String\'" class="form-control" ng-model="condition.Value" />\r\n                            <input type="number" ng-if="condition.ValueType == \'Number\'" class="form-control" ng-model="condition.Value" />\r\n                            <input type="text" ng-if="condition.ValueType == \'Date\'" class="form-control" uib-datepicker-popup="shortDate" ng-focus="promotionCreate.openEligibleConditionDate($index)" is-open="condition.DatePickerOpen" ng-model="condition.Value" />\r\n                            <div class="input-group-btn">\r\n                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa" ng-class="{\'fa-font\': condition.ValueType == \'String\', \'fa-hashtag\': condition.ValueType == \'Number\', \'fa-calendar\': condition.ValueType == \'Date\'}"></i> <i class="fa fa-caret-down"></i></button>\r\n                                <ul class="dropdown-menu dropdown-menu-right">\r\n                                    <li><a href="#" ng-click="promotionCreate.changeEligibleConditionValueType(\'String\', $index)">String</a></li>\r\n                                    <li><a href="#" ng-click="promotionCreate.changeEligibleConditionValueType(\'Number\', $index)">Number</a></li>\r\n                                    <li><a href="#" ng-click="promotionCreate.changeEligibleConditionValueType(\'Date\', $index)">Date</a></li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-sm-2" ng-if="$index">\r\n                <button type="button" class="btn btn-danger btn-inline-condition" ng-click="promotionCreate.removeEligibleCondition($index)">Remove</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="promotionValueExpressionInput">Value Expression</label>\r\n        <div class="input-group">\r\n            <input id="promotionValueExpressionInput" type="text" class="form-control" ng-model="promotionCreate.promotion.ValueExpression" ng-readonly="!promotionCreate.promotion.xp.OverrideValueExpression" ng-required="true"/>\r\n            <div class="input-group-btn">\r\n                <button type="button" class="btn btn-default" ng-class="{\'active\': promotionCreate.promotion.xp.OverrideValueExpression}" ng-click="promotionCreate.overrideValueExpression()"><i class="fa fa-edit"></i></button>\r\n                <button type="button" class="btn btn-info" ng-if="!promotionCreate.valueConditions.length" ng-click="promotionCreate.addValueCondition()" ng-disabled="promotionCreate.promotion.xp.OverrideValueExpression"><i class="fa fa-plus"></i> Add Condition</button>\r\n                <button type="button" class="btn btn-info dropdown-toggle" ng-if="promotionCreate.valueConditions.length" data-toggle="dropdown"><i class="fa fa-plus"></i> Add Condition <i class="fa fa-caret-down"></i></button>\r\n                <ul class="dropdown-menu">\r\n                    <li><a href="#" ng-click="promotionCreate.addValueCondition(\'+\')">+</a></li>\r\n                    <li><a href="#" ng-click="promotionCreate.addValueCondition(\'-\')">-</a></li>\r\n                    <li><a href="#" ng-click="promotionCreate.addValueCondition(\'*\')">*</a></li>\r\n                    <li><a href="#" ng-click="promotionCreate.addValueCondition(\'/\')">/</a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row rule-condition" ng-repeat="condition in promotionCreate.valueConditions" ng-if="!promotionCreate.promotion.xp.OverrideValueExpression">\r\n        <div ng-if="condition.ConditionOperator">\r\n            <div class="form-group col-sm-1">\r\n                <select class="form-control" ng-model="condition.Value" ng-options="conditionOperator as conditionOperator for conditionOperator in promotionCreate.expressionArithmeticOperators"></select>\r\n            </div>\r\n        </div>\r\n        <div ng-if="!condition.ConditionOperator">\r\n            <div class="form-group col-sm-1">\r\n                <label for="valueConditionObject{{$index}}">Object</label>\r\n                <select id="valueConditionObject{{$index}}" class="form-control" ng-model="condition.Object" ng-options="object.Value as object.Name for object in promotionCreate.expressionObjects" ng-change="promotionCreate.updateValueExpressionObject($index)"></select>\r\n            </div>\r\n\r\n            <div ng-if="condition.Object == \'order\'">\r\n                <div class="form-group col-sm-2">\r\n                    <label for="valueConditionOrderProperty{{$index}}">Property</label>\r\n                    <select id="valueConditionOrderProperty{{$index}}" class="form-control" ng-model="condition.Property" ng-options="property.Value as property.Name for property in promotionCreate.expressionProperties | promotionproperties:\'value\':condition.Object"></select>\r\n                </div>\r\n                <div class="form-group col-sm-2" ng-if="condition.Property.Value == \'xp\'">\r\n                    <label for="valueConditionOrderXPProperty{{$index}}">XP Property</label>\r\n                    <input id="valueConditionOrderXPProperty{{$index}}" class="form-control" ng-model="condition.XPProperty" />\r\n                </div>\r\n                <div class="form-group col-sm-1" ng-if="condition.Property">\r\n                    <label for="valueConditionOrderOperator{{$index}}">Operator</label>\r\n                    <select id="valueConditionOrderOperator{{$index}}" class="form-control" ng-model="condition.Operator" ng-options="operator as operator for operator in promotionCreate.expressionArithmeticOperators"></select>\r\n                </div>\r\n                <div class="form-group col-sm-2" ng-if="condition.Property">\r\n                    <label>Value</label>\r\n                    <input type="number" class="form-control" ng-model="condition.Value" />\r\n                </div>\r\n            </div>\r\n            <div ng-if="condition.Object == \'items\'">\r\n                <div class="form-group col-sm-1">\r\n                    <label for="valueConditionFunction{{$index}}">Function</label>\r\n                    <select id="valueConditionFunction{{$index}}" class="form-control" ng-model="condition.Function" ng-options="function.Value as function.Name for function in promotionCreate.expressionFunctions | promotionfunctions:\'value\'"></select>\r\n                </div>\r\n                <div class="col-sm-6 panel panel-default" ng-if="condition.Function">\r\n                    <div ng-repeat="item in condition.ItemConditions" class="row">\r\n                        <div ng-if="item.LogicalOperator">\r\n                            <div class="form-group col-sm-2">\r\n                                <select class="form-control" ng-model="item.Value" ng-options="logicalOperator as logicalOperator for logicalOperator in [\'or\', \'and\']"></select>\r\n                            </div>\r\n                        </div>\r\n                        <div ng-if="!item.LogicalOperator">\r\n                            <div class="form-group col-sm-3">\r\n                                <label for="valueConditionItemProperty{{$index}}">Property {{($index + 2)/2}}</label>\r\n                                <select id="valueConditionItemProperty{{$index}}" class="form-control" ng-model="condition.ItemConditions[$index].Property" ng-options="property.Value as property.Name for property in promotionCreate.expressionProperties | promotionproperties:\'value\':condition.Object"></select>\r\n                            </div>\r\n                            <div class="form-group col-sm-3" ng-if="condition.ItemConditions[$index].Property == \'xp\'">\r\n                                <label for="valueConditionItemXPProperty{{$index}}">XP Property {{($index + 2)/2}}</label>\r\n                                <input id="valueConditionItemXPProperty{{$index}}" class="form-control" ng-model="condition.ItemConditions[$index].XPProperty" />\r\n                            </div>\r\n                            <div class="form-group col-sm-2">\r\n                                <label for="valueConditionOrderConditionOperator{{$index}}">Operator</label>\r\n                                <select id="valueConditionOrderConditionOperator{{$index}}" class="form-control" ng-model="condition.ItemConditions[$index].Operator" ng-options="operator as operator for operator in promotionCreate.expressionArithmeticOperators"></select>\r\n                            </div>\r\n                            <div class="form-group" ng-class="{\'col-sm-5\': condition.ItemConditions[$index].Property != \'xp\', \'col-sm-3\': condition.ItemConditions[$index].Property == \'xp\'}">\r\n                                <label>Value</label>\r\n                                <div class="input-group">\r\n                                    <input type="text" ng-if="condition.ItemConditions[$index].ValueType == \'String\'" class="form-control" ng-model="condition.ItemConditions[$index].Value" />\r\n                                    <input type="number" ng-if="condition.ItemConditions[$index].ValueType == \'Number\'" class="form-control" ng-model="condition.ItemConditions[$index].Value" />\r\n                                    <input type="text" ng-if="condition.ItemConditions[$index].ValueType == \'Date\'" class="form-control" uib-datepicker-popup="shortDate" ng-focus="promotionCreate.openValueConditionItemConditionDate($parent.$index, $index)" is-open="condition.ItemConditions[$index].DatePickerOpen" ng-model="condition.ItemConditions[$index].Value" />\r\n                                    <div class="input-group-btn">\r\n                                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa" ng-class="{\'fa-font\': item.ValueType == \'String\', \'fa-hashtag\': item.ValueType == \'Number\', \'fa-calendar\': item.ValueType == \'Date\'}"></i> <i class="fa fa-caret-down"></i></button>\r\n                                        <ul class="dropdown-menu dropdown-menu-right">\r\n                                            <li><a href="#" ng-click="promotionCreate.changeValueConditionItemConditionValueType(\'String\', $parent.$parent.$parent.$index, $index)">String</a></li>\r\n                                            <li><a href="#" ng-click="promotionCreate.changeValueConditionItemConditionValueType(\'Number\', $parent.$parent.$parent.$index, $index)">Number</a></li>\r\n                                            <li><a href="#" ng-click="promotionCreate.changeValueConditionItemConditionValueType(\'Date\', $parent.$parent.$parent.$index, $index)">Date</a></li>\r\n                                        </ul>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="form-group col-sm-1 pull-right">\r\n                                <div class="btn-group" ng-if="$index == 0">\r\n                                    <button type="button" class="btn btn-info dropdown-toggle btn-inline-condition" data-toggle="dropdown"><i class="fa fa-plus"></i> <i class="fa fa-caret-down"></i></button>\r\n                                    <ul class="dropdown-menu">\r\n                                        <li><a href="#" ng-click="promotionCreate.addValueConditionItemCondition(\'or\', $parent.$index)">Or</a></li>\r\n                                        <li><a href="#" ng-click="promotionCreate.addValueConditionItemCondition(\'and\', $parent.$index)">And</a></li>\r\n                                    </ul>\r\n                                </div>\r\n                                <button type="button" class="btn btn-danger btn-inline-condition" ng-if="$index > 0" ng-click="promotionCreate.removeValueConditionItemCondition($parent.$parent.$parent.$index, $index)"><i class="fa fa-times"></i></button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div ng-if="!condition.Object">\r\n                <div class="form-group col-sm-1 text-center">\r\n                    <label>Or</label>\r\n                </div>\r\n                <div class="form-group col-sm-2">\r\n                    <label>Value</label>\r\n                    <input type="number" class="form-control" ng-model="condition.Value" />\r\n                </div>\r\n            </div>\r\n\r\n            <div class="col-sm-2" ng-if="$index">\r\n                <button type="button" class="btn btn-danger btn-inline-condition" ng-click="promotionCreate.removeValueCondition($index)">Remove</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="PromotionCreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>'),
$templateCache.put("promotions/templates/promotionEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit Promotion:</b> {{promotionEdit.promotionName}}\r\n</h3>\r\n<form name="PromotionEditForm" ng-submit="promotionEdit.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionIDInput">ID</label>\r\n            <input id="promotionIDInput" ordercloud-auto-id type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="promotionEdit.promotion.ID"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionNameInput">Promotion Name</label>\r\n            <input id="promotionNameInput" type="text" class="form-control" ng-model="promotionEdit.promotion.Name"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionCodeInput">Promotion Code</label>\r\n            <input id="promotionCodeInput" type="text" class="form-control" ng-model="promotionEdit.promotion.Code" required="true"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionRedemptionCountInput">Redemption Count</label>\r\n            <input id="promotionRedemptionCountInput" type="number" class="form-control" ng-model="promotionEdit.promotion.RedemptionCount"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionRedemptionLimitInput">Redemption Limit</label>\r\n            <input id="promotionRedemptionLimitInput" type="number" class="form-control" ng-model="promotionEdit.promotion.RedemptionLimit"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="promotionRedemptionLimitPerUserInput">Redemption Limit Per User</label>\r\n            <input id="promotionRedemptionLimitPerUserInput" type="number" class="form-control" ng-model="promotionEdit.promotion.RedemptionLimitPerUser"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="promotionDescriptionInput">Description</label>\r\n            <textarea id="promotionDescriptionInput" type="text" class="form-control" ng-model="promotionEdit.promotion.Description"></textarea>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="promotionFinePrintInput">Fine Print</label>\r\n            <textarea id="promotionFinePrintInput" type="text" class="form-control" ng-model="promotionEdit.promotion.FinePrint"></textarea>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="promotionStartDateInput">Start Date</label>\r\n            <input class="form-control" ng-show="application.isTouchDevice" type="date" id="promotionStartDateInput2" ng-model="promotionEdit.promotion.StartDate"/>\r\n            <input id="promotionStartDateInput" ng-hide="application.isTouchDevice" type="text" ng-click="open1 = !open1" is-open="open1" uib-datepicker-popup="MM/dd/yyyy" datepicker-append-to-body="true" class="form-control" ng-model="promotionEdit.promotion.StartDate">\r\n        </div>\r\n        <div class="form-group col-md-6">\r\n            <label for="promotionEndDateInput">End Date</label>\r\n            <input class="form-control" ng-show="application.isTouchDevice" type="date" id="promotionEndDateInput2" ng-model="promotionEdit.promotion.ExpirationDate"/>\r\n            <input id="promotionEndDateInput" ng-hide="application.isTouchDevice" type="text" ng-click="open2 = !open2" is-open="open2" uib-datepicker-popup="MM/dd/yyyy" datepicker-append-to-body="true" class="form-control" ng-model="promotionEdit.promotion.EndDate">\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-12">\r\n            <label for="promotionCanCombineInput">\r\n                <input id="promotionCanCombineInput" type="checkbox" ng-model="promotionEdit.promotion.CanCombine"/>\r\n                Can Combine\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="promotionEligibleExpressionInput">Eligible Expression</label>\r\n        <div class="input-group">\r\n            <input id="promotionEligibleExpressionInput" type="text" class="form-control" ng-model="promotionEdit.promotion.EligibleExpression" ng-readonly="!promotionEdit.promotion.xp.OverrideEligibleExpression" ng-required="true"/>\r\n            <div class="input-group-btn">\r\n                <button type="button" class="btn btn-default" ng-class="{\'active\': promotionEdit.promotion.xp.OverrideEligibleExpression}" ng-click="promotionEdit.overrideEligibleExpression()"><i class="fa fa-edit"></i></button>\r\n                <button type="button" class="btn btn-info" ng-if="!promotionEdit.eligibleConditions.length" ng-click="promotionEdit.addEligibleCondition()" ng-disabled="promotionEdit.promotion.xp.OverrideEligibleExpression"><i class="fa fa-plus"></i> Add Condition</button>\r\n                <button type="button" class="btn btn-info dropdown-toggle" ng-if="promotionEdit.eligibleConditions.length" data-toggle="dropdown"><i class="fa fa-plus"></i> Add Condition <i class="fa fa-caret-down"></i></button>\r\n                <ul class="dropdown-menu">\r\n                    <li><a href="#" ng-click="promotionEdit.addEligibleCondition(\'or\')">Or</a></li>\r\n                    <li><a href="#" ng-click="promotionEdit.addEligibleCondition(\'and\')">And</a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row rule-condition" ng-repeat="condition in promotionEdit.eligibleConditions" ng-if="!promotionEdit.promotion.xp.OverrideEligibleExpression">\r\n        <div ng-if="condition.LogicalOperator">\r\n            <div class="form-group col-sm-1">\r\n                <select class="form-control" ng-model="condition.Value" ng-options="logicalOperator as logicalOperator for logicalOperator in [\'or\', \'and\']"></select>\r\n            </div>\r\n        </div>\r\n        <div ng-if="!condition.LogicalOperator">\r\n            <div class="form-group col-sm-1">\r\n                <label for="eligibleConditionObject{{$index}}">Object</label>\r\n                <select id="eligibleConditionObject{{$index}}" class="form-control" ng-model="condition.Object" ng-options="object.Value as object.Name for object in promotionEdit.expressionObjects" ng-change="promotionEdit.updateEligibleExpressionObject($index)"></select>\r\n            </div>\r\n\r\n            <div ng-if="condition.Object == \'order\'">\r\n                <div class="form-group col-sm-2">\r\n                    <label for="eligibleConditionOrderProperty{{$index}}">Property</label>\r\n                    <select id="eligibleConditionOrderProperty{{$index}}" class="form-control" ng-model="condition.Property" ng-options="property.Value as property.Name for property in promotionEdit.expressionProperties | promotionproperties:\'eligible\':condition.Object"></select>\r\n                </div>\r\n                <div class="form-group col-sm-2" ng-if="condition.Property == \'xp\'">\r\n                    <label for="eligibleConditionOrderXPProperty{{$index}}">XP Property</label>\r\n                    <input id="eligibleConditionOrderXPProperty{{$index}}" class="form-control" ng-model="condition.XPProperty" />\r\n                </div>\r\n                <div class="form-group col-sm-1">\r\n                    <label for="eligibleConditionOrderOperator{{$index}}">Operator</label>\r\n                    <select id="eligibleConditionOrderOperator{{$index}}" class="form-control" ng-model="condition.Operator" ng-options="operator as operator for operator in promotionEdit.expressionComparisonOperators | comparisonoperators:condition.Property"></select>\r\n                </div>\r\n                <div class="form-group col-sm-2">\r\n                    <label>Value</label>\r\n                    <div class="input-group">\r\n                        <input type="text" ng-if="condition.ValueType == \'String\'" class="form-control" ng-model="condition.Value" />\r\n                        <input type="number" ng-if="condition.ValueType == \'Number\'" class="form-control" ng-model="condition.Value" />\r\n                        <input type="text" ng-if="condition.ValueType == \'Date\'" class="form-control" uib-datepicker-popup="shortDate" ng-focus="promotionEdit.openEligibleConditionDate($index)" is-open="condition.DatePickerOpen" ng-model="condition.Value" />\r\n                        <div class="input-group-btn">\r\n                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa" ng-class="{\'fa-font\': condition.ValueType == \'String\', \'fa-hashtag\': condition.ValueType == \'Number\', \'fa-calendar\': condition.ValueType == \'Date\'}"></i> <i class="fa fa-caret-down"></i></button>\r\n                            <ul class="dropdown-menu dropdown-menu-right">\r\n                                <li><a href="#" ng-click="promotionEdit.changeEligibleConditionValueType(\'String\', $index)">String</a></li>\r\n                                <li><a href="#" ng-click="promotionEdit.changeEligibleConditionValueType(\'Number\', $index)">Number</a></li>\r\n                                <li><a href="#" ng-click="promotionEdit.changeEligibleConditionValueType(\'Date\', $index)">Date</a></li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div ng-if="condition.Object == \'items\'">\r\n                <div class="form-group col-sm-1">\r\n                    <label for="eligibleConditionFunction{{$index}}">Function</label>\r\n                    <select id="eligibleConditionFunction{{$index}}" class="form-control" ng-model="condition.Function" ng-options="function.Value as function.Name for function in promotionEdit.expressionFunctions | promotionfunctions:\'eligible\'"></select>\r\n                </div>\r\n                <div class="col-sm-6 panel panel-default" ng-if="condition.Function">\r\n                    <div ng-repeat="item in condition.ItemConditions" class="row">\r\n                        <div ng-if="item.LogicalOperator">\r\n                            <div class="form-group col-sm-2">\r\n                                <select class="form-control" ng-model="item.Value" ng-options="logicalOperator as logicalOperator for logicalOperator in [\'or\', \'and\']"></select>\r\n                            </div>\r\n                        </div>\r\n                        <div ng-if="!item.LogicalOperator">\r\n                            <div class="form-group col-sm-3">\r\n                                <label for="eligibleConditionItemProperty{{$index}}">Property {{($index + 2)/2}}</label>\r\n                                <select id="eligibleConditionItemProperty{{$index}}" class="form-control" ng-model="condition.ItemConditions[$index].Property" ng-options="property.Value as property.Name for property in promotionEdit.expressionProperties | promotionproperties:\'eligible\':condition.Object"></select>\r\n                            </div>\r\n                            <div class="form-group col-sm-3" ng-if="condition.ItemConditions[$index].Property == \'xp\'">\r\n                                <label for="eligibleConditionItemXPProperty{{$index}}">XP Property {{($index + 2)/2}}</label>\r\n                                <input id="eligibleConditionItemXPProperty{{$index}}" class="form-control" ng-model="condition.ItemConditions[$index].XPProperty" />\r\n                            </div>\r\n                            <div class="form-group col-sm-2">\r\n                                <label for="eligibleConditionItemConditionOperator{{$index}}">Operator</label>\r\n                                <select id="eligibleConditionItemConditionOperator{{$index}}" class="form-control" ng-model="condition.ItemConditions[$index].Operator" ng-options="operator as operator for operator in promotionEdit.expressionComparisonOperators | comparisonoperators:condition.ItemConditions[$index].Property"></select>\r\n                            </div>\r\n                            <div class="form-group" ng-class="{\'col-sm-5\': condition.ItemConditions[$index].Property != \'xp\', \'col-sm-3\': condition.ItemConditions[$index].Property == \'xp\'}">\r\n                                <label>Value</label>\r\n                                <div class="input-group">\r\n                                    <input type="text" ng-if="condition.ItemConditions[$index].ValueType == \'String\'" class="form-control" ng-model="condition.ItemConditions[$index].Value" />\r\n                                    <input type="number" ng-if="condition.ItemConditions[$index].ValueType == \'Number\'" class="form-control" ng-model="condition.ItemConditions[$index].Value" />\r\n                                    <input type="text" ng-if="condition.ItemConditions[$index].ValueType == \'Date\'" class="form-control" uib-datepicker-popup="shortDate" ng-focus="promotionEdit.openEligibleConditionItemConditionDate($parent.$index, $index)" is-open="condition.ItemConditions[$index].DatePickerOpen" ng-model="condition.ItemConditions[$index].Value" />\r\n                                    <div class="input-group-btn">\r\n                                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa" ng-class="{\'fa-font\': item.ValueType == \'String\', \'fa-hashtag\': item.ValueType == \'Number\', \'fa-calendar\': item.ValueType == \'Date\'}"></i> <i class="fa fa-caret-down"></i></button>\r\n                                        <ul class="dropdown-menu dropdown-menu-right">\r\n                                            <li><a href="#" ng-click="promotionEdit.changeEligibleConditionItemConditionValueType(\'String\', $parent.$parent.$parent.$index, $index)">String</a></li>\r\n                                            <li><a href="#" ng-click="promotionEdit.changeEligibleConditionItemConditionValueType(\'Number\', $parent.$parent.$parent.$index, $index)">Number</a></li>\r\n                                            <li><a href="#" ng-click="promotionEdit.changeEligibleConditionItemConditionValueType(\'Date\', $parent.$parent.$parent.$index, $index)">Date</a></li>\r\n                                        </ul>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="form-group col-sm-1 pull-right">\r\n                                <div class="btn-group" ng-if="$index == 0">\r\n                                    <button type="button" class="btn btn-info dropdown-toggle btn-inline-condition" data-toggle="dropdown"><i class="fa fa-plus"></i> <i class="fa fa-caret-down"></i></button>\r\n                                    <ul class="dropdown-menu">\r\n                                        <li><a href="#" ng-click="promotionEdit.addEligibleConditionItemCondition(\'or\', $parent.$index)">Or</a></li>\r\n                                        <li><a href="#" ng-click="promotionEdit.addEligibleConditionItemCondition(\'and\', $parent.$index)">And</a></li>\r\n                                    </ul>\r\n                                </div>\r\n                                <button type="button" class="btn btn-danger btn-inline-condition" ng-if="$index > 0" ng-click="promotionEdit.removeEligibleConditionItemCondition($parent.$parent.$parent.$index, $index)"><i class="fa fa-times"></i></button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div ng-if="condition.Function && (promotionEdit.expressionComparisonOperators | comparisonoperators:condition.Function).length">\r\n                    <div class="form-group col-sm-1">\r\n                        <label for="eligibleConditionItemOperator{{$index}}">Operator</label>\r\n                        <select id="eligibleConditionItemOperator{{$index}}" class="form-control" ng-model="condition.Operator" ng-options="operator as operator for operator in promotionEdit.expressionComparisonOperators | comparisonoperators:condition.Function"></select>\r\n                    </div>\r\n                    <div class="form-group col-sm-2">\r\n                        <label>Value</label>\r\n                        <div class="input-group">\r\n                            <input type="text" ng-if="condition.ValueType == \'String\'" class="form-control" ng-model="condition.Value" />\r\n                            <input type="number" ng-if="condition.ValueType == \'Number\'" class="form-control" ng-model="condition.Value" />\r\n                            <input type="text" ng-if="condition.ValueType == \'Date\'" class="form-control" uib-datepicker-popup="shortDate" ng-focus="promotionEdit.openEligibleConditionDate($index)" is-open="condition.DatePickerOpen" ng-model="condition.Value" />\r\n                            <div class="input-group-btn">\r\n                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa" ng-class="{\'fa-font\': condition.ValueType == \'String\', \'fa-hashtag\': condition.ValueType == \'Number\', \'fa-calendar\': condition.ValueType == \'Date\'}"></i> <i class="fa fa-caret-down"></i></button>\r\n                                <ul class="dropdown-menu dropdown-menu-right">\r\n                                    <li><a href="#" ng-click="promotionEdit.changeEligibleConditionValueType(\'String\', $index)">String</a></li>\r\n                                    <li><a href="#" ng-click="promotionEdit.changeEligibleConditionValueType(\'Number\', $index)">Number</a></li>\r\n                                    <li><a href="#" ng-click="promotionEdit.changeEligibleConditionValueType(\'Date\', $index)">Date</a></li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-sm-2" ng-if="$index">\r\n                <button type="button" class="btn btn-danger btn-inline-condition" ng-click="promotionEdit.removeEligibleCondition($index)">Remove</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="promotionValueExpressionInput">Value Expression</label>\r\n        <div class="input-group">\r\n            <input id="promotionValueExpressionInput" type="text" class="form-control" ng-model="promotionEdit.promotion.ValueExpression" ng-readonly="!promotionEdit.promotion.xp.OverrideValueExpression" ng-required="true"/>\r\n            <div class="input-group-btn">\r\n                <button type="button" class="btn btn-default" ng-class="{\'active\': promotionEdit.promotion.xp.OverrideValueExpression}" ng-click="promotionEdit.overrideValueExpression()"><i class="fa fa-edit"></i></button>\r\n                <button type="button" class="btn btn-info" ng-if="!promotionEdit.valueConditions.length" ng-click="promotionEdit.addValueCondition()" ng-disabled="promotionEdit.promotion.xp.OverrideValueExpression"><i class="fa fa-plus"></i> Add Condition</button>\r\n                <button type="button" class="btn btn-info dropdown-toggle" ng-if="promotionEdit.valueConditions.length" data-toggle="dropdown"><i class="fa fa-plus"></i> Add Condition <i class="fa fa-caret-down"></i></button>\r\n                <ul class="dropdown-menu">\r\n                    <li><a href="#" ng-click="promotionEdit.addValueCondition(\'+\')">+</a></li>\r\n                    <li><a href="#" ng-click="promotionEdit.addValueCondition(\'-\')">-</a></li>\r\n                    <li><a href="#" ng-click="promotionEdit.addValueCondition(\'*\')">*</a></li>\r\n                    <li><a href="#" ng-click="promotionEdit.addValueCondition(\'/\')">/</a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row rule-condition" ng-repeat="condition in promotionEdit.valueConditions" ng-if="!promotionEdit.promotion.xp.OverrideValueExpression">\r\n        <div ng-if="condition.ConditionOperator">\r\n            <div class="form-group col-sm-1">\r\n                <select class="form-control" ng-model="condition.Value" ng-options="conditionOperator as conditionOperator for conditionOperator in promotionEdit.expressionArithmeticOperators"></select>\r\n            </div>\r\n        </div>\r\n        <div ng-if="!condition.ConditionOperator">\r\n            <div class="form-group col-sm-1">\r\n                <label for="valueConditionObject{{$index}}">Object</label>\r\n                <select id="valueConditionObject{{$index}}" class="form-control" ng-model="condition.Object" ng-options="object.Value as object.Name for object in promotionEdit.expressionObjects" ng-change="promotionEdit.updateValueExpressionObject($index)"></select>\r\n            </div>\r\n\r\n            <div ng-if="condition.Object == \'order\'">\r\n                <div class="form-group col-sm-2">\r\n                    <label for="valueConditionOrderProperty{{$index}}">Property</label>\r\n                    <select id="valueConditionOrderProperty{{$index}}" class="form-control" ng-model="condition.Property" ng-options="property.Value as property.Name for property in promotionEdit.expressionProperties | promotionproperties:\'value\':condition.Object"></select>\r\n                </div>\r\n                <div class="form-group col-sm-2" ng-if="condition.Property.Value == \'xp\'">\r\n                    <label for="valueConditionOrderXPProperty{{$index}}">XP Property</label>\r\n                    <input id="valueConditionOrderXPProperty{{$index}}" class="form-control" ng-model="condition.XPProperty" />\r\n                </div>\r\n                <div class="form-group col-sm-1" ng-if="condition.Property">\r\n                    <label for="valueConditionOrderOperator{{$index}}">Operator</label>\r\n                    <select id="valueConditionOrderOperator{{$index}}" class="form-control" ng-model="condition.Operator" ng-options="operator as operator for operator in promotionEdit.expressionArithmeticOperators"></select>\r\n                </div>\r\n                <div class="form-group col-sm-2" ng-if="condition.Property">\r\n                    <label>Value</label>\r\n                    <input type="number" class="form-control" ng-model="condition.Value" />\r\n                </div>\r\n            </div>\r\n            <div ng-if="condition.Object == \'items\'">\r\n                <div class="form-group col-sm-1">\r\n                    <label for="valueConditionFunction{{$index}}">Function</label>\r\n                    <select id="valueConditionFunction{{$index}}" class="form-control" ng-model="condition.Function" ng-options="function.Value as function.Name for function in promotionEdit.expressionFunctions | promotionfunctions:\'value\'"></select>\r\n                </div>\r\n                <div class="col-sm-6 panel panel-default" ng-if="condition.Function">\r\n                    <div ng-repeat="item in condition.ItemConditions" class="row">\r\n                        <div ng-if="item.LogicalOperator">\r\n                            <div class="form-group col-sm-2">\r\n                                <select class="form-control" ng-model="item.Value" ng-options="logicalOperator as logicalOperator for logicalOperator in [\'or\', \'and\']"></select>\r\n                            </div>\r\n                        </div>\r\n                        <div ng-if="!item.LogicalOperator">\r\n                            <div class="form-group col-sm-3">\r\n                                <label for="valueConditionItemProperty{{$index}}">Property {{($index + 2)/2}}</label>\r\n                                <select id="valueConditionItemProperty{{$index}}" class="form-control" ng-model="condition.ItemConditions[$index].Property" ng-options="property.Value as property.Name for property in promotionEdit.expressionProperties | promotionproperties:\'value\':condition.Object"></select>\r\n                            </div>\r\n                            <div class="form-group col-sm-3" ng-if="condition.ItemConditions[$index].Property == \'xp\'">\r\n                                <label for="valueConditionItemXPProperty{{$index}}">XP Property {{($index + 2)/2}}</label>\r\n                                <input id="valueConditionItemXPProperty{{$index}}" class="form-control" ng-model="condition.ItemConditions[$index].XPProperty" />\r\n                            </div>\r\n                            <div class="form-group col-sm-2">\r\n                                <label for="valueConditionOrderConditionOperator{{$index}}">Operator</label>\r\n                                <select id="valueConditionOrderConditionOperator{{$index}}" class="form-control" ng-model="condition.ItemConditions[$index].Operator" ng-options="operator as operator for operator in promotionEdit.expressionArithmeticOperators"></select>\r\n                            </div>\r\n                            <div class="form-group" ng-class="{\'col-sm-5\': condition.ItemConditions[$index].Property != \'xp\', \'col-sm-3\': condition.ItemConditions[$index].Property == \'xp\'}">\r\n                                <label>Value</label>\r\n                                <div class="input-group">\r\n                                    <input type="text" ng-if="condition.ItemConditions[$index].ValueType == \'String\'" class="form-control" ng-model="condition.ItemConditions[$index].Value" />\r\n                                    <input type="number" ng-if="condition.ItemConditions[$index].ValueType == \'Number\'" class="form-control" ng-model="condition.ItemConditions[$index].Value" />\r\n                                    <input type="text" ng-if="condition.ItemConditions[$index].ValueType == \'Date\'" class="form-control" uib-datepicker-popup="shortDate" ng-focus="promotionEdit.openValueConditionItemConditionDate($parent.$index, $index)" is-open="condition.ItemConditions[$index].DatePickerOpen" ng-model="condition.ItemConditions[$index].Value" />\r\n                                    <div class="input-group-btn">\r\n                                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa" ng-class="{\'fa-font\': item.ValueType == \'String\', \'fa-hashtag\': item.ValueType == \'Number\', \'fa-calendar\': item.ValueType == \'Date\'}"></i> <i class="fa fa-caret-down"></i></button>\r\n                                        <ul class="dropdown-menu dropdown-menu-right">\r\n                                            <li><a href="#" ng-click="promotionEdit.changeValueConditionItemConditionValueType(\'String\', $parent.$parent.$parent.$index, $index)">String</a></li>\r\n                                            <li><a href="#" ng-click="promotionEdit.changeValueConditionItemConditionValueType(\'Number\', $parent.$parent.$parent.$index, $index)">Number</a></li>\r\n                                            <li><a href="#" ng-click="promotionEdit.changeValueConditionItemConditionValueType(\'Date\', $parent.$parent.$parent.$index, $index)">Date</a></li>\r\n                                        </ul>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="form-group col-sm-1 pull-right">\r\n                                <div class="btn-group" ng-if="$index == 0">\r\n                                    <button type="button" class="btn btn-info dropdown-toggle btn-inline-condition" data-toggle="dropdown"><i class="fa fa-plus"></i> <i class="fa fa-caret-down"></i></button>\r\n                                    <ul class="dropdown-menu">\r\n                                        <li><a href="#" ng-click="promotionEdit.addValueConditionItemCondition(\'or\', $parent.$index)">Or</a></li>\r\n                                        <li><a href="#" ng-click="promotionEdit.addValueConditionItemCondition(\'and\', $parent.$index)">And</a></li>\r\n                                    </ul>\r\n                                </div>\r\n                                <button type="button" class="btn btn-danger btn-inline-condition" ng-if="$index > 0" ng-click="promotionEdit.removeValueConditionItemCondition($parent.$parent.$parent.$index, $index)"><i class="fa fa-times"></i></button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div ng-if="!condition.Object">\r\n                <div class="form-group col-sm-1 text-center">\r\n                    <label>Or</label>\r\n                </div>\r\n                <div class="form-group col-sm-2">\r\n                    <label>Value</label>\r\n                    <input type="number" class="form-control" ng-model="condition.Value" />\r\n                </div>\r\n            </div>\r\n\r\n            <div class="col-sm-2" ng-if="$index">\r\n                <button type="button" class="btn btn-danger btn-inline-condition" ng-click="promotionEdit.removeValueCondition($index)">Remove</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="PromotionCreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>'),$templateCache.put("promotions/templates/promotions.tpl.html",'<article id="COMPONENT_Promotions" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <h3>Promotions</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="PromotionsSearchForm" class="form-inline" ng-submit="promotions.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search Promotions..." ng-model="promotions.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n            <span ng-class="{\'btn-group\':promotions.searchResults}">\r\n                <button type="submit" class="btn btn-primary">Search</button>\r\n                <button ng-if="promotions.searchResults" ng-click="promotions.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n            </span>\r\n            <span ng-class="{\'btn-group\':promotions.filtersApplied}" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <button type="button" class="btn btn-default" ng-click="promotions.showFilters = !promotions.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n                <button ng-if="promotions.filtersApplied" ng-click="promotions.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n            </span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!promotions.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':promotions.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="promotions.sortSelection" ng-change="promotions.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Name">Name</option>\r\n                    </select>\r\n                    <div ng-if="promotions.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="promotions.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!promotions.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="promotions.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? promotions.list.Meta.ItemRange[0] : \'1\') + \' - \' +  promotions.list.Meta.ItemRange[1] + \' of \' + promotions.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="promotions.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="promotions.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="promotions.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="promotions.updateSort(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="promotions.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="promotions.parameters.sortBy == \'!Name\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    Code\r\n                </th>\r\n                <th scope="col">\r\n                    Start Date\r\n                </th>\r\n                <th scope="col">\r\n                    End Date\r\n                </th>\r\n                <th></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="promotion in promotions.list.Items">\r\n                <th scope="row">{{promotion.ID}}</th>\r\n                <td data-title="Name">{{promotion.Name}}</td>\r\n                <td data-title="Balance">{{promotion.Code}}</td>\r\n                <td data-title="Start Date">{{promotion.StartDate | date:\'MM/dd/yyyy\'}}</td>\r\n                <td data-title="End Date">{{promotion.ExpirationDate | date:\'MM/dd/yyyy\'}}</td>\r\n                <td class="actions-cell">\r\n                    <button class="btn btn-default btn-sm" ui-sref=".edit({promotionid: promotion.ID})">Edit</button>\r\n                    <div class="btn-group" uib-dropdown dropdown-append-to-body>\r\n                        <button type="button" class="btn btn-default btn-sm" uib-dropdown-toggle>Assign <span class="caret"></span></button>\r\n                        <ul class="dropdown-menu-right" uib-dropdown-menu role="menu">\r\n                            <li role="menuitem"><a ui-sref=".assignGroup({promotionid: promotion.ID})">Group Assignments</a></li>\r\n                            <li role="menuitem"><a ui-sref=".assignUser({promotionid: promotion.ID})">User Assignments</a></li>\r\n                        </ul>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && promotions.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="promotions.list.Meta.TotalPages > 5"\r\n                            max-size="5" total-items="promotions.list.Meta.TotalCount"\r\n                            items-per-page="promotions.list.Meta.PageSize"\r\n                            ng-model="promotions.list.Meta.Page"\r\n                            ng-change="promotions.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="promotions.list.Meta.Page < promotions.list.Meta.TotalPages"\r\n                ng-click="promotions.loadMore()">Load More</button>\r\n    </div>\r\n\r\n</article>'),
$templateCache.put("promotions/templates/remove-promotion.tpl.html",'<span id="remove_promotion">\r\n    <i class="fa fa-times text-danger" ng-click="removePromotion.Remove()"></i>\r\n</span>'),$templateCache.put("registration/templates/registration.tpl.html",'<article id="COMPONENT_Registration" ui-view class="container-fluid">\r\n    <div class="row">\r\n        <div class="col-sm-6">\r\n            <h3 class="page-header">\r\n                <b>Registration</b>\r\n            </h3>\r\n            <form name="RegistrationForm" ng-submit="registration.register()" novalidate>\r\n                <div class="row">\r\n                    <div class="col-sm-6 form-group">\r\n                        <label for="userIDInput">User ID</label>\r\n                        <input id="userIDInput" ordercloud-auto-id type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="registration.user.ID"/>\r\n                    </div>\r\n                    <div class="form-group col-sm-6">\r\n                        <label for="userNameInput">User Name</label>\r\n                        <input id="userNameInput" type="text" class="form-control" ng-model="registration.user.Username" required/>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-sm-6 form-group">\r\n                        <label for="userFirstNameInput">First Name</label>\r\n                        <input id="userFirstNameInput" type="text" class="form-control" ng-model="registration.user.FirstName" required/>\r\n                    </div>\r\n                    <div class="col-sm-6 form-group">\r\n                        <label for="userLastNameInput">Last Name</label>\r\n                        <input id="userLastNameInput" type="text" class="form-control" ng-model="registration.user.LastName" required/>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="form-group col-sm-6">\r\n                        <!-- TODO: make phonefield -->\r\n                        <label for="userPhoneNumberInput">Phone Number</label>\r\n                        <input id="userPhoneNumberInput" type="text" class="form-control" ng-model="registration.user.Phone" />\r\n                    </div>\r\n                    <div class="form-group col-sm-6">\r\n                        <label for="userEmailAddressInput">Email Address</label>\r\n                        <input id="userEmailAddressInput" type="email" class="form-control" ng-model="registration.user.Email" required/>\r\n                    </div>\r\n                </div>\r\n                <div class="row">\r\n                    <div class="col-sm-6 form-group">\r\n                        <label for="userPasswordInput">Password</label>\r\n                        <input id="userPasswordInput" type="password" pattern="^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$" pattern-err-type="customPassword" class="form-control" ng-model="registration.user.Password" confirmpassword="{{registration.PasswordConfirm}}" required/>\r\n                    </div>\r\n                    <div class="col-sm-6 form-group">\r\n                        <label for="userPasswordConfirmInput">Confirm Password</label>\r\n                        <input id="userPasswordConfirmInput" type="password" pattern="^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$" pattern-err-type="customPassword"  class="form-control" ng-model="registration.PasswordConfirm" confirmpassword="{{registration.user.Password}}" required/>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group">\r\n                    <button type="submit" class="btn btn-primary" ng-disabled="RegistrationForm.$invalid">Submit</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n        <div class="col-sm-6" ng-switch="registration.form">\r\n            <h3 class="page-header">\r\n                <b>{{registration.loginFormHeaders[registration.form]}}</b>\r\n            </h3>\r\n            <form class="panel-body" name="LoginForm" ng-submit="registration.login()" ng-switch-when="login">\r\n                <div class="form-group">\r\n                    <label for="Username">Username</label>\r\n                    <input type="text" class="form-control" id="Username" ng-model="registration.credentials.Username" ng-required="true" />\r\n                </div>\r\n                <div class="form-group">\r\n                    <label for="Password">Password</label>\r\n                    <input type="password" class="form-control" id="Password" ng-model="registration.credentials.Password" ng-required="true" />\r\n                </div>\r\n                <button id="submit_login" type="submit" class="btn btn-primary" ng-disabled="LoginForm.$invalid">Submit</button>\r\n                <a id="forgot_password" class="btn btn-link" ng-click="registration.setForm(\'forgot\')">Forgot Password?</a> <!--TODO: should this be functional in the Seed Project?-->\r\n            </form>\r\n            <form class="panel-body" name="ForgotPasswordForm" ng-submit="registration.forgotPassword()" ng-switch-when="forgot">\r\n                <div class="form-group">\r\n                    <label for="Email">Email</label>\r\n                    <input type="text" class="form-control" id="Email" ng-model="registration.credentials.Email" ng-required="true" />\r\n                </div>\r\n                <button type="submit" id="email_submit" class="btn btn-primary" ng-disabled="ForgotPasswordForm.$invalid">Submit</button>\r\n                <a id="back_to_login" class="btn btn-link" ng-click="registration.setForm(\'login\')">Back to Login</a>\r\n            </form>\r\n            <form class="panel-body" name="ResetPasswordForm" ng-submit="registration.resetPassword()" ng-switch-when="reset">\r\n                <div class="form-group">\r\n                    <label for="ResetUsername">Username</label>\r\n                    <input type="text" class="form-control" id="ResetUsername" ng-model="registration.credentials.ResetUsername" ng-required="true" />\r\n                </div>\r\n                <div class="form-group">\r\n                    <label for="NewPassword">New Password</label>\r\n                    <input type="password" class="form-control" id="NewPassword" ng-model="registration.credentials.NewPassword" ng-required="true" />\r\n                </div>\r\n                <div class="form-group">\r\n                    <label for="ConfirmPassword">Confirm Password</label>\r\n                    <input type="password" class="form-control" id="ConfirmPassword" ng-model="registration.credentials.ConfirmPassword" ng-required="true" />\r\n                </div>\r\n                <button type="submit" id="reset_submit" class="btn btn-primary" ng-disabled="ResetPasswordForm.$invalid || registration.credentials.NewPassword != registration.credentials.ConfirmPassword">Submit</button>\r\n            </form>\r\n            <form class="panel-body" name="VerificationCodeSuccessForm" ng-switch-when="verificationCodeSuccess">\r\n                <div class="alert alert-info" id="forgot_message">Forgot Password email has been sent. Please check your email in order to reset your password.</div>\r\n            </form>\r\n            <form class="panel-body" name="ResetSuccessForm" ng-switch-when="resetSuccess">\r\n                <div class="alert alert-info">Your password has been reset.</div>\r\n                <a class="btn btn-link" id="back_to_login2" ng-click="registration.setForm(\'login\')">Back to Login</a>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</article>'),$templateCache.put("shipments/templates/shipmentCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New Shipment</b>\r\n</h3>\r\n<form name="ShipmentCreateForm" ng-submit="shipmentCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="productIDInput">Shipment ID</label>\r\n            <input id="productIDInput" ordercloud-auto-id type="text" class="form-control" ng-model="shipmentCreate.shipment.ID"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="shipperInput">Shipper</label>\r\n            <input id="shipperInput" type="text" class="form-control" ng-model="shipmentCreate.shipment.Shipper" />\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="trackingNumberInput">Tracking Number</label>\r\n            <input id="trackingNumberInput" type="text" class="form-control" ng-model="shipmentCreate.shipment.TrackingNumber"/>\r\n        </div>\r\n        <div class="form-group col-sm-3">\r\n            <label for="shipDateInput">Ship Date</label>\r\n            <input class="form-control" ng-show="application.$ocMedia(\'max-width: 767px\')" ng-required="application.$ocMedia(\'max-width: 767px\')" type="date" id="shipmentDate" ng-model="shipmentCreate.shipment.DateShipped" />\r\n            <input id="shipDateInput" ng-hide="application.$ocMedia(\'max-width: 767px\')" ng-required="!application.$ocMedia(\'max-width: 767px\')" class="form-control" type="text" is-open="open1" uib-datepicker-popup="MM/dd/yyyy" ng-click="open1 = !open1"  datepicker-append-to-body="true" show-weeks="false" ng-model="shipmentCreate.shipment.DateShipped"/>\r\n        </div>\r\n        <div class="form-group col-sm-3">\r\n            <label for="costInput">Cost</label>\r\n            <input id="costInput" type="number" step="any" class="form-control" ng-model="shipmentCreate.shipment.Cost"/>\r\n        </div>\r\n    </div>\r\n    <div uib-collapse="shipmentCreate.OrderSelected" class="form-group">\r\n        <h4>\r\n            <b>Select Order</b>\r\n        </h4>\r\n        <section class="table-fixed-header" ng-if="shipmentCreate.list.Items.length">\r\n            <div class="table-header-bg"></div>\r\n            <div class="table-container" ordercloud-infinite-scroll servicename="Orders" controlleras="shipmentCreate">\r\n                <table class="table table-hover">\r\n                    <colgroup>\r\n                        <col class="action-column"/>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th>\r\n                            <div>Order ID</div>\r\n                        </th>\r\n                        <th>\r\n                            <div>Date Shipped</div>\r\n                        </th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="order in shipmentCreate.list.Items track by $index" ng-click="shipmentCreate.goToLineItems(order)">\r\n                        <td>{{order.ID}}</td>\r\n                        <td>{{order.DateCreated | date}}</td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div uib-collapse="!shipmentCreate.OrderSelected" class="form-group">\r\n        <h4>\r\n            <b>Select Line Items</b>\r\n        </h4>\r\n        <section class="table-fixed-header" ng-if="shipmentCreate.lineitems.list.Items.length">\r\n            <div class="table-header-bg"></div>\r\n            <div class="table-container" ordercloud-infinite-scroll servicename="LineItems" controlleras="shipmentCreate">\r\n                <table class="table table-hover">\r\n                    <colgroup>\r\n                        <col class="action-column"/>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>\r\n                            <div>Line Item ID</div>\r\n                        </th>\r\n                        <th>\r\n                            <div>Quantity Requested</div>\r\n                        </th>\r\n                        <th>\r\n                            <div>Quantity Shipped</div>\r\n                        </th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="li in shipmentCreate.lineitems.list.Items track by $index">\r\n                        <td class="text-center"><input type="checkbox" ng-model="li.addToShipment"></td>\r\n                        <td>{{li.ID}}</td>\r\n                        <td>{{li.Quantity}}</td>\r\n                        <td>\r\n                            <p ng-if="!li.addToShipment">{{li.QuantityShipped}}</p>\r\n                            <input type="number" class="form-control" ng-model="li.QuantityShipped" ng-if="li.addToShipment" min="1" max="{{li.Quantity}}"/>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="ShipmentCreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n        <button type="button" class="btn btn-default" ng-click="shipmentCreate.unselectOrder()" ng-if="shipmentCreate.OrderSelected">Unselect Order</button>\r\n    </div>\r\n</form>'),$templateCache.put("shipments/templates/shipmentEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit Shipment:</b> {{shipmentEdit.ShipmentID}}\r\n</h3>\r\n<form name="ShipmentEditForm" ng-submit="shipmentEdit.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="shipmentIDInput">ID</label>\r\n            <input id="shipmentIDInput" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="shipmentEdit.shipment.ID" ng-disabled="shipmentEdit.autoGen" ng-required="!shipmentEdit.autoGen">\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="shipperInput">Shipper</label>\r\n            <input id="shipperInput" type="text" class="form-control" ng-model="shipmentEdit.shipment.Shipper"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="trackingNumberInput">Tracking Number</label>\r\n            <input id="trackingNumberInput" type="text" class="form-control" ng-model="shipmentEdit.shipment.TrackingNumber"/>\r\n        </div>\r\n        <div class="form-group col-sm-3">\r\n            <label for="shipDateInput">Ship Date</label>\r\n            <input class="form-control" ng-show="application.$ocMedia(\'max-width: 767px\')" ng-required="application.$ocMedia(\'max-width: 767px\')" type="date" id="shipmentDate" ng-model="shipmentEdit.shipment.DateShipped" />\r\n            <input id="shipDateInput" ng-hide="application.$ocMedia(\'max-width: 767px\')"  class="form-control" type="text" is-open="open1" ng-required="!application.$ocMedia(\'max-width: 767px\')"  uib-datepicker-popup="MM/dd/yyyy" ng-click="open1 = !open1"  datepicker-append-to-body="true" show-weeks="false" ng-model="shipmentEdit.shipment.DateShipped"/>\r\n        </div>\r\n        <div class="form-group col-sm-3">\r\n            <label for="costInput">Cost</label>\r\n            <input id="costInput" type="number" step="any" class="form-control" ng-model="shipmentEdit.shipment.Cost"/>\r\n        </div>\r\n    </div>\r\n    <div uib-collapse="shipmentEdit.OrderSelected" class="form-group">\r\n        <h4>\r\n            <b>Select Order</b>\r\n        </h4>\r\n        <ordercloud-search servicename="Orders" controlleras="shipmentEdit"></ordercloud-search>\r\n        <div class="well well-lg text-center" ng-if="!shipmentEdit.list.Items.length">\r\n            <b ng-if="!shipmentEdit.searching">The selected buyer does not have any orders.</b>\r\n            <b ng-if="shipmentEdit.searching"><i class="fa fa-search"></i> No orders match your search.</b>\r\n        </div>\r\n        <section class="table-fixed-header" ng-if="shipmentEdit.list.Items.length">\r\n            <div class="table-header-bg"></div>\r\n            <div class="table-container" ordercloud-infinite-scroll servicename="Orders" controlleras="shipmentEdit">\r\n                <table class="table table-hover">\r\n                    <colgroup>\r\n                        <col class="action-column"/>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th>\r\n                            <div>Order ID</div>\r\n                        </th>\r\n                        <th>\r\n                            <div>Date Shipped</div>\r\n                        </th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="order in shipmentEdit.list.Items track by $index" ng-click="shipmentEdit.goToLineItems(order)">\r\n                        <td>{{order.ID}}</td>\r\n                        <td>{{order.DateCreated | date}}</td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div uib-collapse="!shipmentEdit.OrderSelected" class="form-group">\r\n        <h4>\r\n            <b>Select Line Items</b>\r\n        </h4>\r\n        <div class="well well-lg text-center" ng-if="!shipmentEdit.lineitems.list.Items.length">\r\n            <b>The selected order does not have any line items.</b>\r\n        </div>\r\n        <section class="table-fixed-header" ng-if="shipmentEdit.lineitems.list.Items.length">\r\n            <div class="table-header-bg"></div>\r\n            <div class="table-container">\r\n                <table class="table table-hover">\r\n                    <colgroup>\r\n                        <col class="action-column"/>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>\r\n                            <div>Line Item ID</div>\r\n                        </th>\r\n                        <th>\r\n                            <div>Requested</div>\r\n                        </th>\r\n                        <th>\r\n                            <div>Shipped</div>\r\n                        </th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="li in shipmentEdit.lineitems.list.Items track by $index" ng-class="{\'list-item-disabled\': li.disabled}">\r\n                        <td class="text-center"><input type="checkbox" ng-model="li.addToShipment"></td>\r\n                        <td>{{li.ID}}</td>\r\n                        <td>{{li.Quantity}}</td>\r\n                        <td>\r\n                            <p ng-if="!li.addToShipment">{{li.QuantityShipped || 0}}</p>\r\n                            <input type="number" ng-disabled="li.disabled" class="form-control" ng-if="li.addToShipment" ng-model="li.QuantityShipped" min="1" max="{{li.Quantity}}"/>\r\n                        </td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="well well-lg text-center" ng-show="!shipmentEdit.shipment.Items.length">\r\n        <b>The selected shipment does not currently have any line items.</b>\r\n    </div>\r\n    <div ng-hide="!shipmentEdit.shipment.Items.length" class="form-group">\r\n        <h4>\r\n            <b>Line Items on this Shipment</b>\r\n        </h4>\r\n        <section class="table-fixed-header">\r\n            <div class="table-header-bg"></div>\r\n            <div class="table-container" ordercloud-infinite-scroll servicename="Orders" controlleras="shipmentEdit">\r\n                <table class="table table-hover">\r\n                    <colgroup>\r\n                        <col class="action-column"/>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>\r\n                            <div>Line Item ID</div>\r\n                        </th>\r\n                        <th>\r\n                            <div>Shipped</div>\r\n                        </th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="li in shipmentEdit.shipment.Items track by $index">\r\n                        <td class="text-center"><a class="fa fa-trash text-danger" ng-click="shipmentEdit.deleteLineItem($index)"></a></td>\r\n                        <td>{{li.LineItemID}}</td>\r\n                        <td class="text-center"><input type="number" class="form-control" ng-model="li.QuantityShipped" min="1" max="{{li.Quantity}}"/></td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="ShipmentEditForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ng-click="shipmentEdit.unselectOrder()" ng-if="shipmentEdit.OrderSelected">Unselect Order</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n        <button type="button" class="btn btn-default" ng-click="shipmentEdit.Delete()"><i class="fa fa-trash text-danger"></i></button>\r\n    </div>\r\n</form>'),$templateCache.put("shipments/templates/shipments.tpl.html",'<article id="COMPONENT_Shipments" class="container-fluid" ui-view>\r\n    <div class="page-header">\r\n        <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <h3>Shipments</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="ShipmentsSearchForm" class="form-inline" ng-submit="shipments.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search Shipments..." ng-model="shipments.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n            <span ng-class="{\'btn-group\':shipments.searchResults}">\r\n                <button type="submit" class="btn btn-primary">Search</button>\r\n                <button ng-if="shipments.searchResults" ng-click="shipments.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n            </span>\r\n    <!--\r\n            <span ng-class="{\'btn-group\':shipments.filtersApplied}" ng-show="application.$ocMedia(\'max-width:767px\')">\r\n                <button type="button" class="btn btn-default" ng-click="shipments.showFilters = !shipments.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n                <button ng-if="shipments.filtersApplied" ng-click="shipments.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n            </span>\r\n    -->\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!shipments.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':shipments.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="shipments.sortSelection" ng-change="shipments.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="DateCreated">Date Shipped</option>\r\n                    </select>\r\n                    <div ng-if="shipments.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="shipments.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-6">\r\n                    <div class="form-group">\r\n                        <label>Order Type</label>\r\n                        <select ng-model="shipments.parameters.filters.type" ng-change="shipments.filter(true)" class="form-control">\r\n                            <option value="">All</option>\r\n                            <option value="Standard">Standard</option>\r\n                            <option value="Replenishment">Replenishment</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class="col-sm-6">\r\n                    <div class="form-group">\r\n                        <label>Order Status</label>\r\n                        <select ng-model="shipments.parameters.filters.status" ng-change="shipments.filter(true)" class="form-control">\r\n                            <option value="">All</option>\r\n                            <option value="Open">Open</option>\r\n                            <option value="AwaitingApproval">Awaiting Approval</option>\r\n                            <option value="Completed">Completed</option>\r\n                            <option value="Declined">Declined</option>\r\n                            <option value="Cancelled">Cancelled</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="row">\r\n                <div class="col-sm-6">\r\n                    <div class="form-group">\r\n                        <label>From Date</label>\r\n                        <input ng-if="application.isTouchDevice" type="date" class="form-control" ng-blur="shipments.filter(true)" ng-model="shipments.parameters.from">\r\n                        <input ng-if="!application.isTouchDevice" uib-datepicker-popup datepicker-options="{maxDate:shipments.parameters.to}" is-open="fromDate.open"  ng-change="shipments.filter(true)" ng-click="fromDate.open = !fromDate.open" type="date" class="form-control" ng-model="shipments.parameters.from">\r\n                    </div>\r\n                </div>\r\n                <div class="col-sm-6">\r\n                    <div class="form-group">\r\n                        <label>To Date</label>\r\n                        <input ng-if="application.isTouchDevice" type="date" class="form-control" ng-blur="shipments.filter(true)" ng-model="shipments.parameters.to">\r\n                        <input ng-if="!application.isTouchDevice" uib-datepicker-popup datepicker-options="{minDate:shipments.parameters.from}" is-open="toDate.open" ng-change="shipments.filter(true)" ng-click="toDate.open = !toDate.open" type="date" class="form-control" ng-model="shipments.parameters.to">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="well text-center" ng-if="!shipments.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="shipments.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? shipments.list.Meta.ItemRange[0] : \'1\') + \' - \' +  shipments.list.Meta.ItemRange[1] + \' of \' + shipments.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover table-bshipmented oc-table-responsive">\r\n            <thead>\r\n                <tr>\r\n                    <th scope="col">\r\n                        <a href="#" role="button" ng-click="shipments.updateSort(\'ID\')">\r\n                            ID\r\n                            <i class="fa fa-caret-down" ng-show="shipments.parameters.sortBy == \'ID\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="shipments.parameters.sortBy == \'!ID\'"></i>\r\n                        </a>\r\n                    </th>\r\n                    <th scope="col">\r\n                        <a href="#" role="button" ng-click="shipments.updateSort(\'DateCreated\')">\r\n                            Date Shipped\r\n                            <i class="fa fa-caret-down" ng-show="shipments.parameters.sortBy == \'DateCreated\'"></i>\r\n                            <i class="fa fa-caret-up" ng-show="shipments.parameters.sortBy == \'!DateCreated\'"></i>\r\n                        </a>\r\n                    </th>\r\n                    <th></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr ng-repeat="shipment in shipments.list.Items" ui-sref="shipments.edit({shipmentid: shipment.ID})" >\r\n                    <th scope="row">{{shipment.ID}}</th>\r\n                    <td data-title="Date Created/Submitted">{{shipment.DateShipped | date}}</td>\r\n                    <td class="actions-cell">\r\n                        <button type="button" class="btn btn-default btn-sm">\r\n                            Edit\r\n                        </button>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && shipments.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="shipments.list.Meta.TotalPages > 8" max-size="5" total-items="shipments.list.Meta.TotalCount" items-per-page="shipments.list.Meta.PageSize" ng-model="shipments.list.Meta.Page" ng-change="shipments.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="shipments.list.Meta.Page < shipments.list.Meta.TotalPages"\r\n                ng-click="shipments.loadMore()">Load More</button>\r\n    </div>\r\n</article>'),$templateCache.put("securityProfiles/templates/securityProfileAccordion.tpl.html",'<div ng-class="{\'disabled\': isDisabled}">\r\n  <div class="panel-heading">\r\n    <h4 class="panel-title">\r\n      <div tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading">\r\n        <span uib-accordion-header>\r\n          {{heading}}\r\n        </span>\r\n      </div>\r\n    </h4>\r\n  </div>\r\n  <div class="panel-collapse collapse" uib-collapse="!isOpen">\r\n    <div class="panel-body" ng-transclude></div>\r\n  </div>\r\n</div>\r\n'),$templateCache.put("securityProfiles/templates/securityProfileAssignments.tpl.html",'<!--====== HEADINGS ======-->\r\n<div class="page-header">\r\n    <div class="btn-toolbar pull-right">\r\n        <button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n        <button class="btn btn-success" ui-sref="^.createAssignment({securityprofileid:securityProfileAssignments.SecurityProfileID})"><i class="fa fa-plus-circle"></i> New Assignment</button>\r\n    </div>\r\n    <h3>Assignments for {{securityProfileAssignments.SecurityProfileID}}</h3>\r\n</div>\r\n<!--====== LIST ======-->\r\n<div class="well well-lg text-center" ng-if="!securityProfileAssignments.list.Items.length">\r\n    <b>This Security Profile does not have any assignments for the active Buyer company.</b>\r\n</div>\r\n<div ng-if="securityProfileAssignments.list.Items.length">\r\n    <table class="table table-hover table-condensed oc-table-responsive" controlleras="securityProfileAssignments">\r\n        <thead>\r\n        <tr>\r\n            <th scope="col">\r\n                <div>Party ID</div>\r\n            </th>\r\n            <th>\r\n                <div>User</div>\r\n            </th>\r\n            <th>\r\n                <div>User Group</div>\r\n            </th>\r\n            <th>\r\n                <div>Buyer</div>\r\n            </th>\r\n            <th></th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr ng-repeat="assignment in securityProfileAssignments.list.Items">\r\n            <th scope="row">{{assignment.UserID || assignment.UserGroupID || assignment.BuyerID}}</th>\r\n            <td data-title="User">\r\n                <i aria-hidden="true" ng-class="{\'fa fa-lg fa-check active\':assignment.UserID}"></i>\r\n            </td>\r\n            <td data-title="User Group">\r\n                <i aria-hidden="true" ng-class="{\'fa fa-lg fa-check active\':assignment.UserGroupID}"></i>\r\n            </td>\r\n            <td data-title="Buyer">\r\n                <i aria-hidden="true" ng-class="{\'fa fa-lg fa-check active\':assignment.BuyerID && !assignment.UserID && !assignment.UserGroupID}"></i>\r\n            </td>\r\n            <td class="actions-cell">\r\n                <button type="button" class="btn btn-danger btn-sm" uib-tooltip="Delete Assignment" tooltip-placement="left" ng-click="securityProfileAssignments.Delete(assignment.UserID, assignment.UserGroupID)"><i class="fa fa-trash"></i></button>\r\n            </td>\r\n        </tr>\r\n        </tbody>\r\n    </table>\r\n    <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && securityProfileAssignments.list.Meta.TotalPages > 1"">\r\n    <uib-pagination boundary-links="securityProfileAssignments.list.Meta.TotalPages > 5"\r\n                    max-size="5" total-items="securityProfileAssignments.list.Meta.TotalCount"\r\n                    items-per-page="securityProfileAssignments.list.Meta.PageSize"\r\n                    ng-model="securityProfileAssignments.list.Meta.Page"\r\n                    ng-change="securityProfileAssignments.pageChanged()"></uib-pagination>\r\n</div>\r\n<button type="button"\r\n        ng-if="application.$ocMedia(\'max-width:767px\')"\r\n        class="btn btn-default btn-block btn-lg"\r\n        ng-show="securityProfileAssignments.list.Meta.Page < securityProfileAssignments.list.Meta.TotalPages"\r\n        ng-click="securityProfileAssignments.loadMore()">Load More</button>\r\n</div>\r\n\r\n\r\n\r\n'),
$templateCache.put("securityProfiles/templates/securityProfileCreateAssignment.tpl.html",'<!--====== HEADING ======-->\r\n<div class="page-header">\r\n\t<div class="btn-toolbar pull-right">\r\n\t\t<button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n\t</div>\r\n\t<h3>Create a New Security Profile Assignment</h3>\r\n</div>\r\n<div class="row">\r\n\t<div class="col-sm-6">\r\n\t\t<h4>Choose Assignee</h4>\r\n\t</div>\r\n\t<div class="col-sm-6">\r\n\t\t<h4>Assignments:</h4>\r\n\t</div>\r\n</div>\r\n<div class="row">\r\n\t<div class="col-sm-6">\r\n\t\t<uib-accordion>\r\n\t\t\t<!--====== Assign Buyer Company ======-->\r\n\t\t\t<uib-accordion-group class="panel panel-primary" is-open="isBuyerOpen"\r\n\t\t\t\t\t\t\t\t template-url="securityProfiles/templates/securityProfileAccordion.tpl.html">\r\n\t\t\t\t<uib-accordion-heading ng-click="isBuyerOpen=!isBuyerOpen">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\tAssign Buyer <i class="fa pull-right"\r\n\t\t\t\t\t\t\t\t\t\tng-class="{\'fa-plus\':!isBuyerOpen,\'fa-minus\':isBuyerOpen}"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</uib-accordion-heading>\r\n\t\t<span ng-click="securityProfileCreateAssignment.assignBuyer = !securityProfileCreateAssignment.assignBuyer">\r\n\t\t\t<i class="fa"\r\n\t\t\t   ng-class="{\'fa-square-o\':!securityProfileCreateAssignment.assignBuyer, \'fa-check-square-o\':securityProfileCreateAssignment.assignBuyer, \'text-success\':securityProfileCreateAssignment.assignBuyer}"></i> Assign at the Buyer Level\r\n\t\t</span>\r\n\t\t\t</uib-accordion-group>\r\n\t\t\t<!--====== Assign User Groups ======-->\r\n\t\t\t<uib-accordion-group class="panel panel-primary" is-disabled="securityProfileCreateAssignment.assignBuyer"\r\n\t\t\t\t\t\t\t\t is-open="isGroupOpen"\r\n\t\t\t\t\t\t\t\t template-url="securityProfiles/templates/securityProfileAccordion.tpl.html">\r\n\t\t\t\t<uib-accordion-heading ng-click="isGroupOpen=!isGroupOpen">\r\n\t\t\t\t\tAssign User Groups <i class="fa pull-right"\r\n\t\t\t\t\t\t\t\t\t\t  ng-class="{\'fa-plus\':!isGroupOpen,\'fa-minus\':isGroupOpen}"></i>\r\n\t\t\t\t</uib-accordion-heading>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<ordercloud-search servicename="UserGroups" controlleras="securityProfileCreateAssignment"\r\n\t\t\t\t\t\t\t\t\t   model="groupList"></ordercloud-search>\r\n\t\t\t\t\t<div class="well well-lg text-center"\r\n\t\t\t\t\t\t ng-if="!securityProfileCreateAssignment.groupList.Items.length">\r\n\t\t\t\t\t\t<b><i class="fa fa-search"></i> No UserGroups match your search</b>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<section class="table-fixed-header" ng-if="securityProfileCreateAssignment.groupList.Items.length">\r\n\t\t\t\t\t\t<div class="table-header-bg"></div>\r\n\t\t\t\t\t\t<div class="table-container" ordercloud-infinite-scroll servicename="UserGroups"\r\n\t\t\t\t\t\t\t controlleras="securityProfileCreateAssignment" style="max-height:160px;">\r\n\t\t\t\t\t\t\t<table class="table table-hover">\r\n\t\t\t\t\t\t\t\t<colgroup>\r\n\t\t\t\t\t\t\t\t\t<col class="action-column"/>\r\n\t\t\t\t\t\t\t\t</colgroup>\r\n\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t\t<div>ID</div>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t\t<div>Name</div>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t<tr ng-repeat="group in securityProfileCreateAssignment.groupList.Items track by $index">\r\n\t\t\t\t\t\t\t\t\t<td class="text-center">\r\n\t\t\t\t\t\t\t\t\t\t<div class="btn"\r\n\t\t\t\t\t\t\t\t\t\t\t ng-click="securityProfileCreateAssignment.toggleSelection(group, \'Groups\')">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa"\r\n\t\t\t\t\t\t\t\t\t\t\t   ng-class="{\'fa-square-o\':!group.selected, \'text-success\': group.selected, \'fa-check-square\':group.selected}"></i>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{group.ID}}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{group.Name}}</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</div>\r\n\t\t\t</uib-accordion-group>\r\n\t\t\t<!--====== Assign Users ======-->\r\n\t\t\t<uib-accordion-group class="panel panel-primary" is-disabled="securityProfileCreateAssignment.assignBuyer"\r\n\t\t\t\t\t\t\t\t is-open="isUserOpen"\r\n\t\t\t\t\t\t\t\t template-url="securityProfiles/templates/securityProfileAccordion.tpl.html">\r\n\t\t\t\t<uib-accordion-heading ng-click="isUserOpen=!isUserOpen">\r\n\t\t\t\t\tAssign Users <i class="fa pull-right" ng-class="{\'fa-plus\':!isUserOpen,\'fa-minus\':isUserOpen}"></i>\r\n\t\t\t\t</uib-accordion-heading>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<ordercloud-search servicename="Users" controlleras="securityProfileCreateAssignment"\r\n\t\t\t\t\t\t\t\t\t   model="userList"></ordercloud-search>\r\n\t\t\t\t\t<div class="well well-lg text-center"\r\n\t\t\t\t\t\t ng-if="!securityProfileCreateAssignment.userList.Items.length">\r\n\t\t\t\t\t\t<b><i class="fa fa-search"></i> No Users match your search</b>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<section class="table-fixed-header" ng-if="securityProfileCreateAssignment.userList.Items.length">\r\n\t\t\t\t\t\t<div class="table-header-bg"></div>\r\n\t\t\t\t\t\t<div class="table-container" ordercloud-infinite-scroll servicename="UserGroups"\r\n\t\t\t\t\t\t\t controlleras="securityProfileCreateAssignment" style="max-height:160px;">\r\n\t\t\t\t\t\t\t<table class="table table-hover">\r\n\t\t\t\t\t\t\t\t<colgroup>\r\n\t\t\t\t\t\t\t\t\t<col class="action-column"/>\r\n\t\t\t\t\t\t\t\t</colgroup>\r\n\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t\t<div>ID</div>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\t\t<div>Name</div>\r\n\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t<tr ng-repeat="user in securityProfileCreateAssignment.userList.Items track by $index">\r\n\t\t\t\t\t\t\t\t\t<td class="text-center">\r\n\t\t\t\t\t\t\t\t\t\t<div class="btn"\r\n\t\t\t\t\t\t\t\t\t\t\t ng-click="securityProfileCreateAssignment.toggleSelection(user, \'Users\')">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa"\r\n\t\t\t\t\t\t\t\t\t\t\t   ng-class="{\'fa-square-o\':!user.selected, \'text-success\': user.selected, \'fa-check-square\':user.selected}"></i>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{user.ID}}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{user.Username}}</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</div>\r\n\t\t\t</uib-accordion-group>\r\n\t\t</uib-accordion>\r\n\t</div>\r\n\t<!--====== Selected Assignments ======-->\r\n\t<div class="col-sm-6 ">\r\n\t\t<div ng-if="!(securityProfileCreateAssignment.selectedGroups.length || securityProfileCreateAssignment.selectedUsers.length ||  securityProfileCreateAssignment.assignBuyer)" class="text-muted">\r\n\t\t\t<p>You can assign a Security Profile to Users, UserGroups or to the entire Buyer company.</p>\r\n\t\t</div>\r\n\t\t<div ng-if="securityProfileCreateAssignment.assignBuyer" class="text-muted">\r\n\t\t\t<p>Assigned to entire Buyer company.</p>\r\n\t\t</div>\r\n\t\t<div>\r\n\t\t\t<section class="table-fixed-header"  ng-if="(((securityProfileCreateAssignment.selectedGroups.length) || (securityProfileCreateAssignment.selectedUsers.length)) && !securityProfileCreateAssignment.assignBuyer)">\r\n\t\t\t\t<div class="table-header-bg"></div>\r\n\t\t\t\t<div class="table-container" style="max-height:160px;">\r\n\t\t\t\t\t<table class="table table-hover">\r\n\t\t\t\t\t\t<colgroup>\r\n\t\t\t\t\t\t<col class="action-column"/>\r\n\t\t\t\t\t\t</colgroup>\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\tID<div>ID</div>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t\t\tName<div>Name</div>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t<tr ng-repeat="group in securityProfileCreateAssignment.selectedGroups">\r\n\t\t\t\t\t\t\t\t<td>{{group.ID}}</td>\r\n\t\t\t\t\t\t\t\t<td>{{group.Name}}</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t<tr ng-repeat="user in securityProfileCreateAssignment.userList.Items | filter: {selected:true} track by $index">\r\n\t\t\t\t\t\t\t\t<td>{{user.ID}}</td>\r\n\t\t\t\t\t\t\t\t<td>{{user.Username}}</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<!--====== Submit/Cancel ======-->\r\n<div class="row">\r\n\t<div class="col-sm-6">\r\n\t\t<button type="button" class="btn btn-default" ui-sref="^.assignments({securityprofileid:securityProfileCreateAssignment.securityProfileID})">Cancel</button>\r\n\t\t<button type="button" class="btn btn-primary" ng-click="securityProfileCreateAssignment.Submit()" ng-disabled="!(securityProfileCreateAssignment.selectedGroups.length || securityProfileCreateAssignment.selectedUsers.length || securityProfileCreateAssignment.assignBuyer)">Save Assignment</button>\r\n\t</div>\r\n</div>'),$templateCache.put("securityProfiles/templates/SecurityProfileRoles.tpl.html",'<!--====== HEADINGS ======-->\r\n<div class="page-header">\r\n    <div class="btn-toolbar pull-right">\r\n        <button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n    </div>\r\n    <h3>Roles for {{securityProfileRoles.selectedProfile.ID}}</h3>\r\n    <div class="text-muted">\r\n\t<p>Adding or removing roles assigned to a Security Profile can only be done from the DevCenter Dashboard.</p>\r\n</div>\r\n</div>\r\n<div ng-if="securityProfileRoles.availableRoles.length">\r\n\t<table class="table table-hover oc-table-responsive">\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<th scope="col">Assigned Roles</th>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="roles-list" data-title="Assigned Roles">\r\n\t\t\t\t<div class="no-matches" ng-if="!securityProfileRoles.availableRoles.length">\r\n\t\t\t\t\t<b>This Security Profile has no claims assigned</b>\r\n\t\t\t\t</div>\r\n                    <div class="label label-default" ng-repeat="role in securityProfileRoles.availableRoles">{{role}}</div>         \r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\r\n\t<table class="table table-hover oc-table-responsive">\r\n\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<th scope="col">Non-Assigned Roles</th>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="roles-list" data-title="Non-Assigned Roles">\r\n                    <div class="label label-default" ng-repeat="role in securityProfileRoles.unavailableRoles">{{role}}</div>\r\n                    <div class="no-matches" ng-if="!securityProfileRoles.unavailableRoles.length">\r\n\t\t\t\t\t\t<b>This Security Profile has been assigned all possible claims</b>\r\n\t\t\t\t\t</div>         \r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\r\n</div>\r\n\r\n'),$templateCache.put("securityProfiles/templates/securityProfiles.tpl.html",'<article id="COMPONENT_SecurityProfiles" ui-view class="container-fluid" >\r\n   <div class="page-header">\r\n       <h3 >Security Profiles</h3>\r\n   </div>\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="SecurityProfilesSearchForm" class="form-inline" ng-submit="securityProfiles.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search Security Profiles" ng-model="securityProfiles.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':securityProfiles.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="securityProfiles.searchResults" ng-click="securityProfiles.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':securityProfiles.filtersApplied}" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n\t\t\t<button type="button" class="btn btn-default" ng-click="securityProfiles.showFilters = !securityProfiles.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n\t\t\t<button ng-if="securityProfiles.filtersApplied" ng-click="securityProfiles.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!securityProfiles.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':securityProfiles.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="securityProfiles.sortSelection" ng-change="securityProfiles.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Name">Name</option>\r\n                        <option value="IsDevProfile">Developer Profile</option>\r\n                    </select>\r\n                    <div ng-if="securityProfiles.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="securityProfiles.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!securityProfiles.list.Items.length">\r\n        <b>The selected buyer does not have any Security Profiles.</b>\r\n    </div>\r\n    <div ng-if="securityProfiles.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? securityProfiles.list.Meta.ItemRange[0] : \'1\') + \' - \' +  securityProfiles.list.Meta.ItemRange[1] + \' of \' + securityProfiles.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="securityProfiles.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="securityProfiles.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="securityProfiles.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="securityProfiles.updateSort(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="securityProfiles.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="securityProfiles.parameters.sortBy == \'!Name\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="securityProfiles.updateSort(\'IsDevProfile\')">\r\n                        Developer Profile\r\n                        <i class="fa fa-caret-down" ng-show="securityProfiles.parameters.sortBy == \'IsDevProfile\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="securityProfiles.parameters.sortBy == \'IsDevProfile\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                        Roles\r\n                </th>\r\n                <th scope="col">\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="profile in securityProfiles.list.Items">\r\n                <th scope="row">{{profile.ID}}</th>\r\n                <td data-title="Name">{{profile.Name}}</td>\r\n                <td data-title="Developer Profile">\r\n                <i class="fa fa-circle" aria-hidden="true" ng-class="{\'active\':profile.IsDevProfile}"></i>\r\n                </td>\r\n                <td data-title="Roles" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                    <div class="roles-list">\r\n                        <div class="label label-default" ng-repeat="role in profile.Roles">{{role}}</div>         \r\n                    </div>\r\n                </td>\r\n                <td class="actions-cell">\r\n                    <button ui-sref=".roles({securityprofileid:profile.ID})" class="btn btn-default btn-sm" ng-if="!application.$ocMedia(\'max-width:767px\')">Roles</button>\r\n                    <button ui-sref=".assignments({securityprofileid:profile.ID})" class="btn btn-default btn-sm">Assignments</button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <!--====== Pagination Bar ======-->\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && securityProfiles.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="securityProfiles.list.Meta.TotalPages > 5"\r\n                            max-size="5" total-items="securityProfiles.list.Meta.TotalCount"\r\n                            items-per-page="securityProfiles.list.Meta.PageSize"\r\n                            ng-model="securityProfiles.list.Meta.Page"\r\n                            ng-change="securityProfiles.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="securityProfiles.list.Meta.Page < securityProfiles.list.Meta.TotalPages"\r\n                ng-click="securityProfiles.loadMore()">Load More</button>\r\n    </div>\r\n</article>'),$templateCache.put("repeatOrder/templates/repeatOrderDirective.tpl.html",'<div class="btn btn-primary" ng-click="repeatOrder.reorder(orderid, includebilling, includeshipping, clientid, fromuserid, claims)">Reorder</div>'),$templateCache.put("specs/templates/specAssign.tpl.html",'<h3 class="page-header">\r\n    Product Assignments for {{specAssign.Spec.Name}}\r\n</h3>\r\n<ordercloud-search servicename="Products" controlleras="specAssign"></ordercloud-search>\r\n<section class="table-fixed-header">\r\n    <div class="table-header-bg"></div>\r\n    <div class="table-container" ordercloud-infinite-scroll servicename="Products" controlleras="specAssign" idname="ProductID" disable-dynamic-validation>\r\n        <table class="table table-hover">\r\n            <colgroup>\r\n                <col class="action-column"/>\r\n            </colgroup>\r\n            <thead>\r\n            <tr>\r\n                <th>\r\n                </th>\r\n                <th>\r\n                    <div>ID</div>\r\n                </th>\r\n                <th>\r\n                    <div>Name</div>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="product in specAssign.list.Items track by $index">\r\n                <td class="text-center">\r\n                    <input name="{{\'assignCheckbox\' + $index}}"  type="checkbox" ng-model="product.selected">\r\n                </td>\r\n                <td>{{product.ID}}</td>\r\n                <td>{{product.Name}}</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>\r\n<div class="form-group">\r\n    <button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n    <button type="button" class="btn btn-primary" ng-click="specAssign.saveAssignments(assignmentsTable)">Update Assignments</button>\r\n</div>'),$templateCache.put("specs/templates/specCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New Spec</b>\r\n</h3>\r\n<form name="SpecCreateForm" ng-submit="specCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="specIDInput">Spec ID</label>\r\n            <input id="specIDInput" ordercloud-auto-id type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="specCreate.spec.ID"/>\r\n        </div>\r\n        <div class="form-group col-sm-3">\r\n            <label for="specNameInput">Spec Name</label>\r\n            <input id="specNameInput" type="text" class="form-control"  ng-model="specCreate.spec.Name" ng-required="true"/>\r\n        </div>\r\n        <div class="col-sm-3 form-group">\r\n            <label for="specDefaultInput">Default Value</label>\r\n            <input id="specDefaultInput" type="text" class="form-control" ng-model="specCreate.spec.DefaultValue"/>\r\n        </div>\r\n    </div>\r\n    <h4>\r\n        <b>Add Spec Options</b>\r\n    </h4>\r\n    <div class="panel panel-default col-sm-12">\r\n        <div class="panel-body">\r\n            <div class="row">\r\n                <div class="form-group col-sm-6">\r\n                    <label for="specOptIDInput">Spec Option ID</label>\r\n                    <input id="specOptIDInput" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="specCreate.Option.ID"/>\r\n                </div>\r\n                <div class="form-group col-sm-6">\r\n                    <label for="specOptListOrderInput">List Order</label>\r\n                    <input id="specOptListOrderInput" type="text" class="form-control" ng-model="specCreate.Option.ListOrder"/>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="form-group col-sm-6">\r\n                    <label for="specMUTypeInput">Markup Type</label>\r\n                    <select id="specMUTypeInput" class="form-control" ng-model="specCreate.Option.MarkupType">\r\n                        <option value="None">None</option>\r\n                        <option value="AmountPerQuantity">Fixed amount per unit</option>\r\n                        <option value="AmountTotal">Fixed amount per line</option>\r\n                        <option value="Percentage">Percentage of line total</option>\r\n                    </select>\r\n                </div>\r\n                <div class="col-sm-3 form-group">\r\n                    <label for="specValueInput">Value</label>\r\n                    <input id="specValueInput" type="text" class="form-control" ng-model="specCreate.Option.Value"/>\r\n                </div>\r\n                <div class="col-sm-3 form-group">\r\n                    <label for="specMarkupInput">Markup</label>\r\n                    <input id="specMarkupInput" type="number" step="any" class="form-control" ng-disabled="!specCreate.Option.MarkupType || specCreate.Option.MarkupType ==\'None\'" ng-model="specCreate.Option.Markup"/>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="form-group col-sm-6">\r\n                    <label for="specOptIsOpenInput">\r\n                        <input id="specOptIsOpenInput" type="checkbox" ng-model="specCreate.Option.IsOpenText"/>\r\n                        Is Open Text\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="form-group col-sm-6">\r\n                    <label for="specOptDefaultInput">\r\n                        <input id="specOptDefaultInput" type="checkbox" ng-model="specCreate.DefaultOptionID"/>\r\n                        Set as default Spec Option\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-2 form-group">\r\n                    <button type="button" ng-if="!specCreate.overwrite" class="btn btn-primary" ng-click="specCreate.addSpecOpt()" ng-disabled="!(specCreate.Option.ID && specCreate.Option.Value)">Add Spec Option</button>\r\n                    <button type="button" ng-if="specCreate.overwrite" class="btn btn-primary" ng-click="specCreate.updateSpecOpt()" ng-disabled="!(specCreate.Option.ID && specCreate.Option.Value)">Update Spec Option</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div ng-if="specCreate.Options.length">\r\n        <h4>\r\n            <b>Spec Options</b>\r\n        </h4>\r\n        <section class="table-fixed-header">\r\n            <div class="table-header-bg"></div>\r\n            <div class="table-container" ordercloud-infinite-scroll servicename="Specs" listobject="specCreate.Options">\r\n                <table class="table table-hover">\r\n                    <colgroup>\r\n                        <col class="action-column"/>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th>\r\n                        </th>\r\n                        <th>\r\n                            <div>ID</div>\r\n                        </th>\r\n                        <th>\r\n                            <div>Value</div>\r\n                        </th>\r\n                        <th>\r\n                            <div>Markup Type</div>\r\n                        </th>\r\n                        <th>\r\n                            <div>Markup</div>\r\n                        </th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="specOpts in specCreate.Options track by $index">\r\n                        <td class="text-center"><a class="fa fa-trash text-danger" ng-click="specCreate.deleteSpecOpt($index)"></a></td>\r\n                        <td>{{specOpts.ID}}</td>\r\n                        <td>{{specOpts.Value}}</td>\r\n                        <td>{{specOpts.PriceMarkupType}}</td>\r\n                        <td>{{specOpts.PriceMarkup}}</td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-12">\r\n            <label for="specDefineInput">\r\n                <input id="specDefineInput" type="checkbox" ng-model="specCreate.spec.DefinesVariant"/>\r\n                Spec defines variant\r\n            </label>\r\n        </div>\r\n        <div class="form-group col-sm-12">\r\n            <label for="specAllowOtherInput">\r\n                <input id="specAllowOtherInput" type="checkbox" ng-model="specCreate.spec.AllowOpenText"/>\r\n                Allow Open Text\r\n            </label>\r\n        </div>\r\n        <div class="form-group col-sm-12">\r\n            <label for="specRequiredInput">\r\n                <input id="specRequiredInput" type="checkbox" ng-model="specCreate.spec.Required"/>\r\n                Required\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="SpecCreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>'),$templateCache.put("specs/templates/specEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit Spec</b>\r\n</h3>\r\n<form name="specEditForm" ng-submit="specEdit.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="specIDInput">Spec ID</label>\r\n            <input id="specIDInput" ordercloud-auto-id type="text" class="form-control" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="specEdit.spec.ID"/>\r\n        </div>\r\n        <div class="form-group col-sm-3">\r\n            <label for="specNameInput">Spec Name</label>\r\n            <input id="specNameInput" type="text" class="form-control" ng-model="specEdit.spec.Name" ng-required="true"/>\r\n        </div>\r\n        <div class="col-sm-3 form-group">\r\n            <label for="specDefaultInput">Default Value</label>\r\n            <input id="specDefaultInput" type="text" class="form-control" ng-model="specEdit.spec.DefaultValue"/>\r\n        </div>\r\n    </div>\r\n    <h4>\r\n        <b>Add Spec Options</b>\r\n    </h4>\r\n    <div class="panel panel-default col-sm-12">\r\n        <div class="panel-body">\r\n            <div class="row">\r\n                <div class="form-group col-sm-6">\r\n                    <label for="specOptIDInput">Spec Option ID</label>\r\n                    <input id="specOptIDInput" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="specEdit.Option.ID"/>\r\n                </div>\r\n                <div class="form-group col-sm-6">\r\n                    <label for="specOptListOrderInput">List Order</label>\r\n                    <input id="specOptListOrderInput" type="text" class="form-control" ng-model="specEdit.Option.ListOrder"/>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="form-group col-sm-6">\r\n                    <label for="specMUTypeInput">Markup Type</label>\r\n                    <select id="specMUTypeInput" class="form-control" ng-model="specEdit.Option.MarkupType">\r\n                        <option value="None">None</option>\r\n                        <option value="AmountPerQuantity">Fixed amount per unit</option>\r\n                        <option value="AmountTotal">Fixed amount per line</option>\r\n                        <option value="Percentage">Percentage of line total</option>\r\n                    </select>\r\n                </div>\r\n                <div class="col-sm-3 form-group">\r\n                    <label for="specValueInput">Value</label>\r\n                    <input id="specValueInput" type="text" class="form-control" ng-model="specEdit.Option.Value"/>\r\n                </div>\r\n                <div class="col-sm-3 form-group">\r\n                    <label for="specMarkupInput">Markup</label>\r\n                    <input id="specMarkupInput" type="number" step="any" class="form-control" ng-disabled="!specEdit.Option.MarkupType || specEdit.Option.MarkupType ==\'None\'" ng-model="specEdit.Option.Markup"/>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="form-group col-sm-6">\r\n                    <label for="specOptIsOpenInput">\r\n                        <input id="specOptIsOpenInput" type="checkbox" ng-model="specEdit.Option.IsOpenText"/>\r\n                        Is Open Text\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="form-group col-sm-6">\r\n                    <label for="specOptDefaultInput">\r\n                        <input id="specOptDefaultInput" type="checkbox" ng-model="specEdit.DefaultOptionID"/>\r\n                        Set as default Spec Option\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-2 form-group">\r\n                    <button type="button" ng-if="!specEdit.overwrite" class="btn btn-primary" ng-click="specEdit.addSpecOpt()" ng-disabled="!(specEdit.Option.ID && specEdit.Option.Value)">Add Spec Option</button>\r\n                    <button type="button" ng-if="specEdit.overwrite" class="btn btn-primary" ng-click="specEdit.updateSpecOpt()" ng-disabled="!(specEdit.Option.ID && specEdit.Option.Value)">Update Spec Option</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div ng-if="specEdit.spec.Options.length">\r\n        <h4>\r\n            <b>Spec Options</b>\r\n        </h4>\r\n        <section class="table-fixed-header">\r\n            <div class="table-header-bg"></div>\r\n            <div class="table-container" ordercloud-infinite-scroll servicename="Specs" controlleras="specEdit">\r\n                <table class="table table-hover">\r\n                    <colgroup>\r\n                        <col class="action-column"/>\r\n                    </colgroup>\r\n                    <thead>\r\n                    <tr>\r\n                        <th>\r\n                        </th>\r\n                        <th>\r\n                            <div>ID</div>\r\n                        </th>\r\n                        <th>\r\n                            <div>Value</div>\r\n                        </th>\r\n                        <th>\r\n                            <div>Markup Type</div>\r\n                        </th>\r\n                        <th>\r\n                            <div>Markup</div>\r\n                        </th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr ng-repeat="specOpts in specEdit.Options track by $index">\r\n                        <td class="text-center"><a class="fa fa-trash text-danger" ng-click="specEdit.deleteSpecOpt($index)"></a></td>\r\n                        <td>{{specOpts.ID}}</td>\r\n                        <td>{{specOpts.Value}}</td>\r\n                        <td>{{specOpts.PriceMarkupType}}</td>\r\n                        <td>{{specOpts.PriceMarkup}}</td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-12">\r\n            <label for="specDefineInput">\r\n                <input id="specDefineInput" type="checkbox" ng-model="specEdit.spec.DefinesVariant"/>\r\n                Spec defines variant\r\n            </label>\r\n        </div>\r\n        <div class="form-group col-sm-12">\r\n            <label for="specAllowOtherInput">\r\n                <input id="specAllowOtherInput" type="checkbox" ng-model="specEdit.spec.AllowOpenText"/>\r\n                Allow Open Text\r\n            </label>\r\n        </div>\r\n        <div class="form-group col-sm-12">\r\n            <label for="specRequiredInput">\r\n                <input id="specRequiredInput" type="checkbox" ng-model="specEdit.spec.Required"/>\r\n                Required\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="specEditForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>'),
$templateCache.put("specs/templates/specs.tpl.html",'<article id="COMPONENT_Specs" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <h3>Specs</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="SpecsSearchForm" class="form-inline" ng-submit="specs.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search Specs..." ng-model="specs.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':specs.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="specs.searchResults" ng-click="specs.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':specs.filtersApplied}" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n\t\t\t<button type="button" class="btn btn-default" ng-click="specs.showFilters = !specs.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n\t\t\t<button ng-if="specs.filtersApplied" ng-click="specs.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!specs.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':specs.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="specs.sortSelection" ng-change="specs.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Name">Name</option>\r\n                    </select>\r\n                    <div ng-if="specs.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="specs.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!specs.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="specs.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? specs.list.Meta.ItemRange[0] : \'1\') + \' - \' +  specs.list.Meta.ItemRange[1] + \' of \' + specs.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="specs.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="specs.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="specs.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="specs.updateSort(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="specs.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="specs.parameters.sortBy == \'!Name\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col"></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="spec in specs.list.Items">\r\n                <th scope="row">{{spec.ID}}</th>\r\n                <td data-title="Name">{{spec.Name}}</td>\r\n                <td class="actions-cell">\r\n                    <button ui-sref=".edit({specid:spec.ID})" class="btn btn-default btn-sm">Edit</button>\r\n                    <button ui-sref=".assign({specid:spec.ID})" class="btn btn-default btn-sm">Assign</button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && specs.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="specs.list.Meta.TotalPages > 8" max-size="5" total-items="specs.list.Meta.TotalCount" items-per-page="specs.list.Meta.PageSize" ng-model="specs.list.Meta.Page" ng-change="specs.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="specs.list.Meta.Page < specs.list.Meta.TotalPages"\r\n                ng-click="specs.loadMore()">Load More</button>\r\n    </div>\r\n</article>'),$templateCache.put("userGroups/templates/userGroupAssign.tpl.html",'<h3 class="page-header">\r\n    Assignments for {{userGroupAssign.UserGroup.Name}}\r\n</h3>\r\n<ordercloud-search servicename="Users" controlleras="userGroupAssign"></ordercloud-search>\r\n<section class="table-fixed-header">\r\n    <div class="table-header-bg"></div>\r\n    <div class="table-container" ordercloud-infinite-scroll servicename="Users" controlleras="userGroupAssign" idname="UserID" disable-dynamic-validation>\r\n        <table class="table table-hover">\r\n            <colgroup>\r\n                <col class="action-column"/>\r\n            </colgroup>\r\n            <thead>\r\n            <tr>\r\n                <th>\r\n                </th>\r\n                <th>\r\n                    <div>ID</div>\r\n                </th>\r\n                <th>\r\n                    <div>Username</div>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="user in userGroupAssign.list.Items track by $index">\r\n                <td class="text-center">\r\n                    <input name="{{\'userGroup_assign_\' + $index}}"  type="checkbox" ng-model="user.selected">\r\n                </td>\r\n                <td>\r\n                    {{user.ID}}\r\n                </td>\r\n                <td>{{user.Username}}</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>\r\n<button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n<button type="button" class="btn btn-primary" ng-click="userGroupAssign.saveAssignments()">Update Assignments</button>'),$templateCache.put("userGroups/templates/userGroupCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New User Group</b>\r\n</h3>\r\n<form name="UserGroupCreateForm" ng-submit="userGroupCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="UserGroupIDInput">User Group ID</label>\r\n            <input id="UserGroupIDInput" ordercloud-auto-id type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="userGroupCreate.userGroup.ID"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="UserGroupNameInput">User Group Name</label>\r\n            <input id="UserGroupNameInput" type="text" class="form-control" ng-model="userGroupCreate.userGroup.Name" required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="UserGroupDescriptionInput">Description</label>\r\n        <textarea id="UserGroupDescriptionInput" type="text" class="form-control" ng-model="userGroupCreate.userGroup.Description"></textarea>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="UserGroupCreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>'),$templateCache.put("userGroups/templates/userGroupEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit User Groups: </b> {{userGroupEdit.userGroupName}}\r\n</h3>\r\n<form name="userGroupEditForm" ng-submit="userGroupEdit.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="UserGroupIDInput">User Group ID</label>\r\n            <input id="UserGroupIDInput" type="text" class="form-control" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="userGroupEdit.userGroup.ID" ng-required="true"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="UserGroupNameInput">User Group Name</label>\r\n            <input id="UserGroupNameInput" type="text" class="form-control" ng-model="userGroupEdit.userGroup.Name" required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="UserGroupDescriptionInput">Description</label>\r\n        <textarea id="UserGroupDescriptionInput" type="text" class="form-control" ng-model="userGroupEdit.userGroup.Description"></textarea>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="userGroupEditForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n        <button type="button" class="btn btn-default" ng-click="userGroupEdit.Delete()"><i class="fa fa-trash text-danger"></i></button>\r\n    </div>\r\n    </div>\r\n</form>'),$templateCache.put("userGroups/templates/userGroups.tpl.html",'<article id="COMPONENT_UserGroups" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <h3>User Groups</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="UserGroupsSearchForm" class="form-inline" ng-submit="userGroups.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search User Groups..." ng-model="userGroups.parameters.search"\r\n                   class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':userGroups.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="userGroups.searchResults" ng-click="userGroups.clearSearch()" type="button"\r\n                    class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':userGroups.filtersApplied}" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n\t\t\t<button type="button" class="btn btn-default"\r\n                    ng-click="userGroups.showFilters = !userGroups.showFilters"><i class="fa fa-filter"></i> Filters\r\n\t\t\t</button>\r\n\t\t\t<button ng-if="userGroups.filtersApplied" ng-click="userGroups.clearFilters()" type="button"\r\n                    class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!userGroups.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':userGroups.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="userGroups.sortSelection"\r\n                            ng-change="userGroups.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Name">Name</option>\r\n                        <option value="Description">Description</option>\r\n                    </select>\r\n                    <div ng-if="userGroups.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="userGroups.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!userGroups.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="userGroups.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? userGroups.list.Meta.ItemRange[0] : \'1\') + \' - \' +  userGroups.list.Meta.ItemRange[1] + \' of \' + userGroups.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="userGroups.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="userGroups.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="userGroups.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="userGroups.updateSort(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="userGroups.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="userGroups.parameters.sortBy == \'!Name\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="userGroups.updateSort(\'Description\')">\r\n                        Description\r\n                        <i class="fa fa-caret-down" ng-show="userGroups.parameters.sortBy == \'Description\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="userGroups.parameters.sortBy == \'!Description\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="userGroup in userGroups.list.Items">\r\n                <th scope="row">{{userGroup.ID}}</th>\r\n                <td data-title="Name">{{userGroup.Name}}</td>\r\n                <td data-title="Description">{{userGroup.Description}}</td>\r\n                <td class="actions-cell">\r\n                    <button ui-sref=".edit({usergroupid:userGroup.ID})" class="btn btn-default btn-sm">Edit</button>\r\n                    <button ui-sref=".assign({usergroupid:userGroup.ID})" class="btn btn-default btn-sm">Assign</button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && userGroups.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="userGroups.list.Meta.TotalPages > 5"\r\n                            max-size="5" total-items="userGroups.list.Meta.TotalCount"\r\n                            items-per-page="userGroups.list.Meta.PageSize"\r\n                            ng-model="userGroups.list.Meta.Page"\r\n                            ng-change="userGroups.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="userGroups.list.Meta.Page < userGroups.list.Meta.TotalPages"\r\n                ng-click="userGroups.loadMore()">Load More</button>\r\n    </div>\r\n</article>\r\n'),$templateCache.put("users/templates/userCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New User</b>\r\n</h3>\r\n<form name="UserCreateForm" ng-submit="userCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userIDInput">User ID</label>\r\n            <input id="userIDInput" ordercloud-auto-id type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="userCreate.user.ID"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="userNameInput">User Name</label>\r\n            <input id="userNameInput" type="text" class="form-control" ng-model="userCreate.user.Username" required/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userFirstNameInput">First Name</label>\r\n            <input id="userFirstNameInput" type="text" class="form-control" ng-model="userCreate.user.FirstName" required/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userLastNameInput">Last Name</label>\r\n            <input id="userLastNameInput" type="text" class="form-control" ng-model="userCreate.user.LastName" required/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <!-- TODO: make phonefield -->\r\n            <label for="userPhoneNumberInput">Phone Number</label>\r\n            <input id="userPhoneNumberInput" type="text" class="form-control" ng-model="userCreate.user.Phone" />\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="userEmailAddressInput">Email Address</label>\r\n            <input id="userEmailAddressInput" type="email" class="form-control" ng-model="userCreate.user.Email" required/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userPasswordInput">Password</label>\r\n            <input id="userPasswordInput" type="password" pattern="^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$" pattern-err-type="customPassword" class="form-control" ng-model="userCreate.user.Password" confirmpassword="{{userCreate.PasswordConfirm}}" required/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userPasswordConfirmInput">Confirm Password</label>\r\n            <input id="userPasswordConfirmInput" type="password" pattern="^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$" pattern-err-type="customPassword"  class="form-control" ng-model="userCreate.PasswordConfirm" confirmpassword="{{userCreate.user.Password}}" required/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userActiveCheckbox">\r\n            <input id="userActiveCheckbox" type="checkbox" ng-model="userCreate.user.Active"/>\r\n            Active</label>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userTermsAcceptedCheckbox">\r\n            <input id="userTermsAcceptedCheckbox" type="checkbox" ng-model="userCreate.TermsAccepted" required/>\r\n            Terms & Conditions\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="UserCreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>'),$templateCache.put("users/templates/userEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit User:</b> {{userEdit.userName}}\r\n</h3>\r\n<form name="UserEditForm" ng-submit="userEdit.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userIDInput">User ID</label>\r\n            <input id="userIDInput" type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="userEdit.user.ID"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="userNameInput">User Name</label>\r\n            <input id="userNameInput" type="text" class="form-control" ng-model="userEdit.user.Username" ng-required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userFirstNameInput">First Name</label>\r\n            <input id="userFirstNameInput" type="text" class="form-control" ng-model="userEdit.user.FirstName" ng-required="true"/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userLastNameInput">Last Name</label>\r\n            <input id="userLastNameInput" type="text" class="form-control" ng-model="userEdit.user.LastName" ng-required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <!-- TODO: make phonefield -->\r\n            <label for="userPhoneNumberInput">Phone Number</label>\r\n            <input id="userPhoneNumberInput" type="text" class="form-control" ng-model="userEdit.user.Phone" />\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="userEmailAddressInput">Email Address</label>\r\n            <input id="userEmailAddressInput" type="email" class="form-control" ng-model="userEdit.user.Email" require="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userPasswordInput">Password</label>\r\n            <input id="userPasswordInput" type="password" pattern=\'^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$\' pattern-err-type="customPassword" class="form-control" ng-model="userEdit.user.Password" confirmpassword="{{userEdit.PasswordConfirm}}"/>\r\n        </div>\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userPasswordConfirmInput">Confirm Password</label>\r\n            <input id="userPasswordConfirmInput" type="password" pattern="^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{8,}$" pattern-err-type="customPassword" class="form-control" ng-model="userEdit.PasswordConfirm" confirmpassword="{{userEdit.user.Password}}"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userActiveCheckbox">\r\n            <input id="userActiveCheckbox" type="checkbox" ng-model="userEdit.user.Active"/>\r\n            Active</label>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-sm-6 form-group">\r\n            <label for="userTermsAcceptedCheckbox">\r\n            <input id="userTermsAcceptedCheckbox" type="checkbox" ng-model="userEdit.TermsAccepted" ng-required="true"/>\r\n            Terms & Conditions</label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="UserEditForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n        <button type="button" class="btn btn-default" ng-click="userEdit.Delete()"><i class="fa fa-trash text-danger"></i></button>\r\n    </div>\r\n</form>'),$templateCache.put("users/templates/users.tpl.html",'<article id="COMPONENT_Users" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <h3>Users</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="UsersSearchForm" class="form-inline" ng-submit="users.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search Users..." ng-model="users.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':users.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="users.searchResults" ng-click="users.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':users.filtersApplied}" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n\t\t\t<button type="button" class="btn btn-default" ng-click="users.showFilters = !users.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n\t\t\t<button ng-if="users.filtersApplied" ng-click="users.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!users.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':users.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="users.sortSelection" ng-change="users.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Username">Username</option>\r\n                        <option value="FirstName">First Name</option>\r\n                        <option value="LastName">Last Name</option>\r\n                        <option value="Email">Email</option>\r\n                    </select>\r\n                    <div ng-if="users.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="users.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!users.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="users.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? users.list.Meta.ItemRange[0] : \'1\') + \' - \' +  users.list.Meta.ItemRange[1] + \' of \' + users.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="users.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="users.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="users.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="users.updateSort(\'Username\')">\r\n                        Username\r\n                        <i class="fa fa-caret-down" ng-show="users.parameters.sortBy == \'Username\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="users.parameters.sortBy == \'!Username\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="users.updateSort(\'FirstName\')">\r\n                        First Name\r\n                        <i class="fa fa-caret-down" ng-show="users.parameters.sortBy == \'FirstName\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="users.parameters.sortBy == \'!FirstName\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="users.updateSort(\'LastName\')">\r\n                        Last Name\r\n                        <i class="fa fa-caret-down" ng-show="users.parameters.sortBy == \'LastName\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="users.parameters.sortBy == \'!LastName\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="users.updateSort(\'Email\')">\r\n                        Email\r\n                        <i class="fa fa-caret-down" ng-show="users.parameters.sortBy == \'Email\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="users.parameters.sortBy == \'!Email\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="user in users.list.Items" ui-sref="users.edit({userid:user.ID})">\r\n                <th scope="row">{{user.ID}}</th>\r\n                <td data-title="Username">{{user.Username}}</td>\r\n                <td data-title="FirstName">{{user.FirstName}}</td>\r\n                <td data-title="LastName">{{user.LastName}}</td>\r\n                <td data-title="Email">{{user.Email}}</td>\r\n                <td class="actions-cell">\r\n                    <button class="btn btn-default btn-sm">Edit</button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && users.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="users.list.Meta.TotalPages > 8" max-size="5" total-items="users.list.Meta.TotalCount" items-per-page="users.list.Meta.PageSize" ng-model="users.list.Meta.Page" ng-change="users.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="users.list.Meta.Page < users.list.Meta.TotalPages"\r\n                ng-click="users.loadMore()">Load More</button>\r\n    </div>\r\n</article>'),$templateCache.put("spendingAccounts/templates/spendingAccountAssignGroup.tpl.html",'<h3 class="page-header">\r\n    User Group Assignments for {{spendingAccountAssignGroup.spendingAccount.Name}}\r\n</h3>\r\n<ordercloud-search servicename="UserGroups" controlleras="spendingAccountAssignGroup"></ordercloud-search>\r\n<section class="table-fixed-header">\r\n    <div class="table-header-bg"></div>\r\n    <div class="table-container" ordercloud-infinite-scroll servicename="UserGroups" controlleras="spendingAccountAssignGroup" idname="UserGroupID" disable-dynamic-validation>\r\n        <table class="table table-hover">\r\n            <colgroup>\r\n                <col class="action-column">\r\n            </colgroup>\r\n            <thead>\r\n            <tr>\r\n                <th></th>\r\n                <th>\r\n                    <div>ID</div>\r\n                </th>\r\n                <th>\r\n                    <div>Name</div>\r\n                </th>\r\n                <th>\r\n                    <div>Allow Exceed Balance</div>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="group in spendingAccountAssignGroup.list.Items track by $index">\r\n                <td class="text-center">\r\n                    <input name="{{\'assignCheckbox\' + $index}}" type="checkbox" ng-model="group.selected">\r\n                </td>\r\n                <td>{{group.ID}}</td>\r\n                <td>{{group.Name}}</td>\r\n                <td class="text-center">\r\n                    <input name="{{\'allowExceed\' + $index}}" type="checkbox" ng-model="group.allowExceed">\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>\r\n<div class="form-group">\r\n    <button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n    <button type="button" class="btn btn-primary" ng-click="spendingAccountAssignGroup.saveAssignments()">Update Group Assignments</button>\r\n    <button type="button" class="btn btn-default" ui-sref="^.assignUser({spendingaccountid: spendingAccountAssignGroup.spendingAccount.ID})">Assign Users</button>\r\n</div>'),
$templateCache.put("spendingAccounts/templates/spendingAccountAssignUser.tpl.html",'<h3 class="page-header">\r\n    User Assignments for {{spendingAccountAssignUser.spendingAccount.Name}}\r\n</h3>\r\n<ordercloud-search servicename="Users" controlleras="spendingAccountAssignUser"></ordercloud-search>\r\n<section class="table-fixed-header">\r\n    <div class="table-header-bg"></div>\r\n    <div class="table-container" ordercloud-infinite-scroll servicename="Users" controlleras="spendingAccountAssignUser" idname="UserID" disable-dynamic-validation>\r\n        <table class="table table-hover">\r\n            <colgroup>\r\n                <col class="action-column">\r\n            </colgroup>\r\n            <thead>\r\n            <tr>\r\n                <th></th>\r\n                <th>\r\n                    <div>ID</div>\r\n                </th>\r\n                <th>\r\n                    <div>Username</div>\r\n                </th>\r\n                <th>\r\n                    <div>Allow Exceed Balance</div>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="user in spendingAccountAssignUser.list.Items track by $index">\r\n                <td class="text-center">\r\n                    <input name="{{\'assignCheckbox\' + $index}}" type="checkbox" ng-model="user.selected">\r\n                </td>\r\n                <td>{{user.ID}}</td>\r\n                <td>{{user.Username}}</td>\r\n                <td class="text-center">\r\n                    <input name="{{\'allowExceed\' + $index}}" type="checkbox" ng-model="user.allowExceed">\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</section>\r\n<div class="form-group">\r\n    <button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n    <button type="button" class="btn btn-primary" ng-click="spendingAccountAssignUser.saveAssignments()">Update Party Assignments</button>\r\n    <button type="button" class="btn btn-default" ui-sref="^.assignGroup({spendingaccountid: spendingAccountAssignUser.spendingAccount.ID})">Assign Groups</button>\r\n</div>'),$templateCache.put("spendingAccounts/templates/spendingAccountCreate.tpl.html",'<h3 class="page-header">\r\n    <b>New Spending Account</b>\r\n</h3>\r\n<form name="SpendingAccountCreateForm" ng-submit="spendingAccountCreate.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="spendingAccountIDInput">ID</label>\r\n            <input id="spendingAccountIDInput" ordercloud-auto-id type="text" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" class="form-control" ng-model="spendingAccountCreate.spendingAccount.ID"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="spendingAccountNameInput">Spending Account Name</label>\r\n            <input id="spendingAccountNameInput" type="text" class="form-control" ng-model="spendingAccountCreate.spendingAccount.Name" required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="spendingAccountStartDate">Start Date</label>\r\n            <input class="form-control" ng-show="application.isTouchDevice" type="date" id="spendingAccountcreateStartinput2" ng-model="spendingAccountCreate.spendingAccount.StartDate"/>\r\n            <input id="spendingAccountStartDate" ng-hide="application.isTouchDevice" type="text" ng-click="open1 = !open1" is-open="open1" uib-datepicker-popup="MM/dd/yyyy" datepicker-append-to-body="true" class="form-control" ng-model="spendingAccountCreate.spendingAccount.StartDate">\r\n        </div>\r\n        <div class="form-group col-md-6">\r\n            <label for="spendingAccountExpirationDate">End Date</label>\r\n            <input class="form-control"  ng-disabled="!spendingAccountCreate.spendingAccount.StartDate" ng-show="application.isTouchDevice" type="date" id="spendingAccountStartcreateinput2" ng-model="spendingAccountCreate.spendingAccount.EndDate"/>\r\n            <input id="spendingAccountExpirationDate" ng-hide="application.isTouchDevice"  type="text" ng-click="open2 = !open2" is-open="open2" min-date="spendingAccountCreate.spendingAccount.StartDate" ng-disabled="!spendingAccountCreate.spendingAccount.StartDate" uib-datepicker-popup="MM/dd/yyyy" datepicker-append-to-body="true" class="form-control" ng-model="spendingAccountCreate.spendingAccount.EndDate">\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="spendingAccountUserIDInput">Balance</label>\r\n            <input id="spendingAccountUserIDInput" type="number" step="any" min="0" class="form-control" ng-model="spendingAccountCreate.spendingAccount.Balance" required="true"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="spendingAccountBalanceInput">\r\n            <input id="spendingAccountBalanceInput" type="checkbox" ng-model="spendingAccountCreate.spendingAccount.AllowAsPaymentMethod"/>\r\n            Allow As Payment Method</label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="SpendingAccountCreateForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n    </div>\r\n</form>'),$templateCache.put("spendingAccounts/templates/spendingAccountEdit.tpl.html",'<h3 class="page-header">\r\n    <b>Edit Spending Account:</b> {{spendingAccountEdit.spendingAccountName}}\r\n</h3>\r\n<form name="SpendingAccountEditForm" ng-submit="spendingAccountEdit.Submit()" novalidate>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="spendingAccountIDInput">Spending Account ID</label>\r\n            <input id="spendingAccountIDInput" type="text" class="form-control" pattern="([A-Za-z0-9\\-\\_]+)" pattern-err-type="ID_Name" ng-model="spendingAccountEdit.spendingAccount.ID"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="spendingAccountNameInput">Spending Account Name</label>\r\n            <input id="spendingAccountNameInput" type="text" class="form-control" ng-model="spendingAccountEdit.spendingAccount.Name" required="true"/>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-md-6">\r\n            <label for="spendingAccountStartDate">Start Date</label>\r\n            <input class="form-control" ng-show="application.isTouchDevice" type="date" id="spendingAccountEditStartinput2" ng-model="spendingAccountEdit.spendingAccount.StartDate"/>\r\n            <input id="spendingAccountStartDate" ng-hide="application.isTouchDevice" type="text" ng-click="open1 = !open1" is-open="open1" uib-datepicker-popup="MM/dd/yyyy" datepicker-append-to-body="true" class="form-control" ng-model="spendingAccountEdit.spendingAccount.StartDate">\r\n        </div>\r\n        <div class="form-group col-md-6">\r\n            <label for="spendingAccountExpirationDate">End Date</label>\r\n            <input class="form-control"  ng-disabled="!spendingAccountEdit.spendingAccount.StartDate" ng-show="application.isTouchDevice" type="date" id="spendingAccountStartcreateinput2" ng-model="spendingAccountEdit.spendingAccount.EndDate"/>\r\n            <input id="spendingAccountExpirationDate" ng-hide="application.isTouchDevice"  type="text" ng-click="open2 = !open2" is-open="open2" min-date="spendingAccountEdit.spendingAccount.StartDate" ng-disabled="!spendingAccountEdit.spendingAccount.StartDate" uib-datepicker-popup="MM/dd/yyyy" datepicker-append-to-body="true" class="form-control" ng-model="spendingAccountEdit.spendingAccount.EndDate">\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="form-group col-sm-6">\r\n            <label for="spendingAccountBalanceInput">Spending Account Balance</label>\r\n            <input id="spendingAccountBalanceInput" type="number" step="any" class="form-control" ng-model="spendingAccountEdit.spendingAccount.Balance" required="true"/>\r\n        </div>\r\n        <div class="form-group col-sm-6">\r\n            <label for="spendingAccountAllowInput">\r\n                <input id="spendingAccountAllowInput" type="checkbox" ng-model="spendingAccountEdit.spendingAccount.AllowAsPaymentMethod"/>\r\n                Allow as Payment Type\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit" class="btn btn-primary" ng-disabled="SpendingAccountEditForm.$invalid">Save</button>\r\n        <button type="button" class="btn btn-default" ui-sref="^">Cancel</button>\r\n        <button type="button" class="btn btn-default" ng-click="spendingAccountEdit.Delete()"><i class="fa fa-trash text-danger"></i></button>\r\n    </div>\r\n</form>'),$templateCache.put("spendingAccounts/templates/spendingAccounts.tpl.html",'<article id="COMPONENT_SpendingAccounts" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <button type="button" class="btn btn-success pull-right" ui-sref=".create"><i class="fa fa-plus-circle"></i> Create New</button>\r\n        <h3>Spending Accounts</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="SpendingAccountsSearchForm" class="form-inline" ng-submit="spendingAccounts.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search Spending Accounts..." ng-model="spendingAccounts.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n            <span ng-class="{\'btn-group\':spendingAccounts.searchResults}">\r\n                <button type="submit" class="btn btn-primary">Search</button>\r\n                <button ng-if="spendingAccounts.searchResults" ng-click="spendingAccounts.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n            </span>\r\n            <span ng-class="{\'btn-group\':spendingAccounts.filtersApplied}" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <button type="button" class="btn btn-default" ng-click="spendingAccounts.showFilters = !spendingAccounts.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n                <button ng-if="spendingAccounts.filtersApplied" ng-click="spendingAccounts.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n            </span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!spendingAccounts.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':spendingAccounts.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="spendingAccounts.sortSelection" ng-change="spendingAccounts.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Name">Name</option>\r\n                    </select>\r\n                    <div ng-if="spendingAccounts.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="spendingAccounts.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!spendingAccounts.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="spendingAccounts.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? spendingAccounts.list.Meta.ItemRange[0] : \'1\') + \' - \' +  spendingAccounts.list.Meta.ItemRange[1] + \' of \' + spendingAccounts.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="spendingAccounts.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="spendingAccounts.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="spendingAccounts.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="spendingAccounts.updateSort(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="spendingAccounts.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="spendingAccounts.parameters.sortBy == \'!Name\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th scope="col">\r\n                    Balance\r\n                </th>\r\n                <th scope="col">\r\n                    Start Date\r\n                </th>\r\n                <th scope="col">\r\n                    End Date\r\n                </th>\r\n                <th></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="spendingAccount in spendingAccounts.list.Items" ui-sref="spendingAccounts.edit({spendingaccountid:spendingAccount.ID})">\r\n                <th scope="row">{{spendingAccount.ID}}</th>\r\n                <td data-title="Name">{{spendingAccount.Name}}</td>\r\n                <td data-title="Balance">{{spendingAccount.Balance | currency}}</td>\r\n                <td data-title="Start Date">{{spendingAccount.StartDate | date:\'MM/dd/yyyy\'}}</td>\r\n                <td data-title="End Date">{{spendingAccount.EndDate | date:\'MM/dd/yyyy\'}}</td>\r\n                <td class="actions-cell">\r\n                    <button class="btn btn-default btn-sm">Edit</button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && spendingAccounts.list.Meta.TotalPages > 1">\r\n            <uib-pagination boundary-links="spendingAccounts.list.Meta.TotalPages > 5"\r\n                            max-size="5" total-items="spendingAccounts.list.Meta.TotalCount"\r\n                            items-per-page="spendingAccounts.list.Meta.PageSize"\r\n                            ng-model="spendingAccounts.list.Meta.Page"\r\n                            ng-change="spendingAccounts.pageChanged()"></uib-pagination>\r\n        </div>\r\n        <button type="button"\r\n                ng-if="application.$ocMedia(\'max-width:767px\')"\r\n                class="btn btn-default btn-block btn-lg"\r\n                ng-show="spendingAccounts.list.Meta.Page < spendingAccounts.list.Meta.TotalPages"\r\n                ng-click="spendingAccounts.loadMore()">Load More</button>\r\n    </div>\r\n</article>\r\n'),$templateCache.put("catalog/category/templates/category.tpl.html",'<article>\r\n    <ordercloud-category-list categorylist="category.categories.Items"></ordercloud-category-list>\r\n    <ordercloud-product-list productlist="category.products.Items"></ordercloud-product-list>\r\n    <div class="well well-lg text-center" ng-if="category.categories.Items.length === 0 && category.products.Items.length === 0">\r\n        <b>The selected category has no assigned categories or products that are visible to you.</b>\r\n    </div>\r\n</article>'),$templateCache.put("catalog/products/templates/products.tpl.html",'<article>\r\n    <ordercloud-search placeholder="Search Products..." controlleras="products"></ordercloud-search>\r\n    <ordercloud-product-list productlist="products.list.Items"></ordercloud-product-list>\r\n</article>'),$templateCache.put("catalog/productQuickView/templates/catalogSearch.quickview.tpl.html",'<div class="text-center">\r\n    <button class="btn btn-default" ng-click="productQuickView.open(product)">Quick View</button>\r\n</div>'),$templateCache.put("catalog/productQuickView/templates/catalogSearch.quickviewModal.tpl.html",'<form class="quickViewModal"  name="product_spec_form" ng-submit="productQuickViewModal.addToCart(productQuickViewModal.selectedProduct)" >\r\n    <div class="modal-header">\r\n        <h3 class="modal-title">{{productQuickViewModal.selectedProduct.Name}}</h3>\r\n        <h2 class="panel-title">{{productQuickViewModal.selectedProduct.ID}}</h2>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="row">\r\n            <figure class="col-md-6" ng-if="productQuickViewModal.selectedProduct.xp.image">\r\n                <img class="img-responsive" ng-src="{{productQuickViewModal.selectedProduct.xp.image.URL}}" alt="Product Image">\r\n            </figure>\r\n            <div class="col-md-6">\r\n                <h4 ng-if="productQuickViewModal.selectedProduct.Description">Description</h4>\r\n                <p ng-bind-html="productQuickViewModal.selectedProduct.Description"></p>\r\n                <oc-spec-form product="productQuickViewModal.selectedProduct"></oc-spec-form>\r\n                <hr>\r\n                <oc-add-to-order formname="product_spec_form" product="productQuickViewModal.selectedProduct"></oc-add-to-order>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer text-right">\r\n        <button type="button" class="btn btn-default" ng-click="productQuickViewModal.cancel()">Cancel</button>\r\n    </div>\r\n</form>'),$templateCache.put("catalog/product/templates/addToOrder.tpl.html",'<fieldset class="form-group">\r\n    <div class="input-group">\r\n        <input type="number" ng-required="true" class="form-control text-center" min="{{product.StandardPriceSchedule.MinQuantity}}" max="{{product.StandardPriceSchedule.MaxQuantity}}" ng-model="product.item.Quantity" ng-if="!product.StandardPriceSchedule.RestrictedQuantity" placeholder="Quantity">\r\n        <select ng-required="true" ng-if="product.StandardPriceSchedule.RestrictedQuantity" class="form-control text-center" ng-model="product.item.Quantity" ng-options="priceBreak.Quantity as priceBreak.Quantity for priceBreak in product.StandardPriceSchedule.PriceBreaks"></select>\r\n        <span class="input-group-btn">\r\n            <button ng-disabled="$parent[formname].$invalid" class="btn btn-success" type="submit">\r\n                <span ng-if="orderInput.price" class="badge">{{orderInput.price | currency}}</span>\r\n                <i class="fa fa-plus-circle"></i>\r\n                Add To Cart\r\n            </button>\r\n        </span>\r\n    </div>\r\n</fieldset>'),$templateCache.put("catalog/product/templates/lineitem.edit.tpl.html",'<article class="row form-group" ng-form="lineitem_spec_form" id="product_view">\r\n    <form name="lineitemEdit" ng-submit="product.UpdateLineItem()">\r\n        <div class="col-md-6" ng-if="product.item.xp.image">\r\n            <!--PRODUCT IMAGE-->\r\n            <img class="img-responsive" ng-src="{{product.item.xp.image.URL}}" alt="Product Image">\r\n            <div class="input-group" style="margin-top: 20px;">\r\n                <input required="true" min="{{product.item.StandardPriceSchedule.MinQuantity}}" max="{{product.item.StandardPriceSchedule.MaxQuantity}}" class="form-control text-center" type="number" ng-model="product.item.Quantity">\r\n            <span class="input-group-btn">\r\n                <button ng-disabled="lineitem_spec_form.$invalid" class="btn btn-success" type="submit">Save Changes</button>\r\n            </span>\r\n            </div>\r\n        </div>\r\n        <div ng-class="{\'col-md-6\': product.item.xp.image, \'col-md-12\': !product.item.xp.image}">\r\n            <div ui-view="view"></div>\r\n        </div>\r\n    </form>\r\n</article>'),$templateCache.put("catalog/product/templates/order-input.tpl.html",'<div id="add_to_cart">\r\n    <form name="add_to_cart" ng-submit="orderInput.addToCart()" class="form-horizontal" ng-show="(orderInput.currentState === \'catalog.product.config\' || product.Specs.length === 0)">\r\n        <div class="input-group">\r\n            <input type="number" ng-required="true" class="form-control text-center" min="{{product.StandardPriceSchedule.MinQuantity}}" max="{{product.StandardPriceSchedule.MaxQuantity}}" ng-model="orderInput.Quantity" ng-if="!product.StandardPriceSchedule.RestrictedQuantity" placeholder="Quantity">\r\n            <select ng-required="true" ng-if="product.StandardPriceSchedule.RestrictedQuantity" class="form-control text-center" ng-model="orderInput.Quantity" ng-options="priceBreak.Quantity as priceBreak.Quantity for priceBreak in product.StandardPriceSchedule.PriceBreaks"></select>\r\n            <div class="input-group-btn">\r\n                <button ng-disabled="validationform.$invalid" class="btn btn-success" type="submit">\r\n                    <span ng-if="orderInput.price" class="badge">{{orderInput.price | currency}}</span>\r\n                    <i class="fa fa-plus-circle"></i>\r\n                    Add To Cart\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </form>\r\n    <div ng-show="orderInput.currentState === \'catalog.product\' && product.Specs.length > 0">\r\n        <button ui-sref="catalog.product.config" class="btn btn-block">Customize Product</button>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("catalog/product/templates/product.tpl.html",'<form name="OCProductForm" ng-submit="product.addToCart(product.item)" id="product_view">\r\n    <fieldset class="form-group">\r\n        <div class="row">\r\n            <div ng-class="{\'col-md-6\': product.item.xp.image, \'col-md-12\': !product.item.xp.image}">\r\n                <!--PRODUCT IMAGE-->\r\n                <img class="img-responsive" ng-if="product.item.xp.image.URL" ng-src="{{product.item.xp.image.URL}}" alt="Product Image">\r\n                <div class="panel panel-default" ng-if="product.item.Description && product.item.xp.image.URL">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Description</h3>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        {{product.item.Description}}\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n            <div ng-class="{\'col-md-6\': product.item.xp.image, \'col-md-12\': !product.item.xp.image}">\r\n                <h1>{{product.item.Name || product.item.ID}}</h1>\r\n                <h3 ng-if="product.item.Name">{{product.item.ID}}</h3>\r\n                <div class="panel panel-default" ng-if="product.item.Description && !product.item.xp.image.URL">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Description</h3>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        {{product.item.Description}}\r\n                    </div>\r\n                </div>\r\n                <div class="panel panel-default" ng-if="product.item.StandardPriceSchedule.PriceBreaks">\r\n                    <div class="panel-heading">\r\n                        <h3 class="panel-title">Price Breaks</h3>\r\n                    </div>\r\n                    <table class="table">\r\n                        <thead>\r\n                        <tr>\r\n                            <th>Quantity</th>\r\n                            <th>Price</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        <tr ng-repeat="priceBreak in product.item.StandardPriceSchedule.PriceBreaks">\r\n                            <td>{{priceBreak.Quantity}}</td>\r\n                            <td>{{priceBreak.Price}}</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                <oc-spec-form product="product"></oc-spec-form>\r\n                <oc-add-to-order product="product" formname="OCProductForm"></oc-add-to-order>\r\n            </div>\r\n        </div>\r\n    </fieldset>\r\n</form>'),$templateCache.put("catalog/product/templates/spec.selectionfield.tpl.html",'<select ng-if="spec.Options.length > 0" ng-required="spec.Required" class="form-control" ng-model="spec.OptionID" ng-options="option.ID as option.Value for option in spec.Options">\r\n    <option value=""> </option>\r\n</select>\r\n<input ng-if="showField" type="text" ng-model="spec.Value" class="form-control" ng-required="spec.Required">'),$templateCache.put("catalog/product/templates/specform.tpl.html",'<fieldset class="form-group" ng-repeat="spec in product.item.Specs | orderBy:\'ListOrder\' track by $index">\r\n    <label>{{spec.Name || spec.ID}}</label>\r\n    <input ng-if="spec.Options.length === 0" ng-required="spec.Required" class="form-control" ng-model="spec.Value" type="text">\r\n    <spec-select-field ng-if="spec.Options.length > 0" spec="spec"></spec-select-field>\r\n</fieldset>\r\n'),$templateCache.put("checkout/billing/templates/checkout.billing.tpl.html",'<div class="panel panel-default">\r\n    <div class="panel-heading"><b>Billing</b></div>\r\n    <div class="panel-body">\r\n        <div ng-if="!checkoutBilling.customAddress">\r\n            <div class="form-group" ng-if="checkoutBilling.billingAddresses.length">\r\n                <label for="billing_address">Billing Address</label>\r\n                <select id="billing_address" required="true" name="BillingAddress" ng-change="checkoutBilling.SaveBillingAddress(checkout.currentOrder);" ng-model="checkout.currentOrder.BillingAddressID" class="form-control" ng-options="address.ID as (address.AddressName || address.Street1 + \' \' + address.Street2) for address in checkoutBilling.billingAddresses"></select>\r\n            </div>\r\n            <p id="address_paragraph" ng-if="checkout.currentOrder.BillingAddress">{{checkout.currentOrder.BillingAddress | address: \'full\'}}</p>\r\n        </div>\r\n        <div class="form-group">\r\n            <button ng-click="checkoutBilling.customAddress = true;" type="button" class="btn btn-success"><i class="fa fa-plus-circle"></i> Use Custom</button>\r\n        </div>\r\n        <div ng-if="checkoutBilling.customAddress">\r\n            <form class="form-group" ng-submit="checkoutBilling.SaveCustomAddress(checkout.currentOrder)" name="order_billing">\r\n                <ordercloud-address-form address="checkoutBilling.address" isbilling="true"></ordercloud-address-form>\r\n                <div class="row">\r\n                    <div class="col-md-6">\r\n                        <label><input type="checkbox" ng-model="checkoutBilling.saveAddress"> Save Address for Future Use</label>\r\n                    </div>\r\n                </div>\r\n                <button ng-disabled="order_billing.address_form.$invalid" type="submit" class="btn btn-success pull-left">Submit</button>\r\n                <button ng-click="checkoutBilling.customAddress = false;" type="button" class="btn btn-danger pull-right">Cancel</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put("checkout/payment/templates/checkout.payment.tpl.html",'<div class="panel panel-default" ng-init="checkoutPayment.setAmountMax(checkout.currentOrder)">\r\n    <div class="panel-heading">Payment</div>\r\n    <div class="panel-body">\r\n        <oc-checkout-payment ng-repeat="payment in checkoutPayment.currentOrderPayments"></oc-checkout-payment>\r\n        <!--<label for="payment_method">Payment Method</label>\r\n        <select id="payment_method" required="true" ng-change="checkoutPayment.setPaymentMethod(checkout.currentOrder)" class="form-control" ng-model="checkoutPayment.currentOrderPayments[0].Type" ng-options="paymentMethod.Value as paymentMethod.Display for paymentMethod in checkoutPayment.paymentMethods"></select>\r\n        <div ng-switch="checkoutPayment.currentOrderPayments[0].Type">\r\n            <div ng-switch-when="PurchaseOrder">\r\n                &lt;!&ndash;Nothing to do here yet&ndash;&gt;\r\n            </div>\r\n            <div ng-switch-when="CreditCard">\r\n                <div ng-if="!checkoutPayment.createNewCard">\r\n                    <label for="credit_card">Credit Card</label>\r\n                    <select id="credit_card" ng-required="checkout.PaymentMethod === \'CreditCard\'" ng-change="checkoutPayment.setCreditCard(checkout.currentOrder)" class="form-control" ng-model="checkoutPayment.currentOrderPayments[0].CreditCardID" ng-options="creditCard.ID as (\'XXXX-XXXX-XXXX-\' + creditCard.PartialAccountNumber) for creditCard in checkoutPayment.creditCards"></select>\r\n                    </br>\r\n                    <button class="btn btn-success" ng-click="checkoutPayment.createNewCard = true"><i class="fa fa-plus-circle"></i> Create New</button>\r\n                </div>\r\n                <div ng-if="checkoutPayment.createNewCard">\r\n                    <form ng-submit="checkoutPayment.saveCreditCard(checkout.currentOrder)" class="form-group" name="new_credit_card">\r\n                        <div class="row">\r\n                            <div class="col-md-6">\r\n                                <label for="cardholder_name">Cardholder Name</label>\r\n                                <input id="cardholder_name" required="true" class="form-control" type="text" ng-model="checkoutPayment.creditCard.CardholderName">\r\n                            </div>\r\n                            <div class="col-md-6">\r\n                                <label for="cardtype">Card Type</label>\r\n                                <select id="cardtype" required="true" class="form-control" ng-model="checkoutPayment.creditCard.CardType" ng-options="type as type for type in checkoutPayment.CreditCardTypes"></select>\r\n                            </div>\r\n                        </div>\r\n                        <div class="row">\r\n                            <div class="col-md-6">\r\n                                <label for="cardnum">Account Number</label>\r\n                                <input id="cardnum" type="text" class="form-control" ng-model="checkoutPayment.creditCard.PartialAccountNumber">\r\n                            </div>\r\n                            <div class="form-group col-md-6" ng-init="open = false">\r\n                                <label for="creditCardExpirationInput">Expiration Date</label>\r\n                                <input class="form-control"\r\n                                       required="true"\r\n                                       type="text"\r\n                                       is-open="open"\r\n                                       uib-datepicker-popup="MM/yy"\r\n                                       datepicker-mode="\'year\'"\r\n                                       min-mode="\'month\'"\r\n                                       ng-click="open = !open"\r\n                                       id="creditCardExpirationInput"\r\n                                       datepicker-append-to-body="true"\r\n                                       show-weeks="false"\r\n                                       min-date="checkoutPayment.today"\r\n                                       ng-model="checkoutPayment.creditCard.ExpirationDate"/>\r\n                            </div>\r\n                        </div>\r\n                        <button ng-disabled="new_credit_card.$invalid" type="submit" class="btn btn-success pull-left">Submit</button>\r\n                        <button ng-click="checkoutPayment.createNewCard = false; checkoutPayment.creditCard = null" type="button" class="btn btn-danger pull-right">Cancel</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            <div ng-switch-when="SpendingAccount">\r\n                <label for="spending_account">Spending Account</label>\r\n                <select id="spending_account" ng-required="checkout.PaymentMethod === \'SpendingAccount\'" ng-change="checkoutPayment.setSpendingAccount(checkout.currentOrder)" class="form-control" ng-model="checkoutPayment.currentOrderPayments[0].SpendingAccountID" ng-options="spendingAccount.ID as spendingAccount.Name for spendingAccount in checkoutPayment.spendingAccounts"></select>\r\n            </div>\r\n        </div>-->\r\n        <div class="text-center add-payment"  ng-if="checkoutPayment.allowMultiplePayments">\r\n            <button type="button" class="btn btn-default" ng-click="checkoutPayment.createPayment(checkout.currentOrder)" ng-disabled="!checkoutPayment.canAddPayment(checkout.currentOrder, checkoutPayment.currentOrderPayments)"><i class="fa fa-plus-circle"></i> Add Another Payment</button>\r\n        </div>\r\n    </div>\r\n</div>'),
$templateCache.put("checkout/payment/templates/payment.tpl.html",'<div class="row form-group">\r\n    <div ng-class="{\'col-sm-8\': checkoutPayment.allowMultiplePayments, \'col-sm-12\': !checkoutPayment.allowMultiplePayments}">\r\n        <label for="payment_method">Payment Method <span ng-show="checkoutPayment.currentOrderPayments.length > 1">{{this.$index + 1}}</span> <i class="fa fa-times-circle text-danger" ng-if="this.$index > 0" ng-click="checkoutPayment.removePayment(checkout.currentOrder, this.$index)"></i></label>\r\n        <select id="payment_method" required="true" ng-change="checkoutPayment.setPaymentMethod(checkout.currentOrder, this.$index)" class="form-control" ng-model="checkoutPayment.currentOrderPayments[this.$index].Type" ng-options="paymentMethod.Value as paymentMethod.Display for paymentMethod in checkoutPayment.paymentMethods"></select>\r\n    </div>\r\n    <div class="col-sm-4" ng-if="checkoutPayment.allowMultiplePayments">\r\n        <label>Amount</label>\r\n        <input type="number" class="form-control" ng-model="checkoutPayment.currentOrderPayments[this.$index].Amount" max="{{checkoutPayment.currentOrderPayments[this.$index].MaxAmount}}" ng-change="checkoutPayment.patchPaymentAmount(checkout.currentOrder, this.$index)" />\r\n    </div>\r\n</div>\r\n<div class="row" ng-switch="checkoutPayment.currentOrderPayments[this.$index].Type">\r\n    <div class="col-sm-12">\r\n        <div ng-switch-when="PurchaseOrder">\r\n            <label for="poNumber">PO Number</label>\r\n            <div class="input-group">\r\n                <input id="poNumber" class="form-control" type="text" ng-model="checkoutPayment.currentOrderPayments[this.$index].xp.PONumber"/>\r\n                <span class="input-group-btn"><button class="btn btn-success" ng-click="checkoutPayment.savePONumber(this.$index, checkout.currentOrder)"><i class="fa fa-plus"></i> </button></span>\r\n            </div>\r\n        </div>\r\n        <div ng-switch-when="CreditCard">\r\n            <div ng-if="!checkoutPayment.createNewCard[this.$index]">\r\n                <label for="credit_card">Credit Card</label>\r\n                <select id="credit_card" ng-change="checkoutPayment.setCreditCard(checkout.currentOrder, this.$index)" ng-required="checkout.PaymentMethod === \'CreditCard\'" class="form-control" ng-model="checkoutPayment.currentOrderPayments[this.$index].CreditCardID" ng-options="creditCard.ID as (\'XXXX-XXXX-XXXX-\' + creditCard.PartialAccountNumber) for creditCard in checkoutPayment.creditCards"></select>\r\n                </br>\r\n                <button class="btn btn-success" ng-click="checkoutPayment.createNewCard[this.$index] = true"><i class="fa fa-plus-circle"></i> Create New</button>\r\n            </div>\r\n            <div ng-if="checkoutPayment.createNewCard[this.$index]">\r\n                <form ng-submit="checkoutPayment.saveCreditCard(checkout.currentOrder, checkoutPayment.currentOrderPayments[this.$index].CreditCard, this.$index)" class="form-group" name="new_credit_card">\r\n                    <div class="row">\r\n                        <div class="col-md-6">\r\n                            <label for="cardholder_name">Cardholder Name</label>\r\n                            <input id="cardholder_name" required="true" class="form-control" type="text" ng-model="checkoutPayment.currentOrderPayments[this.$index].CreditCard.CardholderName">\r\n                        </div>\r\n                        <div class="col-md-6">\r\n                            <label for="cardtype">Card Type</label>\r\n                            <select id="cardtype" required="true" class="form-control" ng-model="checkoutPayment.currentOrderPayments[this.$index].CreditCard.CardType" ng-options="type as type for type in checkoutPayment.CreditCardTypes"></select>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div class="col-md-6">\r\n                            <label for="cardnum">Account Number</label>\r\n                            <input id="cardnum" type="text" class="form-control" ng-model="checkoutPayment.currentOrderPayments[this.$index].CreditCard.PartialAccountNumber">\r\n                        </div>\r\n                        <div class="col-md-6">\r\n                            <div class="row">\r\n                                <div class="form-group col-xs-6">\r\n                                    <label for="creditCardExpirationMonth">Expiration Month</label>\r\n                                    <select id="creditCardExpirationMonth" class="form-control" ng-model="checkoutPayment.currentOrderPayments[this.$index].CreditCard.ExpirationMonth" ng-options="month as month for month in checkoutPayment.months" ng-change="checkoutPayment.expirationDateChange(this.$index)"></select>\r\n                                </div>\r\n                                <div class="form-group col-xs-6">\r\n                                    <label for="creditCardExpirationYear">Expiration Year</label>\r\n                                    <select id="creditCardExpirationYear" class="form-control" ng-model="checkoutPayment.currentOrderPayments[this.$index].CreditCard.ExpirationYear" ng-options="year as year for year in checkoutPayment.years" ng-change="checkoutPayment.expirationDateChange(this.$index)"></select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <button ng-disabled="new_credit_card.$invalid" type="submit" class="btn btn-success pull-left">Submit</button>\r\n                    <button ng-click="checkoutPayment.createNewCard[this.$index] = false; checkoutPayment.currentOrderPayments[this.$index].CreditCard = {}" type="button" class="btn btn-danger pull-right">Cancel</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <div ng-if="checkoutPayment.currentOrderPayments[this.$index].Type == \'SpendingAccount\'">\r\n            <label for="spending_account">Spending Account</label>\r\n            <select id="spending_account" ng-required="checkout.PaymentMethod === \'SpendingAccount\'" ng-change="checkoutPayment.setSpendingAccount(checkout.currentOrder, this.$index)" class="form-control" ng-model="checkoutPayment.currentOrderPayments[this.$index].SpendingAccountID" ng-options="spendingAccount.ID as spendingAccount.Name for spendingAccount in checkoutPayment.spendingAccounts"></select>\r\n        </div>\r\n        <hr />\r\n    </div>\r\n</div>'),$templateCache.put("checkout/shipping/templates/checkout.shipping.tpl.html",'<div class="panel panel-default">\r\n    <div class="panel-heading"><b>Shipping</b></div>\r\n    <div class="panel-body">\r\n        <div ng-if="!checkoutShipping.customShipping" class="form-group">\r\n            <div ng-if="checkout.shippingAddresses.length">\r\n                <label for="shipping_address">Shipping Address</label>\r\n                <select id="shipping_address" name="ShippingAddress" ng-change="checkoutShipping.SaveShippingAddress(checkout.currentOrder);" ng-model="checkout.currentOrder.ShippingAddressID" class="form-control" ng-options="address.ID as (address.AddressName || address.Street1) for address in checkout.shippingAddresses"></select>\r\n            </div>\r\n            <p id="address_paragraph" ng-if="checkout.currentOrder.ShippingAddressID">{{checkout.currentOrder.ShippingAddress | address: \'full\'}}</p>\r\n        </div>\r\n            <div class="form-group">\r\n                <button ng-click="checkoutShipping.customShipping = true;" type="button" class="btn btn-success"><i class="fa fa-plus-circle"></i> Use Custom</button>\r\n            </div>\r\n        <div ng-if="checkoutShipping.customShipping">\r\n            <form class="form-group" ng-submit="checkoutShipping.SaveCustomAddress(checkout.currentOrder)" name="order_shipping">\r\n                <ordercloud-address-form address="checkoutShipping.address" isbilling="checkoutShipping.isAlsoBilling"></ordercloud-address-form>\r\n                <div class="row">\r\n                    <div class="col-md-6">\r\n                        <label><input type="checkbox" ng-click="checkoutShipping.isAlsoBilling = false;" ng-model="checkoutShipping.saveAddress"> Save Address for Future Use</label>\r\n                    </div>\r\n                    <div ng-if="checkoutShipping.saveAddress" class="col-md-6">\r\n                        <label><input type="checkbox" ng-model="checkoutShipping.isAlsoBilling"> Allow as Billing Address</label>\r\n                    </div>\r\n                </div>\r\n                <button ng-disabled="order_shipping.address_form.$invalid" type="submit" class="btn btn-success pull-left">Submit</button>\r\n                <button ng-click="checkoutShipping.customShipping = false;" type="button" class="btn btn-danger pull-right">Cancel</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("facets/productFacets/templates/productFacets.tpl.html",'<article id="COMPONENT_ProductFacets" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <h3>Product Facet Management</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="ProductsSearchForm" class="form-inline" ng-submit="facetedProd.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search products..." ng-model="facetedProd.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':facetedProd.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="facetedProd.searchResults" ng-click="facetedProd.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':facetedProd.filtersApplied}" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n\t\t\t<button type="button" class="btn btn-default" ng-click="facetedProd.showFilters = !facetedProd.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n\t\t\t<button ng-if="facetedProd.filtersApplied" ng-click="facetedProd.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!facetedProd.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':facetedProd.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="facetedProd.sortSelection" ng-change="facetedProd.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Name">Name</option>\r\n                    </select>\r\n                    <div ng-if="facetedProd.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="facetedProd.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!facetedProd.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="facetedProd.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? facetedProd.list.Meta.ItemRange[0] : \'1\') + \' - \' +  facetedProd.list.Meta.ItemRange[1] + \' of \' + facetedProd.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive" servicename="Products" controlleras="products">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="facetedProd.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="facetedProd.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="facetedProd.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th>\r\n                    <a href="#" role="button" ng-click="facetedProd.updateSort(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="facetedProd.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="facetedProd.parameters.sortBy == \'!Name\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th class="text-center">Active</th>\r\n                <th></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ui-sref=".manage({productid:product.ID})" ng-repeat="product in facetedProd.list.Items">\r\n                <th scope="row">{{product.ID}}</th>\r\n                <td data-title="Name">{{product.Name}}</td>\r\n                <td class="text-center" data-title="Active">\r\n                    <i class="fa fa-circle" aria-hidden="true" ng-class="{\'active\':product.Active}"></i>\r\n                </td>\r\n                <td class="actions-cell">\r\n                    <button class="btn btn-default btn-sm">Manage Facets</button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && facetedProd.list.Meta.TotalPages > 1"">\r\n        <uib-pagination boundary-links="facetedProd.list.Meta.TotalPages > 5"\r\n                        max-size="5" total-items="facetedProd.list.Meta.TotalCount"\r\n                        items-per-page="facetedProd.list.Meta.PageSize"\r\n                        ng-model="facetedProd.list.Meta.Page"\r\n                        ng-change="facetedProd.pageChanged()"></uib-pagination>\r\n    </div>\r\n    <button type="button"\r\n            ng-if="application.$ocMedia(\'max-width:767px\')"\r\n            class="btn btn-default btn-block btn-lg"\r\n            ng-show="facetedProd.list.Meta.Page < facetedProd.list.Meta.TotalPages"\r\n            ng-click="facetedProd.loadMore()">Load More</button>\r\n    </div>\r\n</article>'),$templateCache.put("facets/productFacets/templates/productFacetsManage.tpl.html",'<div class="page-header">\r\n    <h3>\r\n        Configure Facets for {{facetedProdManage.product.Name}}\r\n        <button type="button" class="btn btn-default pull-right" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n    </h3>\r\n</div>\r\n<div class="well well-lg text-center" ng-if="!facetedProdManage.assignedCategories.length">\r\n    <b>The selected product does not have any category assignments.</b>\r\n</div>\r\n<div ng-repeat="cat in facetedProdManage.assignedCategories">\r\n    <h4 class="page-header">\r\n    {{cat.Name}}\r\n    </h4>\r\n    <div class="panel panel-default text-capitalize" ng-if="cat.xp.OC_Facets"  ng-repeat="(facetName, facet) in cat.xp.OC_Facets">\r\n        <div class="panel-heading">\r\n            <h4 class="panel-title">\r\n                {{facetName}}<span class="text-muted text-danger" ng-if="facet.isRequired">*</span>\r\n            </h4>\r\n        </div>\r\n        <form name="prodxpForm">\r\n            <div class="form-group">\r\n                <table class="table">\r\n                    <colgroup>\r\n                        <col class="action-column"/>\r\n                    </colgroup>\r\n                    <tbody>\r\n                    <tr ng-repeat="facetValue in facet.Values track by $index">\r\n                        <td>\r\n                            <input type="checkbox" ng-checked="facetedProdManage.setSelected(cat, facetName, facetValue)"\r\n                                   ng-click="facetedProdManage.toggleSelection(cat, facetName, facetValue)"/>\r\n                        </td>\r\n                        <td>{{facetValue}}</td>\r\n                    </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </form>\r\n        <div class="panel-body">\r\n            <form name="{{\'newValInput\' + $index}}" ng-submit="facetedProdManage.addValueExisting(cat, facetName)">\r\n                <div class="form-group">\r\n                    <div class="input-group">\r\n                        <input id="{{\'newFacetValue\' + $index}}" type="text" class="form-control" ng-model="facetedProdManage.newFacetValue[facetName]" placeholder="Add new value">\r\n                        <span class="input-group-btn">\r\n                            <button class="btn btn-success" type="submit"><i class="fa fa-plus-circle"></i></button>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n    <button class="btn btn-primary" type="submit" ng-disabled="facetedProdManage.requiredFacet(cat)" ng-click="facetedProdManage.saveSelections()" ng-if="cat.xp.OC_Facets">Save Configuration</button>\r\n    <div class="well well-lg text-center" ng-if="!cat.xp.OC_Facets">\r\n        <b>This category does not have any facets to configure. <a ui-sref="categoryFacets.manage({categoryid:cat.ID})">Go add some!</a></b>\r\n    </div>\r\n</div>'),$templateCache.put("facets/categoryFacets/templates/categoryFacets.modal.tpl.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Create Category Facet</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <form name=facetInput>\r\n        <div class="form-group">\r\n            <label for="facet">Facet</label>\r\n            <input id="facet" name="Facet" type="text" class="form-control" ng-model="catFacetModal.facet" ng-pattern="/^[ a-zA-Z0-9-_]+$/" pattern-err-type="noSpecialChars">\r\n        </div>\r\n        <div class="panel panel-default text-capitalize" ng-if="catFacetModal.facetValues.length">\r\n            <div class="panel-heading">Values</div>\r\n            <table class="table">\r\n                <colgroup>\r\n                    <col/>\r\n                    <col class="action-column"/>\r\n                </colgroup>\r\n                <tbody>\r\n                <tr ng-repeat="value in catFacetModal.facetValues track by $index">\r\n                    <td>{{value}}</td>\r\n                    <td>\r\n                        <button class="btn btn-default btn-block" ng-click="catFacetModal.removeValue($index)"><i class="fa fa-trash text-danger"></i></button>\r\n                    </td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </form>\r\n    <form name="newValInput" ng-submit="catFacetModal.addValue()">\r\n        <div class="form-group">\r\n            <div class="input-group">\r\n                <input id="newFacetValue" type="text" class="form-control" ng-model="catFacetModal.facetValue" placeholder="Add new value">\r\n                <span class="input-group-btn">\r\n                    <button class="btn btn-success" type="submit"><i class="fa fa-plus-circle"></i></button>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </form>\r\n        <div class="form-group">\r\n            <label><input type="checkbox" ng-model="catFacetModal.isRequired"> Required</label>\r\n        </div>\r\n    </div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-primary" type="button" ng-click="catFacetModal.save()" ng-disabled="catFacetModal.facet == null || catFacetModal.facetValues.length == 0">Save</button>\r\n    <button class="btn btn-default" type="button" ng-click="catFacetModal.cancel()">Cancel</button>\r\n</div>'),$templateCache.put("facets/categoryFacets/templates/categoryFacets.tpl.html",'<article id="COMPONENT_CategoryFacets" ui-view class="container-fluid">\r\n    <div class="page-header">\r\n        <h3>Category Facet Management</h3>\r\n    </div>\r\n\r\n    <!--====== SEARCH/FILTERS ======-->\r\n    <form name="CategoriesSearchForm" class="form-inline" ng-submit="facetedCat.search()">\r\n        <fieldset class="form-group">\r\n            <input type="search" placeholder="Search Categories..." ng-model="facetedCat.parameters.search" class="form-control">\r\n        </fieldset>\r\n        <fieldset class="form-group" ng-class="{\'text-center\':application.$ocMedia(\'max-width:767px\')}">\r\n\t\t<span ng-class="{\'btn-group\':facetedCat.searchResults}">\r\n\t\t\t<button type="submit" class="btn btn-primary">Search</button>\r\n\t\t\t<button ng-if="facetedCat.searchResults" ng-click="facetedCat.clearSearch()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n\t\t<span ng-class="{\'btn-group\':facetedCat.filtersApplied}" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n\t\t\t<button type="button" class="btn btn-default" ng-click="facetedCat.showFilters = !facetedCat.showFilters"><i class="fa fa-filter"></i> Filters</button>\r\n\t\t\t<button ng-if="facetedCat.filtersApplied" ng-click="facetedCat.clearFilters()" type="button" class="btn btn-default"><i class="fa fa-times"></i></button>\r\n\t\t</span>\r\n        </fieldset>\r\n    </form>\r\n    <div class="row" style="margin-top:15px;" uib-collapse="!facetedCat.showFilters">\r\n        <div class="col-md-6 col-lg-4">\r\n            <div class="form-group" ng-if="application.$ocMedia(\'max-width:767px\')">\r\n                <label>Sort By:</label>\r\n                <div ng-class="{\'input-group\':facetedCat.sortSelection}">\r\n                    <select placeholder="Sort" class="form-control" ng-model="facetedCat.sortSelection" ng-change="facetedCat.updateSort()">\r\n                        <option value="">None</option>\r\n                        <option value="ID">ID</option>\r\n                        <option value="Name">Name</option>\r\n                    </select>\r\n                    <div ng-if="facetedCat.sortSelection" class="input-group-btn">\r\n                        <button class="btn btn-default" ng-click="facetedCat.reverseSort()">\r\n                            <i class="fa fa-sort"></i>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--====== LIST ======-->\r\n    <div class="no-matches" ng-if="!facetedCat.list.Items.length">\r\n        <b>No matches found.</b>\r\n    </div>\r\n    <div ng-if="facetedCat.list.Items.length">\r\n        <b class="pull-right">{{(application.$ocMedia(\'min-width:768px\') ? facetedCat.list.Meta.ItemRange[0] : \'1\') + \' - \' +  facetedCat.list.Meta.ItemRange[1] + \' of \' + facetedCat.list.Meta.TotalCount + \' results\'}}</b>\r\n        <table class="table table-hover oc-table-responsive" servicename="Categories" controlleras="facetedCat">\r\n            <thead>\r\n            <tr>\r\n                <th scope="col">\r\n                    <a href="#" role="button" ng-click="facetedCat.updateSort(\'ID\')">\r\n                        ID\r\n                        <i class="fa fa-caret-down" ng-show="facetedCat.parameters.sortBy == \'ID\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="facetedCat.parameters.sortBy == \'!ID\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th>\r\n                    <a href="#" role="button" ng-click="facetedCat.updateSort(\'Name\')">\r\n                        Name\r\n                        <i class="fa fa-caret-down" ng-show="facetedCat.parameters.sortBy == \'Name\'"></i>\r\n                        <i class="fa fa-caret-up" ng-show="facetedCat.parameters.sortBy == \'!Name\'"></i>\r\n                    </a>\r\n                </th>\r\n                <th class="text-center">Active</th>\r\n                <th></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="category in facetedCat.list.Items track by $index" ui-sref=".manage({categoryid:category.ID})">\r\n                <th scope="row">{{category.ID}}</th>\r\n                <td data-title="Name">{{category.Name}}</td>\r\n                <td class="text-center" data-title="Active">\r\n                    <i class="fa fa-circle" aria-hidden="true" ng-class="{\'active\':category.Active}"></i>\r\n                </td>\r\n                <td class="actions-cell">\r\n                    <button class="btn btn-default btn-sm">Manage Facets</button>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="text-center" ng-if="application.$ocMedia(\'min-width:768px\') && facetedCat.list.Meta.TotalPages > 1"">\r\n        <uib-pagination boundary-links="facetedCat.list.Meta.TotalPages > 5"\r\n                        max-size="5" total-items="facetedCat.list.Meta.TotalCount"\r\n                        items-per-page="facetedCat.list.Meta.PageSize"\r\n                        ng-model="facetedCat.list.Meta.Page"\r\n                        ng-change="facetedCat.pageChanged()"></uib-pagination>\r\n    </div>\r\n    <button type="button"\r\n            ng-if="application.$ocMedia(\'max-width:767px\')"\r\n            class="btn btn-default btn-block btn-lg"\r\n            ng-show="facetedCat.list.Meta.Page < facetedCat.list.Meta.TotalPages"\r\n            ng-click="facetedCat.loadMore()">Load More</button>\r\n    </div>\r\n</article>'),$templateCache.put("facets/categoryFacets/templates/categoryFacetsManage.tpl.html",'<div class="page-header">\r\n    <h3>\r\n        Existing Facets for {{facetedCatManage.category.Name}}\r\n        <span class="pull-right">\r\n            <button type="button" class="btn btn-success" ng-click="facetedCatManage.createFacetModal()"><i class="fa fa-plus-circle"></i> Create Facet</button>\r\n            <button type="button" class="btn btn-default" ui-sref="^"><i class="fa fa-arrow-left"></i> Back</button>\r\n        </span>\r\n    </h3>\r\n</div>\r\n<div class="well well-lg text-center" ng-if="!facetedCatManage.category.xp.OC_Facets">\r\n    <b>The selected category does not have any existing facets.</b>\r\n</div>\r\n<div class="panel panel-default text-capitalize" ng-if="facetedCatManage.category.xp.OC_Facets"  ng-repeat="(facetName, facet) in facetedCatManage.list">\r\n    <div class="panel-heading">\r\n        <div class="panel-header-btn-group">\r\n              <button class="btn btn-default" ng-model="facetedCatManage.category.xp.OC_Facets[facetName].isRequired" ng-click="facetedCatManage.toggleFacetRequired(facetName)">\r\n                  <i class="fa" ng-class="{\'fa-check-square-o\': facetedCatManage.category.xp.OC_Facets[facetName].isRequired, \'fa-square-o text-muted\': !facetedCatManage.category.xp.OC_Facets[facetName].isRequired}"></i> Required\r\n              </button>\r\n              <button class="btn btn-default" ng-click="facetedCatManage.deleteFacet(facetName)"><i class="fa fa-trash text-danger"></i><span class="hidden-xs"> Delete Facet</span></button>\r\n        </div>\r\n         <h4 class="panel-title">\r\n             {{facetName}}\r\n         </h4>\r\n    </div>\r\n    <table class="table">\r\n        <colgroup>\r\n            <col/>\r\n            <col class="action-column"/>\r\n        </colgroup>\r\n        <tbody>\r\n        <tr ng-repeat="facetValue in facet.Values track by $index">\r\n            <td>{{facetValue}}</td>\r\n            <td><button class="btn btn-default btn-block" ng-click="facetedCatManage.removeValueExisting(facetName, $index)"><i class="fa fa-trash text-danger"></i></button></td>\r\n        </tr>\r\n        </tbody>\r\n    </table>\r\n    <div class="panel-body">\r\n        <form name="{{\'newValInput\' + $index}}" ng-submit="facetedCatManage.addValueExisting(facetName, $index)">\r\n            <div class="form-group">\r\n                <div class="input-group">\r\n                    <input id="{{\'newFacetValue\' + $index}}" type="text" class="form-control" ng-model="facetedCatManage[facetName].newFacetValue" placeholder="Add new value">\r\n                    <span class="input-group-btn">\r\n                        <button class="btn btn-success" type="submit"><i class="fa fa-plus-circle"></i></button>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>\r\n'),$templateCache.put("catalog/product/templates/spec-forms/default-spec-form.tpl.html",'<div class="col-xs-12">\r\n    <div class="row" ng-repeat="spec in product.item.Specs | orderBy:\'ListOrder\' track by $index">\r\n        <label>{{spec.Name || spec.ID}}</label>\r\n        <input ng-if="spec.Options.length === 0" ng-required="spec.Required" class="form-control" ng-model="spec.Value" type="text">\r\n        <!--<select ng-if="spec.Options.length > 0" ng-required="spec.Required" class="form-control" ng-model="spec.OptionID" ng-options="option.ID as option.Value for option in spec.Options">-->\r\n            <!--<option ng-if="!spec.Required" value=""> </option>-->\r\n        <!--</select>-->\r\n        <spec-select-field ng-if="spec.Options.length > 0" spec="spec"></spec-select-field>\r\n    </div>\r\n</div>')}])}()}(),function(){"use strict";angular.module("orderCloud").constant("appname","XXXXX").constant("scope","BuyerReader").constant("clientid","XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXX").constant("buyerid","XXXXX").constant("environment","prod").constant("anonymous",!1).constant("base",{left:!0,right:!1,top:!0,bottom:!1}).constant("authurl","https://auth.ordercloud.io/oauth/token").constant("apiurl","https://api.ordercloud.io")}(),function(){"use strict";function ProductFacetsConfig($stateProvider){$stateProvider.state("productFacets",{parent:"base",templateUrl:"facets/productFacets/templates/productFacets.tpl.html",controller:"ProductFacetsCtrl",controllerAs:"facetedProd",url:"/productfacets?from&to&search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Product Facets"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],ProductList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.Products.List(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters)}]}}).state("productFacets.manage",{url:"/:productid/manage",templateUrl:"facets/productFacets/templates/productFacetsManage.tpl.html",controller:"ProductFacetsManageCtrl",controllerAs:"facetedProdManage",data:{componentName:"Product Facets"},resolve:{Product:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Products.Get($stateParams.productid)}],AssignedCategories:["$q","$stateParams","OrderCloud",function($q,$stateParams,OrderCloud){var dfd=$q.defer(),assignedCategories=[];return OrderCloud.Categories.ListProductAssignments(null,$stateParams.productid).then(function(categories){angular.forEach(categories.Items,function(cat){assignedCategories.push(OrderCloud.Categories.Get(cat.CategoryID))}),$q.all(assignedCategories).then(function(results){dfd.resolve(results)})}),dfd.promise}]}})}function ProductFacetsController($state,$ocMedia,OrderCloud,OrderCloudParameters,ProductList,Parameters){var vm=this;vm.list=ProductList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,
vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.Products.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function FacetedProductManageController($state,toastr,OrderCloud,Product,AssignedCategories){var vm=this;vm.assignedCategories=AssignedCategories,vm.product=Product,null==vm.product.xp&&(vm.product.xp={OC_Facets:{}}),vm.product.xp&&!vm.product.xp.OC_Facets&&(vm.product.xp.OC_Facets={}),vm.setSelected=function(cat,facetName,facetValue){var selected=!1;return vm.product.xp.OC_Facets[cat.ID]&&vm.product.xp.OC_Facets[cat.ID][facetName]&&(selected=vm.product.xp.OC_Facets[cat.ID][facetName].indexOf(facetValue)>-1),selected},vm.toggleSelection=function(cat,facetName,facetValue){var selected=vm.setSelected(cat,facetName,facetValue);selected=!selected,selected&&vm.product.xp.OC_Facets[cat.ID]?vm.product.xp.OC_Facets[cat.ID][facetName]?vm.product.xp.OC_Facets[cat.ID][facetName].push(facetValue):vm.product.xp.OC_Facets[cat.ID][facetName]||(vm.product.xp.OC_Facets[cat.ID][facetName]=[],vm.product.xp.OC_Facets[cat.ID][facetName].push(facetValue)):selected&&!vm.product.xp.OC_Facets[cat.ID]?(vm.product.xp.OC_Facets[cat.ID]={},vm.product.xp.OC_Facets[cat.ID][facetName]=[],vm.product.xp.OC_Facets[cat.ID][facetName].push(facetValue)):vm.product.xp.OC_Facets[cat.ID][facetName].splice(vm.product.xp.OC_Facets[cat.ID][facetName].indexOf(facetValue),1)},vm.requiredFacet=function(cat){var disabled=!1;return cat.xp&&cat.xp.OC_Facets&&angular.forEach(cat.xp.OC_Facets,function(facetValues,facet){facetValues.isRequired&&vm.product.xp.OC_Facets[cat.ID]&&vm.product.xp.OC_Facets[cat.ID][facet]&&0==vm.product.xp.OC_Facets[cat.ID][facet].length&&(disabled=!0)}),disabled},vm.saveSelections=function(){OrderCloud.Products.Update(vm.product.ID,vm.product).then(function(){toastr.success("Your product facets have been saved successfully"),$state.go($state.current,{},{reload:!0})})},vm.addValueExisting=function(cat,facetName){cat.xp.OC_Facets[facetName].Values.push(vm.newFacetValue[facetName].toLowerCase()),OrderCloud.Categories.Update(cat.ID,cat).then(function(){vm.product.xp.OC_Facets||(vm.product.xp.OC_Facets={}),vm.product.xp.OC_Facets[cat.ID]||(vm.product.xp.OC_Facets[cat.ID]={}),vm.product.xp.OC_Facets[cat.ID][facetName]||(vm.product.xp.OC_Facets[cat.ID][facetName]=[]),vm.product.xp.OC_Facets[cat.ID][facetName].push(vm.newFacetValue[facetName].toLowerCase()),OrderCloud.Products.Update(vm.product.ID,vm.product).then(function(){vm.newFacetValue[facetName]=null,$state.go($state.current,{},{reload:!0})})})}}ProductFacetsConfig.$inject=["$stateProvider"],ProductFacetsController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","ProductList","Parameters"],FacetedProductManageController.$inject=["$state","toastr","OrderCloud","Product","AssignedCategories"],angular.module("orderCloud").config(ProductFacetsConfig).controller("ProductFacetsCtrl",ProductFacetsController).controller("ProductFacetsManageCtrl",FacetedProductManageController)}(),function(){"use strict";function CategoryFacetsConfig($stateProvider){$stateProvider.state("categoryFacets",{parent:"base",templateUrl:"facets/categoryFacets/templates/categoryFacets.tpl.html",controller:"CategoryFacetsCtrl",controllerAs:"facetedCat",url:"/categoryfacets?from&to&search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Category Facets"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],CategoryList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.Categories.List(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters)}]}}).state("categoryFacets.manage",{url:"/:categoryid/manage",templateUrl:"facets/categoryFacets/templates/categoryFacetsManage.tpl.html",controller:"CategoryFacetsManageCtrl",controllerAs:"facetedCatManage",data:{componentName:"Category Facets"},resolve:{Category:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Categories.Get($stateParams.categoryid)}]}})}function CategoryFacetsController($state,$ocMedia,OrderCloud,OrderCloudParameters,CategoryList,Parameters){var vm=this;vm.list=CategoryList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.Products.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function FacetedCategoryManageController($state,$uibModal,toastr,Underscore,OrderCloud,Category){var vm=this;Category.xp&&Category.xp.OC_Facets?vm.list=Category.xp.OC_Facets:vm.list=null,vm.category=Category,vm.facetValues=[],vm.isRequired=!1,vm.createFacetModal=function(){var modalInstance=$uibModal.open({templateUrl:"facets/categoryFacets/templates/categoryFacets.modal.tpl.html",controller:"CategoryFacetsModalCtrl",controllerAs:"catFacetModal"});modalInstance.result.then(function(facetToSave){null==vm.category.xp&&(vm.category.xp={OC_Facets:{}}),vm.category.xp&&!vm.category.xp.OC_Facets&&(vm.category.xp.OC_Facets={}),vm.category.xp.OC_Facets[facetToSave.facet.toLowerCase()]={},vm.category.xp.OC_Facets[facetToSave.facet.toLowerCase()].Values=facetToSave.facetValues,vm.category.xp.OC_Facets[facetToSave.facet.toLowerCase()].isRequired=facetToSave.isRequired,OrderCloud.Categories.Update(vm.category.ID,vm.category).then(function(){toastr.success("Your category facet has been saved successfully"),$state.reload()})})},vm.addValueExisting=function(facetName,index){vm.category.xp.OC_Facets[facetName].Values.push(vm[facetName].newFacetValue.toLowerCase()),OrderCloud.Categories.Update(vm.category.ID,vm.category).then(function(){vm[facetName].newFacetValue=null,$("#newFacetValue"+index).focus()})},vm.removeValueExisting=function(facetName,facetValueIndex){vm.category.xp.OC_Facets[facetName].Values.splice(facetValueIndex,1),OrderCloud.Categories.Update(vm.category.ID,vm.category)},vm.toggleFacetRequired=function(facetName){vm.category.xp.OC_Facets[facetName].isRequired=!vm.category.xp.OC_Facets[facetName].isRequired,OrderCloud.Categories.Update(vm.category.ID,vm.category)},vm.deleteFacet=function(facetName){confirm("Are you sure you want to delete this facet?")&&(1===Object.keys(vm.category.xp.OC_Facets).length?(delete vm.category.xp.OC_Facets,OrderCloud.Categories.Update(vm.category.ID,vm.category).then(function(){var keyName="xp.OC_Facets."+vm.category.ID+"."+facetName,filterObj={};filterObj[keyName]="*",OrderCloud.Products.List(null,1,100,null,null,filterObj).then(function(matchingProds){console.log(matchingProds),angular.forEach(Underscore.uniq(matchingProds.Items,!0,"ID"),function(prod){delete prod.xp.OC_Facets[vm.category.ID],OrderCloud.Products.Update(prod.ID,prod)})})})):(delete vm.category.xp.OC_Facets[facetName],OrderCloud.Categories.Update(vm.category.ID,vm.category).then(function(){var keyName="xp.OC_Facets."+vm.category.ID+"."+facetName,filterObj={};filterObj[keyName]="*",OrderCloud.Products.List(null,1,100,null,null,filterObj).then(function(matchingProds){angular.forEach(Underscore.uniq(matchingProds.Items,!0,"ID"),function(prod){delete prod.xp.OC_Facets[vm.category.ID][facetName],OrderCloud.Products.Update(prod.ID,prod)})})})))}}function CategoryFacetsModalController($uibModalInstance){var vm=this;vm.facetValues=[],vm.isRequired=!1,vm.facetValue=null,vm.facet=null,vm.addValue=function(){null!=vm.facetValue&&(vm.facetValues.push(vm.facetValue),vm.facetValue=null,$("#facetValue").focus())},vm.removeValue=function(index){vm.facetValues.splice(index,1)},vm.save=function(){var facetToSave={facet:vm.facet,facetValues:vm.facetValues,isRequired:vm.isRequired};$uibModalInstance.close(facetToSave)},vm.cancel=function(){$uibModalInstance.dismiss("cancel")}}CategoryFacetsConfig.$inject=["$stateProvider"],CategoryFacetsController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","CategoryList","Parameters"],FacetedCategoryManageController.$inject=["$state","$uibModal","toastr","Underscore","OrderCloud","Category"],CategoryFacetsModalController.$inject=["$uibModalInstance"],angular.module("orderCloud").config(CategoryFacetsConfig).controller("CategoryFacetsCtrl",CategoryFacetsController).controller("CategoryFacetsManageCtrl",FacetedCategoryManageController).controller("CategoryFacetsModalCtrl",CategoryFacetsModalController)}(),function(){"use strict"}(),function(){"use strict";function checkoutShippingConfig($stateProvider){$stateProvider.state("checkout.shipping",{url:"/shipping",templateUrl:"checkout/shipping/templates/checkout.shipping.tpl.html",controller:"CheckoutShippingCtrl",controllerAs:"checkoutShipping"})}function CheckoutShippingController($state,$rootScope,OrderCloud,OrderShippingAddress){function saveShipAddress(order){order&&order.ShippingAddressID&&(OrderShippingAddress.Set(order.ShippingAddressID),OrderCloud.Addresses.Get(order.ShippingAddressID).then(function(address){OrderCloud.Orders.Patch(order.ID,{ShippingAddressID:address.ID}).then(function(){$rootScope.$broadcast("OrderShippingAddressChanged",order,address)})}))}function saveCustomAddress(order){vm.saveAddress?OrderCloud.Addresses.Create(vm.address).then(function(address){OrderCloud.Me.Get().then(function(me){OrderCloud.Addresses.SaveAssignment({AddressID:address.ID,UserID:me.ID,IsBilling:vm.isAlsoBilling,IsShipping:!0}).then(function(){OrderCloud.Addresses.Get(address.ID).then(function(address){OrderCloud.Orders.Patch(order.ID,{ShippingAddressID:address.ID}).then(function(){$state.reload()})})})})}):OrderCloud.Orders.Patch(order.ID,{ShippingAddressID:vm.address.ID}).then(function(){$state.reload()})}var vm=this;vm.saveAddress=null,vm.isAlsoBilling=null,vm.address={},vm.SaveShippingAddress=saveShipAddress,vm.SaveCustomAddress=saveCustomAddress,vm.customShipping=!1,vm.shippingAddress=null}function OrderShippingAddressFactory($q,$localForage,OrderCloud,appname){function _get(){var dfd=$q.defer();return $localForage.getItem(StorageName).then(function(shipID){shipID?OrderCloud.Addresses.Get(shipID).then(function(address){address.Items?dfd.reject():dfd.resolve(address)})["catch"](function(){_clear(),dfd.reject()}):dfd.reject()})["catch"](function(){dfd.reject()}),dfd.promise}function _set(ShipAddressID){$localForage.setItem(StorageName,ShipAddressID)}function _clear(){$localForage.removeItem(StorageName)}var StorageName=appname+".ShippingAddressID";return{Get:_get,Set:_set,Clear:_clear}}checkoutShippingConfig.$inject=["$stateProvider"],CheckoutShippingController.$inject=["$state","$rootScope","OrderCloud","OrderShippingAddress"],OrderShippingAddressFactory.$inject=["$q","$localForage","OrderCloud","appname"],angular.module("orderCloud").config(checkoutShippingConfig).controller("CheckoutShippingCtrl",CheckoutShippingController).factory("OrderShippingAddress",OrderShippingAddressFactory)}(),function(){"use strict";function checkoutPaymentConfig($stateProvider){$stateProvider.state("checkout.payment",{url:"/payment",templateUrl:"checkout/payment/templates/checkout.payment.tpl.html",controller:"CheckoutPaymentCtrl",controllerAs:"checkoutPayment",resolve:{AvailableCreditCards:["OrderCloud",function(OrderCloud){return OrderCloud.Me.ListCreditCards()}],AvailableSpendingAccounts:["OrderCloud",function(OrderCloud){return OrderCloud.SpendingAccounts.List(null,null,null,null,null,{RedemptionCode:"!*"})}]}})}function CheckoutPaymentController($state,Underscore,toastr,OrderCloud,AvailableCreditCards,AvailableSpendingAccounts,OrderPayments,allowMultiplePayments,creditCardExpirationDate){function CreatePayment(order){OrderCloud.Payments.Create(order.ID,{Type:vm.currentOrderPayments[0].Type}).then(function(){$state.reload()})}function RemovePayment(order,index){OrderCloud.Payments.Delete(order.ID,vm.currentOrderPayments[index].ID).then(function(){$state.reload()})}function SetPaymentMethod(order,index){vm.currentOrderPayments[0].Amount?OrderCloud.Payments.Delete(order.ID,vm.currentOrderPayments[index].ID).then(function(){OrderCloud.Payments.Create(order.ID,{Type:vm.currentOrderPayments[index].Type}).then(function(){$state.reload()})}):OrderCloud.Payments.Create(order.ID,{Type:vm.currentOrderPayments[index].Type}).then(function(){$state.reload()})}function SaveCreditCard(order,card,index){card&&(vm.Token="cc",16===card.PartialAccountNumber.length?(card.PartialAccountNumber=card.PartialAccountNumber.substr(card.PartialAccountNumber.length-4),OrderCloud.CreditCards.Create(card).then(function(CreditCard){OrderCloud.Me.Get().then(function(me){OrderCloud.CreditCards.SaveAssignment({CreditCardID:CreditCard.ID,UserID:me.ID}).then(function(){OrderCloud.Payments.Patch(order.ID,vm.currentOrderPayments[index].ID,{CreditCardID:CreditCard.ID}).then(function(){$state.reload()})})})})):toastr.error("Invalid credit card number.","Error:"))}function SetCreditCard(order,index){"CreditCard"===vm.currentOrderPayments[index].Type&&OrderCloud.Payments.Patch(order.ID,vm.currentOrderPayments[index].ID,{CreditCardID:vm.currentOrderPayments[index].CreditCardID}).then(function(){$state.reload()})}function SetSpendingAccount(order,index){vm.currentOrderPayments[index].SpendingAccountID&&"SpendingAccount"===vm.currentOrderPayments[index].Type&&OrderCloud.Payments.Patch(order.ID,vm.currentOrderPayments[index].ID,{SpendingAccountID:vm.currentOrderPayments[index].SpendingAccountID}).then(function(){$state.reload()})["catch"](function(err){OrderCloud.Payments.Delete(order.ID,vm.currentOrderPayments[index].ID).then(function(){$state.reload(),toastr.error(err.data.Errors[0].Message+" Please choose another payment method, or another spending account.","Error:")})})}function CanAddPayment(order,payments){var paymentTotal=0;return angular.forEach(payments,function(payment){paymentTotal+=payment.Amount}),paymentTotal<order.Total&&Underscore.pluck(vm.currentOrderPayments,"")}function PatchPaymentAmount(order,index){vm.currentOrderPayments[index].Amount&&vm.currentOrderPayments[index].Amount<=vm.currentOrderPayments[index].MaxAmount&&OrderCloud.Payments.Patch(order.ID,vm.currentOrderPayments[index].ID,{Amount:vm.currentOrderPayments[index].Amount}).then(function(){SetAmountMax(order)})}function SetAmountMax(order){angular.forEach(vm.currentOrderPayments,function(payment){var maxAmount=order.Total-Underscore.reduce(Underscore.pluck(vm.currentOrderPayments,"Amount"),function(a,b){return a+b});payment.MaxAmount=(payment.Amount+maxAmount).toString()})}function SavePONumber(index,order){vm.currentOrderPayments[index].xp?vm.currentOrderPayments[index].xp:vm.currentOrderPayments[index].xp={},"PurchaseOrder"===vm.currentOrderPayments[index].Type&&OrderCloud.Payments.Update(order.ID,vm.currentOrderPayments[index].ID,vm.currentOrderPayments[index])}function ExpirationDateChange(index){vm.currentOrderPayments[index].CreditCard&&vm.currentOrderPayments[index].CreditCard.ExpirationMonth&&vm.currentOrderPayments[index].CreditCard.ExpirationYear&&(vm.currentOrderPayments[index].CreditCard.ExpirationDate=new Date(vm.currentOrderPayments[index].CreditCard.ExpirationYear,vm.currentOrderPayments[index].CreditCard.ExpirationMonth,0))}var vm=this;vm.allowMultiplePayments=allowMultiplePayments,vm.currentOrderPayments=OrderPayments.Items,vm.paymentMethods=[{Display:"Purchase Order",Value:"PurchaseOrder"},{Display:"Credit Card",Value:"CreditCard"},{Display:"Spending Account",Value:"SpendingAccount"}],vm.CreditCardTypes=["MasterCard","American Express","Discover","Visa"],vm.today=new Date,vm.creditCards=AvailableCreditCards.Items,vm.spendingAccounts=AvailableSpendingAccounts.Items,vm.months=["01","02","03","04","05","06","07","08","09","10","11","12"],vm.years=Underscore.range(vm.today.getFullYear(),vm.today.getFullYear()+20,1),vm.expireMonth=creditCardExpirationDate.expirationMonth,vm.expireYear=creditCardExpirationDate.expirationYear,vm.setCreditCard=SetCreditCard,vm.saveCreditCard=SaveCreditCard,vm.setSpendingAccount=SetSpendingAccount,vm.setPaymentMethod=SetPaymentMethod,vm.createPayment=CreatePayment,vm.removePayment=RemovePayment,vm.canAddPayment=CanAddPayment,vm.patchPaymentAmount=PatchPaymentAmount,vm.setAmountMax=SetAmountMax,vm.savePONumber=SavePONumber,vm.expirationDateChange=ExpirationDateChange}function OCCheckoutPayment(){return{restrict:"E",templateUrl:"checkout/payment/templates/payment.tpl.html"}}checkoutPaymentConfig.$inject=["$stateProvider"],CheckoutPaymentController.$inject=["$state","Underscore","toastr","OrderCloud","AvailableCreditCards","AvailableSpendingAccounts","OrderPayments","allowMultiplePayments","creditCardExpirationDate"],angular.module("orderCloud").config(checkoutPaymentConfig).controller("CheckoutPaymentCtrl",CheckoutPaymentController).directive("ocCheckoutPayment",OCCheckoutPayment).constant("allowMultiplePayments",!0)}(),function(){"use strict";function checkoutBillingConfig($stateProvider){$stateProvider.state("checkout.billing",{url:"/billing",templateUrl:"checkout/billing/templates/checkout.billing.tpl.html",controller:"CheckoutBillingCtrl",controllerAs:"checkoutBilling",resolve:{BillingAddresses:["$q","Underscore","OrderCloud",function($q,Underscore,OrderCloud){var dfd=$q.defer();return OrderCloud.Me.ListAddresses().then(function(data){dfd.resolve(Underscore.where(data.Items,{Billing:!0}))}),dfd.promise}]}})}function CheckoutBillingController($state,$exceptionHandler,OrderCloud,BillingAddresses){function SaveBillingAddress(order){order&&order.BillingAddressID&&OrderCloud.Orders.Patch(order.ID,{BillingAddressID:order.BillingAddressID}).then(function(){$state.reload()})["catch"](function(){$exceptionHandler(ex)})}function SaveCustomAddress(order){vm.saveAddress?OrderCloud.Addresses.Create(vm.address).then(function(address){OrderCloud.Me.Get().then(function(me){OrderCloud.Addresses.SaveAssignment({AddressID:address.ID,UserID:me.ID,IsBilling:!0,IsShipping:!1}).then(function(){OrderCloud.Orders.Patch(order.ID,{BillingAddressID:vm.address.ID}).then(function(){$state.reload()})["catch"](function(ex){$exceptionHandler(ex)})})["catch"](function(ex){$exceptionHandler(ex)})})["catch"](function(ex){$exceptionHandler(ex)})})["catch"](function(ex){$exceptionHandler(ex)}):OrderCloud.Orders.Patch(order.ID,{BillingAddressID:vm.address}).then(function(){$state.reload()})["catch"](function(ex){$exceptionHandler(ex)})}var vm=this;vm.billingAddresses=BillingAddresses,vm.SaveBillingAddress=SaveBillingAddress,vm.SaveCustomAddress=SaveCustomAddress}checkoutBillingConfig.$inject=["$stateProvider"],CheckoutBillingController.$inject=["$state","$exceptionHandler","OrderCloud","BillingAddresses"],angular.module("orderCloud").config(checkoutBillingConfig).controller("CheckoutBillingCtrl",CheckoutBillingController)}(),function(){"use strict";function ProductConfig($stateProvider){$stateProvider.state("catalog.product",{url:"/product/:productid",templateUrl:"catalog/product/templates/product.tpl.html",views:{"":{templateUrl:"catalog/product/templates/product.tpl.html",controller:"ProductCtrl",controllerAs:"product"}},resolve:{Product:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Me.GetProduct($stateParams.productid)}],SpecList:["$q","$stateParams","OrderCloud",function($q,$stateParams,OrderCloud){var specQueue=[],dfd=$q.defer();return OrderCloud.Specs.ListProductAssignments(null,$stateParams.productid).then(function(data){angular.forEach(data.Items,function(assignment){specQueue.push(OrderCloud.Specs.Get(assignment.SpecID))}),$q.all(specQueue).then(function(result){var specOptionsQueue=[];angular.forEach(result,function(spec){spec.Value=spec.DefaultValue,spec.OptionID=spec.DefaultOptionID,spec.Options=[],spec.OptionCount&&specOptionsQueue.push(function(){var d=$q.defer();return OrderCloud.Specs.ListOptions(spec.ID,null,1,spec.OptionCount).then(function(optionData){spec.Options=optionData.Items,d.resolve()}),d.promise}())}),$q.all(specOptionsQueue).then(function(){dfd.resolve(result)})})})["catch"](function(response){}),dfd.promise}]}}).state("catalog.lineitem",{url:"/lineitem/:lineitemid/edit/:specformid",views:{"":{templateUrl:"catalog/product/templates/lineitem.edit.tpl.html",controller:"LineItemEditCtrl",controllerAs:"product"},"view@catalog.lineitem":{templateUrl:function($stateParams){var spec_form="default-spec-form";return $stateParams.specformid&&(spec_form=$stateParams.specformid),"catalog/product/templates/spec-forms/"+spec_form+".tpl.html"},controller:"LineItemEditCtrl",controllerAs:"product"}},resolve:{LineItem:["$stateParams","OrderCloud","Order",function($stateParams,OrderCloud,Order){return OrderCloud.LineItems.Get(Order.ID,$stateParams.lineitemid)}],LI_Product:["LineItem","OrderCloud",function(LineItem,OrderCloud){return OrderCloud.Me.GetProduct(LineItem.ProductID)}],LI_SpecList:["$q","OrderCloud","LineItem",function($q,OrderCloud,LineItem){var queue=[],dfd=$q.defer();return OrderCloud.Specs.ListProductAssignments(null,LineItem.ProductID).then(function(data){angular.forEach(data.Items,function(assignment){queue.push(OrderCloud.Specs.Get(assignment.SpecID))}),$q.all(queue).then(function(result){dfd.resolve(result)})})["catch"](function(response){}),dfd.promise}]}})}function OCSpecForm(){return{restrict:"E",scope:{product:"="},templateUrl:"catalog/product/templates/specform.tpl.html",replace:!0}}function SpecSelectionDirective(OrderCloud){return{scope:{spec:"="},templateUrl:"catalog/product/templates/spec.selectionfield.tpl.html",link:function(scope){scope.showField=!1,scope.$watch(function(){return scope.spec.OptionID},function(newVal,oldVal){newVal&&OrderCloud.Specs.GetOption(scope.spec.ID,scope.spec.OptionID).then(function(specOption){specOption.IsOpenText?(scope.showField=!0,scope.spec.Value=null):scope.showField=!1})})}}}function OCAddToOrder(){return{scope:{product:"=",formname:"@"},templateUrl:"catalog/product/templates/addToOrder.tpl.html",controller:"OrderInputCtrl",controllerAs:"orderInput",replace:!0}}function ProductController(Product,SpecList,Order,AddToOrder){var vm=this;vm.item=Product,vm.order=Order,vm.item.Specs=SpecList,vm.addToCart=function(product){AddToOrder.Add(product)}}function LineItemEditController($state,Underscore,OrderCloud,LineItemHelpers,LineItem,LI_Product,LI_SpecList){function findDifferences(){var patchObject={};return vm.item.Quantity!==originalQuantity&&(patchObject.Quantity=vm.item.Quantity),angular.forEach(vm.item.Specs,function(spec){var origSpec=Underscore.where(originalSpecs,{SpecID:spec.ID})[0];origSpec&&origSpec.Value===spec.Value&&origSpec.OptionID===spec.OptionID||(patchObject.Specs||(patchObject.Specs=[]),patchObject.Specs.push(spec))}),patchObject}var vm=this;vm.item=LI_Product;var originalQuantity=LineItem.Quantity;vm.item.Quantity=LineItem.Quantity;var originalSpecs=angular.copy(LineItem.Specs);vm.item.Specs=LI_SpecList;var spec_value=null;angular.forEach(vm.item.Specs,function(spec){spec_value=Underscore.where(LineItem.Specs,{SpecID:spec.ID})[0],spec_value&&(spec.Value=spec_value.Value,spec.OptionID=spec_value.OptionID)}),vm.UpdateLineItem=function(){var patchObj=findDifferences();patchObj.Quantity||patchObj.Specs?(patchObj.Specs&&(patchObj.Specs=LineItemHelpers.SpecConvert(patchObj.Specs)),OrderCloud.LineItems.Patch(LineItem.OrderID,LineItem.ID,patchObj).then(function(){$state.go("cart")})):$state.go("cart")}}ProductConfig.$inject=["$stateProvider"],SpecSelectionDirective.$inject=["OrderCloud"],ProductController.$inject=["Product","SpecList","Order","AddToOrder"],LineItemEditController.$inject=["$state","Underscore","OrderCloud","LineItemHelpers","LineItem","LI_Product","LI_SpecList"],angular.module("orderCloud").config(ProductConfig).directive("ocSpecForm",OCSpecForm).directive("specSelectField",SpecSelectionDirective).directive("ocAddToOrder",OCAddToOrder).controller("ProductCtrl",ProductController).controller("LineItemEditCtrl",LineItemEditController)}(),function(){"use strict";function OrderCloudOrderInputDirective(){return{restrict:"E",scope:{product:"=",validationform:"="},templateUrl:"catalog/product/templates/order-input.tpl.html",controller:"OrderInputCtrl",controllerAs:"orderInput"}}function OrderInputController($state,$scope,$rootScope,Underscore,OrderCloud,LineItemHelpers,CurrentOrder){function AddToCart(){CurrentOrder.Get().then(function(order){CurrentOrder.GetLineItems(order.ID).then(function(lineItems){order.LineItems=lineItems,AddLineItem(order,$scope.product)})})["catch"](function(){OrderCloud.Orders.Create({}).then(function(order){CurrentOrder.Set(order.ID),AddLineItem(order,$scope.product)})})}function AddLineItem(order,product){var li={ProductID:product.ID,Quantity:vm.Quantity,Specs:LineItemHelpers.SpecConvert(product.Specs)};li.ShippingAddressID=isSingleShipping(order)?getSingleShippingAddressID(order):null,OrderCloud.LineItems.Create(order.ID,li).then(function(lineItem){$rootScope.$broadcast("LineItemAddedToCart",order.ID,lineItem)})}function isSingleShipping(order){return 1==Underscore.pluck(order.LineItems,"ShippingAddressID").length}function getSingleShippingAddressID(order){return order.LineItems[0].ShippingAddressID}var vm=this;vm.currentState=$state.current.name,vm.price=null,vm.addToCart=AddToCart,$scope.$on("$stateChangeSuccess",function(event,toState){vm.currentState=toState.name}),$scope.$watch(function(){return vm.Quantity},function(newValue,oldValue){if(newValue&&newValue!==oldValue){var max_quantity=0;angular.forEach($scope.product.StandardPriceSchedule.PriceBreaks,function(PriceBreaks){return vm.Quantity>=PriceBreaks.Quantity&&PriceBreaks.Quantity>max_quantity?(max_quantity=PriceBreaks.Quantity,void(vm.price=PriceBreaks.Price*vm.Quantity)):null})}else newValue||(vm.price=null)})}OrderInputController.$inject=["$state","$scope","$rootScope","Underscore","OrderCloud","LineItemHelpers","CurrentOrder"],angular.module("orderCloud").controller("OrderInputCtrl",OrderInputController).directive("ordercloudOrderInput",OrderCloudOrderInputDirective)}(),function(){"use strict";function ordercloudProductQuickViewDirective(){return{scope:{product:"="},restrict:"E",templateUrl:"catalog/productQuickView/templates/catalogSearch.quickview.tpl.html",controller:"ProductQuickViewCtrl",controllerAs:"productQuickView"}}function ProductQuickViewController($uibModal){var vm=this;vm.open=function(product){$uibModal.open({animation:!0,size:"lg",templateUrl:"catalog/productQuickView/templates/catalogSearch.quickviewModal.tpl.html",controller:"ProductQuickViewModalCtrl",controllerAs:"productQuickViewModal",resolve:{SelectedProduct:["OrderCloud",function(OrderCloud){return OrderCloud.Me.GetProduct(product.ID)}],SpecList:["$q","OrderCloud",function($q,OrderCloud){var queue=[],dfd=$q.defer();return OrderCloud.Specs.ListProductAssignments(null,product.ID).then(function(data){angular.forEach(data.Items,function(assignment){queue.push(OrderCloud.Specs.Get(assignment.SpecID))}),$q.all(queue).then(function(result){var specOptionsQueue=[];angular.forEach(result,function(spec){spec.Value=spec.DefaultValue,spec.OptionID=spec.DefaultOptionID,spec.Options=[],spec.OptionCount&&specOptionsQueue.push(function(){var d=$q.defer();return OrderCloud.Specs.ListOptions(spec.ID,null,1,spec.OptionCount).then(function(optionData){spec.Options=optionData.Items,d.resolve()}),d.promise}())}),$q.all(specOptionsQueue).then(function(){dfd.resolve(result)})})})["catch"](function(response){}),dfd.promise}]}})}}function ProductQuickViewModalController($uibModalInstance,SelectedProduct,SpecList,AddToOrder){var vm=this;vm.selectedProduct=SelectedProduct,vm.selectedProduct.item={Specs:SpecList},vm.cancel=function(){$uibModalInstance.dismiss("cancel")},vm.addToCart=function(product){product.Quantity=product.item.Quantity,product.Specs=product.item.Specs,AddToOrder.Add(product).then(function(){$uibModalInstance.close()})}}ProductQuickViewController.$inject=["$uibModal"],ProductQuickViewModalController.$inject=["$uibModalInstance","SelectedProduct","SpecList","AddToOrder"],angular.module("orderCloud").directive("ordercloudProductQuickView",ordercloudProductQuickViewDirective).controller("ProductQuickViewCtrl",ProductQuickViewController).controller("ProductQuickViewModalCtrl",ProductQuickViewModalController)}(),function(){"use strict";function ProductListConfig($stateProvider){$stateProvider.state("catalog.products",{url:"/products",templateUrl:"catalog/products/templates/products.tpl.html",controller:"ProductListCtrl",controllerAs:"products"})}function ProductListController($q,OrderCloud){function Search(searchTerm){var dfd=$q.defer();return OrderCloud.Me.ListProducts(searchTerm).then(function(data){dfd.resolve(data)}),dfd.promise}var vm=this;vm.list={Meta:{},Items:[]},vm.searchfunction=Search}ProductListConfig.$inject=["$stateProvider"],ProductListController.$inject=["$q","OrderCloud"],angular.module("orderCloud").config(ProductListConfig).controller("ProductListCtrl",ProductListController)}(),function(){"use strict";function CategoryConfig($stateProvider){$stateProvider.state("catalog.category",{url:"/category/:categoryid",templateUrl:"catalog/category/templates/category.tpl.html",controller:"CategoryCtrl",controllerAs:"category",resolve:{CategoryList:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Me.ListCategories(null,null,null,null,null,{ParentID:$stateParams.categoryid},"all")}],ProductList:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Me.ListProducts(null,null,null,null,null,null,$stateParams.categoryid)}]}})}function CategoryController($rootScope,CategoryList,ProductList){var vm=this;vm.categories=CategoryList,vm.products=ProductList,$rootScope.$on("OC:FacetsUpdated",function(e,productList){
productList?vm.products=productList:vm.products=ProductList})}CategoryConfig.$inject=["$stateProvider"],CategoryController.$inject=["$rootScope","CategoryList","ProductList"],angular.module("orderCloud").config(CategoryConfig).controller("CategoryCtrl",CategoryController)}(),function(){"use strict";function SpendingAccountsConfig($stateProvider){$stateProvider.state("spendingAccounts",{parent:"base",templateUrl:"spendingAccounts/templates/spendingAccounts.tpl.html",controller:"SpendingAccountsCtrl",controllerAs:"spendingAccounts",url:"/spendingaccounts?search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Spending Accounts"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],SpendingAccountList:["OrderCloud","Parameters",function(OrderCloud,Parameters){var parameters=angular.copy(Parameters);return parameters.filters?parameters.filters.RedemptionCode="!*":parameters.filters={RedemptionCode:"!*"},OrderCloud.SpendingAccounts.List(parameters.search,parameters.page,parameters.pageSize||12,parameters.searchOn,parameters.sortBy,parameters.filters)}]}}).state("spendingAccounts.edit",{url:"/:spendingaccountid/edit",templateUrl:"spendingAccounts/templates/spendingAccountEdit.tpl.html",controller:"SpendingAccountEditCtrl",controllerAs:"spendingAccountEdit",resolve:{SelectedSpendingAccount:["$q","$stateParams","OrderCloud",function($q,$stateParams,OrderCloud){var d=$q.defer();return OrderCloud.SpendingAccounts.Get($stateParams.spendingaccountid).then(function(giftcard){null!=giftcard.StartDate&&(giftcard.StartDate=new Date(giftcard.StartDate)),null!=giftcard.EndDate&&(giftcard.EndDate=new Date(giftcard.EndDate)),d.resolve(giftcard)}),d.promise}]}}).state("spendingAccounts.create",{url:"/create",templateUrl:"spendingAccounts/templates/spendingAccountCreate.tpl.html",controller:"SpendingAccountCreateCtrl",controllerAs:"spendingAccountCreate"}).state("spendingAccounts.assignGroup",{url:"/:spendingaccountid/assign",templateUrl:"spendingAccounts/templates/spendingAccountAssignGroup.tpl.html",controller:"SpendingAccountAssignGroupCtrl",controllerAs:"spendingAccountAssignGroup",resolve:{UserGroupList:["OrderCloud",function(OrderCloud){return OrderCloud.UserGroups.List()}],AssignedUserGroups:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.SpendingAccounts.ListAssignments($stateParams.spendingaccountid,null,null,"Group")}],SelectedSpendingAccount:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.SpendingAccounts.Get($stateParams.spendingaccountid)}]}}).state("spendingAccounts.assignUser",{url:"/:spendingaccountid/assign/user",templateUrl:"spendingAccounts/templates/spendingAccountAssignUser.tpl.html",controller:"SpendingAccountAssignUserCtrl",controllerAs:"spendingAccountAssignUser",resolve:{UserList:["OrderCloud",function(OrderCloud){return OrderCloud.Users.List()}],AssignedUsers:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.SpendingAccounts.ListAssignments($stateParams.spendingaccountid,null,null,"User")}],SelectedSpendingAccount:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.SpendingAccounts.Get($stateParams.spendingaccountid)}]}})}function SpendingAccountsController($state,$ocMedia,OrderCloud,OrderCloudParameters,SpendingAccountList,Parameters){var vm=this;vm.list=SpendingAccountList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.copy(Parameters);return parameters.filters?parameters.filters.RedemptionCode="!*":parameters.filters={RedemptionCode:"!*"},OrderCloud.SpendingAccounts.List(parameters.search,vm.list.Meta.Page+1,parameters.pageSize||vm.list.Meta.PageSize,parameters.searchOn,parameters.sortBy,parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function SpendingAccountEditController($exceptionHandler,$state,toastr,OrderCloud,SelectedSpendingAccount){var vm=this,spendingaccountid=SelectedSpendingAccount.ID;vm.spendingAccountName=SelectedSpendingAccount.Name,vm.spendingAccount=SelectedSpendingAccount,vm.Submit=function(){OrderCloud.SpendingAccounts.Update(spendingaccountid,vm.spendingAccount).then(function(){$state.go("spendingAccounts",{},{reload:!0}),toastr.success("Spending Account Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.Delete=function(){OrderCloud.SpendingAccounts.Delete(spendingaccountid).then(function(){$state.go("spendingAccounts",{},{reload:!0}),toastr.success("Spending Account Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function SpendingAccountCreateController($exceptionHandler,$state,toastr,OrderCloud){var vm=this;vm.spendingAccount={},vm.Submit=function(){OrderCloud.SpendingAccounts.Create(vm.spendingAccount).then(function(){$state.go("spendingAccounts",{},{reload:!0}),toastr.success("Spending Account Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function SpendingAccountAssignGroupController($scope,toastr,UserGroupList,AssignedUserGroups,SelectedSpendingAccount,SpendingAccountAssignment){function SaveAssignments(){return toastr.success("Assignment Updated","Success"),SpendingAccountAssignment.SaveAssignments(vm.spendingAccount.ID,vm.list.Items,vm.assignments.Items)}function PagingFunction(){return SpendingAccountAssignment.Paging(vm.spendingAccount.ID,vm.list,vm.assignments)}var vm=this;vm.list=UserGroupList,vm.assignments=AssignedUserGroups,vm.spendingAccount=SelectedSpendingAccount,vm.pagingfunction=PagingFunction,vm.saveAssignments=SaveAssignments,$scope.$watchCollection(function(){return vm.list},function(){SpendingAccountAssignment.SetSelected(vm.list.Items,vm.assignments.Items)})}function SpendingAccountAssignUserController($scope,toastr,Paging,UserList,AssignedUsers,SelectedSpendingAccount,SpendingAccountAssignment){function SaveAssignments(){return toastr.success("Assignment Updated","Success"),SpendingAccountAssignment.SaveAssignments(vm.spendingAccount.ID,vm.list.Items,vm.assignments.Items,"User")}function PagingFunction(){return SpendingAccountAssignment.Paging(vm.spendingAccount.ID,vm.list,vm.assignments,"User")}var vm=this;vm.list=UserList,vm.assignments=AssignedUsers,vm.spendingAccount=SelectedSpendingAccount,vm.pagingfunction=PagingFunction,vm.saveAssignments=SaveAssignments,$scope.$watchCollection(function(){return vm.list},function(){Paging.SetSelected(vm.list.Items,vm.assignments.Items,"UserID")}),$scope.$watchCollection(function(){return vm.list},function(){SpendingAccountAssignment.SetSelected(vm.list.Items,vm.assignments.Items,"User")})}function SpendingAccountAssignment($q,$state,$injector,Underscore,OrderCloud,Assignments){function _saveAssignments(SpendingAccountID,List,AssignmentList,Party){var PartyID="User"===Party?"UserID":"UserGroupID",assigned=Underscore.pluck(AssignmentList,PartyID),selected=Underscore.pluck(Underscore.where(List,{selected:!0}),"ID"),toAdd=Assignments.GetToAssign(List,AssignmentList,PartyID),toUpdate=Underscore.intersection(selected,assigned),toDelete=Assignments.GetToDelete(List,AssignmentList,PartyID),queue=[],dfd=$q.defer();return angular.forEach(List,function(item){if(toAdd.indexOf(item.ID)>-1)saveAndUpdate(queue,SpendingAccountID,item,Party);else if(toUpdate.indexOf(item.ID)>-1){var AssignmentObject;AssignmentObject="User"===Party?Underscore.where(AssignmentList,{UserID:item.ID})[0]:Underscore.where(AssignmentList,{UserGroupID:item.ID})[0],AssignmentObject.AllowExceed!==item.allowExceed&&saveAndUpdate(queue,SpendingAccountID,item,Party)}}),angular.forEach(toDelete,function(itemID){"User"===Party?queue.push(OrderCloud.SpendingAccounts.DeleteAssignment(SpendingAccountID,itemID,null)):queue.push(OrderCloud.SpendingAccounts.DeleteAssignment(SpendingAccountID,null,itemID))}),$q.all(queue).then(function(){dfd.resolve(),$state.reload($state.current)}),dfd.promise}function saveAndUpdate(queue,SpendingAccountID,item,Party){var assignment={SpendingAccountID:SpendingAccountID,UserID:null,UserGroupID:null,AllowExceed:item.allowExceed};"User"===Party?assignment.UserID=item.ID:assignment.UserGroupID=item.ID,queue.push(OrderCloud.SpendingAccounts.SaveAssignment(assignment))}function _setSelected(List,AssignmentList,Party){var PartyID="User"===Party?"UserID":"UserGroupID",assigned=Assignments.GetAssigned(AssignmentList,PartyID),exceed=Underscore.pluck(Underscore.where(AssignmentList,{AllowExceed:!0}),PartyID);angular.forEach(List,function(item){assigned.indexOf(item.ID)>-1&&(item.selected=!0,exceed.indexOf(item.ID)>-1&&(item.allowExceed=!0))})}function _paging(SpendingAccountID,OrderCloud,ListObjects,AssignmentObjects,Party){var ServiceName="User"===Party?"Users":"UserGroups",Level="User"===Party?"User":"Group",Service=$injector.get(ServiceName);if(ListObjects.Meta.Page<ListObjects.Meta.TotalPages){var queue=[],dfd=$q.defer();return queue.push(Service.List(null,ListObjects.Meta.Page+1,ListObjects.Meta.PageSize)),AssignmentObjects.Meta.Page<AssignmentObjects.Meta.TotalPages&&queue.push(OrderCloud.SpendingAccounts.ListAssignments(SpendingAccountID,null,null,Level,AssignmentObjects.Meta.Page+1,AssignmentObjects.Meta.PageSize)),$q.all(queue).then(function(results){dfd.resolve(),ListObjects.Meta=results[0].Meta,ListObjects.Items=[].concat(ListObjects.Items,results[0].Items),results[1]&&(AssignmentObjects.Meta=results[1].Meta,AssignmentObjects.Items=[].concat(AssignmentObjects.Items,results[1].Items)),_setSelected(ListObjects.Items,AssignmentObjects.Items,Party)}),dfd.promise}return null}return{SaveAssignments:_saveAssignments,SetSelected:_setSelected,Paging:_paging}}SpendingAccountsConfig.$inject=["$stateProvider"],SpendingAccountsController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","SpendingAccountList","Parameters"],SpendingAccountEditController.$inject=["$exceptionHandler","$state","toastr","OrderCloud","SelectedSpendingAccount"],SpendingAccountCreateController.$inject=["$exceptionHandler","$state","toastr","OrderCloud"],SpendingAccountAssignGroupController.$inject=["$scope","toastr","UserGroupList","AssignedUserGroups","SelectedSpendingAccount","SpendingAccountAssignment"],SpendingAccountAssignUserController.$inject=["$scope","toastr","Paging","UserList","AssignedUsers","SelectedSpendingAccount","SpendingAccountAssignment"],SpendingAccountAssignment.$inject=["$q","$state","$injector","Underscore","OrderCloud","Assignments"],angular.module("orderCloud").config(SpendingAccountsConfig).controller("SpendingAccountsCtrl",SpendingAccountsController).controller("SpendingAccountEditCtrl",SpendingAccountEditController).controller("SpendingAccountCreateCtrl",SpendingAccountCreateController).controller("SpendingAccountAssignGroupCtrl",SpendingAccountAssignGroupController).controller("SpendingAccountAssignUserCtrl",SpendingAccountAssignUserController).factory("SpendingAccountAssignment",SpendingAccountAssignment)}(),function(){"use strict";function UsersConfig($stateProvider){$stateProvider.state("users",{parent:"base",templateUrl:"users/templates/users.tpl.html",controller:"UsersCtrl",controllerAs:"users",url:"/users?from&to&search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Users"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],UserList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.Users.List(Parameters.userGroupID,Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters)}]}}).state("users.edit",{url:"/:userid/edit",templateUrl:"users/templates/userEdit.tpl.html",controller:"UserEditCtrl",controllerAs:"userEdit",resolve:{SelectedUser:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Users.Get($stateParams.userid)}]}}).state("users.create",{url:"/create",templateUrl:"users/templates/userCreate.tpl.html",controller:"UserCreateCtrl",controllerAs:"userCreate"})}function UsersController($state,$ocMedia,OrderCloud,OrderCloudParameters,UserList,Parameters){var vm=this;vm.list=UserList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.Users.List(Parameters.userGroupID,Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function UserEditController($exceptionHandler,$state,toastr,OrderCloud,SelectedUser){var vm=this,userid=SelectedUser.ID;vm.userName=SelectedUser.Username,vm.user=SelectedUser,null!=vm.user.TermsAccepted&&(vm.TermsAccepted=!0),vm.Submit=function(){var today=new Date;vm.user.TermsAccepted=today,OrderCloud.Users.Update(userid,vm.user).then(function(){$state.go("users",{},{reload:!0}),toastr.success("User Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.Delete=function(){OrderCloud.Users.Delete(userid).then(function(){$state.go("users",{},{reload:!0}),toastr.success("User Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function UserCreateController($exceptionHandler,$state,toastr,OrderCloud){var vm=this;vm.user={Email:"",Password:""},vm.user.Active=!1,vm.Submit=function(){vm.user.TermsAccepted=new Date,OrderCloud.Users.Create(vm.user).then(function(){$state.go("users",{},{reload:!0}),toastr.success("User Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}UsersConfig.$inject=["$stateProvider"],UsersController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","UserList","Parameters"],UserEditController.$inject=["$exceptionHandler","$state","toastr","OrderCloud","SelectedUser"],UserCreateController.$inject=["$exceptionHandler","$state","toastr","OrderCloud"],angular.module("orderCloud").config(UsersConfig).controller("UsersCtrl",UsersController).controller("UserEditCtrl",UserEditController).controller("UserCreateCtrl",UserCreateController)}(),function(){"use strict";function UserGroupsConfig($stateProvider){$stateProvider.state("userGroups",{parent:"base",templateUrl:"userGroups/templates/userGroups.tpl.html",controller:"UserGroupsCtrl",controllerAs:"userGroups",url:"/usergroups?search&page&pageSize&sortBy&searchOn&filters",data:{componentName:"User Groups"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],UserGroupList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.UserGroups.List(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters)}]}}).state("userGroups.edit",{url:"/:usergroupid/edit",templateUrl:"userGroups/templates/userGroupEdit.tpl.html",controller:"UserGroupEditCtrl",controllerAs:"userGroupEdit",resolve:{SelectedUserGroup:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.UserGroups.Get($stateParams.usergroupid)}]}}).state("userGroups.create",{url:"/create",templateUrl:"userGroups/templates/userGroupCreate.tpl.html",controller:"UserGroupCreateCtrl",controllerAs:"userGroupCreate"}).state("userGroups.assign",{url:"/:usergroupid/assign",templateUrl:"userGroups/templates/userGroupAssign.tpl.html",controller:"UserGroupAssignCtrl",controllerAs:"userGroupAssign",resolve:{UserList:["OrderCloud",function(OrderCloud){return OrderCloud.Users.List(null,null,1,20)}],AssignedUsers:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.UserGroups.ListUserAssignments($stateParams.usergroupid)}],SelectedUserGroup:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.UserGroups.Get($stateParams.usergroupid)}]}})}function UserGroupsController($state,$ocMedia,OrderCloud,OrderCloudParameters,UserGroupList,Parameters){var vm=this;vm.list=UserGroupList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.UserGroups.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function UserGroupEditController($exceptionHandler,$state,toastr,OrderCloud,SelectedUserGroup){var vm=this,groupID=SelectedUserGroup.ID;vm.userGroupName=SelectedUserGroup.Name,vm.userGroup=SelectedUserGroup,vm.Submit=function(){OrderCloud.UserGroups.Update(groupID,vm.userGroup).then(function(){$state.go("userGroups",{},{reload:!0}),toastr.success("User Group Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.Delete=function(){OrderCloud.UserGroups.Delete(SelectedUserGroup.ID).then(function(){$state.go("userGroups",{},{reload:!0})})["catch"](function(ex){$exceptionHandler(ex)})}}function UserGroupCreateController($exceptionHandler,$state,toastr,OrderCloud){var vm=this;vm.Submit=function(){OrderCloud.UserGroups.Create(vm.userGroup).then(function(){$state.go("userGroups",{},{reload:!0}),toastr.success("User Group Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function UserGroupAssignController($scope,toastr,OrderCloud,Assignments,Paging,UserList,AssignedUsers,SelectedUserGroup){function SaveFunc(ItemID){return OrderCloud.UserGroups.SaveUserAssignment({UserID:ItemID,UserGroupID:vm.UserGroup.ID})}function DeleteFunc(ItemID){return OrderCloud.UserGroups.DeleteUserAssignment(vm.UserGroup.ID,ItemID)}function SaveAssignment(){return toastr.success("Assignment Updated","Success"),Assignments.SaveAssignments(vm.list.Items,vm.assignments.Items,SaveFunc,DeleteFunc,"UserID")}function AssignmentFunc(){return OrderCloud.UserGroups.ListUserAssignments(vm.UserGroup.ID,null,vm.assignments.Meta.PageSize,"UserID")}function PagingFunction(){return Paging.Paging(vm.list,"Users",vm.assignments,AssignmentFunc)}var vm=this;vm.UserGroup=SelectedUserGroup,vm.list=UserList,vm.assignments=AssignedUsers,vm.saveAssignments=SaveAssignment,vm.pagingfunction=PagingFunction,$scope.$watchCollection(function(){return vm.list},function(){Paging.SetSelected(vm.list.Items,vm.assignments.Items,"UserID")})}UserGroupsConfig.$inject=["$stateProvider"],UserGroupsController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","UserGroupList","Parameters"],UserGroupEditController.$inject=["$exceptionHandler","$state","toastr","OrderCloud","SelectedUserGroup"],UserGroupCreateController.$inject=["$exceptionHandler","$state","toastr","OrderCloud"],UserGroupAssignController.$inject=["$scope","toastr","OrderCloud","Assignments","Paging","UserList","AssignedUsers","SelectedUserGroup"],angular.module("orderCloud").config(UserGroupsConfig).controller("UserGroupsCtrl",UserGroupsController).controller("UserGroupEditCtrl",UserGroupEditController).controller("UserGroupCreateCtrl",UserGroupCreateController).controller("UserGroupAssignCtrl",UserGroupAssignController)}(),function(){"use strict";function SpecsConfig($stateProvider){$stateProvider.state("specs",{parent:"base",views:{"":{templateUrl:"specs/templates/specs.tpl.html",controller:"SpecsCtrl",controllerAs:"specs"},"filters@specs":{templateUrl:"specs/templates/specs.filters.tpl.html"},"list@specs":{templateUrl:"specs/templates/specs.list.tpl.html"}},url:"/specs?search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Specs"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],SpecList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.Specs.List(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters)}]}}).state("specs.edit",{url:"/:specid/edit",templateUrl:"specs/templates/specEdit.tpl.html",controller:"SpecEditCtrl",controllerAs:"specEdit",resolve:{SelectedSpec:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Specs.Get($stateParams.specid)}]}}).state("specs.create",{url:"/create",templateUrl:"specs/templates/specCreate.tpl.html",controller:"SpecCreateCtrl",controllerAs:"specCreate"}).state("specs.assign",{url:"/:specid/assign",templateUrl:"specs/templates/specAssign.tpl.html",controller:"SpecAssignCtrl",controllerAs:"specAssign",resolve:{ProductList:["OrderCloud",function(OrderCloud){return OrderCloud.Products.List(null,1,20)}],ProductAssignments:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Specs.ListProductAssignments($stateParams.specid)}],SelectedSpec:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Specs.Get($stateParams.specid)}]}})}function SpecsController($state,$ocMedia,OrderCloud,OrderCloudParameters,Parameters,SpecList){var vm=this;vm.list=SpecList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.Specs.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function SpecEditController($exceptionHandler,$state,Underscore,toastr,OrderCloud,SelectedSpec){var vm=this,specid=angular.copy(SelectedSpec.ID);vm.specName=angular.copy(SelectedSpec.Name),vm.spec=SelectedSpec,vm.Option={},vm.Options=vm.spec.Options,vm.overwrite=!1,vm.addSpecOpt=function(){Underscore.where(vm.Options,{ID:vm.Option.ID}).length&&(vm.overwrite=!0,toastr.warning("There is already a spec option with that ID, select Update Spec Option to continue","Warning")),Underscore.where(vm.Options,{ID:vm.Option.ID}).length||(vm.Options.push(vm.Option),vm.DefaultOptionID&&(vm.spec.DefaultOptionID=vm.Option.ID),OrderCloud.Specs.CreateOption(specid,vm.Option).then(function(){vm.Option=null}))},vm.updateSpecOpt=function(){var specOptIndex;Underscore.where(vm.Options,{ID:vm.Option.ID}).length?(angular.forEach(vm.Options,function(option,index){option.ID==vm.Option.ID&&(specOptIndex=index)}),vm.Options.splice(specOptIndex,1),vm.Options.push(vm.Option),vm.DefaultOptionID&&(vm.spec.DefaultOptionID=vm.Option.ID),OrderCloud.Specs.UpdateOption(specid,vm.Option.ID,vm.Option).then(function(){vm.Option=null,vm.overwrite=!1})):vm.addSpecOpt()},vm.deleteSpecOpt=function($index){vm.spec.DefaultOptionID==vm.spec.Options[$index].ID&&(vm.spec.DefaultOptionID=null),OrderCloud.Specs.DeleteOption(specid,vm.spec.Options[$index].ID).then(function(){vm.Options.splice($index,1)})},vm.Submit=function(){OrderCloud.Specs.Update(specid,vm.spec).then(function(){$state.go("specs",{},{reload:!0}),toastr.success("Spec Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.Delete=function(){OrderCloud.Specs.Delete(specid).then(function(){$state.go("specs",{},{reload:!0})})["catch"](function(ex){$exceptionHandler(ex)})}}function SpecCreateController($exceptionHandler,$q,$state,toastr,Underscore,OrderCloud){var vm=this;vm.spec={},vm.Options=[];var DefaultOptionID;vm.overwrite=!1,vm.addSpecOpt=function(){Underscore.where(vm.Options,{ID:vm.Option.ID}).length&&(vm.overwrite=!0,toastr.warning("There is already a spec option with that ID, select Update Spec Option to continue","Warning")),Underscore.where(vm.Options,{ID:vm.Option.ID}).length||(vm.Options.push(vm.Option),vm.DefaultOptionID&&(DefaultOptionID=vm.Option.ID),vm.Option=null,vm.DefaultOptionID=null)},vm.updateSpecOpt=function(){var specOptIndex;Underscore.where(vm.Options,{ID:vm.Option.ID}).length?(angular.forEach(vm.Options,function(option,index){option.ID==vm.Option.ID&&(specOptIndex=index)}),vm.Options.splice(specOptIndex,1),vm.Options.push(vm.Option),vm.DefaultOptionID&&(vm.spec.DefaultOptionID=vm.Option.ID),vm.Option=null,vm.overwrite=!1):vm.addSpecOpt()},vm.deleteSpecOpt=function($index){vm.spec.DefaultOptionID==vm.Options[$index].ID&&(vm.spec.DefaultOptionID=null),vm.Options.splice($index,1)},vm.Submit=function(){OrderCloud.Specs.Create(vm.spec).then(function(spec){var queue=[],dfd=$q.defer();return angular.forEach(vm.Options,function(opt){queue.push(OrderCloud.Specs.CreateOption(spec.ID,opt))}),$q.all(queue).then(function(){dfd.resolve(),null!=DefaultOptionID&&OrderCloud.Specs.Patch(spec.ID,{DefaultOptionID:DefaultOptionID}),$state.go("specs",{},{reload:!0}),toastr.success("Spec Created","Success")}),dfd.promise})["catch"](function(ex){$exceptionHandler(ex)})}}function SpecAssignController($scope,toastr,OrderCloud,Assignments,Paging,ProductList,ProductAssignments,SelectedSpec){function SaveFunc(ItemID){return OrderCloud.Specs.SaveProductAssignment({SpecID:vm.Spec.ID,ProductID:ItemID})}function DeleteFunc(ItemID){return OrderCloud.Specs.DeleteProductAssignment(vm.Spec.ID,ItemID)}function SaveAssignment(){return toastr.success("Assignment Updated","Success"),Assignments.SaveAssignments(vm.list.Items,vm.assignments.Items,SaveFunc,DeleteFunc,"ProductID")}function AssignmentFunc(){return OrderCloud.Specs.ListProductAssignments(vm.Spec.ID,null,vm.assignments.Meta.PageSize)}function PagingFunction(){return Paging.Paging(vm.list,"Products",vm.assignments,AssignmentFunc)}var vm=this;vm.Spec=SelectedSpec,vm.list=ProductList,vm.assignments=ProductAssignments,vm.saveAssignments=SaveAssignment,vm.pagingfunction=PagingFunction,$scope.$watchCollection(function(){return vm.list},function(){Paging.SetSelected(vm.list.Items,vm.assignments.Items,"ProductID")})}SpecsConfig.$inject=["$stateProvider"],SpecsController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","Parameters","SpecList"],SpecEditController.$inject=["$exceptionHandler","$state","Underscore","toastr","OrderCloud","SelectedSpec"],SpecCreateController.$inject=["$exceptionHandler","$q","$state","toastr","Underscore","OrderCloud"],SpecAssignController.$inject=["$scope","toastr","OrderCloud","Assignments","Paging","ProductList","ProductAssignments","SelectedSpec"],angular.module("orderCloud").config(SpecsConfig).controller("SpecsCtrl",SpecsController).controller("SpecEditCtrl",SpecEditController).controller("SpecCreateCtrl",SpecCreateController).controller("SpecAssignCtrl",SpecAssignController)}(),function(){"use strict";function RepeatOrderController(toastr,OrderCloud,RepeatOrderFactory){var vm=this;vm.reorder=function(orderID,includebilling,includeshipping,clientid,userid,claims){vm.includeBilling="true"===includebilling,vm.includeShipping="true"===includeshipping,vm.userType=JSON.parse(atob(OrderCloud.Auth.ReadToken().split(".")[1])).usrtype,"admin"!==vm.userType||orderID&&clientid?"buyer"!=vm.userType||orderID?RepeatOrderFactory.SetAccessToken(vm.userType,userid,clientid,claims).then(function(){RepeatOrderFactory.CheckLineItemsValid(vm.userType,orderID).then(function(validLI){RepeatOrderFactory.GetCurrentOrderLineItems(validLI).then(function(totalLI){RepeatOrderFactory.Reorder(orderID,vm.includeBilling,vm.includeShipping,totalLI,vm.userType).then(function(order){RepeatOrderFactory.SuccessConfirmation(order,vm.userType,vm.includeBilling,vm.includeShipping)})})})}):toastr.error("This directive is not configured correctly. orderID is a required attribute","Error"):toastr.error("This directive is not configured correctly. orderID and clientID are required attributes","Error")}}function RepeatOrderFactory($q,$state,$localForage,toastr,OrderCloud,LineItemHelpers,CurrentOrder,appname){
function _setAccessToken(usertype,userid,clientid,claims){var dfd=$q.defer(),tokenRequest={clientID:clientid,Claims:[claims||"FullAccess"]};return"admin"===usertype?OrderCloud.Users.GetAccessToken(userid,tokenRequest).then(function(token){OrderCloud.Auth.SetImpersonationToken(token.access_token),dfd.resolve()})["catch"](function(){toastr.error("There was an issue retrieving the access token of the user you are trying to impersonate. Please make sure the userid and clientid are correct"),dfd.reject()}):dfd.resolve(),dfd.promise}function _checkLineItemsValid(userType,originalOrderID){function ListAllProducts(){var dfd=$q.defer(),queue=[];return("buyer"===userType?OrderCloud.Me.ListProducts(null,1,100):OrderCloud.As().Me.ListProducts(null,1,100)).then(function(data){var productList=data;if(data.Meta.TotalPages>data.Meta.Page)for(var page=data.Meta.Page;page<data.Meta.TotalPages;)page+=1,"buyer"===userType?queue.push(OrderCloud.Me.ListProducts(null,page,100)):queue.push(OrderCloud.As().Me.ListProducts(null,1,100));$q.all(queue).then(function(results){angular.forEach(results,function(result){productList.Items=[].concat(productList.Items,result.Items)}),dfd.resolve(productList.Items)})["catch"](function(err){dfd.reject(err)})}),dfd.promise}var dfd=$q.defer();return ListAllProducts().then(function(productList){var productIds=[];angular.forEach(productList,function(product){productIds.push(product.ID)}),LineItemHelpers.ListAll(originalOrderID).then(function(lineItemList){var invalidLI=[],validLI=[];angular.forEach(lineItemList,function(li){productIds.indexOf(li.ProductID)>-1?validLI.push(li):invalidLI.push(li.ProductID)}),validLI.length&&invalidLI.length&&(toastr.warning("There are "+invalidLI.length+" product(s) in your cart that either no longer exist or you do not have permission to reorder, the order will process only with the products you are able to order. The ID's of the products that have been excluded are: "+invalidLI.toString()),dfd.resolve(validLI)),validLI.length&&!invalidLI.length&&dfd.resolve(validLI),validLI.length||(toastr.error("The product(s) from the order you are trying to place either no longer exist or you do not have permission to reorder","Error"),dfd.reject())})}),dfd.promise}function _getCurrentOrderLineItems(validLI){var totalLI,dfd=$q.defer();return $localForage.getItem(appname+".CurrentOrderID").then(function(order_id){order_id?LineItemHelpers.ListAll(order_id).then(function(li){li.length&&toastr.warning("The line items from your current order were added to this reorder.","Please be advised"),totalLI=validLI.concat(li),dfd.resolve(totalLI)})["catch"](function(err){dfd.reject(err)}):(totalLI=validLI,dfd.resolve(totalLI))}),dfd.promise}function _reorder(originalOrderID,includeBilling,includeShipping,totalLI,userType){var dfd=$q.defer();return OrderCloud.Orders.Get(originalOrderID).then(function(data){var billingAddress=data.BillingAddress;("buyer"===userType?OrderCloud.Orders.Create({}):OrderCloud.As().Orders.Create({})).then(function(order){var orderID=order.ID;"buyer"===userType?CurrentOrder.Set(orderID):angular.noop(),includeBilling?OrderCloud.Orders.SetBillingAddress(orderID,billingAddress):angular.noop();var queue=[];angular.forEach(totalLI,function(lineItem){delete lineItem.OrderID,delete lineItem.ID,delete lineItem.QuantityShipped,delete lineItem.ShippingAddressID,includeShipping?angular.noop():delete lineItem.ShippingAddress,queue.push(OrderCloud.LineItems.Create(orderID,lineItem))}),$q.all(queue).then(function(data){dfd.resolve(order)})["catch"](function(err){dfd.reject(err)})})}),dfd.promise}function _successConfirmation(order,usertype,includeBilling,includeShipping){"buyer"==usertype?includeBilling||includeShipping?$state.go("checkout"):$state.go("cart"):(toastr.success("Your reorder was successfully placed! The new order number is: "+order.ID),$state.go("orderHistory"))}return{SetAccessToken:_setAccessToken,CheckLineItemsValid:_checkLineItemsValid,GetCurrentOrderLineItems:_getCurrentOrderLineItems,Reorder:_reorder,SuccessConfirmation:_successConfirmation}}function OrderCloudRepeatOrderDirective(){return{restrict:"E",templateUrl:"repeatOrder/templates/repeatOrderDirective.tpl.html",controller:"RepeatOrderCtrl",controllerAs:"repeatOrder",scope:{orderid:"=",includebilling:"@",includeshipping:"@",clientid:"@",fromuserid:"@",claims:"@"}}}RepeatOrderFactory.$inject=["$q","$state","$localForage","toastr","OrderCloud","LineItemHelpers","CurrentOrder","appname"],RepeatOrderController.$inject=["toastr","OrderCloud","RepeatOrderFactory"],angular.module("orderCloud").factory("RepeatOrderFactory",RepeatOrderFactory).controller("RepeatOrderCtrl",RepeatOrderController).directive("ordercloudRepeatOrder",OrderCloudRepeatOrderDirective)}(),function(){"use strict";function SecurityProfilesConfig($stateProvider){$stateProvider.state("securityProfiles",{url:"/securityProfiles?search&searchOn&sortBy&page&pageSize",parent:"base",templateUrl:"securityProfiles/templates/securityProfiles.tpl.html",controller:"SecurityProfilesCtrl",controllerAs:"securityProfiles",data:{componentName:"Security Profiles"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],SecurityProfilesList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.SecurityProfiles.List(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy)}]}}).state("securityProfiles.roles",{url:"/:securityprofileid/roles",templateUrl:"securityProfiles/templates/securityProfileRoles.tpl.html",controller:"SecurityProfileRolesCtrl",controllerAs:"securityProfileRoles",resolve:{SelectedSecurityProfile:["OrderCloud","$stateParams",function(OrderCloud,$stateParams){return OrderCloud.SecurityProfiles.Get($stateParams.securityprofileid)}],NonAssignedRoles:["SelectedSecurityProfile","SecurityProfileFactory","Underscore",function(SelectedSecurityProfile,SecurityProfileFactory,Underscore){var allRoles=SecurityProfileFactory.AvailableRoles();return Underscore.difference(allRoles,SelectedSecurityProfile.Roles)}]}}).state("securityProfiles.assignments",{url:"/:securityprofileid/assignments?page&pageSize&userID&userGroupID&level",templateUrl:"securityProfiles/templates/securityProfileAssignments.tpl.html",controller:"SecurityProfileAssignmentsCtrl",controllerAs:"securityProfileAssignments",resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],AssignmentList:["$stateParams","OrderCloud","Parameters",function($stateParams,OrderCloud,Parameters){return OrderCloud.SecurityProfiles.ListAssignments($stateParams.securityprofileid,Parameters.userID,Parameters.userGroupID,Parameters.level,Parameters.page,Parameters.pageSize||12,Parameters.buyerID)}]}}).state("securityProfiles.createAssignment",{url:"/:securityprofileid/assignments/new",templateUrl:"securityProfiles/templates/securityProfileCreateAssignment.tpl.html",controller:"SecurityProfileCreateAssignmentCtrl",controllerAs:"securityProfileCreateAssignment",resolve:{UserGroupList:["OrderCloud",function(OrderCloud){return OrderCloud.UserGroups.List()}],UserList:["OrderCloud",function(OrderCloud){return OrderCloud.Users.List()}]}})}function SecurityProfilesController($state,$stateParams,$ocMedia,OrderCloud,OrderCloudParameters,SecurityProfilesList,Parameters){var vm=this;vm.list=SecurityProfilesList,vm.parameters=Parameters,vm.securityProfileID=$stateParams.securityprofileid,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.SecurityProfiles.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function SecurityProfileRolesController(SelectedSecurityProfile,NonAssignedRoles){var vm=this;vm.selectedProfile=SelectedSecurityProfile,vm.availableRoles=SelectedSecurityProfile.Roles,vm.unavailableRoles=NonAssignedRoles}function SecurityProfileAssignmentsController($state,$stateParams,$exceptionHandler,toastr,OrderCloud,AssignmentList,Parameters){var vm=this;vm.list=AssignmentList,vm.parameters=Parameters,vm.SecurityProfileID=$stateParams.securityprofileid,vm.parameters=Parameters,vm.Delete=function(userID,userGroupID){OrderCloud.SecurityProfiles.DeleteAssignment(vm.SecurityProfileID,userID,userGroupID).then(function(){$state.reload(),toastr.success("Security Profile Assignment Deleted","Success")})["catch"](function(ex){toastr.error(ex,"Error"),$exceptionHandler(ex)})},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.SecurityProfiles.ListAssignments($stateParams.securityprofileid,Parameters.userID,Parameters.userGroupID,Parameters.level,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.buyerID).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function SecurityProfileCreateAssignmentController($scope,$state,$q,$exceptionHandler,$stateParams,Underscore,toastr,OrderCloud,SecurityProfileFactory,UserGroupList,UserList){var vm=this;vm.groupList=UserGroupList,vm.assignBuyer=!1,vm.userList=UserList,vm.selectedUsers=[],vm.selectedGroups=[],vm.securityProfileID=$stateParams.securityprofileid,vm.assignmentModel={SecurityProfileID:vm.securityProfileID,BuyerID:OrderCloud.BuyerID.Get(),UserID:null,UserGroupID:null},vm.toggleSelection=function(selection,party){var partyName="selected"+party,selectedPartyIds=Underscore.pluck(vm[partyName],"ID"),index=selectedPartyIds.indexOf(selection.ID);index>-1?(vm[partyName].splice(index,1),selection.selected=!1):(vm[partyName].push(selection),selection.selected=!0)},vm.Submit=function(){if(vm.assignBuyer)OrderCloud.SecurityProfiles.SaveAssignment(vm.assignmentModel).then(function(){$state.go("securityProfiles.assignments",{securityprofileid:vm.securityProfileID}),toastr.success("Security Profile Assignment Created","Success")})["catch"](function(ex){$exceptionHandler(ex)});else{var assignmentQueue=($q.defer(),[]);angular.forEach(vm.selectedUsers,function(user){var userModel=angular.copy(vm.assignmentModel);userModel.UserID=user.ID,assignmentQueue.push(OrderCloud.SecurityProfiles.SaveAssignment(userModel))}),angular.forEach(vm.selectedGroups,function(userGroup){var groupModel=angular.copy(vm.assignmentModel);groupModel.UserGroupID=userGroup.ID,assignmentQueue.push(OrderCloud.SecurityProfiles.SaveAssignment(groupModel))}),$q.all(assignmentQueue).then(function(){vm.selectedUsers.length+vm.selectedGroups.length>1?(toastr.success("Security Profile Assignments Created","Success"),$state.go("securityProfiles.assignments",{securityprofileid:vm.securityProfileID})):(toastr.success("Security Profile Assignment Created","Success"),$state.go("securityProfiles.assignments",{securityprofileid:vm.securityProfileID}))})["catch"](function(ex){$exceptionHandler(ex)})}},$scope.$watchCollection(function(){return vm.userList},function(){SecurityProfileFactory.SetSelected(vm.userList.Items,vm.selectedUsers)}),$scope.$watchCollection(function(){return vm.groupList},function(){SecurityProfileFactory.SetSelected(vm.groupList.Items,vm.selectedGroups)})}function SecurityProfileFactory(Underscore){function _availableRoles(){return["FullAccess","ProductAdmin","ProductReader","InventoryAdmin","ProductAssignmentAdmin","BuyerAdmin","BuyerReader","CategoryAdmin","CategoryReader","AddressAdmin","AddressReader","CostCenterAdmin","CostCenterReader","PromotionAdmin","PromotionReader","CreditCardAdmin","CreditCardReader","PriceScheduleAdmin","PriceScheduleReader","SpendingAccountAdmin","SpendingAccountReader","BuyerUserAdmin","BuyerUserReader","UserGroupAdmin","UserGroupReader","ApprovalRuleAdmin","ApprovalRuleReader","PermissionAdmin","OrderAdmin","OrderReader","UnsubmittedOrderReader","MeAdmin","MeXpAdmin","MeAddressAdmin","MeCreditCardAdmin","OverrideUnitPrice","OverrideShipping","OverrideTax","SetSecurityProfile"]}function _setSelected(ListArray,AssignmentsArray){var selected=Underscore.pluck(AssignmentsArray,"ID");angular.forEach(ListArray,function(item){selected.indexOf(item.ID)>-1&&(item.selected=!0)})}var service={AvailableRoles:_availableRoles,SetSelected:_setSelected};return service}SecurityProfilesConfig.$inject=["$stateProvider"],SecurityProfilesController.$inject=["$state","$stateParams","$ocMedia","OrderCloud","OrderCloudParameters","SecurityProfilesList","Parameters"],SecurityProfileAssignmentsController.$inject=["$state","$stateParams","$exceptionHandler","toastr","OrderCloud","AssignmentList","Parameters"],SecurityProfileCreateAssignmentController.$inject=["$scope","$state","$q","$exceptionHandler","$stateParams","Underscore","toastr","OrderCloud","SecurityProfileFactory","UserGroupList","UserList"],SecurityProfileRolesController.$inject=["SelectedSecurityProfile","NonAssignedRoles"],SecurityProfileFactory.$inject=["Underscore"],angular.module("orderCloud").config(SecurityProfilesConfig).controller("SecurityProfilesCtrl",SecurityProfilesController).controller("SecurityProfileAssignmentsCtrl",SecurityProfileAssignmentsController).controller("SecurityProfileCreateAssignmentCtrl",SecurityProfileCreateAssignmentController).controller("SecurityProfileRolesCtrl",SecurityProfileRolesController).factory("SecurityProfileFactory",SecurityProfileFactory)}(),function(){"use strict";function RegistrationConfig($stateProvider){$stateProvider.state("registration",{parent:"base",url:"/registration",templateUrl:"registration/templates/registration.tpl.html",controller:"RegistrationCtrl",controllerAs:"registration",data:{componentName:"Registration"}})}function RegistrationController($state,$stateParams,$exceptionHandler,toastr,OrderCloud,LoginService){var vm=this;vm.user={Active:!0},vm.credentials={Username:null,Password:null},vm.token=$stateParams.token,vm.form=vm.token?"reset":"login",vm.loginFormHeaders={login:"Login",forgot:"Forgot Password",verificationCodeSuccess:"Forgot Password",reset:"Reset Password",resetSuccess:"Reset Password"},vm.setForm=function(form){vm.form=form},vm.register=function(){vm.user.TermsAccepted=new Date,OrderCloud.Me.CreateFromTempUser(vm.user,OrderCloud.Auth.ReadToken()).then(function(token){OrderCloud.Auth.SetToken(token.access_token),$state.go("home",{},{reload:!0}),toastr.success("Registration Successful","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.login=function(){var tempUserToken=angular.copy(OrderCloud.Auth.ReadToken());OrderCloud.Auth.GetToken(vm.credentials).then(function(data){OrderCloud.Auth.SetToken(data.access_token),OrderCloud.Orders.TransferTempUserOrder(tempUserToken).then(function(data){console.log(data)})["finally"](function(){$state.go("home",{},{reload:!0})})})["catch"](function(ex){$exceptionHandler(ex)})},vm.forgotPassword=function(){LoginService.SendVerificationCode(vm.credentials.Email).then(function(){vm.setForm("verificationCodeSuccess"),vm.credentials.Email=null})["catch"](function(ex){$exceptionHandler(ex)})},vm.resetPassword=function(){LoginService.ResetPassword(vm.credentials,vm.token).then(function(){vm.setForm("resetSuccess"),vm.token=null,vm.credentials.ResetUsername=null,vm.credentials.NewPassword=null,vm.credentials.ConfirmPassword=null})["catch"](function(ex){$exceptionHandler(ex),vm.credentials.ResetUsername=null,vm.credentials.NewPassword=null,vm.credentials.ConfirmPassword=null})}}RegistrationConfig.$inject=["$stateProvider"],RegistrationController.$inject=["$state","$stateParams","$exceptionHandler","toastr","OrderCloud","LoginService"],angular.module("orderCloud").config(RegistrationConfig).controller("RegistrationCtrl",RegistrationController)}(),function(){"use strict";function ShipmentsConfig($stateProvider){$stateProvider.state("shipments",{parent:"base",templateUrl:"shipments/templates/shipments.tpl.html",controller:"ShipmentsCtrl",controllerAs:"shipments",url:"/shipments?search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Shipments"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],ShipmentList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.Shipments.List(Parameters.orderID,Parameters.search,Parameters.page,Parameters.pageSize)}]}}).state("shipments.edit",{url:"/:shipmentid/edit",templateUrl:"shipments/templates/shipmentEdit.tpl.html",controller:"ShipmentEditCtrl",controllerAs:"shipmentEdit",resolve:{SelectedShipment:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Shipments.Get($stateParams.shipmentid)}],OrderList:["OrderCloud","SelectedShipment",function(OrderCloud,SelectedShipment){return OrderCloud.Orders.ListIncoming(null,null,SelectedShipment.Items[0].OrderID)}]}}).state("shipments.create",{url:"/create",templateUrl:"shipments/templates/shipmentCreate.tpl.html",controller:"ShipmentCreateCtrl",controllerAs:"shipmentCreate",resolve:{OrderList:["OrderCloud",function(OrderCloud){return OrderCloud.Orders.ListIncoming()}]}})}function ShipmentsController($state,$ocMedia,OrderCloud,OrderCloudParameters,ShipmentList,Parameters){var vm=this;vm.list=ShipmentList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.Shipments(Parameters.from,Parameters.to,Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function ShipmentEditController($exceptionHandler,$state,OrderCloud,SelectedShipment,OrderList,toastr,Parameters){function PagingFunction(){OrderCloud.LineItems.List(vm.OrderSelected,vm.lineitems.list.Meta.Page+1,vm.lineitems.list.Meta.PageSize)}var vm=this,shipmentid=SelectedShipment.ID;vm.ShipmentID=SelectedShipment.ID,vm.shipment=SelectedShipment,vm.list=OrderList,vm.parameters=Parameters,vm.OrderSelected=!1,vm.lineitems={pagingfunction:PagingFunction,list:[]},null!=vm.shipment.DateShipped&&(vm.shipment.DateShipped=new Date(vm.shipment.DateShipped)),vm.goToLineItems=function(order){vm.OrderSelected=order.ID,OrderCloud.LineItems.List(vm.OrderSelected,null,1,20).then(function(data){vm.lineitems.list=data,angular.forEach(vm.lineitems.list.Items,function(li){angular.forEach(vm.shipment.Items,function(shipli){shipli.LineItemId===li.ID&&(li.addToShipment=!0,li.disabled=!0)})})})},vm.unselectOrder=function(){vm.OrderSelected=!1,vm.lineitems.list=[]},vm.deleteLineItem=function(index){vm.shipment.Items.splice(index,1),OrderCloud.Shipments.Patch(shipmentid,{Items:vm.shipment.Items}),vm.lineitems.list.Items&&(vm.lineitems.list.Items[index].addToShipment=!1,vm.lineitems.list.Items[index].disabled=!1)},vm.Submit=function(){angular.forEach(vm.lineitems.list.Items,function(li){li.addToShipment&&!li.disabled&&vm.shipment.Items.push({OrderID:vm.OrderSelected,LineItemId:li.ID,QuantityShipped:li.QuantityShipped})}),OrderCloud.Shipments.Update(shipmentid,vm.shipment).then(function(){$state.go("shipments",{},{reload:!0}),toastr.success("Shipment Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.Delete=function(){OrderCloud.Shipments.Delete(shipmentid,!1).then(function(){$state.go("shipments",{},{reload:!0}),toastr.success("Shipment Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function ShipmentCreateController($exceptionHandler,$state,OrderCloud,OrderList,toastr){var vm=this;vm.shipment={},vm.list=OrderList,vm.OrderSelected=!1,vm.shipment.Items=[],vm.lineitems={},vm.lineitems.list=[],vm.orderID,vm.goToLineItems=function(order){vm.orderID=order.ID,OrderCloud.LineItems.List(order.ID,null,1,20).then(function(data){vm.lineitems.list=data,vm.OrderSelected=!0})["catch"](function(ex){$exceptionHandler(ex)})},vm.unselectOrder=function(){vm.OrderSelected=!1,vm.lineitems.list=[]},vm.Submit=function(){angular.forEach(vm.lineitems.list.Items,function(li){li.addToShipment&&vm.shipment.Items.push({OrderID:vm.orderID,LineItemId:li.ID,QuantityShipped:li.QuantityShipped})}),OrderCloud.Shipments.Create(vm.shipment).then(function(){$state.go("shipments",{},{reload:!0}),toastr.success("Shipment Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}ShipmentsConfig.$inject=["$stateProvider"],ShipmentsController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","ShipmentList","Parameters"],ShipmentEditController.$inject=["$exceptionHandler","$state","OrderCloud","SelectedShipment","OrderList","toastr","Parameters"],ShipmentCreateController.$inject=["$exceptionHandler","$state","OrderCloud","OrderList","toastr"],angular.module("orderCloud").config(ShipmentsConfig).controller("ShipmentsCtrl",ShipmentsController).controller("ShipmentEditCtrl",ShipmentEditController).controller("ShipmentCreateCtrl",ShipmentCreateController)}(),function(){"use strict";function PromotionsConfig($stateProvider){$stateProvider.state("promotions",{parent:"base",templateUrl:"promotions/templates/promotions.tpl.html",controller:"PromotionsCtrl",controllerAs:"promotions",url:"/promotions?search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Promotions"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],PromotionList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.Promotions.List(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters)}]}}).state("promotions.edit",{url:"/:promotionid/edit",templateUrl:"promotions/templates/promotionEdit.tpl.html",controller:"PromotionEditCtrl",controllerAs:"promotionEdit",resolve:{SelectedPromotion:["$q","$stateParams","OrderCloud",function($q,$stateParams,OrderCloud){var d=$q.defer();return OrderCloud.Promotions.Get($stateParams.promotionid).then(function(promotion){null!=promotion.StartDate&&(promotion.StartDate=new Date(promotion.StartDate)),null!=promotion.ExpirationDate&&(promotion.ExpirationDate=new Date(promotion.ExpirationDate)),d.resolve(promotion)}),d.promise}]}}).state("promotions.create",{url:"/create",templateUrl:"promotions/templates/promotionCreate.tpl.html",controller:"PromotionCreateCtrl",controllerAs:"promotionCreate"}).state("promotions.assignGroup",{url:"/:promotionid/assign",templateUrl:"promotions/templates/promotionAssignGroup.tpl.html",controller:"PromotionAssignGroupCtrl",controllerAs:"promotionAssignGroup",resolve:{UserGroupList:["OrderCloud",function(OrderCloud){return OrderCloud.UserGroups.List()}],AssignedUserGroups:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Promotions.ListAssignments($stateParams.promotionid,null,null,"Group")}],SelectedPromotion:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Promotions.Get($stateParams.promotionid)}]}}).state("promotions.assignUser",{url:"/:promotionid/assign/user",templateUrl:"promotions/templates/promotionAssignUser.tpl.html",controller:"PromotionAssignUserCtrl",controllerAs:"promotionAssignUser",resolve:{UserList:["OrderCloud",function(OrderCloud){return OrderCloud.Users.List()}],AssignedUsers:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Promotions.ListAssignments($stateParams.promotionid,null,null,"User")}],SelectedPromotion:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Promotions.Get($stateParams.promotionid)}]}})}function PromotionsController($state,$ocMedia,OrderCloud,OrderCloudParameters,PromotionList,Parameters){var vm=this;vm.list=PromotionList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.Promotions.List(parameters.search,vm.list.Meta.Page+1,parameters.pageSize||vm.list.Meta.PageSize,parameters.searchOn,parameters.sortBy,parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function PromotionEditController($exceptionHandler,$state,$scope,toastr,OrderCloud,OrderCloudExpressions,SelectedPromotion){function updateEligibleExpression(conditions){vm.promotion.xp.OverrideEligibleExpression||(vm.promotion.EligibleExpression=OrderCloudExpressions.TranslateEligibleExpression(conditions))}function updateValueExpression(conditions){vm.promotion.xp.OverrideValueExpression||(vm.promotion.ValueExpression=OrderCloudExpressions.TranslateValueExpression(conditions))}var vm=this,promotionid=SelectedPromotion.ID;vm.promotionName=SelectedPromotion.Name,vm.promotion=SelectedPromotion,vm.expressionObjects=OrderCloudExpressions.Objects(),vm.expressionProperties=OrderCloudExpressions.Properties(),vm.expressionFunctions=OrderCloudExpressions.Functions(),vm.expressionComparisonOperators=OrderCloudExpressions.ComparisonOperators(),vm.expressionArithmeticOperators=OrderCloudExpressions.ArithmeticOperators(),vm.promotion.xp.OverrideEligibleExpression||(vm.eligibleConditions=vm.promotion.xp.EligibleConditions),vm.promotion.xp.OverrideValueExpression||(vm.valueConditions=vm.promotion.xp.ValueConditions),vm.overrideEligibleExpression=function(){vm.promotion.xp.OverrideEligibleExpression=!vm.promotion.xp.OverrideEligibleExpression,vm.eligibleConditions=[]},vm.overrideValueExpression=function(){vm.promotion.xp.OverrideValueExpression=!vm.promotion.xp.OverrideValueExpression,vm.valueConditions=[]},vm.addEligibleCondition=function(logicalOperator){logicalOperator&&vm.eligibleConditions.push({Value:logicalOperator,LogicalOperator:!0}),vm.eligibleConditions.push({Object:null,Function:null,Property:null,XPProperty:null,ItemConditions:[{Property:null,XPProperty:null,Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1}],Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1})},vm.addValueCondition=function(conditionOperator){conditionOperator&&vm.valueConditions.push({Value:conditionOperator,ConditionOperator:!0}),vm.valueConditions.push({Object:null,Function:null,Property:null,XPProperty:null,ItemConditions:[{Property:null,XPProperty:null,Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1}],Operator:null,Value:null,ValueType:"Number",ConditionOperator:!1})},vm.removeEligibleCondition=function(index){vm.eligibleConditions.splice(index-1,2)},vm.removeValueCondition=function(index){vm.valueConditions.splice(index-1,2)},vm.updateEligibleExpressionObject=function(index){vm.eligibleConditions[index].Function=null,vm.eligibleConditions[index].Property=null,vm.eligibleConditions[index].XPProperty=null,vm.eligibleConditions[index].ItemConditions=[{Property:null,XPProperty:null,Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1}],vm.eligibleConditions[index].Operator=null,vm.eligibleConditions[index].Value=null,vm.eligibleConditions[index].ValueType="String",vm.eligibleConditions[index].LogicalOperator=!1,vm.eligibleConditions[index].DatePickerOpen=!1},vm.updateValueExpressionObject=function(index){vm.valueConditions[index].Function=null,vm.valueConditions[index].Property=null,vm.valueConditions[index].XPProperty=null,vm.valueConditions[index].ItemConditions=[{Property:null,XPProperty:null,Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1}],vm.valueConditions[index].Value=null,vm.valueConditions[index].ValueType="Number",vm.valueConditions[index].ConditionOperator=!1},vm.addEligibleConditionItemCondition=function(logicalOperator,parentIndex){logicalOperator&&vm.eligibleConditions[parentIndex].ItemConditions.push({Value:logicalOperator,LogicalOperator:!0}),vm.eligibleConditions[parentIndex].ItemConditions.push({Property:null,XPProperty:null,Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1})},vm.addValueConditionItemCondition=function(logicalOperator,parentIndex){logicalOperator&&vm.valueConditions[parentIndex].ItemConditions.push({Value:logicalOperator,LogicalOperator:!0}),vm.valueConditions[parentIndex].ItemConditions.push({Property:null,XPProperty:null,Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1})},vm.removeEligibleConditionItemCondition=function(parentIndex,index){vm.eligibleConditions[parentIndex].ItemConditions.splice(index-1,2)},vm.removeValueConditionItemCondition=function(parentIndex,index){vm.valueConditions[parentIndex].ItemConditions.splice(index-1,2);
},vm.changeEligibleConditionValueType=function(type,index){vm.eligibleConditions[index].ValueType=type,vm.eligibleConditions[index].Value=null},vm.changeEligibleConditionItemConditionValueType=function(type,parentIndex,index){vm.eligibleConditions[parentIndex].ItemConditions[index].ValueType=type,vm.eligibleConditions[parentIndex].ItemConditions[index].Value=null},vm.changeValueConditionItemConditionValueType=function(type,parentIndex,index){vm.valueConditions[parentIndex].ItemConditions[index].ValueType=type,vm.valueConditions[parentIndex].ItemConditions[index].Value=null},vm.openEligibleConditionDate=function(index){angular.forEach(vm.eligibleConditions,function(condition){condition.DatePickerOpen=!1}),vm.eligibleConditions[index].DatePickerOpen=!0},vm.openEligibleConditionItemConditionDate=function(parentIndex,index){angular.forEach(vm.eligibleConditions,function(condition){angular.forEach(condition.ItemConditions,function(ic){ic.DatePickerOpen=!1})}),vm.eligibleConditions[parentIndex].ItemConditions[index].DatePickerOpen=!0},vm.openValueConditionItemConditionDate=function(parentIndex,index){angular.forEach(vm.valueConditions,function(condition){angular.forEach(condition.ItemConditions,function(ic){ic.DatePickerOpen=!1})}),vm.valueConditions[parentIndex].ItemConditions[index].DatePickerOpen=!0},$scope.$watch(function(){return vm.eligibleConditions},function(conditions){updateEligibleExpression(conditions)},!0),$scope.$watch(function(){return vm.valueConditions},function(conditions){updateValueExpression(conditions)},!0),vm.Submit=function(){OrderCloud.Promotions.Update(promotionid,vm.promotion).then(function(){$state.go("promotions",{},{reload:!0}),toastr.success("Promotion Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.Delete=function(){OrderCloud.Promotions.Delete(promotionid).then(function(){$state.go("promotions",{},{reload:!0}),toastr.success("Promotion Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function PromotionCreateController($exceptionHandler,$state,$scope,toastr,OrderCloud,OrderCloudExpressions){function updateEligibleExpression(conditions){vm.promotion.xp.OverrideEligibleExpression||(vm.promotion.EligibleExpression=OrderCloudExpressions.TranslateEligibleExpression(conditions))}function updateValueExpression(conditions){vm.promotion.xp.OverrideValueExpression||(vm.promotion.ValueExpression=OrderCloudExpressions.TranslateValueExpression(conditions))}var vm=this;vm.promotion={xp:{}},vm.expressionObjects=OrderCloudExpressions.Objects(),vm.expressionProperties=OrderCloudExpressions.Properties(),vm.expressionFunctions=OrderCloudExpressions.Functions(),vm.expressionComparisonOperators=OrderCloudExpressions.ComparisonOperators(),vm.expressionArithmeticOperators=OrderCloudExpressions.ArithmeticOperators(),vm.eligibleConditions=[],vm.valueConditions=[],vm.overrideEligibleExpression=function(){vm.promotion.xp.OverrideEligibleExpression=!vm.promotion.xp.OverrideEligibleExpression,vm.eligibleConditions=[]},vm.overrideValueExpression=function(){vm.promotion.xp.OverrideValueExpression=!vm.promotion.xp.OverrideValueExpression,vm.valueConditions=[]},vm.addEligibleCondition=function(logicalOperator){logicalOperator&&vm.eligibleConditions.push({Value:logicalOperator,LogicalOperator:!0}),vm.eligibleConditions.push({Object:null,Function:null,Property:null,XPProperty:null,ItemConditions:[{Property:null,XPProperty:null,Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1}],Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1})},vm.addValueCondition=function(conditionOperator){conditionOperator&&vm.valueConditions.push({Value:conditionOperator,ConditionOperator:!0}),vm.valueConditions.push({Object:null,Function:null,Property:null,XPProperty:null,ItemConditions:[{Property:null,XPProperty:null,Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1}],Operator:null,Value:null,ValueType:"Number",ConditionOperator:!1})},vm.removeEligibleCondition=function(index){vm.eligibleConditions.splice(index-1,2)},vm.removeValueCondition=function(index){vm.valueConditions.splice(index-1,2)},vm.updateEligibleExpressionObject=function(index){vm.eligibleConditions[index].Function=null,vm.eligibleConditions[index].Property=null,vm.eligibleConditions[index].XPProperty=null,vm.eligibleConditions[index].ItemConditions=[{Property:null,XPProperty:null,Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1}],vm.eligibleConditions[index].Operator=null,vm.eligibleConditions[index].Value=null,vm.eligibleConditions[index].ValueType="String",vm.eligibleConditions[index].LogicalOperator=!1,vm.eligibleConditions[index].DatePickerOpen=!1},vm.updateValueExpressionObject=function(index){vm.valueConditions[index].Function=null,vm.valueConditions[index].Property=null,vm.valueConditions[index].XPProperty=null,vm.valueConditions[index].ItemConditions=[{Property:null,XPProperty:null,Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1}],vm.valueConditions[index].Value=null,vm.valueConditions[index].ValueType="Number",vm.valueConditions[index].ConditionOperator=!1},vm.addEligibleConditionItemCondition=function(logicalOperator,parentIndex){logicalOperator&&vm.eligibleConditions[parentIndex].ItemConditions.push({Value:logicalOperator,LogicalOperator:!0}),vm.eligibleConditions[parentIndex].ItemConditions.push({Property:null,XPProperty:null,Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1})},vm.addValueConditionItemCondition=function(logicalOperator,parentIndex){logicalOperator&&vm.valueConditions[parentIndex].ItemConditions.push({Value:logicalOperator,LogicalOperator:!0}),vm.valueConditions[parentIndex].ItemConditions.push({Property:null,XPProperty:null,Operator:null,Value:null,ValueType:"String",LogicalOperator:!1,DatePickerOpen:!1})},vm.removeEligibleConditionItemCondition=function(parentIndex,index){vm.eligibleConditions[parentIndex].ItemConditions.splice(index-1,2)},vm.removeValueConditionItemCondition=function(parentIndex,index){vm.valueConditions[parentIndex].ItemConditions.splice(index-1,2)},vm.changeEligibleConditionValueType=function(type,index){vm.eligibleConditions[index].ValueType=type,vm.eligibleConditions[index].Value=null},vm.changeEligibleConditionItemConditionValueType=function(type,parentIndex,index){vm.eligibleConditions[parentIndex].ItemConditions[index].ValueType=type,vm.eligibleConditions[parentIndex].ItemConditions[index].Value=null},vm.changeValueConditionItemConditionValueType=function(type,parentIndex,index){vm.valueConditions[parentIndex].ItemConditions[index].ValueType=type,vm.valueConditions[parentIndex].ItemConditions[index].Value=null},vm.openEligibleConditionDate=function(index){angular.forEach(vm.eligibleConditions,function(condition){condition.DatePickerOpen=!1}),vm.eligibleConditions[index].DatePickerOpen=!0},vm.openEligibleConditionItemConditionDate=function(parentIndex,index){angular.forEach(vm.eligibleConditions,function(condition){angular.forEach(condition.ItemConditions,function(ic){ic.DatePickerOpen=!1})}),vm.eligibleConditions[parentIndex].ItemConditions[index].DatePickerOpen=!0},vm.openValueConditionItemConditionDate=function(parentIndex,index){angular.forEach(vm.valueConditions,function(condition){angular.forEach(condition.ItemConditions,function(ic){ic.DatePickerOpen=!1})}),vm.valueConditions[parentIndex].ItemConditions[index].DatePickerOpen=!0},$scope.$watch(function(){return vm.eligibleConditions},function(conditions){updateEligibleExpression(conditions)},!0),$scope.$watch(function(){return vm.valueConditions},function(conditions){updateValueExpression(conditions)},!0),vm.Submit=function(){vm.promotion.xp.OverrideEligibleExpression||(vm.promotion.xp.EligibleConditions=vm.eligibleConditions),vm.promotion.xp.OverrideValueExpression||(vm.promotion.xp.ValueConditions=vm.valueConditions),OrderCloud.Promotions.Create(vm.promotion).then(function(){$state.go("promotions",{},{reload:!0}),toastr.success("Promotion Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function PromotionAssignGroupController($scope,toastr,UserGroupList,AssignedUserGroups,SelectedPromotion,PromotionAssignment){function SaveAssignments(){return toastr.success("Assignment Updated","Success"),PromotionAssignment.SaveAssignments(vm.promotion.ID,vm.list.Items,vm.assignments.Items)}function PagingFunction(){return PromotionAssignment.Paging(vm.promotion.ID,vm.list,vm.assignments)}var vm=this;vm.list=UserGroupList,vm.assignments=AssignedUserGroups,vm.promotion=SelectedPromotion,vm.pagingfunction=PagingFunction,vm.saveAssignments=SaveAssignments,$scope.$watchCollection(function(){return vm.list},function(){PromotionAssignment.SetSelected(vm.list.Items,vm.assignments.Items)})}function PromotionAssignUserController($scope,toastr,Paging,UserList,AssignedUsers,SelectedPromotion,PromotionAssignment){function SaveAssignments(){return toastr.success("Assignment Updated","Success"),PromotionAssignment.SaveAssignments(vm.promotion.ID,vm.list.Items,vm.assignments.Items,"User")}function PagingFunction(){return PromotionAssignment.Paging(vm.promotion.ID,vm.list,vm.assignments,"User")}var vm=this;vm.list=UserList,vm.assignments=AssignedUsers,vm.promotion=SelectedPromotion,vm.pagingfunction=PagingFunction,vm.saveAssignments=SaveAssignments,$scope.$watchCollection(function(){return vm.list},function(){Paging.SetSelected(vm.list.Items,vm.assignments.Items,"UserID")}),$scope.$watchCollection(function(){return vm.list},function(){PromotionAssignment.SetSelected(vm.list.Items,vm.assignments.Items,"User")})}function PromotionAssignment($q,$state,$injector,Underscore,OrderCloud,Assignments){function _saveAssignments(PromotionID,List,AssignmentList,Party){var PartyID="User"===Party?"UserID":"UserGroupID",toAdd=(Underscore.pluck(AssignmentList,PartyID),Underscore.pluck(Underscore.where(List,{selected:!0}),"ID"),Assignments.GetToAssign(List,AssignmentList,PartyID)),toDelete=Assignments.GetToDelete(List,AssignmentList,PartyID),queue=[],dfd=$q.defer();return angular.forEach(List,function(item){toAdd.indexOf(item.ID)>-1&&saveAndUpdate(queue,PromotionID,item,Party)}),angular.forEach(toDelete,function(itemID){"User"===Party?queue.push(OrderCloud.Promotions.DeleteAssignment(PromotionID,itemID,null)):queue.push(OrderCloud.Promotions.DeleteAssignment(PromotionID,null,itemID))}),$q.all(queue).then(function(){dfd.resolve(),$state.reload($state.current)}),dfd.promise}function saveAndUpdate(queue,PromotionID,item,Party){var assignment={PromotionID:PromotionID,UserID:null,UserGroupID:null};"User"===Party?assignment.UserID=item.ID:assignment.UserGroupID=item.ID,queue.push(OrderCloud.Promotions.SaveAssignment(assignment))}function _setSelected(List,AssignmentList,Party){var PartyID="User"===Party?"UserID":"UserGroupID",assigned=Assignments.GetAssigned(AssignmentList,PartyID);angular.forEach(List,function(item){assigned.indexOf(item.ID)>-1&&(item.selected=!0)})}function _paging(PromotionID,OrderCloud,ListObjects,AssignmentObjects,Party){var ServiceName="User"===Party?"Users":"UserGroups",Level="User"===Party?"User":"Group",Service=$injector.get(ServiceName);if(ListObjects.Meta.Page<ListObjects.Meta.TotalPages){var queue=[],dfd=$q.defer();return queue.push(Service.List(null,ListObjects.Meta.Page+1,ListObjects.Meta.PageSize)),AssignmentObjects.Meta.Page<AssignmentObjects.Meta.TotalPages&&queue.push(OrderCloud.Promotions.ListAssignments(PromotionID,null,null,Level,AssignmentObjects.Meta.Page+1,AssignmentObjects.Meta.PageSize)),$q.all(queue).then(function(results){dfd.resolve(),ListObjects.Meta=results[0].Meta,ListObjects.Items=[].concat(ListObjects.Items,results[0].Items),results[1]&&(AssignmentObjects.Meta=results[1].Meta,AssignmentObjects.Items=[].concat(AssignmentObjects.Items,results[1].Items)),_setSelected(ListObjects.Items,AssignmentObjects.Items,Party)}),dfd.promise}return null}return{SaveAssignments:_saveAssignments,SetSelected:_setSelected,Paging:_paging}}function PromotionInputController($scope,$state,toastr,OrderCloud){var vm=this;vm.Submit=function(){OrderCloud.Orders.AddPromotion($scope.order.ID,vm.code).then(function(promo){$state.reload(),toastr.success(promo.Name+" has been added.","Success")})["catch"](function(ex){toastr.error(ex.data.Errors[0].Message,"Error"),vm.code=null})}}function OrdercloudPromotionInputDirective(){return{restrict:"E",scope:{order:"=",orderpromotions:"="},replace:!0,templateUrl:"promotions/templates/promotion-input.tpl.html",controller:"PromotionInputCtrl",controllerAs:"promotionInput"}}function RemovePromotionController($scope,$state,toastr,OrderCloud){var vm=this;vm.Remove=function(){OrderCloud.Orders.RemovePromotion($scope.order.ID,$scope.promotion.Code).then(function(){$state.reload()})["catch"](function(ex){toastr.error(ex.data.Errors[0].Message,"Error")})}}function OrdercloudRemovePromotionDirective(){return{restrict:"E",scope:{order:"=",promotion:"="},replace:!0,templateUrl:"promotions/templates/remove-promotion.tpl.html",controller:"RemovePromotionCtrl",controllerAs:"removePromotion"}}function OrderCloudExpressionsService($filter){function _objects(){return[{Name:"Order",Value:"order"},{Name:"Line Items",Value:"items"}]}function _properties(){return[{Name:"Billing Address ID",Value:"BillingAddressID",Type:"order",EligibleExpression:!0,ValueExpression:!1},{Name:"Date Created",Value:"DateCreated",Type:"order",EligibleExpression:!0,ValueExpression:!1},{Name:"Line Item Count",Value:"LineItemCount",Type:"order",EligibleExpression:!0,ValueExpression:!0},{Name:"Subtotal",Value:"Subtotal",Type:"order",EligibleExpression:!0,ValueExpression:!0},{Name:"Shipping Cost",Value:"ShippingCost",Type:"order",EligibleExpression:!0,ValueExpression:!0},{Name:"Total",Value:"Total",Type:"order",EligibleExpression:!0,ValueExpression:!0},{Name:"Extended Property",Value:"xp",Type:"order",EligibleExpression:!0,ValueExpression:!0},{Name:"Product ID",Value:"ProductID",Type:"items",EligibleExpression:!0,ValueExpression:!0},{Name:"Quantity",Value:"Quantity",Type:"items",EligibleExpression:!0,ValueExpression:!0},{Name:"Line Total",Value:"LineTotal",Type:"items",EligibleExpression:!0,ValueExpression:!0},{Name:"Shipping Address ID",Value:"ShippingAddressID",Type:"items",EligibleExpression:!0,ValueExpression:!0},{Name:"Extended Property",Value:"xp",Type:"items",EligibleExpression:!0,ValueExpression:!0}]}function _functions(){return[{Name:"Any",Value:"any",EligibleExpression:!0,ValueExpression:!1},{Name:"All",Value:"all",EligibleExpression:!0,ValueExpression:!1},{Name:"Quantity",Value:"quantity",EligibleExpression:!0,ValueExpression:!0},{Name:"Total",Value:"total",EligibleExpression:!0,ValueExpression:!0}]}function _comparisonOperators(){return["=",">",">=","<","<="]}function _arithmeticOperators(){return["+","-","*","/"]}function _translateEligibleExpression(conditions){var result="";return angular.forEach(conditions,function(condition){if(condition.LogicalOperator)result+=" "+condition.Value+" ";else if(result+=condition.Object?condition.Object:"",condition.Object&&"order"==condition.Object){if(result+=condition.Property?"."+condition.Property:"",result+=condition.Property&&"xp"==condition.Property?"."+(condition.XPProperty?condition.XPProperty:""):"",result+=condition.Operator?" "+condition.Operator:"",angular.isDefined(condition.Value)&&null!=condition.Value)switch(result+=" ",condition.ValueType){case"String":result+="'"+condition.Value.replace(/['"]/g,"")+"'";break;case"Number":result+=condition.Value;break;case"Date":result+="#"+$filter("date")(condition.Value,"shortDate")+"#"}}else if(condition.Object&&"items"==condition.Object&&(result+=condition.Function?"."+condition.Function+(condition.ItemConditions[0].Property?"":"()"):"",condition.ItemConditions[0].Property&&(result+="(",angular.forEach(condition.ItemConditions,function(c){if(c.LogicalOperator)result+=" "+c.Value+" ";else if(result+=c.Property?c.Property:"",result+=c.Property&&"xp"==c.Property?"."+(c.XPProperty?c.XPProperty:""):"",result+=c.Operator?" "+c.Operator+" ":"",angular.isDefined(c.Value)&&null!=c.Value)switch(c.ValueType){case"String":result+="'"+c.Value.replace(/['"]/g,"")+"'";break;case"Number":result+=c.Value;break;case"Date":result+="#"+$filter("date")(c.Value,"shortDate")+"#"}}),result+=")"),result+=condition.Operator?" "+condition.Operator:"",angular.isDefined(condition.Value)&&null!=condition.Value))switch(result+=" ",condition.ValueType){case"String":result+="'"+condition.Value.replace(/['"]/g,"")+"'";break;case"Number":result+=condition.Value;break;case"Date":result+="#"+$filter("date")(condition.Value,"shortDate")+"#"}}),result}function _translateValueExpression(conditions){var result="";return angular.forEach(conditions,function(condition,index){var parentheses=conditions[index-1]&&conditions[index-1].ConditionOperator||conditions[index+1]&&conditions[index+1].ConditionOperator;condition.ConditionOperator?result+=" "+condition.Value+" ":(result+=parentheses?"(":"",result+=condition.Object?condition.Object:"",condition.Object&&"order"==condition.Object?(result+=condition.Property?"."+condition.Property:"",result+=condition.Property&&"xp"==condition.Property?"."+(condition.XPProperty?condition.XPProperty:""):"",result+=condition.Operator?" "+condition.Operator:"",result+=angular.isDefined(condition.Value)&&null!=condition.Value?" "+condition.Value:""):condition.Object&&"items"==condition.Object?(result+=condition.Function?"."+condition.Function+(condition.ItemConditions[0].Property?"":"()"):"",condition.ItemConditions[0].Property&&(result+="(",angular.forEach(condition.ItemConditions,function(c){if(c.LogicalOperator)result+=" "+c.Value+" ";else if(result+=c.Property?c.Property:"",result+=c.Property&&"xp"==c.Property?"."+(c.XPProperty?c.XPProperty:""):"",result+=c.Operator?" "+c.Operator+" ":"",angular.isDefined(c.Value)&&null!=c.Value)switch(c.ValueType){case"String":result+="'"+c.Value.replace(/['"]/g,"")+"'";break;case"Number":result+=c.Value;break;case"Date":result+="#"+$filter("date")(c.Value,"shortDate")+"#"}}),result+=")")):angular.isDefined(condition.Value)&&null!=condition.Value&&(result+=condition.Value),result+=parentheses?")":"")}),result}var service={Objects:_objects,Properties:_properties,Functions:_functions,ComparisonOperators:_comparisonOperators,ArithmeticOperators:_arithmeticOperators,TranslateEligibleExpression:_translateEligibleExpression,TranslateValueExpression:_translateValueExpression};return service}function promotionproperties(){return function(properties,type,object){var result=[];return angular.forEach(properties,function(property){switch(type){case"eligible":property.EligibleExpression&&property.Type==object&&result.push(property);break;case"value":property.ValueExpression&&property.Type==object&&result.push(property)}}),result}}function promotionfunctions(){return function(functions,type){var result=[];return angular.forEach(functions,function(fn){"eligible"==type&&fn.EligibleExpression&&result.push(fn),"value"==type&&fn.ValueExpression&&result.push(fn)}),result}}function comparisonoperators(){return function(operators,property){if(property){var map={BillingAddressID:["="],DateCreated:["=",">",">=","<","<="],LineItemCount:["=",">",">=","<","<="],Subtotal:["=",">",">=","<","<="],ShippingCost:["=",">",">=","<","<="],Total:["=",">",">=","<","<="],xp:["=",">",">=","<","<="],ProductID:["="],Quantity:["=",">",">=","<","<="],LineTotal:["=",">",">=","<","<="],ShippingAddressID:["="],any:[],all:[],quantity:["=",">",">=","<","<="],total:["=",">",">=","<","<="]},result=[];return angular.forEach(operators,function(operator){map[property].indexOf(operator)>-1&&result.push(operator)}),result}}}PromotionsConfig.$inject=["$stateProvider"],PromotionsController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","PromotionList","Parameters"],PromotionEditController.$inject=["$exceptionHandler","$state","$scope","toastr","OrderCloud","OrderCloudExpressions","SelectedPromotion"],PromotionCreateController.$inject=["$exceptionHandler","$state","$scope","toastr","OrderCloud","OrderCloudExpressions"],PromotionAssignGroupController.$inject=["$scope","toastr","UserGroupList","AssignedUserGroups","SelectedPromotion","PromotionAssignment"],PromotionAssignUserController.$inject=["$scope","toastr","Paging","UserList","AssignedUsers","SelectedPromotion","PromotionAssignment"],PromotionAssignment.$inject=["$q","$state","$injector","Underscore","OrderCloud","Assignments"],PromotionInputController.$inject=["$scope","$state","toastr","OrderCloud"],RemovePromotionController.$inject=["$scope","$state","toastr","OrderCloud"],OrderCloudExpressionsService.$inject=["$filter"],angular.module("orderCloud").config(PromotionsConfig).controller("PromotionsCtrl",PromotionsController).controller("PromotionEditCtrl",PromotionEditController).controller("PromotionCreateCtrl",PromotionCreateController).controller("PromotionAssignGroupCtrl",PromotionAssignGroupController).controller("PromotionAssignUserCtrl",PromotionAssignUserController).factory("PromotionAssignment",PromotionAssignment).controller("PromotionInputCtrl",PromotionInputController).directive("ordercloudPromotionInput",OrdercloudPromotionInputDirective).controller("RemovePromotionCtrl",RemovePromotionController).directive("ordercloudRemovePromotion",OrdercloudRemovePromotionDirective).factory("OrderCloudExpressions",OrderCloudExpressionsService).filter("promotionproperties",promotionproperties).filter("promotionfunctions",promotionfunctions).filter("comparisonoperators",comparisonoperators)}(),function(){"use strict";function PriceSchedulesConfig($stateProvider){$stateProvider.state("priceSchedules",{parent:"base",url:"/priceschedules?search&page&pageSize&sortBy&searchOn&filters",templateUrl:"priceSchedules/templates/priceSchedules.tpl.html",controller:"PriceSchedulesCtrl",controllerAs:"priceSchedules",data:{componentName:"Price Schedules"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],PriceScheduleList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.PriceSchedules.List(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters)}]}}).state("priceSchedules.edit",{url:"/:pricescheduleid/edit",templateUrl:"priceSchedules/templates/priceScheduleEdit.tpl.html",controller:"PriceScheduleEditCtrl",controllerAs:"priceScheduleEdit",resolve:{SelectedPriceSchedule:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.PriceSchedules.Get($stateParams.pricescheduleid)}]}}).state("priceSchedules.create",{url:"/create",templateUrl:"priceSchedules/templates/priceScheduleCreate.tpl.html",controller:"PriceScheduleCreateCtrl",controllerAs:"priceScheduleCreate"})}function PriceSchedulesController($state,$ocMedia,OrderCloud,OrderCloudParameters,PriceScheduleList,Parameters){var vm=this;vm.list=PriceScheduleList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.PriceSchedules.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function PriceScheduleEditController($scope,$exceptionHandler,$state,toastr,OrderCloud,SelectedPriceSchedule,PriceBreak){var vm=this,priceScheduleid=angular.copy(SelectedPriceSchedule.ID);vm.priceScheduleName=angular.copy(SelectedPriceSchedule.Name),vm.priceSchedule=SelectedPriceSchedule,vm.priceSchedule.MinQuantity=1,vm.addPriceBreak=function(){PriceBreak.AddPriceBreak(vm.priceSchedule,vm.price,vm.quantity),vm.quantity=null,vm.price=null},PriceBreak.AddDisplayQuantity(vm.priceSchedule),vm.deletePriceBreak=PriceBreak.DeletePriceBreak,vm.Submit=function(){vm.priceSchedule=PriceBreak.SetMinMax(vm.priceSchedule),OrderCloud.PriceSchedules.Update(priceScheduleid,vm.priceSchedule).then(function(){$state.go("priceSchedules",{},{reload:!0}),toastr.success("Price Schedule Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.Delete=function(){OrderCloud.PriceSchedules.Delete(priceScheduleid).then(function(){$state.go("priceSchedules",{},{reload:!0}),toastr.success("Price Schedule Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})},$scope.$watch(function(){return vm.priceSchedule.RestrictedQuantity},function(value){vm.priceSchedule.RestrictedQuantity?vm.priceHeader="Total Price":vm.priceHeader="Price Per Unit"})}function PriceScheduleCreateController($scope,$exceptionHandler,$state,toastr,OrderCloud,PriceBreak){var vm=this;vm.priceSchedule={},vm.priceSchedule.RestrictedQuantity=!1,vm.priceSchedule.PriceBreaks=[],vm.priceSchedule.MinQuantity=1,vm.priceSchedule.OrderType="Standard",vm.addPriceBreak=function(){PriceBreak.AddPriceBreak(vm.priceSchedule,vm.price,vm.quantity),vm.quantity=null,vm.price=null},vm.deletePriceBreak=PriceBreak.DeletePriceBreak,vm.Submit=function(){vm.priceSchedule=PriceBreak.SetMinMax(vm.priceSchedule),OrderCloud.PriceSchedules.Create(vm.priceSchedule).then(function(){$state.go("priceSchedules",{},{reload:!0}),toastr.success("Price Schedule Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})},$scope.$watch(function(){return vm.priceSchedule.RestrictedQuantity},function(value){vm.priceSchedule.RestrictedQuantity?vm.priceHeader="Total Price":vm.priceHeader="Price Per Unit"})}PriceSchedulesConfig.$inject=["$stateProvider"],PriceSchedulesController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","PriceScheduleList","Parameters"],PriceScheduleEditController.$inject=["$scope","$exceptionHandler","$state","toastr","OrderCloud","SelectedPriceSchedule","PriceBreak"],PriceScheduleCreateController.$inject=["$scope","$exceptionHandler","$state","toastr","OrderCloud","PriceBreak"],angular.module("orderCloud").config(PriceSchedulesConfig).controller("PriceSchedulesCtrl",PriceSchedulesController).controller("PriceScheduleEditCtrl",PriceScheduleEditController).controller("PriceScheduleCreateCtrl",PriceScheduleCreateController)}(),function(){"use strict";function PriceBreakFactory(Underscore,toastr){function _addPriceBreak(priceSchedule,price,quantity){var numberExist=Underscore.findWhere(priceSchedule.PriceBreaks,{Quantity:quantity});return quantity>priceSchedule.MaxQuantity?toastr.error("Max quantity exceeded","Error"):void 0===numberExist?priceSchedule.PriceBreaks.push({Price:price,Quantity:quantity}):toastr.error("Quantity already exists. Please delete and re-enter quantity and price to edit","Error"),displayQuantity(priceSchedule),_setMinMax(priceSchedule)}function _setMinMax(priceSchedule){var quantities=Underscore.pluck(priceSchedule.PriceBreaks,"Quantity");return priceSchedule.MinQuantity=Underscore.min(quantities),priceSchedule.RestrictedQuantity&&(priceSchedule.MaxQuantity=Underscore.max(quantities)),priceSchedule}function _deletePriceBreak(priceSchedule,index){return priceSchedule.PriceBreaks.splice(index,1),_setMinMax(priceSchedule)}function _addDisplayQuantity(priceSchedule){return displayQuantity(priceSchedule),_setMinMax(priceSchedule)}function displayQuantity(priceSchedule){priceSchedule.PriceBreaks.sort(function(a,b){return a.Quantity-b.Quantity});for(var maxQuantity=Math.max.apply(Math,priceSchedule.PriceBreaks.map(function(object){return object.Quantity})),i=0;i<priceSchedule.PriceBreaks.length;i++)if(priceSchedule.PriceBreaks[i].Quantity==maxQuantity)priceSchedule.PriceBreaks[i].displayQuantity=priceSchedule.PriceBreaks[i].Quantity+"+";else{var itemQuantityRange=Underscore.range(priceSchedule.PriceBreaks[i].Quantity,priceSchedule.PriceBreaks[i+1].Quantity);1===itemQuantityRange.length?priceSchedule.PriceBreaks[i].displayQuantity=itemQuantityRange[0]:priceSchedule.PriceBreaks[priceSchedule.PriceBreaks.length-1].Quantity-itemQuantityRange[0]<=1?priceSchedule.PriceBreaks[i].displayQuantity=itemQuantityRange[0]:priceSchedule.PriceBreaks[i].displayQuantity=itemQuantityRange[0]+"-"+itemQuantityRange[itemQuantityRange.length-1]}}var service={AddPriceBreak:_addPriceBreak,SetMinMax:_setMinMax,DeletePriceBreak:_deletePriceBreak,AddDisplayQuantity:_addDisplayQuantity};return service}PriceBreakFactory.$inject=["Underscore","toastr"],angular.module("orderCloud").factory("PriceBreak",PriceBreakFactory)}(),function(){"use strict";function GiftCardsConfig($stateProvider){$stateProvider.state("giftCards",{parent:"base",templateUrl:"giftCards/templates/giftCards.tpl.html",controller:"GiftCardsCtrl",controllerAs:"giftCards",url:"/giftcards?search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Gift Cards"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],GiftCardList:["OrderCloud","Parameters",function(OrderCloud,Parameters){var parameters=angular.copy(Parameters);return parameters.filters?parameters.filters.RedemptionCode="*":parameters.filters={RedemptionCode:"*"},OrderCloud.SpendingAccounts.List(parameters.search,parameters.page,parameters.pageSize||12,parameters.searchOn,parameters.sortBy,parameters.filters)}]}}).state("giftCards.edit",{url:"/:giftcardid/edit",templateUrl:"giftCards/templates/giftCardEdit.tpl.html",controller:"GiftCardEditCtrl",controllerAs:"giftCardEdit",resolve:{SelectedGiftCard:["$q","$stateParams","OrderCloud",function($q,$stateParams,OrderCloud){var d=$q.defer();return OrderCloud.SpendingAccounts.Get($stateParams.giftcardid).then(function(giftcard){null!=giftcard.StartDate&&(giftcard.StartDate=new Date(giftcard.StartDate)),null!=giftcard.EndDate&&(giftcard.EndDate=new Date(giftcard.EndDate)),d.resolve(giftcard)}),d.promise}]}}).state("giftCards.create",{url:"/create",templateUrl:"giftCards/templates/giftCardCreate.tpl.html",controller:"GiftCardCreateCtrl",controllerAs:"giftCardCreate"}).state("giftCards.assignGroup",{url:"/:giftcardid/assign",templateUrl:"giftCards/templates/giftCardAssignGroup.tpl.html",controller:"GiftCardAssignGroupCtrl",controllerAs:"giftCardAssign",resolve:{UserGroupList:["OrderCloud",function(OrderCloud){return OrderCloud.UserGroups.List()}],AssignedUserGroups:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.SpendingAccounts.ListAssignments($stateParams.giftcardid,null,null,"Group")}],SelectedGiftCard:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.SpendingAccounts.Get($stateParams.giftcardid)}]}}).state("giftCards.assignUser",{url:"/:giftcardid/assign/user",templateUrl:"giftCards/templates/giftCardAssignUser.tpl.html",controller:"GiftCardAssignUserCtrl",controllerAs:"giftCardAssignUser",resolve:{UserList:["OrderCloud",function(OrderCloud){return OrderCloud.Users.List()}],AssignedUsers:["$stateParams","OrderCloud",function($stateParams,OrderCloud){
return OrderCloud.SpendingAccounts.ListAssignments($stateParams.giftcardid,null,null,"User")}],SelectedGiftCard:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.SpendingAccounts.Get($stateParams.giftcardid)}]}})}function GiftCardsController($state,$ocMedia,OrderCloud,OrderCloudParameters,GiftCardList,TrackSearch,Parameters){function PagingFunction(){vm.list.Meta.Page<vm.list.Meta.TotalPages&&OrderCloud.SpendingAccounts.List(null,vm.list.Meta.Page+1,vm.list.Meta.PageSize,null,null,{RedemptionCode:"*"})}function Search(searchTerm){return OrderCloud.SpendingAccounts.List(searchTerm,null,null,null,null,{RedemptionCode:"*"})}var vm=this;vm.list=GiftCardList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.pagingfunction=PagingFunction,vm.searchfunction=Search,vm.searching=function(){return!!TrackSearch.GetTerm()},vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){var parameters=angular.copy(Parameters);return parameters.filters?parameters.filters.RedemptionCode="*":parameters.filters={RedemptionCode:"*"},OrderCloud.SpendingAccounts.List(parameters.search,vm.list.Meta.Page+1,parameters.pageSize||vm.list.Meta.PageSize,parameters.searchOn,parameters.sortBy,parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function GiftCardEditController($state,$exceptionHandler,toastr,OrderCloud,GiftCardFactory,SelectedGiftCard){function Submit(){OrderCloud.SpendingAccounts.Update(giftCardID,vm.giftCard).then(function(){$state.go("giftCards",{},{reload:!0}),toastr.success("Gift Card Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})}function Delete(){OrderCloud.SpendingAccounts.Delete(giftCardID).then(function(){$state.go("giftCards",{},{reload:!0}),toastr.success("Gift Card Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})}var vm=this,giftCardID=SelectedGiftCard.ID;vm.format=GiftCardFactory.dateFormat,vm.open1=vm.open2=!1,vm.giftCard=SelectedGiftCard,vm.Submit=Submit,vm.Delete=Delete,vm.giftCard.AllowAsPaymentMethod=!0}function GiftCardCreateController($state,$exceptionHandler,toastr,OrderCloud,GiftCardFactory){function Submit(){OrderCloud.SpendingAccounts.Create(vm.giftCard).then(function(){$state.go("giftCards",{},{reload:!0}),toastr.success("Gift Card Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})}var vm=this;vm.format=GiftCardFactory.dateFormat,vm.open1=vm.open2=!1,vm.Submit=Submit,vm.autoGen=GiftCardFactory.autoGenDefault,vm.createCode=GiftCardFactory.makeCode,vm.giftCard={},vm.giftCard.AllowAsPaymentMethod=!0}function GiftCardAssignGroupController($scope,$q,toastr,OrderCloud,Paging,Assignments,UserGroupList,AssignedUserGroups,SelectedGiftCard){function SaveFunc(ItemID){return OrderCloud.SpendingAccounts.SaveAssignment({SpendingAccountID:vm.giftCard.ID,UserID:null,UserGroupID:ItemID,AllowExceed:!1})}function DeleteFunc(ItemID){return OrderCloud.SpendingAccounts.DeleteAssignment(vm.giftCard.ID,null,ItemID)}function SaveAssignments(){return toastr.success("Assignment Updated","Success"),Assignments.SaveAssignments(vm.list.Items,vm.assignments.Items,SaveFunc,DeleteFunc,"UserGroupID")}function PagingFunction(){if(vm.list.Meta.Page<vm.list.Meta.PageSize){var queue=[],dfd=$q.defer();queue.push(OrderCloud.UserGroups.List(null,vm.list.Meta.Page+1,vm.list.Meta.PageSize,null,null,{RedemptionCode:"*"})),vm.assignments.Meta.Page<vm.assignments.Meta.PageSize&&OrderCloud.SpendingAccounts.ListAssignments(vm.giftCard.ID,null,null,"Group",vm.list.Meta.Page+1,vm.list.Meta.PageSize),$q.all(queue).then(function(results){dfd.resolve(),vm.list.Meta=results[0].Meta,vm.list.Items=[].concat(vm.list.Items,results[0].Items),results[1]&&(vm.assignments.Meta=results[1].Meta,vm.assignments.Items=[].concat(vm.assignments.Items,results[1].Items))})}}var vm=this;vm.list=UserGroupList,vm.assignments=AssignedUserGroups,vm.giftCard=SelectedGiftCard,vm.saveAssignments=SaveAssignments,vm.pagingfunction=PagingFunction,$scope.$watchCollection(function(){return vm.list},function(){Paging.SetSelected(vm.list.Items,vm.assignments.Items,"UserGroupID")})}function GiftCardAssignUserController($scope,$q,toastr,OrderCloud,Assignments,Paging,UserList,AssignedUsers,SelectedGiftCard){function SaveFunc(ItemID){return OrderCloud.SpendingAccounts.SaveAssignment({SpendingAccountID:vm.giftCard.ID,UserID:ItemID,UserGroupID:null,AllowExceed:!1})}function DeleteFunc(ItemID){return OrderCloud.SpendingAccounts.DeleteAssignment(vm.giftCard.ID,ItemID,null)}function SaveAssignments(){return toastr.success("Assignment Updated","Success"),Assignments.SaveAssignments(vm.list.Items,vm.assignments.Items,SaveFunc,DeleteFunc,"UserID")}function PagingFunction(){if(vm.list.Meta.Page<vm.list.Meta.PageSize){var queue=[],dfd=$q.defer();queue.push(OrderCloud.Users.List(null,null,vm.list.Meta.Page+1,vm.list.Meta.PageSize,null,null,{RedemptionCode:"*"})),vm.assignments.Meta.Page<vm.assignments.Meta.PageSize&&OrderCloud.SpendingAccounts.ListAssignments(vm.giftCard.ID,null,null,"User",vm.list.Meta.Page+1,vm.list.Meta.PageSize),$q.all(queue).then(function(results){dfd.resolve(),vm.list.Meta=results[0].Meta,vm.list.Items=[].concat(vm.list.Items,results[0].Items),results[1]&&(vm.assignments.Meta=results[1].Meta,vm.assignments.Items=[].concat(vm.assignments.Items,results[1].Items))})}}var vm=this;vm.list=UserList,vm.assignments=AssignedUsers,vm.giftCard=SelectedGiftCard,vm.saveAssignments=SaveAssignments,vm.pagingfunction=PagingFunction,$scope.$watchCollection(function(){return vm.list},function(){Paging.SetSelected(vm.list.Items,vm.assignments.Items,"UserID")})}function GiftCardFactory(){return{dateFormat:"MM/dd/yyyy",autoGenDefault:!0,makeCode:function(bits){bits="undefined"!=typeof bits?bits:16;for(var possible="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",code="",i=0;i<bits;i+=1)code+=possible.charAt(Math.floor(Math.random()*possible.length));return code}}}GiftCardsConfig.$inject=["$stateProvider"],GiftCardsController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","GiftCardList","TrackSearch","Parameters"],GiftCardCreateController.$inject=["$state","$exceptionHandler","toastr","OrderCloud","GiftCardFactory"],GiftCardEditController.$inject=["$state","$exceptionHandler","toastr","OrderCloud","GiftCardFactory","SelectedGiftCard"],GiftCardAssignGroupController.$inject=["$scope","$q","toastr","OrderCloud","Paging","Assignments","UserGroupList","AssignedUserGroups","SelectedGiftCard"],GiftCardAssignUserController.$inject=["$scope","$q","toastr","OrderCloud","Assignments","Paging","UserList","AssignedUsers","SelectedGiftCard"],angular.module("orderCloud").config(GiftCardsConfig).controller("GiftCardsCtrl",GiftCardsController).controller("GiftCardCreateCtrl",GiftCardCreateController).controller("GiftCardEditCtrl",GiftCardEditController).controller("GiftCardAssignGroupCtrl",GiftCardAssignGroupController).controller("GiftCardAssignUserCtrl",GiftCardAssignUserController).factory("GiftCardFactory",GiftCardFactory)}(),function(){"use strict";function ProductsConfig($stateProvider){$stateProvider.state("products",{parent:"base",templateUrl:"products/templates/products.tpl.html",controller:"ProductsCtrl",controllerAs:"products",url:"/products?from&to&search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Products"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],ProductList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.Products.List(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters)}]}}).state("products.edit",{url:"/:productid/edit",templateUrl:"products/templates/productEdit.tpl.html",controller:"ProductEditCtrl",controllerAs:"productEdit",resolve:{SelectedProduct:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Products.Get($stateParams.productid)}]}}).state("products.create",{url:"/create",templateUrl:"products/templates/productCreate.tpl.html",controller:"ProductCreateCtrl",controllerAs:"productCreate"}).state("products.assignments",{templateUrl:"products/templates/productAssignments.tpl.html",controller:"ProductAssignmentsCtrl",controllerAs:"productAssignments",url:"/:productid/assignments",resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],SelectedProduct:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Products.Get($stateParams.productid)}],Assignments:["$stateParams","OrderCloud","Parameters",function($stateParams,OrderCloud,Parameters){return OrderCloud.Products.ListAssignments($stateParams.productid,Parameters.productID,Parameters.userID,Parameters.userGroupID,Parameters.level,Parameters.priceScheduleID,Parameters.page,Parameters.pageSize)}]}}).state("products.createAssignment",{url:"/:productid/assignments/new",templateUrl:"products/templates/productCreateAssignment.tpl.html",controller:"ProductCreateAssignmentCtrl",controllerAs:"productCreateAssignment",resolve:{UserGroupList:["OrderCloud",function(OrderCloud){return OrderCloud.UserGroups.List(null,1,20)}],PriceScheduleList:["OrderCloud",function(OrderCloud){return OrderCloud.PriceSchedules.List(null,1,20)}]}})}function ProductsController($state,$ocMedia,OrderCloud,OrderCloudParameters,ProductList,Parameters){var vm=this;vm.list=ProductList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.Products.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function ProductEditController($exceptionHandler,$state,toastr,OrderCloud,SelectedProduct){var vm=this,productid=angular.copy(SelectedProduct.ID);vm.productName=angular.copy(SelectedProduct.Name),vm.product=SelectedProduct,vm.Submit=function(){OrderCloud.Products.Update(productid,vm.product).then(function(){$state.go("products",{},{reload:!0}),toastr.success("Product Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.Delete=function(){OrderCloud.Products.Delete(productid).then(function(){$state.go("products",{},{reload:!0}),toastr.success("Product Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function ProductCreateController($exceptionHandler,$state,toastr,OrderCloud){var vm=this;vm.product={},vm.Submit=function(){OrderCloud.Products.Create(vm.product).then(function(){$state.go("products",{},{reload:!0}),toastr.success("Product Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function ProductAssignmentsController($exceptionHandler,$stateParams,$state,toastr,OrderCloud,Assignments,SelectedProduct){function PagingFunction(){vm.list.Meta.Page<vm.list.Meta.TotalPages&&OrderCloud.Products.ListAssignments($stateParams.productid,null,null,null,null,vm.list.Meta.Page+1,vm.list.Meta.PageSize).then(function(data){vm.list.Items=[].concat(vm.list.Items,data.Items),vm.list.Meta=data.Meta})}var vm=this;vm.list=Assignments.Items,vm.productID=$stateParams.productid,vm.productName=angular.copy(SelectedProduct.Name),vm.pagingfunction=PagingFunction,vm.Delete=function(scope){OrderCloud.Products.DeleteAssignment($stateParams.productid,null,scope.assignment.UserGroupID).then(function(){$state.reload(),toastr.success("Product Assignment Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function ProductCreateAssignmentController($q,$stateParams,$state,Underscore,toastr,OrderCloud,UserGroupList,PriceScheduleList){var vm=this;vm.list=UserGroupList,vm.priceSchedules=PriceScheduleList.Items,vm.assignBuyer=!1,vm.model={ProductID:$stateParams.productid,BuyerID:OrderCloud.BuyerID.Get(),UserGroupID:null,StandardPriceScheduleID:null,ReplenishmentPriceScheduleID:null},vm.toggleReplenishmentPS=function(id){vm.model.ReplenishmentPriceScheduleID==id?vm.model.ReplenishmentPriceScheduleID=null:vm.model.ReplenishmentPriceScheduleID=id},vm.toggleStandardPS=function(id){vm.model.StandardPriceScheduleID==id?vm.model.StandardPriceScheduleID=null:vm.model.StandardPriceScheduleID=id},vm.submit=function(){if((vm.model.StandardPriceScheduleID||vm.model.ReplenishmentPriceScheduleID)&&(vm.assignBuyer||Underscore.where(vm.list.Items,{selected:!0}).length))if(vm.assignBuyer)OrderCloud.Products.SaveAssignment(vm.model).then(function(){$state.go("products.assignments",{productid:$stateParams.productid})});else{var assignmentQueue=[];angular.forEach(Underscore.where(vm.list.Items,{selected:!0}),function(group){assignmentQueue.push(function(){var df=$q.defer(),assignment=angular.copy(vm.model);return assignment.UserGroupID=group.ID,OrderCloud.Products.SaveAssignment(assignment).then(function(){df.resolve()}),df.promise}())}),$q.all(assignmentQueue).then(function(){$state.go("products.assignments",{productid:$stateParams.productid}),toastr.success("Assignment Updated","Success")})}}}ProductsConfig.$inject=["$stateProvider"],ProductsController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","ProductList","Parameters"],ProductEditController.$inject=["$exceptionHandler","$state","toastr","OrderCloud","SelectedProduct"],ProductCreateController.$inject=["$exceptionHandler","$state","toastr","OrderCloud"],ProductAssignmentsController.$inject=["$exceptionHandler","$stateParams","$state","toastr","OrderCloud","Assignments","SelectedProduct"],ProductCreateAssignmentController.$inject=["$q","$stateParams","$state","Underscore","toastr","OrderCloud","UserGroupList","PriceScheduleList"],angular.module("orderCloud").config(ProductsConfig).controller("ProductsCtrl",ProductsController).controller("ProductEditCtrl",ProductEditController).controller("ProductCreateCtrl",ProductCreateController).controller("ProductAssignmentsCtrl",ProductAssignmentsController).controller("ProductCreateAssignmentCtrl",ProductCreateAssignmentController)}(),function(){"use strict";function CreditCardsConfig($stateProvider){$stateProvider.state("creditCards",{parent:"base",templateUrl:"creditCards/templates/creditCards.tpl.html",controller:"CreditCardsCtrl",controllerAs:"creditCards",url:"/creditcards?from&to&search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Credit Cards"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],CreditCardList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.CreditCards.List(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy)}]}}).state("creditCards.edit",{url:"/:creditcardid/edit",templateUrl:"creditCards/templates/creditCardEdit.tpl.html",controller:"CreditCardEditCtrl",controllerAs:"creditCardEdit",resolve:{SelectedCreditCard:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.CreditCards.Get($stateParams.creditcardid)}]}}).state("creditCards.create",{url:"/create",templateUrl:"creditCards/templates/creditCardCreate.tpl.html",controller:"CreditCardCreateCtrl",controllerAs:"creditCardCreate"}).state("creditCards.assign",{templateUrl:"creditCards/templates/creditCardAssign.tpl.html",controller:"CreditCardAssignCtrl",controllerAs:"creditCardAssign",url:"/:creditcardid/assign?search1&page1&pageSize1&searchOn1&sortBy1&filters1",resolve:{Buyer:["OrderCloud",function(OrderCloud){return OrderCloud.Buyers.Get()}],AssignedUserGroups:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.CreditCards.ListAssignments($stateParams.creditcardid)}],Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams,1)}],SelectedCreditCard:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.CreditCards.Get($stateParams.creditcardid)}],UserGroupList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.UserGroups.List(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters)}]}})}function CreditCardsController($state,$ocMedia,OrderCloud,OrderCloudParameters,CreditCardList,Parameters){var vm=this;vm.list=CreditCardList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.CreditCards.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function creditCardExpirationDate(){function _ccExpireYears(){var today=new Date;today=today.getFullYear();for(var x=today;x<today+21;x++)expirationDate.expirationYear.push(x);return expirationDate.expirationYear}var expirationDate={expirationMonth:[{number:1,string:"01"},{number:2,string:"02"},{number:3,string:"03"},{number:4,string:"04"},{number:5,string:"05"},{number:6,string:"06"},{number:7,string:"07"},{number:8,string:"08"},{number:9,string:"09"},{number:10,string:"10"},{number:11,string:"11"},{number:12,string:"12"}],expirationYear:[],isLeapYear:function(year){return year%4==0&&year%100!=0||year%400==0}};return _ccExpireYears(),expirationDate}function CreditCardEditController($exceptionHandler,$state,Underscore,toastr,OrderCloud,SelectedCreditCard,creditCardExpirationDate){var vm=this,creditcardid=SelectedCreditCard.ID;vm.expireMonth=creditCardExpirationDate.expirationMonth,vm.expireYear=creditCardExpirationDate.expirationYear,vm.creditCardName=SelectedCreditCard.ID,vm.creditCard=SelectedCreditCard,null!=vm.creditCard.ExpirationDate&&(vm.creditCard.ExpirationDate=new Date(vm.creditCard.ExpirationDate),vm.creditCard.selectedExpireMonth=Underscore.findWhere(vm.expireMonth,{number:vm.creditCard.ExpirationDate.getMonth()+1}),vm.creditCard.selectedExpireYear=vm.expireYear[vm.expireYear.indexOf(vm.creditCard.ExpirationDate.getFullYear())]),vm.creditCard.Token="token",vm.Submit=function(){var expiration=new Date;if(void 0!=vm.creditCard.selectedExpireMonth){var monthNum=vm.creditCard.selectedExpireMonth.number,leapYear=creditCardExpirationDate.isLeapYear(vm.creditCard.selectedExpireYear);2==monthNum?expiration.setMonth(monthNum,-1):expiration.setMonth(monthNum,0),leapYear===!0&&2===monthNum&&expiration.setDate(29)}else expiration.setMonth(void 0);expiration.setYear(vm.creditCard.selectedExpireYear),vm.creditCard.ExpirationDate=expiration,OrderCloud.CreditCards.Update(creditcardid,vm.creditCard).then(function(){$state.go("creditCards",{},{reload:!0}),toastr.success("Credit Card Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.Delete=function(){OrderCloud.CreditCards.Delete(SelectedCreditCard.ID).then(function(){$state.go("creditCards",{},{reload:!0}),toastr.success("Credit Card Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function CreditCardCreateController($exceptionHandler,$state,toastr,OrderCloud,creditCardExpirationDate){var vm=this;vm.expireMonth=creditCardExpirationDate.expirationMonth,vm.expireYear=creditCardExpirationDate.expirationYear,vm.creditCard={},vm.creditCard.Token="token",vm.Submit=function(){var expiration=new Date;if(void 0!=vm.selectedExpireMonth){var monthNum=vm.selectedExpireMonth.number,leapYear=creditCardExpirationDate.isLeapYear(vm.selectedExpireYear);2==monthNum?expiration.setMonth(monthNum,-1):expiration.setMonth(monthNum,0),leapYear===!0&&2===monthNum&&expiration.setDate(29)}else expiration.setMonth(void 0);expiration.setYear(vm.selectedExpireYear),vm.creditCard.ExpirationDate=expiration,OrderCloud.CreditCards.Create(vm.creditCard).then(function(){$state.go("creditCards",{},{reload:!0}),toastr.success("Credit Card Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function CreditCardAssignController($scope,$state,$ocMedia,toastr,OrderCloud,Assignments,Paging,OrderCloudParameters,Buyer,UserGroupList,AssignedUserGroups,SelectedCreditCard,Parameters){function SaveFunc(ItemID){return OrderCloud.CreditCards.SaveAssignment({CreditCardID:vm.creditCard.ID,UserID:null,UserGroupID:ItemID})}function DeleteFunc(ItemID){return OrderCloud.CreditCards.DeleteAssignment(vm.creditCard.ID,null,ItemID)}function SaveAssignments(){return toastr.success("Assignment Updated","Success"),Assignments.SaveAssignments(vm.list.Items,vm.assignments.Items,SaveFunc,DeleteFunc,"UserGroupID")}function AssignFunc(){return OrderCloud.CreditCards.ListAssignments(vm.creditCard.ID,null,null,null,vm.assignments.Meta.Page+1,vm.assignments.Meta.PageSize)}function PagingFunction(){return Paging.Paging(vm.list,"UserGroups",vm.assignments,AssignFunc)}var vm=this;vm.buyer=Buyer,vm.assignBuyer=!1,vm.list=UserGroupList,vm.assignments=AssignedUserGroups,vm.creditCard=SelectedCreditCard,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.saveAssignments=SaveAssignments,vm.pagingfunction=PagingFunction,$scope.$watchCollection(function(){return vm.list},function(){Paging.SetSelected(vm.list.Items,vm.assignments.Items,"UserGroupID")}),vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage,1))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page1:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.UserGroups.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}CreditCardsConfig.$inject=["$stateProvider"],CreditCardsController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","CreditCardList","Parameters"],CreditCardEditController.$inject=["$exceptionHandler","$state","Underscore","toastr","OrderCloud","SelectedCreditCard","creditCardExpirationDate"],CreditCardCreateController.$inject=["$exceptionHandler","$state","toastr","OrderCloud","creditCardExpirationDate"],CreditCardAssignController.$inject=["$scope","$state","$ocMedia","toastr","OrderCloud","Assignments","Paging","OrderCloudParameters","Buyer","UserGroupList","AssignedUserGroups","SelectedCreditCard","Parameters"],angular.module("orderCloud").config(CreditCardsConfig).factory("creditCardExpirationDate",creditCardExpirationDate).controller("CreditCardsCtrl",CreditCardsController).controller("CreditCardEditCtrl",CreditCardEditController).controller("CreditCardCreateCtrl",CreditCardCreateController).controller("CreditCardAssignCtrl",CreditCardAssignController)}(),function(){"use strict";function ExpressCheckoutConfig($stateProvider){$stateProvider.state("expressCheckout",{parent:"base",url:"/expresscheckout",templateUrl:"expressCheckout/templates/expressCheckout.tpl.html",controller:"ExpressCheckoutCtrl",controllerAs:"expressCheckout",resolve:{CurrentUser:["OrderCloud",function(OrderCloud){return OrderCloud.Me.Get()}],Order:["$q","$state","toastr","Underscore","OrderCloud","CurrentOrder","CurrentUser",function($q,$state,toastr,Underscore,OrderCloud,CurrentOrder,CurrentUser){var dfd=$q.defer();return CurrentOrder.Get().then(function(order){var patchObj={},queue=[];!order.ShippingAddressID&&CurrentUser.xp&&CurrentUser.xp.defaultShippingAddressID&&queue.push(OrderCloud.Me.ListAddresses().then(function(data){Underscore.where(data.Items,{ID:CurrentUser.xp.defaultShippingAddressID,Shipping:!0}).length&&(patchObj.ShippingAddressID=CurrentUser.xp.defaultShippingAddressID)})),!order.BillingAddressID&&CurrentUser.xp&&CurrentUser.xp.defaultBillingAddressID&&queue.push(OrderCloud.Me.ListAddresses().then(function(data){Underscore.where(data.Items,{ID:CurrentUser.xp.defaultBillingAddressID,Billing:!0}).length&&(patchObj.BillingAddressID=CurrentUser.xp.defaultBillingAddressID)})),$q.all(queue).then(function(){patchObj.ShippingAddressID||patchObj.BillingAddressID?OrderCloud.Orders.Patch(order.ID,patchObj).then(function(){OrderCloud.Orders.Get(order.ID).then(function(newOrder){dfd.resolve(newOrder)})}):dfd.resolve(order)})})["catch"](function(){toastr.error("You do not have an active open order.","Error"),$state.current.name.indexOf("expressCheckout")>-1&&$state.go("home"),dfd.reject()}),dfd.promise}],LineItems:["OrderCloud","Order",function(OrderCloud,Order){return OrderCloud.LineItems.List(Order.ID)}],OrderPayments:["$q","$state","toastr","Underscore","OrderCloud","CurrentUser","Order",function($q,$state,toastr,Underscore,OrderCloud,CurrentUser,Order){var dfd=$q.defer();return OrderCloud.Payments.List(Order.ID).then(function(payments){!payments.Items.length&&CurrentUser.xp&&CurrentUser.xp.defaultCreditCardID?OrderCloud.Me.ListCreditCards().then(function(data){Underscore.where(data.Items,{ID:CurrentUser.xp.defaultCreditCardID}).length?OrderCloud.Payments.Create(Order.ID,{Type:"CreditCard",CreditCardID:CurrentUser.xp.defaultCreditCardID}).then(function(){OrderCloud.Payments.List(Order.ID).then(function(newPayments){dfd.resolve(newPayments)})}):OrderCloud.Payments.Create(Order.ID,{}).then(function(){OrderCloud.Payments.List(Order.ID).then(function(newPayments){dfd.resolve(newPayments)})})}):payments.Items.length?dfd.resolve(payments):OrderCloud.Payments.Create(Order.ID,{}).then(function(){OrderCloud.Payments.List(Order.ID).then(function(newPayments){dfd.resolve(newPayments)})})}),dfd.promise}],CreditCards:["OrderCloud",function(OrderCloud){return OrderCloud.Me.ListCreditCards()}],SpendingAccounts:["OrderCloud",function(OrderCloud){return OrderCloud.SpendingAccounts.List(null,null,null,null,null,{RedemptionCode:"!*"})}],ShippingAddresses:["$q","Underscore","OrderCloud",function($q,Underscore,OrderCloud){var dfd=$q.defer();return OrderCloud.Me.ListAddresses().then(function(data){dfd.resolve(Underscore.where(data.Items,{Shipping:!0}))}),dfd.promise}],BillingAddresses:["$q","Underscore","OrderCloud",function($q,Underscore,OrderCloud){var dfd=$q.defer();return OrderCloud.Me.ListAddresses().then(function(data){dfd.resolve(Underscore.where(data.Items,{Billing:!0}))}),dfd.promise}]}}).state("expressOrderReview",{parent:"base",url:"/order/:orderid/expressReview",templateUrl:"expressCheckout/templates/expressCheckoutReview.tpl.html",controller:"ExpressOrderReviewCtrl",controllerAs:"expressOrderReview",resolve:{SubmittedOrder:["$q","$stateParams","$state","toastr","OrderCloud",function($q,$stateParams,$state,toastr,OrderCloud){var dfd=$q.defer();return OrderCloud.Orders.Get($stateParams.orderid).then(function(order){"Unsubmitted"==order.Status?$state.go("expressCheckout").then(function(){toastr.error("You cannot review an Unsubmitted Order","Error"),dfd.reject()}):dfd.resolve(order)}),dfd.promise}]}})}function ExpressCheckoutController($q,$state,$rootScope,toastr,OrderCloud,CurrentUser,CurrentOrder,Order,LineItems,OrderPayments,CreditCards,SpendingAccounts,ShippingAddresses,BillingAddresses){function refreshOrder(){var df=$q.defer();return CurrentOrder.Get().then(function(o){OrderCloud.LineItems.List(o.ID).then(function(li){o.lineItems=li.Items,vm.currentOrder=o,df.resolve()})}),df.promise}function checkPaymentType(){"CreditCard"==vm.orderPayments[0].Type&&vm.orderPayments[0].CreditCardID&&OrderCloud.CreditCards.Get(vm.orderPayments[0].CreditCardID).then(function(cc){vm.creditCardDetails=cc}),"SpendingAccount"==vm.orderPayments[0].Type&&vm.orderPayments[0].SpendingAccountID&&OrderCloud.SpendingAccounts.Get(vm.orderPayments[0].SpendingAccountID).then(function(sa){
vm.spendingAccountDetails=sa})}var vm=this;vm.shippingAddresses=ShippingAddresses,vm.billingAddresses=BillingAddresses,vm.currentOrder=Order,vm.currentOrder.lineItems=LineItems.Items,vm.orderPayments=OrderPayments.Items,vm.creditCards=CreditCards,vm.spendingAccounts=SpendingAccounts,vm.currentUser=CurrentUser,vm.paymentMethods=[{Display:"Purchase Order",Value:"PurchaseOrder"},{Display:"Credit Card",Value:"CreditCard"},{Display:"Spending Account",Value:"SpendingAccount"}],vm.saveBillAddress=function(){OrderCloud.Orders.Patch(vm.currentOrder.ID,{BillingAddressID:vm.currentOrder.BillingAddressID}).then(function(){refreshOrder().then(function(){toastr.success("Billing address updated","Success!")})})},vm.saveShipAddress=function(){OrderCloud.Orders.Patch(vm.currentOrder.ID,{ShippingAddressID:vm.currentOrder.ShippingAddressID}).then(function(){refreshOrder().then(function(){toastr.success("Shipping address updated","Success!")})})},vm.savePONumber=function(order){vm.orderPayments[0].xp?vm.orderPayments[0].xp:vm.orderPayments[0].xp={},"PurchaseOrder"===vm.orderPayments[0].Type&&OrderCloud.Payments.Update(order.ID,vm.orderPayments[0].ID,vm.orderPayments[0]).then(function(){toastr.success("Purchase order number updated","Success!")})},checkPaymentType(),vm.setPaymentMethod=function(order){OrderCloud.Payments.Delete(order.ID,vm.orderPayments[0].ID).then(function(){OrderCloud.Payments.Create(order.ID,{Type:vm.orderPayments[0].Type}).then(function(){$state.reload()})})},vm.setCreditCard=function(order){"CreditCard"===vm.orderPayments[0].Type&&OrderCloud.Payments.Patch(order.ID,vm.orderPayments[0].ID,{CreditCardID:vm.orderPayments[0].CreditCardID}).then(function(){$state.reload()})},vm.setSpendingAccount=function(order){"SpendingAccount"===vm.orderPayments[0].Type&&OrderCloud.Payments.Patch(order.ID,vm.orderPayments[0].ID,{SpendingAccountID:vm.orderPayments[0].SpendingAccountID}).then(function(){$state.reload()})["catch"](function(err){OrderCloud.Payments.Patch(order.ID,vm.orderPayments[0].ID,{SpendingAccountID:null}).then(function(){$state.reload(),toastr.error(err.data.Errors[0].Message+" Please choose another payment method, or another spending account.","Error:")})})},vm.submitOrder=function(){OrderCloud.Orders.Submit(vm.currentOrder.ID).then(function(){CurrentOrder.Remove().then(function(){$state.go("expressOrderReview",{orderid:vm.currentOrder.ID}),$rootScope.$broadcast("OC:RemoveOrder"),toastr.success("Your order has been submitted","Success")})})["catch"](function(){toastr.error("Your order did not submit successfully.","Error")})}}function ExpressOrderReviewController($q,toastr,OrderCloud,LineItemHelpers,SubmittedOrder,isMultipleAddressShipping){var vm=this;vm.submittedOrder=SubmittedOrder,vm.isMultipleAddressShipping=isMultipleAddressShipping,OrderCloud.Payments.List(vm.submittedOrder.ID).then(function(data){vm.orderPayments=data.Items,angular.forEach(vm.orderPayments,function(payment,index){"CreditCard"===payment.Type&&payment.CreditCardID&&OrderCloud.CreditCards.Get(payment.CreditCardID).then(function(cc){vm.orderPayments[index].creditCardDetails=cc})["catch"](function(ex){toastr.error(ex,"Error")}),"SpendingAccount"===payment.Type&&payment.SpendingAccountID&&OrderCloud.SpendingAccounts.Get(payment.SpendingAccountID).then(function(sa){vm.orderPayments[index].spendingAccountDetails=sa})["catch"](function(ex){toastr.error(ex,"Error")})})});var dfd=$q.defer(),queue=[];OrderCloud.LineItems.List(vm.submittedOrder.ID).then(function(li){if(vm.LineItems=li,li.Meta.TotalPages>li.Meta.Page)for(var page=li.Meta.Page;page<li.Meta.TotalPages;)page+=1,queue.push(OrderCloud.LineItems.List(vm.submittedOrder.ID,page));$q.all(queue).then(function(results){angular.forEach(results,function(result){vm.LineItems.Items=[].concat(vm.LineItems.Items,result.Items),vm.LineItems.Meta=result.Meta}),dfd.resolve(LineItemHelpers.GetProductInfo(vm.LineItems.Items.reverse()))})}),vm.print=function(){window.print()},vm.addToFavorites=function(){SubmittedOrder.xp||(SubmittedOrder.xp={}),SubmittedOrder.xp.favorite=!0,OrderCloud.Orders.Patch(SubmittedOrder.ID,{xp:SubmittedOrder.xp.favorite}).then(function(){toastr.success("Your order has been added to Favorites! You can now easily find your order in Order History","Success")})["catch"](function(){toastr.error("There was a problem adding this order to your Favorites","Error")})},vm.removeFromFavorites=function(){delete SubmittedOrder.xp.favorite,OrderCloud.Orders.Patch(SubmittedOrder.ID,{xp:SubmittedOrder.xp}),toastr.success("Your order has been removed from Favorites","Success")}}function ExpressCheckoutUserDefaultsDirective(){return{templateUrl:"expressCheckout/templates/expressCheckoutUserDefaults.tpl.html",controller:"ExpressCheckoutUserDefaultsCtrl",controllerAs:"expressCheckoutUserDefaults"}}function ExpressCheckoutUserDefaultsController(Underscore,OrderCloud){var vm=this;OrderCloud.Me.Get().then(function(data){vm.me=data}),OrderCloud.Me.ListCreditCards().then(function(data){vm.creditCards=data}),OrderCloud.Me.ListAddresses().then(function(data){vm.shippingAddresses=Underscore.where(data.Items,{Shipping:!0}),vm.billingAddresses=Underscore.where(data.Items,{Billing:!0})}),vm.updateDefault=function(){OrderCloud.Me.Update(vm.me)}}ExpressCheckoutConfig.$inject=["$stateProvider"],ExpressCheckoutController.$inject=["$q","$state","$rootScope","toastr","OrderCloud","CurrentUser","CurrentOrder","Order","LineItems","OrderPayments","CreditCards","SpendingAccounts","ShippingAddresses","BillingAddresses"],ExpressOrderReviewController.$inject=["$q","toastr","OrderCloud","LineItemHelpers","SubmittedOrder","isMultipleAddressShipping"],ExpressCheckoutUserDefaultsController.$inject=["Underscore","OrderCloud"],angular.module("orderCloud").config(ExpressCheckoutConfig).controller("ExpressCheckoutCtrl",ExpressCheckoutController).controller("ExpressOrderReviewCtrl",ExpressOrderReviewController).directive("ordercloudUserDefaults",ExpressCheckoutUserDefaultsDirective).controller("ExpressCheckoutUserDefaultsCtrl",ExpressCheckoutUserDefaultsController)}(),function(){"use strict";function OrdersConfig($stateProvider){$stateProvider.state("orders",{parent:"base",templateUrl:"orders/templates/orders.tpl.html",controller:"OrdersCtrl",controllerAs:"orders",url:"/orders?from&to&search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Orders"},resolve:{UserType:["OrderCloud",function(OrderCloud){return JSON.parse(atob(OrderCloud.Auth.ReadToken().split(".")[1])).usrtype}],Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],OrderList:["OrderCloud","Parameters","UserType",function(OrderCloud,Parameters,UserType){return OrderCloud.Orders["admin"==UserType?"ListIncoming":"ListOutgoing"](Parameters.from,Parameters.to,Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters)}]}}).state("orders.detail",{url:"/:orderid",templateUrl:"orders/templates/orders.detail.tpl.html",controller:"OrdersDetailCtrl",controllerAs:"ordersDetail",resolve:{SelectedOrder:["$stateParams","OrdersFactory",function($stateParams,OrdersFactory){return OrdersFactory.GetOrderDetails($stateParams.orderid)}]}}).state("orders.detail.lineItem",{url:"/:lineitemid",templateUrl:"orders/templates/orders.detail.lineItem.tpl.html",controller:"OrdersDetailLineItemCtrl",controllerAs:"ordersDetailLineItem",resolve:{SelectedLineItem:["$stateParams","OrdersFactory",function($stateParams,OrdersFactory){return OrdersFactory.GetLineItemDetails($stateParams.orderid,$stateParams.lineitemid)}]}})}function OrdersController($state,$ocMedia,OrderCloud,OrderCloudParameters,UserType,OrderList,Parameters){var vm=this;vm.list=OrderList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.Orders["admin"==UserType?"ListIncoming":"ListOutgoing"](Parameters.from,Parameters.to,Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function OrdersDetailController(toastr,SelectedOrder,OrderCloud){var vm=this;vm.order=SelectedOrder,vm.addToFavorites=function(){SelectedOrder.xp||(SelectedOrder.xp={}),SelectedOrder.xp.favorite=!0,OrderCloud.Orders.Update(SelectedOrder.ID,SelectedOrder).then(function(){toastr.success("Your order has been added to Favorites! You can now easily find your order in 'Order History'","Success")})["catch"](function(){toastr.error("There was a problem adding this order to your Favorites","Error")})},vm.removeFromFavorites=function(){delete SelectedOrder.xp.favorite,OrderCloud.Orders.Patch(SelectedOrder.ID,{xp:null}),toastr.success("Your order has been removed from Favorites","Success")}}function OrdersDetailLineItemController(SelectedLineItem){var vm=this;vm.lineItem=SelectedLineItem}function OrdersFactory($q,Underscore,OrderCloud){function _getOrderDetails(orderID){function gatherLineItems(){OrderCloud.LineItems.List(orderID,null,1,100).then(function(data){order.LineItems=order.LineItems.concat(data.Items);for(var i=2;i<=data.Meta.TotalPages;i++)lineItemQueue.push(OrderCloud.LineItems.List(orderID,null,i,100));$q.all(lineItemQueue).then(function(results){angular.forEach(results,function(result){order.LineItems=order.LineItems.concat(result.Items)}),gatherProducts()})})}function gatherProducts(){var productIDs=Underscore.uniq(Underscore.pluck(order.LineItems,"ProductID"));angular.forEach(productIDs,function(productID){productQueue.push(function(){var d=$q.defer();return OrderCloud.Products.Get(productID).then(function(product){angular.forEach(Underscore.where(order.LineItems,{ProductID:product.ID}),function(item){item.Product=product}),d.resolve()}),d.promise}())}),$q.all(productQueue).then(function(){order.SpendingAccountID?OrderCloud.SpendingAccounts.Get(order.SpendingAccountID).then(function(sa){order.SpendingAccount=sa,deferred.resolve(order)}):deferred.resolve(order)})}var order,deferred=$q.defer(),lineItemQueue=[],productQueue=[];return OrderCloud.Orders.Get(orderID).then(function(data){order=data,order.LineItems=[],gatherLineItems()}),deferred.promise}function _getLineItemDetails(orderID,lineItemID){function getProduct(){OrderCloud.Products.Get(lineItem.ProductID).then(function(product){lineItem.Product=product,deferred.resolve(lineItem)})}var lineItem,deferred=$q.defer();return OrderCloud.LineItems.Get(orderID,lineItemID).then(function(li){lineItem=li,getProduct()}),deferred.promise}function _searchOrders(filters,userType){var deferred=$q.defer();return!filters.groupOrders&&filters.searchingGroupOrders?deferred.resolve():filters.favorite?OrderCloud.Orders["admin"==userType?"ListIncoming":"ListOutgoing"](filters.FromDate,filters.ToDate,filters.searchTerm,1,100,null,filters.sortType,{ID:filters.OrderID,Status:filters.Status,FromUserID:filters.groupOrders,xp:{favorite:filters.favorite}},filters.FromCompanyID).then(function(data){deferred.resolve(data)}):OrderCloud.Orders["admin"==userType?"ListIncoming":"ListOutgoing"](filters.FromDate,filters.ToDate,filters.searchTerm,1,100,null,filters.sortType,{ID:filters.OrderID,Status:filters.Status,FromUserID:filters.groupOrders},filters.FromCompanyID).then(function(data){deferred.resolve(data)}),deferred.promise}function _getGroupOrders(groupList){function getUserIDs(groups){var dfd=$q.defer(),queue=[],userList=[];return angular.forEach(groups,function(group){queue.push(OrderCloud.UserGroups.ListUserAssignments(group))}),$q.all(queue).then(function(users){angular.forEach(users,function(user){userList=userList.concat(user.Items)}),dfd.resolve(userList)}),dfd.promise}var userIDs=[],dfd=$q.defer();return getUserIDs(groupList).then(function(users){angular.forEach(users,function(user){userIDs.push(user.UserID)}),dfd.resolve(userIDs.join("|"))}),dfd.promise}var service={GetOrderDetails:_getOrderDetails,GetLineItemDetails:_getLineItemDetails,SearchOrders:_searchOrders,GetGroupOrders:_getGroupOrders};return service}function paymentmethods(){var map={PurchaseOrder:"Purchase Order",CreditCard:"CreditCard",SpendingAccount:"Spending Account",PayPalExpressCheckout:"PayPal Express Checkout"};return function(method){return map[method]?map[method]:method}}OrdersConfig.$inject=["$stateProvider"],OrdersController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","UserType","OrderList","Parameters"],OrdersDetailController.$inject=["toastr","SelectedOrder","OrderCloud"],OrdersDetailLineItemController.$inject=["SelectedLineItem"],OrdersFactory.$inject=["$q","Underscore","OrderCloud"],angular.module("orderCloud").config(OrdersConfig).controller("OrdersCtrl",OrdersController).controller("OrdersDetailCtrl",OrdersDetailController).controller("OrdersDetailLineItemCtrl",OrdersDetailLineItemController).factory("OrdersFactory",OrdersFactory).filter("paymentmethods",paymentmethods)}(),function(){"use strict";function MyOrdersConfig($stateProvider){$stateProvider.state("myOrders",{parent:"base",templateUrl:"myOrders/templates/myOrders.tpl.html",controller:"MyOrdersCtrl",controllerAs:"myOrders",url:"/myorders?from&to&search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"My Orders"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],OrderList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.Me.ListOutgoingOrders(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters,Parameters.from,Parameters.to)}]}}).state("myOrders.edit",{url:"/:orderid/edit",templateUrl:"myOrders/templates/MyorderEdit.tpl.html",controller:"MyOrderEditCtrl",controllerAs:"myOrderEdit",resolve:{SelectedOrder:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Me.GetOrder($stateParams.orderid)}],SelectedPayments:["$stateParams","$q","OrderCloud",function($stateParams,$q,OrderCloud){var dfd=$q.defer(),paymentList={};return OrderCloud.Payments.List($stateParams.orderid,null,1,100).then(function(data){paymentList=data.Items,dfd.resolve(paymentList),angular.forEach(paymentList,function(payment){"CreditCard"===payment.Type&&OrderCloud.CreditCards.Get(payment.CreditCardID).then(function(cc){payment.creditCards=cc})}),dfd.resolve(paymentList)}),dfd.promise}],LineItemList:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.LineItems.List($stateParams.orderid)}]}})}function MyOrdersController($state,$ocMedia,OrderCloud,OrderCloudParameters,OrderList,Parameters){var vm=this;vm.list=OrderList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.Me.ListIncomingOrders(Parameters.from,Parameters.to,Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function MyOrderEditController($scope,$q,$exceptionHandler,$state,toastr,OrderCloud,OCGeography,MyOrdersTypeAheadSearchFactory,SelectedOrder,SelectedPayments,LineItemList){function PagingFunction(){vm.list.Meta.Page<vm.list.Meta.PageSize&&OrderCloud.LineItems.List(vm.order.ID,vm.list.Meta.Page+1,vm.list.Meta.PageSize).then(function(data){vm.list.Meta=data.Meta,vm.list.Items=[].concat(vm.list.Items,data.Items)})}var vm=this,orderid=SelectedOrder.ID;vm.order=SelectedOrder,vm.orderID=SelectedOrder.ID,vm.list=LineItemList,vm.paymentList=SelectedPayments,vm.states=OCGeography.States,vm.countries=OCGeography.Countries,vm.pagingfunction=PagingFunction,$scope.isCollapsedPayment=!0,$scope.isCollapsedBilling=!0,$scope.isCollapsedShipping=!0,vm.deletePayment=function(payment){OrderCloud.Payments.Delete(orderid,payment.ID).then(function(){$state.go($state.current,{},{reload:!0})})["catch"](function(ex){$exceptionHandler(ex)})},vm.deleteLineItem=function(lineitem){OrderCloud.LineItems.Delete(orderid,lineitem.ID).then(function(){$state.go($state.current,{},{reload:!0})})["catch"](function(ex){$exceptionHandler(ex)})},vm.updateBillingAddress=function(){vm.order.BillingAddressID=null,vm.order.BillingAddress.ID=null,OrderCloud.Orders.Update(orderid,vm.order).then(function(){OrderCloud.Orders.SetBillingAddress(orderid,vm.order.BillingAddress).then(function(){$state.go($state.current,{},{reload:!0})})})},vm.updateShippingAddress=function(){OrderCloud.Orders.SetShippingAddress(orderid,vm.ShippingAddress)},vm.Submit=function(){var dfd=$q.defer(),queue=[];return angular.forEach(vm.list.Items,function(lineitem,index){($scope.EditForm.PaymentInfo.LineItems["Quantity"+index].$dirty||$scope.EditForm.PaymentInfo.LineItems["UnitPrice"+index].$dirty)&&queue.push(OrderCloud.LineItems.Update(orderid,lineitem.ID,lineitem))}),$q.all(queue).then(function(){dfd.resolve(),OrderCloud.Orders.Update(orderid,vm.order).then(function(){toastr.success("Order Updated","Success"),$state.go("myOrders",{},{reload:!0})})["catch"](function(ex){$exceptionHandler(ex)})})["catch"](function(ex){$exceptionHandler(ex)}),dfd.promise},vm.Delete=function(){OrderCloud.Orders.Delete(orderid).then(function(){$state.go("myOrders",{},{reload:!0}),toastr.success("Order Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.spendingAccountTypeAhead=MyOrdersTypeAheadSearchFactory.SpendingAccountList,vm.shippingAddressTypeAhead=MyOrdersTypeAheadSearchFactory.ShippingAddressList,vm.billingAddressTypeAhead=MyOrdersTypeAheadSearchFactory.BillingAddressList}function MyOrdersTypeAheadSearchFactory($q,Underscore,OrderCloud){function _spendingAccountList(term){return OrderCloud.SpendingAccounts.List(term).then(function(data){return data.Items})}function _shippingAddressList(term){var dfd=$q.defer(),queue=[];return queue.push(OrderCloud.Addresses.List(term)),queue.push(OrderCloud.Addresses.ListAssignments(null,null,null,null,!0)),$q.all(queue).then(function(result){var searchAssigned=Underscore.intersection(Underscore.pluck(result[0].Items,"ID"),Underscore.pluck(result[1].Items,"AddressID")),addressList=Underscore.filter(result[0].Items,function(address){if(searchAssigned.indexOf(address.ID)>-1)return address});dfd.resolve(addressList)}),dfd.promise}function _billingAddressList(term){var dfd=$q.defer(),queue=[];return queue.push(OrderCloud.Addresses.List(term)),queue.push(OrderCloud.Addresses.ListAssignments(null,null,null,null,null,!0)),$q.all(queue).then(function(result){var searchAssigned=Underscore.intersection(Underscore.pluck(result[0].Items,"ID"),Underscore.pluck(result[1].Items,"AddressID")),addressList=Underscore.filter(result[0].Items,function(address){if(searchAssigned.indexOf(address.ID)>-1)return address});dfd.resolve(addressList)}),dfd.promise}return{SpendingAccountList:_spendingAccountList,ShippingAddressList:_shippingAddressList,BillingAddressList:_billingAddressList}}MyOrdersConfig.$inject=["$stateProvider"],MyOrdersController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","OrderList","Parameters"],MyOrderEditController.$inject=["$scope","$q","$exceptionHandler","$state","toastr","OrderCloud","OCGeography","MyOrdersTypeAheadSearchFactory","SelectedOrder","SelectedPayments","LineItemList"],MyOrdersTypeAheadSearchFactory.$inject=["$q","Underscore","OrderCloud"],angular.module("orderCloud").config(MyOrdersConfig).controller("MyOrdersCtrl",MyOrdersController).controller("MyOrderEditCtrl",MyOrderEditController).factory("MyOrdersTypeAheadSearchFactory",MyOrdersTypeAheadSearchFactory)}(),function(){"use strict";function checkoutConfig($stateProvider){$stateProvider.state("checkout",{parent:"base",data:{componentName:"Checkout"},url:"/checkout",templateUrl:"checkout/templates/checkout.tpl.html",controller:"CheckoutCtrl",controllerAs:"checkout",resolve:{Order:["$rootScope","$q","$state","toastr","CurrentOrder",function($rootScope,$q,$state,toastr,CurrentOrder){var dfd=$q.defer();return CurrentOrder.Get().then(function(order){dfd.resolve(order)})["catch"](function(){toastr.error("You do not have an active open order.","Error"),$state.current.name.indexOf("checkout")>-1&&$state.go("home"),dfd.reject()}),dfd.promise}],OrderShipAddress:["$q","OrderShippingAddress",function($q,OrderShippingAddress){var dfd=$q.defer();return OrderShippingAddress.Get().then(function(data){dfd.resolve(data)})["catch"](function(){dfd.resolve(null)}),dfd.promise}],ShippingAddresses:["$q","Underscore","OrderCloud",function($q,Underscore,OrderCloud){var dfd=$q.defer();return OrderCloud.Me.ListAddresses().then(function(data){dfd.resolve(Underscore.where(data.Items,{Shipping:!0}))}),dfd.promise}],OrderPayments:["$q","OrderCloud","Order",function($q,OrderCloud,Order){var deferred=$q.defer();return OrderCloud.Payments.List(Order.ID).then(function(data){data.Items.length?deferred.resolve(data):OrderCloud.Payments.Create(Order.ID,{}).then(function(p){deferred.resolve({Items:[p]})})}),deferred.promise}]}}).state("checkout.confirmation",{url:"/confirmation",views:{"@base":{templateUrl:"checkout/templates/confirmation.tpl.html",controller:"OrderConfirmationCtrl",controllerAs:"orderConfirmation"}}}).state("orderReview",{parent:"base",url:"/order/:orderid/review",templateUrl:"checkout/templates/review.tpl.html",controller:"OrderReviewCtrl",controllerAs:"orderReview",resolve:{SubmittedOrder:["$q","$stateParams","$state","toastr","OrderCloud",function($q,$stateParams,$state,toastr,OrderCloud){var dfd=$q.defer();return OrderCloud.Orders.Get($stateParams.orderid).then(function(order){"Unsubmitted"==order.Status?$state.go("checkout.shipping").then(function(){toastr.error("You cannot review an Unsubmitted Order","Error"),dfd.reject()}):dfd.resolve(order)}),dfd.promise}]}})}function CheckoutService(){function _storeLineItems(items){lineItems=items}function _getLineItems(){return lineItems}var lineItems=[];return{StoreLineItems:_storeLineItems,GetLineItems:_getLineItems}}function CheckoutController($state,$rootScope,toastr,OrderCloud,CheckoutService,Order,ShippingAddresses,OrderShipAddress,OrderShippingAddress,OrderPayments){var vm=this;vm.currentOrder=Order,vm.currentOrder.ShippingAddressID=OrderShipAddress?OrderShipAddress.ID:null,vm.currentOrder.ShippingAddress=OrderShipAddress,vm.shippingAddresses=ShippingAddresses,vm.isMultipleAddressShipping=!0,vm.currentOrderPayments=OrderPayments.Items,vm.orderIsValid=function(){var orderPaymentsTotal=0,validPaymentMethods=!1;return angular.forEach(vm.currentOrderPayments,function(payment){orderPaymentsTotal+=payment.Amount,validPaymentMethods="SpendingAccount"==payment.Type&&null!=payment.SpendingAccountID||"CreditCard"==payment.Type&&null!=payment.CreditCardID||"PurchaseOrder"==payment.Type}),!(orderPaymentsTotal!==vm.currentOrder.Subtotal||!validPaymentMethods||!vm.currentOrder.BillingAddress||null==vm.currentOrder.BillingAddress.ID)},"checkout"===$state.current.name&&$state.transitionTo("checkout.shipping"),$rootScope.$on("OrderShippingAddressChanged",function(event,order,address){vm.currentOrder=order,vm.currentOrder.ShippingAddressID=address.ID,vm.currentOrder.ShippingAddress=address}),$rootScope.$on("OC:UpdateOrder",function(event,OrderID){OrderCloud.Orders.Get(OrderID).then(function(data){vm.currentOrder.Subtotal=data.Subtotal})}),$rootScope.$on("LineItemAddressUpdated",function(){vm.currentOrder.ShippingAddress=null,vm.currentOrder.ShippingAddressID=null,OrderShippingAddress.Clear()}),vm.checkShippingAddresses=function(){var lineItems=CheckoutService.GetLineItems(),orderValid=!0;angular.forEach(lineItems,function(li){var itemValid=!1;li.ShippingAddressID?itemValid=!0:li.ShippingAddress&&li.ShippingAddress.Street1&&(itemValid=!0),itemValid||(orderValid=!1)}),orderValid?$state.go("checkout.confirmation"):toastr.error("Please select a shipping address for all line items")}}function OrderConfirmationController($rootScope,$state,toastr,OrderCloud,Order,CurrentOrder,isMultipleAddressShipping,OrderPayments){var vm=this;vm.currentOrder=Order,vm.isMultipleAddressShipping=isMultipleAddressShipping,vm.orderPayments=OrderPayments.Items,angular.forEach(vm.orderPayments,function(payment,index){"CreditCard"===payment.Type&&payment.CreditCardID&&OrderCloud.CreditCards.Get(payment.CreditCardID).then(function(cc){vm.orderPayments[index].creditCardDetails=cc})["catch"](function(ex){toastr.error(ex,"Error")}),"SpendingAccount"===payment.Type&&payment.SpendingAccountID&&OrderCloud.SpendingAccounts.Get(payment.SpendingAccountID).then(function(sa){vm.orderPayments[index].spendingAccountDetails=sa})["catch"](function(ex){toastr.error(ex,"Error")})}),vm.submitOrder=function(){OrderCloud.Orders.Submit(vm.currentOrder.ID).then(function(order){CurrentOrder.Remove().then(function(){$state.go("orderReview",{orderid:order.ID}),toastr.success("Your order has been submitted","Success"),$rootScope.$broadcast("OC:RemoveOrder")})})["catch"](function(ex){toastr.error("Your order did not submit successfully.","Error")})}}function OrderReviewController($q,toastr,OrderCloud,LineItemHelpers,SubmittedOrder,isMultipleAddressShipping){var vm=this;vm.submittedOrder=SubmittedOrder,vm.isMultipleAddressShipping=isMultipleAddressShipping,OrderCloud.Payments.List(vm.submittedOrder.ID).then(function(data){vm.orderPayments=data.Items}).then(function(){angular.forEach(vm.orderPayments,function(payment,index){"CreditCard"===payment.Type&&payment.CreditCardID&&OrderCloud.CreditCards.Get(payment.CreditCardID).then(function(cc){vm.orderPayments[index].creditCardDetails=cc})["catch"](function(ex){toastr.error(ex,"Error")}),"SpendingAccount"===payment.Type&&payment.SpendingAccountID&&OrderCloud.SpendingAccounts.Get(payment.SpendingAccountID).then(function(sa){vm.orderPayments[index].spendingAccountDetails=sa})["catch"](function(ex){toastr.error(ex,"Error")})})});var dfd=$q.defer(),queue=[];OrderCloud.LineItems.List(vm.submittedOrder.ID).then(function(li){if(vm.LineItems=li,li.Meta.TotalPages>li.Meta.Page)for(var page=li.Meta.Page;page<li.Meta.TotalPages;)page+=1,queue.push(OrderCloud.LineItems.List(vm.submittedOrder.ID,page));$q.all(queue).then(function(results){angular.forEach(results,function(result){vm.LineItems.Items=[].concat(vm.LineItems.Items,result.Items),vm.LineItems.Meta=result.Meta}),dfd.resolve(LineItemHelpers.GetProductInfo(vm.LineItems.Items.reverse()))})}),vm.print=function(){window.print()},vm.addToFavorites=function(){SubmittedOrder.xp||(SubmittedOrder.xp={}),SubmittedOrder.xp.favorite=!0,OrderCloud.Orders.Update(SubmittedOrder.ID,SubmittedOrder).then(function(){toastr.success("Your order has been added to Favorites! You can now easily find your order in 'Order History'","Success")})["catch"](function(){toastr.error("There was a problem adding this order to your Favorites","Error")})},vm.removeFromFavorites=function(){delete SubmittedOrder.xp.favorite,OrderCloud.Orders.Patch(SubmittedOrder.ID,{xp:null}),toastr.success("Your order has been removed from Favorites","Success")}}function CheckoutLineItemsListDirective(){return{scope:{order:"=",addresses:"="},templateUrl:"checkout/templates/checkout.lineitems.tpl.html",controller:"CheckoutLineItemsCtrl",controllerAs:"checkoutLI"}}function CheckoutLineItemsController($rootScope,$scope,$q,Underscore,toastr,OrderCloud,LineItemHelpers,CheckoutService,CurrentOrder){function LineItemsInit(OrderID){OrderCloud.LineItems.List(OrderID).then(function(data){vm.lineItems=data,LineItemHelpers.GetProductInfo(vm.lineItems.Items),CheckoutService.StoreLineItems(vm.lineItems.Items)})}var vm=this;vm.lineItems={},vm.UpdateQuantity=LineItemHelpers.UpdateQuantity,vm.UpdateShipping=LineItemHelpers.UpdateShipping,vm.setCustomShipping=LineItemHelpers.CustomShipping,vm.RemoveItem=LineItemHelpers.RemoveItem,$scope.$on("LineItemAddressUpdated",function(event,LineItemID,address){Underscore.where(vm.lineItems.Items,{ID:LineItemID})[0].ShippingAddress=address}),$scope.$on("OrderShippingAddressChanged",function(event,order,address){angular.forEach(vm.lineItems.Items,function(li){li.ShippingAddressID=address.ID,li.ShippingAddress=address})}),$scope.$watch(function(){return $scope.order.ID},function(){LineItemsInit($scope.order.ID)}),vm.pagingfunction=function(){if(vm.lineItems.Meta.Page<vm.lineItems.Meta.TotalPages){var dfd=$q.defer();return OrderCloud.LineItems.List($scope.order.ID,vm.lineItems.Meta.Page+1,vm.lineItems.Meta.PageSize).then(function(data){vm.lineItems.Meta=data.Meta,vm.lineItems.Items=[].concat(vm.lineItems.Items,data.Items),LineItemHelpers.GetProductInfo(vm.lineItems.Items),CheckoutService.StoreLineItems(vm.lineItems.Items)}),dfd.promise}return null}}function ConfirmationLineItemsListDirective(){return{scope:{order:"="},templateUrl:"checkout/templates/confirmation.lineitems.tpl.html",controller:"ConfirmationLineItemsCtrl",controllerAs:"confirmationLI"}}function ConfirmationLineItemsController($scope,$q,OrderCloud,LineItemHelpers,isMultipleAddressShipping){var vm=this;vm.lineItems={},vm.isMultipleAddressShipping=isMultipleAddressShipping,$scope.$watch(function(){return $scope.order.ID},function(){OrderCloud.LineItems.List($scope.order.ID).then(function(data){vm.lineItems=data,LineItemHelpers.GetProductInfo(vm.lineItems.Items)})}),vm.pagingfunction=function(){if(vm.lineItems.Meta.Page<vm.lineItems.Meta.TotalPages){var dfd=$q.defer();return OrderCloud.LineItems.List($scope.order.ID,vm.lineItems.Meta.Page+1,vm.lineItems.Meta.PageSize).then(function(data){vm.lineItems.Meta=data.Meta,vm.lineItems.Items=[].concat(vm.lineItems.Items,data.Items),LineItemHelpers.GetProductInfo(vm.lineItems.Items)}),dfd.promise;
}return null}}checkoutConfig.$inject=["$stateProvider"],CheckoutController.$inject=["$state","$rootScope","toastr","OrderCloud","CheckoutService","Order","ShippingAddresses","OrderShipAddress","OrderShippingAddress","OrderPayments"],OrderReviewController.$inject=["$q","toastr","OrderCloud","LineItemHelpers","SubmittedOrder","isMultipleAddressShipping"],OrderConfirmationController.$inject=["$rootScope","$state","toastr","OrderCloud","Order","CurrentOrder","isMultipleAddressShipping","OrderPayments"],CheckoutLineItemsController.$inject=["$rootScope","$scope","$q","Underscore","toastr","OrderCloud","LineItemHelpers","CheckoutService","CurrentOrder"],ConfirmationLineItemsController.$inject=["$scope","$q","OrderCloud","LineItemHelpers","isMultipleAddressShipping"],angular.module("orderCloud").config(checkoutConfig).controller("CheckoutCtrl",CheckoutController).factory("CheckoutService",CheckoutService).controller("OrderReviewCtrl",OrderReviewController).controller("OrderConfirmationCtrl",OrderConfirmationController).directive("ordercloudCheckoutLineitems",CheckoutLineItemsListDirective).directive("ordercloudConfirmationLineitems",ConfirmationLineItemsListDirective).controller("CheckoutLineItemsCtrl",CheckoutLineItemsController).controller("ConfirmationLineItemsCtrl",ConfirmationLineItemsController).constant("isMultipleAddressShipping",!0)}(),function(){"use strict";function CostCentersConfig($stateProvider){$stateProvider.state("costCenters",{parent:"base",templateUrl:"costCenters/templates/costCenters.tpl.html",controller:"CostCentersCtrl",controllerAs:"costCenters",url:"/costcenters?search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Cost Centers"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],CostCentersList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.CostCenters.List(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters)}]}}).state("costCenters.edit",{url:"/:costcenterid/edit",templateUrl:"costCenters/templates/costCenterEdit.tpl.html",controller:"CostCenterEditCtrl",controllerAs:"costCenterEdit",resolve:{SelectedCostCenter:["$stateParams","$state","OrderCloud",function($stateParams,$state,OrderCloud){return OrderCloud.CostCenters.Get($stateParams.costcenterid)["catch"](function(){$state.go("^.costCenters")})}]}}).state("costCenters.create",{url:"/create",templateUrl:"costCenters/templates/costCenterCreate.tpl.html",controller:"CostCenterCreateCtrl",controllerAs:"costCenterCreate"}).state("costCenters.assign",{url:"/:costcenterid/assign",templateUrl:"costCenters/templates/costCenterAssign.tpl.html",controller:"CostCenterAssignCtrl",controllerAs:"costCenterAssign",resolve:{Buyer:["OrderCloud",function(OrderCloud){return OrderCloud.Buyers.Get()}],UserGroupList:["OrderCloud",function(OrderCloud){return OrderCloud.UserGroups.List(null,1,20)}],AssignedUserGroups:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.CostCenters.ListAssignments($stateParams.costcenterid)}],SelectedCostCenter:["$stateParams","$state","OrderCloud",function($stateParams,$state,OrderCloud){return OrderCloud.CostCenters.Get($stateParams.costcenterid)["catch"](function(){$state.go("^")})}]}})}function CostCentersController($ocMedia,$state,OrderCloud,OrderCloudParameters,CostCentersList,Parameters){var vm=this;vm.list=CostCentersList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.CreditCards.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function CostCenterEditController($exceptionHandler,$state,toastr,OrderCloud,SelectedCostCenter){var vm=this,costCenterid=SelectedCostCenter.ID;vm.costCenterName=SelectedCostCenter.Name,vm.costCenter=SelectedCostCenter,vm.Submit=function(){OrderCloud.CostCenters.Update(costCenterid,vm.costCenter).then(function(){$state.go("costCenters",{},{reload:!0}),toastr.success("Cost Center Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.Delete=function(){OrderCloud.CostCenters.Delete(SelectedCostCenter.ID).then(function(){$state.go("costCenters",{},{reload:!0}),toastr.success("Cost Center Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function CostCenterCreateController($exceptionHandler,$state,toastr,OrderCloud){var vm=this;vm.costCenter={},vm.Submit=function(){OrderCloud.CostCenters.Create(vm.costCenter).then(function(){$state.go("costCenters",{},{reload:!0}),toastr.success("Cost Center Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function CostCenterAssignController($scope,toastr,OrderCloud,Assignments,Paging,UserGroupList,AssignedUserGroups,SelectedCostCenter){function SaveFunc(ItemID){return OrderCloud.CostCenters.SaveAssignment({UserID:null,UserGroupID:ItemID,CostCenterID:vm.CostCenter.ID})}function DeleteFunc(ItemID){return OrderCloud.CostCenters.DeleteAssignment(vm.CostCenter.ID,null,ItemID)}function SaveAssignment(){return toastr.success("Assignment Updated","Success"),Assignments.SaveAssignments(vm.list.Items,vm.assignments.Items,SaveFunc,DeleteFunc)}function AssignmentFunc(){return OrderCloud.CostCenters.ListAssignments(vm.CostCenter.ID,null,vm.assignments.Meta.PageSize)}function PagingFunction(){return Paging.Paging(vm.list,"UserGroups",vm.assignments,AssignmentFunc)}var vm=this;vm.CostCenter=SelectedCostCenter,vm.list=UserGroupList,vm.assignments=AssignedUserGroups,vm.saveAssignments=SaveAssignment,vm.pagingfunction=PagingFunction,$scope.$watchCollection(function(){return vm.list},function(){Paging.SetSelected(vm.list.Items,vm.assignments.Items,"UserGroupID")})}CostCentersConfig.$inject=["$stateProvider"],CostCentersController.$inject=["$ocMedia","$state","OrderCloud","OrderCloudParameters","CostCentersList","Parameters"],CostCenterEditController.$inject=["$exceptionHandler","$state","toastr","OrderCloud","SelectedCostCenter"],CostCenterCreateController.$inject=["$exceptionHandler","$state","toastr","OrderCloud"],CostCenterAssignController.$inject=["$scope","toastr","OrderCloud","Assignments","Paging","UserGroupList","AssignedUserGroups","SelectedCostCenter"],angular.module("orderCloud").config(CostCentersConfig).controller("CostCentersCtrl",CostCentersController).controller("CostCenterEditCtrl",CostCenterEditController).controller("CostCenterCreateCtrl",CostCenterCreateController).controller("CostCenterAssignCtrl",CostCenterAssignController)}(),function(){"use strict";function CatalogSearchConfig($stateProvider){$stateProvider.state("catalogSearchResults",{parent:"base",url:"/catalogsearchresults/:searchterm",templateUrl:"catalogSearch/templates/catalogSearchResults.tpl.html",controller:"CatalogSearchResultsCtrl",controllerAs:"catalogSearchResults",resolve:{CategoryList:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Me.ListCategories($stateParams.searchterm,null,null,null,null,null,"all")}],ProductList:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Me.ListProducts($stateParams.searchterm)}]}})}function CatalogSearchResultsController(CategoryList,ProductList){var vm=this;vm.products=ProductList,vm.categories=CategoryList}function CatalogSearchController($scope,$state,$q,OrderCloud){var vm=this;vm.productData,vm.categoryData,vm.popupResults=function(term){var maxProducts=$scope.maxprods||5,maxCategories=$scope.maxcats||5,dfd=$q.defer(),queue=[];return queue.push(OrderCloud.Me.ListProducts(term,1,maxProducts)),queue.push(OrderCloud.Me.ListCategories(term,1,maxCategories,null,null,null,"all")),$q.all(queue).then(function(responses){vm.productData=responses[0].Items,vm.categoryData=responses[1].Items,angular.forEach(vm.productData,function(product){product.NameType="Product"}),angular.forEach(vm.categoryData,function(category){category.NameType="Category"});var collected=vm.productData.concat(vm.categoryData);dfd.resolve(collected)}),dfd.promise},vm.onSelect=function($item){"Category"===$item.NameType?$state.go("catalog.category",{categoryid:$item.ID}):$state.go("catalog.product",{productid:$item.ID})},vm.onHardEnter=function(search){$state.go("catalogSearchResults",{searchterm:search},{reload:!0})}}function ordercloudCatalogSearchDirective(){return{scope:{maxprods:"@",maxcats:"@"},restrict:"E",templateUrl:"catalogSearch/templates/catalogSearchDirective.tpl.html",controller:"CatalogSearchCtrl",controllerAs:"catalogSearch",replace:!0}}CatalogSearchConfig.$inject=["$stateProvider"],CatalogSearchController.$inject=["$scope","$state","$q","OrderCloud"],CatalogSearchResultsController.$inject=["CategoryList","ProductList"],angular.module("orderCloud").config(CatalogSearchConfig).controller("CatalogSearchCtrl",CatalogSearchController).directive("ordercloudCatalogSearch",ordercloudCatalogSearchDirective).controller("CatalogSearchResultsCtrl",CatalogSearchResultsController)}(),function(){"use strict";function CategoriesConfig($stateProvider){$stateProvider.state("categories",{parent:"base",templateUrl:"categories/templates/categories.tpl.html",controller:"CategoriesCtrl",controllerAs:"categories",url:"/categories?from&to&search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Categories"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],CategoryList:["OrderCloud","Parameters",function(OrderCloud,Parameters){var parameters=angular.copy(Parameters);return parameters.depth="all",OrderCloud.Categories.List(parameters.search,parameters.page,parameters.pageSize||12,parameters.searchOn,parameters.sortBy,parameters.filters,parameters.depth)}]}}).state("categories.tree",{url:"/tree",templateUrl:"categories/templates/categoryTree.tpl.html",controller:"CategoryTreeCtrl",controllerAs:"categoryTree",resolve:{Tree:["CategoryTreeService",function(CategoryTreeService){return CategoryTreeService.GetCategoryTree()}]}}).state("categories.edit",{url:"/:categoryid/edit",templateUrl:"categories/templates/categoryEdit.tpl.html",controller:"CategoryEditCtrl",controllerAs:"categoryEdit",resolve:{SelectedCategory:["$stateParams","$state","OrderCloud",function($stateParams,$state,OrderCloud){return OrderCloud.Categories.Get($stateParams.categoryid)["catch"](function(){$state.go("^.categories")})}]}}).state("categories.create",{url:"/create",templateUrl:"categories/templates/categoryCreate.tpl.html",controller:"CategoryCreateCtrl",controllerAs:"categoryCreate"}).state("categories.assignParty",{url:"/:categoryid/assign/party",templateUrl:"categories/templates/categoryAssignParty.tpl.html",controller:"CategoryAssignPartyCtrl",controllerAs:"categoryAssignParty",resolve:{UserGroupList:["OrderCloud",function(OrderCloud){return OrderCloud.UserGroups.List()}],AssignedUserGroups:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Categories.ListAssignments($stateParams.categoryid)}],SelectedCategory:["$stateParams","$state","OrderCloud",function($stateParams,$state,OrderCloud){return OrderCloud.Categories.Get($stateParams.categoryid)["catch"](function(){$state.go("^.categories")})}]}}).state("categories.assignProduct",{url:"/:categoryid/assign/product",templateUrl:"categories/templates/categoryAssignProduct.tpl.html",controller:"CategoryAssignProductCtrl",controllerAs:"categoryAssignProd",resolve:{ProductList:["OrderCloud",function(OrderCloud){return OrderCloud.Products.List()}],ProductAssignments:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Categories.ListProductAssignments($stateParams.categoryid)}],SelectedCategory:["$stateParams","$state","OrderCloud",function($stateParams,$state,OrderCloud){return OrderCloud.Categories.Get($stateParams.categoryid)["catch"](function(){$state.go("^.categories")})}]}})}function CategoriesController($state,$ocMedia,OrderCloud,OrderCloudParameters,CategoryList,Parameters){var vm=this;vm.list=CategoryList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.Products.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function CategoryEditController($exceptionHandler,$state,$q,toastr,OrderCloud,SelectedCategory){var vm=this,categoryID=SelectedCategory.ID;vm.categoryName=SelectedCategory.Name,vm.category=SelectedCategory,vm.Submit=function(){OrderCloud.Categories.Update(categoryID,vm.category).then(function(){$state.go("categories",{},{reload:!0}),toastr.success("Category Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.typeAhead=function(searchTerm){var defd=$q.defer();return OrderCloud.Categories.List(searchTerm,1,100,null,null,null,"all").then(function(data){defd.resolve(data.Items)}),defd.promise},vm.Delete=function(){OrderCloud.Categories.Delete(SelectedCategory.ID).then(function(){$state.go("categories",{},{reload:!0}),toastr.success("Category Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function CategoryCreateController($exceptionHandler,$state,$q,toastr,OrderCloud){var vm=this;vm.category={},vm.Submit=function(){""===vm.category.ParentID&&(vm.category.ParentID=null),OrderCloud.Categories.Create(vm.category).then(function(){$state.go("categories",{},{reload:!0}),toastr.success("Category Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.typeAhead=function(searchTerm){var defd=$q.defer();return OrderCloud.Categories.List(searchTerm,1,100,null,null,null,"all").then(function(data){defd.resolve(data.Items)}),defd.promise}}function CategoryTreeController(Tree,CategoryTreeService){var vm=this;vm.tree=Tree,vm.treeOptions={dropped:function(event){CategoryTreeService.UpdateCategoryNode(event)}}}function CategoryAssignPartyController($scope,toastr,OrderCloud,Assignments,Paging,UserGroupList,AssignedUserGroups,SelectedCategory){function SaveFunc(ItemID){return OrderCloud.Categories.SaveAssignment({UserID:null,UserGroupID:ItemID,CategoryID:vm.Category.ID})}function DeleteFunc(ItemID){return OrderCloud.Categories.DeleteAssignment(vm.Category.ID,null,ItemID)}function SaveAssignment(){return toastr.success("Assignment Updated","Success"),Assignments.SaveAssignments(vm.list.Items,vm.assignments.Items,SaveFunc,DeleteFunc)}function AssignmentFunc(){return OrderCloud.Categories.ListAssignments(vm.Category.ID,null,vm.assignments.Meta.PageSize)}function PagingFunction(){return Paging.Paging(vm.list,"UserGroups",vm.assignments,AssignmentFunc)}var vm=this;vm.Category=SelectedCategory,vm.list=UserGroupList,vm.assignments=AssignedUserGroups,vm.saveAssignments=SaveAssignment,vm.pagingfunction=PagingFunction,$scope.$watchCollection(function(){return vm.list},function(){Paging.SetSelected(vm.list.Items,vm.assignments.Items,"UserGroupID")})}function CategoryAssignProductController($scope,toastr,OrderCloud,Assignments,Paging,ProductList,ProductAssignments,SelectedCategory){function SaveFunc(ItemID){return OrderCloud.Categories.SaveProductAssignment({CategoryID:vm.Category.ID,ProductID:ItemID})}function DeleteFunc(ItemID){return OrderCloud.Categories.DeleteProductAssignment(vm.Category.ID,ItemID)}function SaveAssignment(){return toastr.success("Assignment Updated","Success"),Assignments.SaveAssignments(vm.list.Items,vm.assignments.Items,SaveFunc,DeleteFunc,"ProductID")}function AssignmentFunc(){return OrderCloud.Categories.ListProductAssignments(vm.Category.ID,null,vm.assignments.Meta.PageSize)}function PagingFunction(){return Paging.Paging(vm.list,"Products",vm.assignments,AssignmentFunc)}var vm=this;vm.Category=SelectedCategory,vm.list=ProductList,vm.assignments=ProductAssignments,vm.saveAssignments=SaveAssignment,vm.pagingfunction=PagingFunction,$scope.$watchCollection(function(){return vm.list},function(){Paging.SetSelected(vm.list.Items,vm.assignments.Items,"ProductID")})}function CategoryTree(){return{restrict:"E",replace:!0,scope:{tree:"="},template:"<ul><category-node ng-repeat='node in tree' node='node'></category-node></ul>"}}function CategoryNode($compile){return{restrict:"E",replace:!0,scope:{node:"="},template:'<li><a ui-sref="base.adminCategories.edit({id:node.ID})" ng-bind-html="node.Name"></a></li>',link:function(scope,element){angular.isArray(scope.node.children)&&(element.append("<category-tree tree='node.children' />"),$compile(element.contents())(scope))}}}function CategoryTreeService($q,Underscore,OrderCloud){function tree(){var tree=[],deferred=$q.defer();return OrderCloud.Categories.List(null,1,100,null,null,null,"all").then(function(list){function getnode(node){var children=Underscore.where(list.Items,{ParentID:node.ID});return children.length>0?(node.children=children,angular.forEach(children,function(child){return getnode(child)})):node.children=[],node}angular.forEach(Underscore.where(list.Items,{ParentID:null}),function(node){tree.push(getnode(node))}),deferred.resolve(tree)}),deferred.promise}function update(event){function updateNodeList(nodeList){function run(i){nodeQueue[i]().then(function(){queueIndex++,queueIndex<nodeQueue.length?run(queueIndex):deferred.resolve()})}var deferred=$q.defer(),nodeQueue=[];angular.forEach(nodeList,function(cat,index){nodeQueue.push(function(){return OrderCloud.Categories.Patch(cat.ID,{ListOrder:index})})});var queueIndex=0;return run(queueIndex),deferred.promise}function updateParentID(){var parentID,deferred=$q.defer();return parentID=event.dest.nodesScope.node?event.dest.nodesScope.node.ID:null,event.source.nodeScope.node.ParentID=parentID,OrderCloud.Categories.Update(event.source.nodeScope.node.ID,event.source.nodeScope.node).then(function(){deferred.resolve()}),deferred.promise}var sourceParentNodeList=event.source.nodesScope.$modelValue,destParentNodeList=event.dest.nodesScope.$modelValue,masterDeferred=$q.defer();return updateNodeList(destParentNodeList).then(function(){sourceParentNodeList!=destParentNodeList&&(sourceParentNodeList.length?updateNodeList(sourceParentNodeList).then(function(){updateParentID().then(function(){masterDeferred.resolve()})}):updateParentID().then(function(){masterDeferred.resolve()}))}),masterDeferred.promise}return{GetCategoryTree:tree,UpdateCategoryNode:update}}CategoriesConfig.$inject=["$stateProvider"],CategoriesController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","CategoryList","Parameters"],CategoryEditController.$inject=["$exceptionHandler","$state","$q","toastr","OrderCloud","SelectedCategory"],CategoryCreateController.$inject=["$exceptionHandler","$state","$q","toastr","OrderCloud"],CategoryTreeController.$inject=["Tree","CategoryTreeService"],CategoryAssignPartyController.$inject=["$scope","toastr","OrderCloud","Assignments","Paging","UserGroupList","AssignedUserGroups","SelectedCategory"],CategoryAssignProductController.$inject=["$scope","toastr","OrderCloud","Assignments","Paging","ProductList","ProductAssignments","SelectedCategory"],CategoryTreeService.$inject=["$q","Underscore","OrderCloud"],CategoryNode.$inject=["$compile"],angular.module("orderCloud").config(CategoriesConfig).controller("CategoriesCtrl",CategoriesController).controller("CategoryEditCtrl",CategoryEditController).controller("CategoryCreateCtrl",CategoryCreateController).controller("CategoryTreeCtrl",CategoryTreeController).controller("CategoryAssignPartyCtrl",CategoryAssignPartyController).controller("CategoryAssignProductCtrl",CategoryAssignProductController).factory("CategoryTreeService",CategoryTreeService).directive("categoryNode",CategoryNode).directive("categoryTree",CategoryTree)}(),function(){"use strict";function AddressesConfig($stateProvider){$stateProvider.state("addresses",{parent:"base",templateUrl:"addresses/templates/addresses.tpl.html",controller:"AddressesCtrl",controllerAs:"addresses",url:"/addresses?search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Addresses"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],AddressList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.Addresses.List(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters)}]}}).state("addresses.edit",{url:"/:addressid/edit",templateUrl:"addresses/templates/addressEdit.tpl.html",controller:"AddressEditCtrl",controllerAs:"addressEdit",resolve:{SelectedAddress:["$stateParams","$state","OrderCloud",function($stateParams,$state,OrderCloud){return OrderCloud.Addresses.Get($stateParams.addressid)["catch"](function(){$state.go("^")})}]}}).state("addresses.create",{url:"/addresses/create",templateUrl:"addresses/templates/addressCreate.tpl.html",controller:"AddressCreateCtrl",controllerAs:"addressCreate"}).state("addresses.assign",{url:"/addresses/:addressid/assign",templateUrl:"addresses/templates/addressAssign.tpl.html",controller:"AddressAssignCtrl",controllerAs:"addressAssign",resolve:{UserGroupList:["OrderCloud",function(OrderCloud){return OrderCloud.UserGroups.List()}],AssignmentsList:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Addresses.ListAssignments($stateParams.addressid)}],SelectedAddress:["$stateParams","$state","OrderCloud",function($stateParams,$state,OrderCloud){return OrderCloud.Addresses.Get($stateParams.addressid)["catch"](function(){$state.go("^")})}]}})}function AddressesController($state,$ocMedia,OrderCloud,OrderCloudParameters,AddressList,Parameters){var vm=this;vm.list=AddressList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||vm.parameters.from||vm.parameters.to||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,vm.parameters.from=null,vm.parameters.to=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.Addresses.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function AddressEditController($exceptionHandler,$state,$scope,toastr,OrderCloud,OCGeography,SelectedAddress){var vm=this,addressID=SelectedAddress.ID;vm.addressName=SelectedAddress.AddressName,vm.address=SelectedAddress,vm.countries=OCGeography.Countries,vm.states=OCGeography.States,$scope.$watch(function(){return vm.address.Country},function(){vm.address.State=null}),vm.Submit=function(){OrderCloud.Addresses.Update(addressID,vm.address).then(function(){$state.go("addresses",{},{reload:!0}),toastr.success("Address Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.Delete=function(){OrderCloud.Addresses.Delete(SelectedAddress.ID,!1).then(function(){$state.go("addresses",{},{reload:!0}),toastr.success("Address Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function AddressCreateController($exceptionHandler,$scope,$state,toastr,OrderCloud,OCGeography){var vm=this;vm.address={Country:"US"},vm.countries=OCGeography.Countries,vm.states=OCGeography.States,$scope.$watch(function(){return vm.address.Country},function(){vm.address.State=null}),vm.Submit=function(){OrderCloud.Addresses.Create(vm.address).then(function(){$state.go("addresses",{},{reload:!0}),toastr.success("Address Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function AddressAssignController($q,$scope,$state,Underscore,toastr,OrderCloud,Assignments,AssignmentsList,UserGroupList,SelectedAddress){function setSelected(){var assigned=Assignments.GetAssigned(vm.assignments.Items,"UserGroupID");angular.forEach(vm.list.Items,function(item){if(assigned.indexOf(item.ID)>-1){item.selected=!0;var assignmentItem=Underscore.where(vm.assignments.Items,{UserGroupID:item.ID})[0];item.IsShipping=assignmentItem.IsShipping,item.IsBilling=assignmentItem.IsBilling}})}function AssignmentFunc(){return OrderCloud.Addresses.ListAssignments(vm.Address.ID,null,vm.assignments.Meta.PageSize)}function PagingFunction(){if(vm.list.Meta.Page<vm.list.Meta.TotalPages){var queue=[],dfd=$q.defer();return queue.push(OrderCloud.UserGroups.List(null,vm.list.Meta.Page+1,vm.list.Meta.PageSize)),void 0!==AssignmentFunc&&queue.push(AssignmentFunc()),$q.all(queue).then(function(results){dfd.resolve(),vm.list.Meta=results[0].Meta,vm.list.Items=[].concat(vm.list.Items,results[0].Items),results[1]&&(vm.assignments.Meta=results[1].Meta,vm.assignments.Items=[].concat(vm.assignments.Items,results[1].Items)),void 0!==AssignmentFunc&&setSelected()}),dfd.promise}return null}function SaveAssignments(){var assigned=Underscore.pluck(vm.assignments.Items,"UserGroupID"),selected=Underscore.pluck(Underscore.where(vm.list.Items,{selected:!0}),"ID"),toAdd=Assignments.GetToAssign(vm.list.Items,vm.assignments.Items,"UserGroupID"),toUpdate=Underscore.intersection(selected,assigned),toDelete=Assignments.GetToDelete(vm.list.Items,vm.assignments.Items,"UserGroupID"),queue=[],dfd=$q.defer();return angular.forEach(vm.list.Items,function(Item){if((Item.IsShipping||Item.IsBilling)&&toAdd.indexOf(Item.ID)>-1)queue.push(OrderCloud.Addresses.SaveAssignment({UserID:null,UserGroupID:Item.ID,AddressID:vm.Address.ID,IsShipping:Item.IsShipping,IsBilling:Item.IsBilling}));else if(toUpdate.indexOf(Item.ID)>-1){var AssignmentObject=Underscore.where(vm.assignments.Items,{UserGroupID:Item.ID})[0];AssignmentObject.IsShipping===Item.IsShipping&&AssignmentObject.IsBilling===Item.IsBilling||queue.push(OrderCloud.Addresses.SaveAssignment({UserID:null,UserGroupID:Item.ID,AddressID:vm.Address.ID,IsShipping:Item.IsShipping,IsBilling:Item.IsBilling}))}}),angular.forEach(toDelete,function(ItemID){queue.push(OrderCloud.Addresses.DeleteAssignment(vm.Address.ID,null,ItemID))}),$q.all(queue).then(function(){dfd.resolve(),$state.reload($state.current),toastr.success("Assignment Updated","Success")}),dfd.promise}var vm=this;vm.list=UserGroupList,vm.assignments=AssignmentsList,vm.Address=SelectedAddress,$scope.$watchCollection(function(){return vm.list},function(){setSelected()}),vm.setSelected=setSelected,vm.saveAssignments=SaveAssignments,vm.pagingfunction=PagingFunction}AddressesConfig.$inject=["$stateProvider"],AddressesController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","AddressList","Parameters"],AddressEditController.$inject=["$exceptionHandler","$state","$scope","toastr","OrderCloud","OCGeography","SelectedAddress"],AddressCreateController.$inject=["$exceptionHandler","$scope","$state","toastr","OrderCloud","OCGeography"],AddressAssignController.$inject=["$q","$scope","$state","Underscore","toastr","OrderCloud","Assignments","AssignmentsList","UserGroupList","SelectedAddress"],angular.module("orderCloud").config(AddressesConfig).controller("AddressesCtrl",AddressesController).controller("AddressEditCtrl",AddressEditController).controller("AddressCreateCtrl",AddressCreateController).controller("AddressAssignCtrl",AddressAssignController)}(),function(){"use strict";function AdminUsersConfig($stateProvider){$stateProvider.state("adminUsers",{parent:"base",templateUrl:"adminUsers/templates/adminUsers.tpl.html",controller:"AdminUsersCtrl",controllerAs:"adminUsers",url:"/adminusers?search&page&pageSize&searchOn&sortBy&filters",data:{componentName:"Admin Users"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],AdminUsersList:["OrderCloud","Parameters","$state",function(OrderCloud,Parameters,$state){return OrderCloud.AdminUsers.List(Parameters.search,Parameters.page,Parameters.pageSize||12,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){return 1==data.Items.length&&Parameters.search?void $state.go("adminUsers.edit",{adminuserid:data.Items[0].ID}):data})}]}}).state("adminUsers.edit",{url:"/:adminuserid/edit",templateUrl:"adminUsers/templates/adminUserEdit.tpl.html",controller:"AdminUserEditCtrl",controllerAs:"adminUserEdit",resolve:{SelectedAdminUser:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.AdminUsers.Get($stateParams.adminuserid)}]}}).state("adminUsers.create",{url:"/create",templateUrl:"adminUsers/templates/adminUserCreate.tpl.html",controller:"AdminUserCreateCtrl",controllerAs:"adminUserCreate"})}function AdminUsersController($state,$ocMedia,OrderCloud,OrderCloudParameters,AdminUsersList,Parameters){
var vm=this;vm.list=AdminUsersList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.AdminUsers.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function AdminUserEditController($exceptionHandler,$state,toastr,OrderCloud,SelectedAdminUser){var vm=this,adminuserid=SelectedAdminUser.ID;vm.adminUserName=SelectedAdminUser.Username,vm.adminUser=SelectedAdminUser,null!=vm.adminUser.TermsAccepted&&(vm.TermsAccepted=!0),vm.Submit=function(){OrderCloud.AdminUsers.Update(adminuserid,vm.adminUser).then(function(){$state.go("adminUsers",{},{reload:!0}),toastr.success("User Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})},vm.Delete=function(){OrderCloud.AdminUsers.Delete(adminuserid).then(function(){$state.go("adminUsers",{},{reload:!0}),toastr.success("User Deleted","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function AdminUserCreateController($exceptionHandler,$state,toastr,OrderCloud){var vm=this;vm.adminUser={Email:"",Password:""},vm.Submit=function(){vm.adminUser.TermsAccepted=new Date,OrderCloud.AdminUsers.Create(vm.adminUser).then(function(){$state.go("adminUsers",{},{reload:!0}),toastr.success("User Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}AdminUsersConfig.$inject=["$stateProvider"],AdminUsersController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","AdminUsersList","Parameters"],AdminUserEditController.$inject=["$exceptionHandler","$state","toastr","OrderCloud","SelectedAdminUser"],AdminUserCreateController.$inject=["$exceptionHandler","$state","toastr","OrderCloud"],angular.module("orderCloud").config(AdminUsersConfig).controller("AdminUsersCtrl",AdminUsersController).controller("AdminUserEditCtrl",AdminUserEditController).controller("AdminUserCreateCtrl",AdminUserCreateController)}(),function(){"use strict";function CartConfig($stateProvider){$stateProvider.state("cart",{parent:"base",data:{componentName:"Cart"},url:"/cart",templateUrl:"cart/templates/cart.tpl.html",controller:"CartCtrl",controllerAs:"cart",resolve:{Order:["$rootScope","$q","$state","toastr","CurrentOrder",function($rootScope,$q,$state,toastr,CurrentOrder){var dfd=$q.defer();return CurrentOrder.Get().then(function(order){dfd.resolve(order)})["catch"](function(){dfd.resolve(null)}),dfd.promise}],CurrentOrderResolve:["$state","Order",function($state,Order){Order||$state.go("home")}],LineItemsList:["$q","$state","toastr","Underscore","OrderCloud","LineItemHelpers","Order",function($q,$state,toastr,Underscore,OrderCloud,LineItemHelpers,Order){var dfd=$q.defer();return OrderCloud.LineItems.List(Order.ID).then(function(data){data.Items.length?LineItemHelpers.GetProductInfo(data.Items).then(function(){dfd.resolve(data)}):(toastr.error("Your order does not contain any line items.","Error"),"cart"===$state.current.name&&$state.go("home"),dfd.reject())})["catch"](function(){toastr.error("Your order does not contain any line items.","Error"),dfd.reject()}),dfd.promise}],PromotionsList:["OrderCloud","Order",function(OrderCloud,Order){return OrderCloud.Orders.ListPromotions(Order.ID)}]}})}function CartController($q,$rootScope,$timeout,OrderCloud,LineItemHelpers,Order,LineItemsList,PromotionsList){function PagingFunction(){var dfd=$q.defer();return vm.lineItems.Meta.Page<vm.lineItems.Meta.TotalPages?OrderCloud.LineItems.List(vm.order.ID,vm.lineItems.Meta.Page+1,vm.lineItems.Meta.PageSize).then(function(data){vm.lineItems.Meta=data.Meta,vm.lineItems.Items=[].concat(vm.lineItems.Items,data.Items),LineItemHelpers.GetProductInfo(vm.lineItems.Items).then(function(){dfd.resolve(vm.lineItems)})}):dfd.reject(),dfd.promise}var vm=this;vm.order=Order,vm.lineItems=LineItemsList,vm.promotions=PromotionsList,vm.removeItem=LineItemHelpers.RemoveItem,vm.pagingfunction=PagingFunction,vm.updateQuantity=function(cartOrder,lineItem){$timeout.cancel(),$timeout(function(){LineItemHelpers.UpdateQuantity(cartOrder,lineItem)},800)},$rootScope.$on("OC:UpdateOrder",function(event,OrderID){OrderCloud.Orders.Get(OrderID).then(function(data){vm.order=data})}),$rootScope.$on("OC:UpdateLineItem",function(event,Order){OrderCloud.LineItems.List(Order.ID).then(function(data){LineItemHelpers.GetProductInfo(data.Items).then(function(){vm.lineItems=data})})})}function MiniCartController($q,$state,$rootScope,$uibModal,$ocMedia,OrderCloud,LineItemHelpers,CurrentOrder){var vm=this;vm.LineItems={},vm.Order=null,vm.showLineItems=!1,vm.$ocMedia=$ocMedia,vm.getLI=function(){CurrentOrder.Get().then(function(data){vm.Order=data,data&&vm.lineItemCall(data)})},vm.getLI(),vm.checkForExpress=function(){var expressCheckout=!1;return angular.forEach($state.get(),function(state){if(state.url&&"/expressCheckout"==state.url)return expressCheckout=!0}),expressCheckout},vm.checkForCheckout=function(){var checkout=!1;return angular.forEach($state.get(),function(state){if(state.url&&"/checkout"==state.url)return checkout=!0}),checkout},vm.goToCart=function(){$state.go("cart",{},{reload:!0})},vm.lineItemCall=function(order){var dfd=$q.defer(),queue=[];return OrderCloud.LineItems.List(order.ID).then(function(li){vm.LineItems=li,li.Meta.TotalPages>li.Meta.Page&&queue.push(OrderCloud.LineItems.List(order.ID,null,li.Meta.Page+1)),$q.all(queue).then(function(results){angular.forEach(results,function(result){vm.LineItems.Items=[].concat(vm.LineItems.Items,result.Items),vm.LineItems.Meta=result.Meta}),dfd.resolve(LineItemHelpers.GetProductInfo(vm.LineItems.Items.reverse()))})}),dfd.promise},$rootScope.$on("LineItemAddedToCart",function(){CurrentOrder.Get().then(function(order){vm.$ocMedia("max-width:767px")?vm.openModal(order):(vm.lineItemCall(order),vm.showLineItems=!0)})}),$rootScope.$on("OC:RemoveOrder",function(){vm.Order=null,vm.LineItems={}}),vm.toggleDropdown=function($event){vm.showLineItems=!0,vm.$ocMedia("max-width:767px")&&vm.goToCart()},vm.openModal=function(order){$uibModal.open({animation:!0,size:"lg",templateUrl:"cart/templates/modalMinicart.tpl.html",controller:"MinicartModalController",controllerAs:"minicartModal",resolve:{LineItems:vm.lineItemCall(order)}})}}function OrderCloudMiniCartDirective(){return{restrict:"E",scope:{},templateUrl:"cart/templates/minicart.tpl.html",controller:"MiniCartCtrl",controllerAs:"minicart"}}function MinicartModalController($state,$uibModalInstance,LineItems){var vm=this;vm.lineItems=LineItems,vm.lineItemsLength=vm.lineItems.length,vm.cancel=function(){$uibModalInstance.dismiss("cancel")},vm.goToCart=function(){$state.go("cart"),$uibModalInstance.close()},vm.goToExpressCheckout=function(){$state.go("expressCheckout"),$uibModalInstance.close()},vm.goToCheckout=function(){$state.go("checkout"),$uibModalInstance.close()}}CartConfig.$inject=["$stateProvider"],CartController.$inject=["$q","$rootScope","$timeout","OrderCloud","LineItemHelpers","Order","LineItemsList","PromotionsList"],MiniCartController.$inject=["$q","$state","$rootScope","$uibModal","$ocMedia","OrderCloud","LineItemHelpers","CurrentOrder"],MinicartModalController.$inject=["$state","$uibModalInstance","LineItems"],angular.module("orderCloud").config(CartConfig).controller("CartCtrl",CartController).controller("MiniCartCtrl",MiniCartController).directive("ordercloudMinicart",OrderCloudMiniCartDirective).controller("MinicartModalController",MinicartModalController)}(),function(){"use strict";function BuyerConfig($stateProvider){$stateProvider.state("buyers",{parent:"base",templateUrl:"buyers/templates/buyers.tpl.html",controller:"BuyerCtrl",controllerAs:"buyers",url:"/buyers?search&page&pageSize&searchOn&sortBy",data:{componentName:"Buyers"},resolve:{Parameters:["$stateParams","OrderCloudParameters",function($stateParams,OrderCloudParameters){return OrderCloudParameters.Get($stateParams)}],BuyerList:["OrderCloud","Parameters",function(OrderCloud,Parameters){return OrderCloud.Buyers.List(Parameters.search,Parameters.page,Parameters.pageSize||12)}]}}).state("buyers.edit",{url:"/:buyerid/edit",templateUrl:"buyers/templates/buyerEdit.tpl.html",controller:"BuyerEditCtrl",controllerAs:"buyerEdit",resolve:{SelectedBuyer:["$stateParams","OrderCloud",function($stateParams,OrderCloud){return OrderCloud.Buyers.Get($stateParams.buyerid)}]}}).state("buyers.create",{url:"/create",templateUrl:"buyers/templates/buyerCreate.tpl.html",controller:"BuyerCreateCtrl",controllerAs:"buyerCreate"})}function BuyerController($state,$ocMedia,OrderCloud,OrderCloudParameters,Parameters,BuyerList){var vm=this;vm.list=BuyerList,vm.parameters=Parameters,vm.sortSelection=Parameters.sortBy?0==Parameters.sortBy.indexOf("!")?Parameters.sortBy.split("!")[1]:Parameters.sortBy:null,vm.filtersApplied=vm.parameters.filters||$ocMedia("max-width:767px")&&vm.sortSelection,vm.showFilters=vm.filtersApplied,vm.searchResults=Parameters.search&&Parameters.search.length>0,vm.filter=function(resetPage){$state.go(".",OrderCloudParameters.Create(vm.parameters,resetPage))},vm.search=function(){vm.filter(!0)},vm.clearSearch=function(){vm.parameters.search=null,vm.filter(!0)},vm.clearFilters=function(){vm.parameters.filters=null,$ocMedia("max-width:767px")?vm.parameters.sortBy=null:angular.noop(),vm.filter(!0)},vm.updateSort=function(value){switch(value?angular.noop():value=vm.sortSelection,vm.parameters.sortBy){case value:vm.parameters.sortBy="!"+value;break;case"!"+value:vm.parameters.sortBy=null;break;default:vm.parameters.sortBy=value}vm.filter(!1)},vm.reverseSort=function(){0==Parameters.sortBy.indexOf("!")?vm.parameters.sortBy=Parameters.sortBy.split("!")[1]:vm.parameters.sortBy="!"+Parameters.sortBy,vm.filter(!1)},vm.pageChanged=function(){$state.go(".",{page:vm.list.Meta.Page})},vm.loadMore=function(){return OrderCloud.Buyers.List(Parameters.search,vm.list.Meta.Page+1,Parameters.pageSize||vm.list.Meta.PageSize,Parameters.searchOn,Parameters.sortBy,Parameters.filters).then(function(data){vm.list.Items=vm.list.Items.concat(data.Items),vm.list.Meta=data.Meta})}}function BuyerEditController($exceptionHandler,$state,toastr,OrderCloud,SelectedBuyer){var vm=this;vm.buyer=SelectedBuyer,vm.buyerName=SelectedBuyer.Name,vm.Submit=function(){OrderCloud.Buyers.Update(vm.buyer,SelectedBuyer.ID).then(function(){$state.go("buyers",{},{reload:!0}),toastr.success("Buyer Updated","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}function BuyerCreateController($exceptionHandler,$state,toastr,OrderCloud){var vm=this;vm.Submit=function(){OrderCloud.Buyers.Create(vm.buyer).then(function(){$state.go("buyers",{},{reload:!0}),toastr.success("Buyer Created","Success")})["catch"](function(ex){$exceptionHandler(ex)})}}BuyerConfig.$inject=["$stateProvider"],BuyerController.$inject=["$state","$ocMedia","OrderCloud","OrderCloudParameters","Parameters","BuyerList"],BuyerEditController.$inject=["$exceptionHandler","$state","toastr","OrderCloud","SelectedBuyer"],BuyerCreateController.$inject=["$exceptionHandler","$state","toastr","OrderCloud"],angular.module("orderCloud").config(BuyerConfig).controller("BuyerCtrl",BuyerController).controller("BuyerEditCtrl",BuyerEditController).controller("BuyerCreateCtrl",BuyerCreateController)}(),function(){"use strict";function CatalogConfig($stateProvider){$stateProvider.state("catalog",{parent:"base",url:"/catalog",data:{componentName:"Catalog"},templateUrl:"catalog/templates/catalog.tpl.html",controller:"CatalogCtrl",controllerAs:"catalog",resolve:{Catalog:["$q","OrderCloud",function($q,OrderCloud){return OrderCloud.Me.ListCategories(null,1)}],Order:["$q","CurrentOrder",function($q,CurrentOrder){var dfd=$q.defer();return CurrentOrder.Get().then(function(order){dfd.resolve(order)})["catch"](function(){dfd.resolve(null)}),dfd.promise}]}})}function AddToOrder($q,$rootScope,Underscore,OrderCloud,CurrentOrder,LineItemHelpers){function _add(product){function AddLineItem(order,p){var li={ProductID:p.ID,Quantity:p.Quantity,Specs:LineItemHelpers.SpecConvert(p.Specs)};li.ShippingAddressID=isSingleShipping(order)?getSingleShippingAddressID(order):null,OrderCloud.LineItems.Create(order.ID,li).then(function(lineItem){$rootScope.$broadcast("LineItemAddedToCart",order.ID,lineItem),deferred.resolve()})}function isSingleShipping(order){return 1==Underscore.pluck(order.LineItems,"ShippingAddressID").length}function getSingleShippingAddressID(order){return order.LineItems[0].ShippingAddressID}var deferred=$q.defer();return CurrentOrder.Get().then(function(order){CurrentOrder.GetLineItems(order.ID).then(function(lineItems){order.LineItems=lineItems,AddLineItem(order,product)})})["catch"](function(){OrderCloud.Orders.Create({}).then(function(order){CurrentOrder.Set(order.ID),AddLineItem(order,product)})}),deferred.promise}var service={Add:_add};return service}function CatalogController(Catalog,Order){var vm=this;vm.showTree=!0,vm.currentOrder=Order,vm.categories=Catalog,vm.toggleTree=function(){vm.showTree=!vm.showTree}}function CategoryListDirective(){return{restrict:"E",templateUrl:"catalog/templates/category.list.tpl.html",scope:{categorylist:"="}}}function ProductListDirective(){return{restrict:"E",templateUrl:"catalog/templates/product.list.tpl.html",scope:{productlist:"="}}}function CatalogTreeService($q,Underscore,OrderCloud){function _tree(){var tree=[],dfd=$q.defer();return OrderCloud.Me.ListCategories(null,1,100,null,null,null,"all").then(function(list){angular.forEach(Underscore.where(list.Items,{ParentID:null}),function(node){tree.push(getNode(node,list))}),dfd.resolve(tree)}),dfd.promise}function getNode(node,list){var children=Underscore.where(list.Items,{ParentID:node.ID});return children.length>0?(node.children=children,angular.forEach(children,function(child){return getNode(child,list)})):node.children=[],node}return{GetCatalogTree:_tree}}function CatalogTree($q,CatalogTreeService){return{restrict:"E",replace:!0,scope:{tree:"=?"},link:function(scope){var d=$q.defer();return void 0==scope.tree?CatalogTreeService.GetCatalogTree().then(function(tree){scope.tree=tree,d.resolve()}):d.resolve(),d.promise},template:"<ul class='nav nav-pills nav-stacked'><catalog-node ng-repeat='node in tree' node='node'></catalog-node></ul>"}}function CatalogNode($compile){return{restrict:"E",replace:!0,scope:{node:"="},template:'<li ui-sref-active="active"><a ui-sref="catalog.category({categoryid:node.ID})" ng-bind-html="node.Name"></a></li>',link:function(scope,element){angular.isArray(scope.node.children)&&scope.node.children.length&&(element.append("<catalog-tree tree='node.children' />"),$compile(element.contents())(scope))}}}function CatalogFacetsDirective($rootScope,$q,$stateParams,$state,Underscore,OrderCloud,CatalogFacetsService){return{restrict:"E",templateUrl:"catalog/templates/catalogFacets.tpl.html",replace:!0,link:function(scope){function initFacets(){var dfd=$q.defer();return $state.is("catalog.category")&&$stateParams.categoryid?CatalogFacetsService.GetCategoryFacets($stateParams.categoryid).then(function(data){scope.facetList=data,dfd.resolve()}):(scope.facetList=null,dfd.resolve()),dfd.promise}initFacets().then(function(){scope.$watch("facetList",function(n,o){if(n&&n!==o){var filterObj={};angular.forEach(n,function(facet,facetName){var filterKey="xp.OC_Facets."+$stateParams.categoryid+"."+facetName,filterValue=Underscore.keys(Underscore.pick(facet,function(value,key,object){return value})).join("|");filterValue.length&&(filterObj[filterKey]=filterValue)}),Underscore.keys(filterObj).length?OrderCloud.Products.List(null,1,100,null,null,filterObj).then(function(data){$rootScope.$broadcast("OC:FacetsUpdated",data)}):$rootScope.$broadcast("OC:FacetsUpdated",null)}},!0)}),scope.$watch(function(){return $stateParams.categoryid},function(n,o){initFacets()})}}}function CatalogFacetsService($q,OrderCloud){function _getCategoryFacets(catID){var dfd=$q.defer();return OrderCloud.Categories.Get(catID).then(function(category){if(category.xp&&category.xp.OC_Facets){var result={};angular.forEach(category.xp.OC_Facets,function(val,key){var facetValues={};angular.forEach(val.Values,function(value){facetValues[value]=!1}),result[key]=facetValues}),dfd.resolve(result)}else dfd.resolve(null)}),dfd.promise}return{GetCategoryFacets:_getCategoryFacets}}CatalogConfig.$inject=["$stateProvider"],AddToOrder.$inject=["$q","$rootScope","Underscore","OrderCloud","CurrentOrder","LineItemHelpers"],CatalogController.$inject=["Catalog","Order"],CatalogTreeService.$inject=["$q","Underscore","OrderCloud"],CatalogNode.$inject=["$compile"],CatalogTree.$inject=["$q","CatalogTreeService"],CatalogFacetsDirective.$inject=["$rootScope","$q","$stateParams","$state","Underscore","OrderCloud","CatalogFacetsService"],CatalogFacetsService.$inject=["$q","OrderCloud"],angular.module("orderCloud").config(CatalogConfig).factory("AddToOrder",AddToOrder).controller("CatalogCtrl",CatalogController).directive("ordercloudCategoryList",CategoryListDirective).directive("ordercloudProductList",ProductListDirective).factory("CatalogTreeService",CatalogTreeService).directive("catalogNode",CatalogNode).directive("catalogTree",CatalogTree).directive("ordercloudCatalogFacets",CatalogFacetsDirective).factory("CatalogFacetsService",CatalogFacetsService)}(),function(){"use strict";function UnderscoreFactory($window){return $window._}UnderscoreFactory.$inject=["$window"],angular.module("orderCloud").factory("Underscore",UnderscoreFactory)}(),function(){"use strict";function TokenRefresh($resource,$localForage,$injector,clientid,appname,authurl){function _set(value){remember=value}function _get(){return remember}function _setToken(token){return $localForage.setItem(appname+".refresh_token",token)}function _getToken(){return $localForage.getItem(appname+".refresh_token")}function _removeToken(){$localForage.removeItem(appname+".refresh_token")}function _refresh(token){var data=$.param({grant_type:"refresh_token",scope:scope?scope:ocscope,client_id:clientid,refresh_token:token});return $resource(authurl,{},{refresh:{method:"POST"}}).refresh(data).$promise}var remember,service={Set:_set,Get:_get,SetToken:_setToken,GetToken:_getToken,Refresh:_refresh,RemoveToken:_removeToken},scope=$injector.has("scope")?$injector.get("scope"):null,ocscope=$injector.has("ocscope")?$injector.get("ocscope"):null;return service}TokenRefresh.$inject=["$resource","$localForage","$injector","clientid","appname","authurl"],angular.module("orderCloud").factory("TokenRefresh",TokenRefresh)}(),function(){"use strict";function OrdercloudSearch(){return{scope:{placeholder:"@",servicename:"@",controlleras:"=",model:"@"},restrict:"E",templateUrl:"common/search/templates/search.tpl.html",controller:"ordercloudSearchCtrl",controllerAs:"ocSearch",replace:!0}}function OrdercloudSearchController($timeout,$scope,OrderCloud,TrackSearch){if($scope.searchTerm=null,$scope.servicename){var var_name=$scope.servicename.replace(/([a-z])([A-Z])/g,"$1 $2");$scope.placeholder="Search "+var_name+"...";var Service=OrderCloud[$scope.servicename]}var searching;$scope.$watch("searchTerm",function(n,o){n==o?searching&&$timeout.cancel(searching):(searching&&$timeout.cancel(searching),searching=$timeout(function(){""==n?n=null:angular.noop(),TrackSearch.SetTerm(n),"Orders"===$scope.servicename?$scope.controlleras.searchfunction?$scope.controlleras.searchfunction($scope.searchTerm).then(function(data){$scope.model?$scope.controlleras[$scope.model]=data:$scope.controlleras.list=data}):Service.ListIncoming(null,null,n).then(function(data){$scope.model?$scope.controlleras[$scope.model]=data:$scope.controlleras.list=data}):"SpendingAccounts"===$scope.servicename?$scope.controlleras.searchfunction?$scope.controlleras.searchfunction($scope.searchTerm).then(function(data){$scope.model?$scope.controlleras[$scope.model]=data:$scope.controlleras.list=data}):Service.List(n,null,null,null,null,{RedemptionCode:"!*"}).then(function(data){$scope.model?$scope.controlleras[$scope.model]=data:$scope.controlleras.list=data}):"Users"===$scope.servicename?$scope.controlleras.searchfunction?$scope.controlleras.searchfunction($scope.searchTerm).then(function(data){$scope.model?$scope.controlleras[$scope.model]=data:$scope.controlleras.list=data}):Service.List(null,n).then(function(data){$scope.model?$scope.controlleras[$scope.model]=data:$scope.controlleras.list=data}):"Shipments"===$scope.servicename?$scope.controlleras.searchfunction?$scope.controlleras.searchfunction($scope.searchTerm).then(function(data){$scope.model?$scope.controlleras[$scope.model]=data:$scope.controlleras.list=data}):Service.List(null,n,null,null).then(function(data){$scope.model?$scope.controlleras[$scope.model]=data:$scope.controlleras.list=data}):$scope.controlleras.searchfunction?$scope.controlleras.searchfunction($scope.searchTerm).then(function(data){$scope.model?$scope.controlleras[$scope.model]=data:$scope.controlleras.list=data}):Service.List(n).then(function(data){$scope.model?$scope.controlleras[$scope.model]=data:$scope.controlleras.list=data})},300))})}function TrackSearchService(){function _setTerm(value){term=value}function _getTerm(){return term}var service={SetTerm:_setTerm,GetTerm:_getTerm},term=null;return service}OrdercloudSearchController.$inject=["$timeout","$scope","OrderCloud","TrackSearch"],angular.module("ordercloud-search",[]),angular.module("ordercloud-search").directive("ordercloudSearch",OrdercloudSearch).controller("ordercloudSearchCtrl",OrdercloudSearchController).factory("TrackSearch",TrackSearchService)}(),function(){"use strict";function OrderCloudParametersService(){function _get(stateParams,suffix){var suffixParams,parameters=angular.copy(stateParams);return parameters.filters=parameters.filters?JSON.parse(parameters.filters):null,parameters.from?parameters.from=new Date(parameters.from):angular.noop(),parameters.to?parameters.to=new Date(parameters.to):angular.noop(),suffix&&(suffixParams={},angular.forEach(parameters,function(val,key){suffixParams[key.split(suffix)[0]]=val})),suffixParams||parameters}function _create(params,resetPage,suffix){var suffixParams,parameters=angular.copy(params);return resetPage?parameters.page=null:angular.noop(),parameters.filters&&(""==parameters.filters.orderType?delete parameters.filters.orderType:angular.noop(),""==parameters.filters.type?delete parameters.filters.type:angular.noop(),""==parameters.filters.status?delete parameters.filters.status:angular.noop(),parameters.filters=JSON.stringify(parameters.filters),"{}"==parameters.filters?parameters.filters=null:angular.noop()),parameters.from?parameters.from=parameters.from.toISOString():angular.noop(),parameters.to?parameters.to=parameters.to.toISOString():angular.noop(),suffix&&(suffixParams={},angular.forEach(parameters,function(val,key){suffixParams[key+suffix]=val})),suffixParams||parameters}var service={Get:_get,Create:_create};return service}angular.module("orderCloud").factory("OrderCloudParameters",OrderCloudParametersService)}(),function(){"use strict";function ordercloudLogo(){return{templateUrl:"common/ordercloud-logo/templates/ordercloud-logo.tpl.html",replace:!0,link:function(scope,element,attrs){scope.OrderCloudLogo={Icon:!!attrs.icon,maxHeight:attrs.height,fillColor:attrs.color,width:attrs.width}}}}angular.module("orderCloud").directive("ordercloudLogo",ordercloudLogo)}(),function(){"use strict";function MEDIA_CONSTANT(){return{sm:"(max-width: 600px)","gt-sm":"(min-width: 600px)",md:"(min-width: 600px) and (max-width: 960px)","gt-md":"(min-width: 960px)",lg:"(min-width: 960px) and (max-width: 1200px)","gt-lg":"(min-width: 1200px)"}}function MEDIA_PRIORITY_CONSTANT(){return["gt-lg","lg","gt-md","md","gt-sm","sm"]}function ocMediaFactory(MEDIA,MEDIA_PRIORITY,$rootScope,$window){function $ocMedia(query){var validated=queries[query];angular.isUndefined(validated)&&(validated=queries[query]=validate(query));var result=results[validated];return angular.isUndefined(result)&&(result=add(validated)),result}function validate(query){return MEDIA[query]||("("!==query.charAt(0)?"("+query+")":query)}function add(query){var result=mqls[query]=$window.matchMedia(query);return result.addListener(onQueryChange),results[result.media]=!!result.matches}function onQueryChange(query){$rootScope.$evalAsync(function(){results[query.media]=!!query.matches})}function getQuery(name){return mqls[name]}function getResponsiveAttribute(attrs,attrName){for(var i=0;i<MEDIA_PRIORITY.length;i++){var mediaName=MEDIA_PRIORITY[i];if(mqls[queries[mediaName]].matches){var normalizedName=getNormalizedName(attrs,attrName+"-"+mediaName);if(attrs[normalizedName])return attrs[normalizedName]}}return attrs[getNormalizedName(attrs,attrName)]}function watchResponsiveAttributes(attrNames,attrs,watchFn){var unwatchFns=[];return attrNames.forEach(function(attrName){var normalizedName=getNormalizedName(attrs,attrName);attrs[normalizedName]&&unwatchFns.push(attrs.$observe(normalizedName,angular.bind(void 0,watchFn,null)));for(var mediaName in MEDIA){if(normalizedName=getNormalizedName(attrs,attrName+"-"+mediaName),!attrs[normalizedName])return;unwatchFns.push(attrs.$observe(normalizedName,angular.bind(void 0,watchFn,mediaName)))}}),function(){unwatchFns.forEach(function(fn){fn()})}}function getNormalizedName(attrs,attrName){return normalizeCache[attrName]||(normalizeCache[attrName]=attrs.$normalize(attrName))}var queries={},mqls={},results={},normalizeCache={};return $ocMedia.getResponsiveAttribute=getResponsiveAttribute,$ocMedia.getQuery=getQuery,$ocMedia.watchResponsiveAttributes=watchResponsiveAttributes,$ocMedia}ocMediaFactory.$inject=["MEDIA","MEDIA_PRIORITY","$rootScope","$window"],angular.module("orderCloud").factory("$ocMedia",ocMediaFactory).constant("MEDIA",MEDIA_CONSTANT).constant("MEDIA_PRIORITY",MEDIA_PRIORITY_CONSTANT)}(),function(){"use strict";function LocalForage($localForageProvider){$localForageProvider.config({version:1,name:"OrderCloud",storeName:"four51",description:"Four51 OrderCloud Local Storage"})}LocalForage.$inject=["$localForageProvider"],angular.module("orderCloud").config(LocalForage)}(),function(){"use strict";function LineItemFactory($rootScope,$q,$state,$uibModal,Underscore,OrderCloud,CurrentOrder){function _specConvert(specs){var results=[];return angular.forEach(specs,function(spec){var spec_to_push={SpecID:spec.ID};spec.Options.length>0?(spec.DefaultOptionID&&(spec_to_push.OptionID=spec.DefaultOptionID),spec.OptionID&&(spec_to_push.OptionID=spec.OptionID),spec.Value&&(spec_to_push.Value=spec.Value)):spec_to_push.Value=spec.Value||spec.DefaultValue||null,results.push(spec_to_push)}),results}function _removeItem(Order,LineItem){OrderCloud.LineItems.Delete(Order.ID,LineItem.ID).then(function(){OrderCloud.LineItems.List(Order.ID).then(function(data){data.Items.length?$state.reload():(CurrentOrder.Remove(),OrderCloud.Orders.Delete(Order.ID).then(function(){$state.reload(),$rootScope.$broadcast("OC:RemoveOrder")}))})})}function _updateQuantity(Order,LineItem){LineItem.Quantity>0&&OrderCloud.LineItems.Patch(Order.ID,LineItem.ID,{Quantity:LineItem.Quantity}).then(function(){$rootScope.$broadcast("OC:UpdateOrder",Order.ID),$rootScope.$broadcast("OC:UpdateLineItem",Order)})}function _getProductInfo(LineItems){var li=LineItems.Items||LineItems,productIDs=Underscore.uniq(Underscore.pluck(li,"ProductID")),dfd=$q.defer(),queue=[];return angular.forEach(productIDs,function(productid){queue.push(OrderCloud.Me.GetProduct(productid))}),$q.all(queue).then(function(results){angular.forEach(li,function(item){item.Product=angular.copy(Underscore.where(results,{ID:item.ProductID})[0])}),dfd.resolve(li)}),dfd.promise}function _customShipping(Order,LineItem){var modalInstance=$uibModal.open({animation:!0,templateUrl:"common/lineitems/templates/shipping.tpl.html",controller:"LineItemModalCtrl",controllerAs:"liModal",size:"lg"});modalInstance.result.then(function(address){address.ID=Math.floor(1e6*Math.random()).toString(),OrderCloud.LineItems.SetShippingAddress(Order.ID,LineItem.ID,address).then(function(){$rootScope.$broadcast("LineItemAddressUpdated",LineItem.ID,address)})})}function _updateShipping(Order,LineItem,AddressID){OrderCloud.Addresses.Get(AddressID).then(function(address){OrderCloud.LineItems.SetShippingAddress(Order.ID,LineItem.ID,address),$rootScope.$broadcast("LineItemAddressUpdated",LineItem.ID,address)})}function _listAll(orderID){var li,dfd=$q.defer(),queue=[];return OrderCloud.LineItems.List(orderID,null,1,100).then(function(data){if(li=data,data.Meta.TotalPages>data.Meta.Page)for(var page=data.Meta.Page;page<data.Meta.TotalPages;)page+=1,queue.push(OrderCloud.LineItems.List(orderID,null,page,100));$q.all(queue).then(function(results){angular.forEach(results,function(result){li.Items=[].concat(li.Items,result.Items),li.Meta=result.Meta}),dfd.resolve(li.Items)})}),dfd.promise}return{SpecConvert:_specConvert,RemoveItem:_removeItem,UpdateQuantity:_updateQuantity,GetProductInfo:_getProductInfo,CustomShipping:_customShipping,UpdateShipping:_updateShipping,ListAll:_listAll}}function LineItemModalController($uibModalInstance){var vm=this;vm.address={},vm.submit=function(){$uibModalInstance.close(vm.address)},vm.cancel=function(){vm.address={},$uibModalInstance.dismiss("cancel")}}LineItemFactory.$inject=["$rootScope","$q","$state","$uibModal","Underscore","OrderCloud","CurrentOrder"],LineItemModalController.$inject=["$uibModalInstance"],angular.module("ordercloud-lineitems",[]).factory("LineItemHelpers",LineItemFactory).controller("LineItemModalCtrl",LineItemModalController)}(),function(){"use strict";function InfiniteScrollDirective(Paging){return{restrict:"A",scope:{servicename:"@",controlleras:"=",idname:"@",threshold:"@"},controller:"InfiniteScrollCtrl",controllerAs:"InfiniteScroll",link:function(scope,element){var threshold=scope.threshold||0,ele=element[0];element.bind("scroll",function(){ele.scrollTop+ele.offsetHeight+threshold>=ele.scrollHeight&&(scope.controlleras&&void 0!==scope.controlleras.pagingfunction?scope.controlleras.pagingfunction():scope.servicename&&scope.controlleras&&scope.controlleras.list?Paging.Paging(scope.controlleras.list,scope.servicename):console.log("Error: Infinite scroll directive not fully defined."))})}}}function InfiniteScrollController($scope,Paging,TrackSearch){TrackSearch.SetTerm(null),$scope.$watchCollection(function(){if($scope.controlleras&&$scope.controlleras.assignments)return $scope.controlleras.assignments},function(){$scope.controlleras&&$scope.controlleras.assignments&&$scope.controlleras.list&&$scope.idname&&Paging.SetSelected($scope.controlleras.list.Items,$scope.controlleras.assignments.Items,$scope.idname)})}InfiniteScrollDirective.$inject=["Paging"],InfiniteScrollController.$inject=["$scope","Paging","TrackSearch"],angular.module("ordercloud-infinite-scroll",["ordercloud-search","ordercloud-paging-helpers"]),angular.module("ordercloud-infinite-scroll").directive("ordercloudInfiniteScroll",InfiniteScrollDirective).controller("InfiniteScrollCtrl",InfiniteScrollController);
}(),function(){"use strict";function PagingHelpers($q,OrderCloud,Assignments){function _setSelected(ListArray,AssignmentsArray,ID_Name){if(ListArray&&AssignmentsArray&&ID_Name){var assigned=Assignments.GetAssigned(AssignmentsArray,ID_Name);angular.forEach(ListArray,function(item){assigned.indexOf(item.ID)>-1&&(item.selected=!0)})}}function _paging(ListObject,ServiceName,AssignmentObjects,AssignmentFunc){var Service=OrderCloud[ServiceName];if(Service&&ListObject.Meta.Page<ListObject.Meta.TotalPages){var queue=[],dfd=$q.defer();return"Orders"!==ServiceName&&"Categories"!==ServiceName&&queue.push(Service.List(null,ListObject.Meta.Page+1,ListObject.Meta.PageSize)),"Orders"===ServiceName&&queue.push(Service.ListIncoming(null,null,null,ListObject.Meta.Page+1,ListObject.Meta.PageSize)),"Categories"===ServiceName&&queue.push(Service.List(null,"all",ListObject.Meta.Page+1,ListObject.Meta.PageSize)),void 0!==AssignmentFunc&&AssignmentObjects.Meta.Page<AssignmentObjects.Meta.TotalPages&&queue.push(AssignmentFunc()),$q.all(queue).then(function(results){dfd.resolve(),ListObject.Meta=results[0].Meta,ListObject.Items=[].concat(ListObject.Items,results[0].Items),results[1]&&(AssignmentObjects.Meta=results[1].Meta,AssignmentObjects.Items=[].concat(AssignmentObjects.Items,results[1].Items))}),dfd.promise}return null}return{SetSelected:_setSelected,Paging:_paging}}PagingHelpers.$inject=["$q","OrderCloud","Assignments"],angular.module("ordercloud-paging-helpers",["ordercloud-assignment-helpers"]).factory("Paging",PagingHelpers)}(),function(){"use strict";function AssignmentHelpers($q,$state,Underscore){function _getAssigned(AssignmentsArray,ID_Name){return Underscore.pluck(AssignmentsArray,ID_Name)}function _getSelected(ListArray){return Underscore.pluck(Underscore.where(ListArray,{selected:!0}),"ID")}function _getUnselected(ListArray){return Underscore.pluck(Underscore.filter(ListArray,function(item){return!item.selected}),"ID")}function _getToAssign(ListArray,AssignmentsArray,ID_Name){return Underscore.difference(_getSelected(ListArray),_getAssigned(AssignmentsArray,ID_Name))}function _getToDelete(ListArray,AssignmentsArray,ID_Name){return Underscore.intersection(_getUnselected(ListArray),_getAssigned(AssignmentsArray,ID_Name))}function _saveAssignments(ListArray,AssignmentsArray,SaveFunc,DeleteFunc,ID_Name){var id_name=ID_Name?ID_Name:"UserGroupID",toAssign=_getToAssign(ListArray,AssignmentsArray,id_name),toDelete=_getToDelete(ListArray,AssignmentsArray,id_name),queue=[],dfd=$q.defer();return angular.forEach(toAssign,function(ItemID){queue.push(SaveFunc(ItemID))}),angular.forEach(toDelete,function(ItemID){queue.push(DeleteFunc(ItemID))}),$q.all(queue).then(function(){dfd.resolve()}).then(function(){$state.reload($state.current)}),dfd.promise}return{GetAssigned:_getAssigned,GetSelected:_getSelected,GetUnselected:_getUnselected,GetToAssign:_getToAssign,GetToDelete:_getToDelete,SaveAssignments:_saveAssignments}}AssignmentHelpers.$inject=["$q","$state","Underscore"],angular.module("ordercloud-assignment-helpers",[]).factory("Assignments",AssignmentHelpers)}(),function(){"use strict";function OCGeography(){var _countries=[{label:"United States of America",value:"US"},{label:"Afghanistan",value:"AF"},{label:"Åland Islands",value:"AX"},{label:"Albania",value:"AL"},{label:"Algeria",value:"DZ"},{label:"American Samoa",value:"AS"},{label:"Andorra",value:"AD"},{label:"Angola",value:"AO"},{label:"Anguilla",value:"AI"},{label:"Antarctica",value:"AQ"},{label:"Antigua and Barbuda",value:"AG"},{label:"Argentina",value:"AR"},{label:"Armenia",value:"AM"},{label:"Aruba",value:"AW"},{label:"Australia",value:"AU"},{label:"Austria",value:"AT"},{label:"Azerbaijan",value:"AZ"},{label:"Bahamas",value:"BS"},{label:"Bahrain",value:"BH"},{label:"Bangladesh",value:"BD"},{label:"Barbados",value:"BB"},{label:"Belarus",value:"BY"},{label:"Belgium",value:"BE"},{label:"Belize",value:"BZ"},{label:"Benin",value:"BJ"},{label:"Bermuda",value:"BM"},{label:"Bhutan",value:"BT"},{label:"Bolivia",value:"BO"},{label:"Bosnia and Herzegovina",value:"BA"},{label:"Botswana",value:"BW"},{label:"Bouvet Island",value:"BV"},{label:"Brazil",value:"BR"},{label:"British Indian Ocean Territory",value:"IO"},{label:"Brunei Darussalam",value:"BN"},{label:"Bulgaria",value:"BG"},{label:"Burkina Faso",value:"BF"},{label:"Burundi",value:"BI"},{label:"Cambodia",value:"KH"},{label:"Cameroon",value:"CM"},{label:"Canada",value:"CA"},{label:"Cape Verde",value:"CV"},{label:"Cayman Islands",value:"KY"},{label:"Central African Republic",value:"CF"},{label:"Chad",value:"TD"},{label:"Chile",value:"CL"},{label:"China",value:"CN"},{label:"Christmas Island Australia",value:"CX"},{label:"Cocos Keeling Islands",value:"CC"},{label:"Colombia",value:"CO"},{label:"Comoros",value:"KM"},{label:"Congo",value:"CG"},{label:"Congo, D.R.",value:"CD"},{label:"Cook Islands",value:"CK"},{label:"Costa Rica",value:"CR"},{label:"Cote D'Ivoire Ivory Coast",value:"CI"},{label:"Croatia Hrvatska",value:"HR"},{label:"Cuba",value:"CU"},{label:"Cyprus",value:"CY"},{label:"Czech Republic",value:"CZ"},{label:"Denmark",value:"DK"},{label:"Djibouti",value:"DJ"},{label:"Dominica",value:"DM"},{label:"Dominican Republic",value:"DO"},{label:"Ecuador",value:"EC"},{label:"Egypt",value:"EG"},{label:"El Salvador",value:"SV"},{label:"Equatorial Guinea",value:"GQ"},{label:"Eritrea",value:"ER"},{label:"Estonia",value:"EE"},{label:"Ethiopia",value:"ET"},{label:"Faeroe Islands",value:"FO"},{label:"Falkland Islands Malvinas",value:"FK"},{label:"Fiji",value:"FJ"},{label:"Finland",value:"FI"},{label:"France",value:"FR"},{label:"France, Metropolitan",value:"FX"},{label:"French Guiana",value:"GF"},{label:"French Polynesia",value:"PF"},{label:"French Southern Territories",value:"TF"},{label:"Gabon",value:"GA"},{label:"Gambia",value:"GM"},{label:"Georgia",value:"GE"},{label:"Germany",value:"DE"},{label:"Ghana",value:"GH"},{label:"Gibraltar",value:"GI"},{label:"Greece",value:"GR"},{label:"Greenland",value:"GL"},{label:"Grenada",value:"GD"},{label:"Guadeloupe",value:"GP"},{label:"Guam",value:"GU"},{label:"Guatemala",value:"GT"},{label:"Guinea",value:"GN"},{label:"Guinea Bissau",value:"GW"},{label:"Guyana",value:"GY"},{label:"Haiti",value:"HT"},{label:"Heard and McDonald Is.",value:"HM"},{label:"Honduras",value:"HN"},{label:"Hong Kong",value:"HK"},{label:"Hungary",value:"HU"},{label:"Iceland",value:"IS"},{label:"India",value:"IN"},{label:"Indonesia",value:"ID"},{label:"Iran",value:"IR"},{label:"Iraq",value:"IQ"},{label:"Isle of Man",value:"IM"},{label:"Ireland",value:"IE"},{label:"Israel",value:"IL"},{label:"Italy",value:"IT"},{label:"Jamaica",value:"JM"},{label:"Japan",value:"JP"},{label:"Jersey",value:"JE"},{label:"Jordan",value:"JO"},{label:"Kazakhstan",value:"KZ"},{label:"Kenya",value:"KE"},{label:"Kiribati",value:"KI"},{label:"Korea North",value:"KP"},{label:"Korea South",value:"KR"},{label:"Kuwait",value:"KW"},{label:"Kyrgyzstan",value:"KG"},{label:"Lao P.Dem.R.",value:"LA"},{label:"Latvia",value:"LV"},{label:"Lebanon",value:"LB"},{label:"Lesotho",value:"LS"},{label:"Liberia",value:"LR"},{label:"Libyan Arab Jamahiriya",value:"LY"},{label:"Liechtenstein",value:"LI"},{label:"Lithuania",value:"LT"},{label:"Luxembourg",value:"LU"},{label:"Macau",value:"MO"},{label:"Macedonia",value:"MK"},{label:"Madagascar",value:"MG"},{label:"Malawi",value:"MW"},{label:"Malaysia",value:"MY"},{label:"Maldives",value:"MV"},{label:"Mali",value:"ML"},{label:"Malta",value:"MT"},{label:"Marshall Islands",value:"MH"},{label:"Martinique",value:"MQ"},{label:"Mauritania",value:"MR"},{label:"Mauritius",value:"MU"},{label:"Mayotte",value:"YT"},{label:"Mexico",value:"MX"},{label:"Micronesia",value:"FM"},{label:"Moldova",value:"MD"},{label:"Monaco",value:"MC"},{label:"Mongolia",value:"MN"},{label:"Montenegro",value:"ME"},{label:"Montserrat",value:"MS"},{label:"Morocco",value:"MA"},{label:"Mozambique",value:"MZ"},{label:"Myanmar",value:"MM"},{label:"Namibia",value:"NA"},{label:"Nauru",value:"NR"},{label:"Nepal",value:"NP"},{label:"Netherlands",value:"NL"},{label:"Netherlands Antilles",value:"AN"},{label:"New Caledonia",value:"NC"},{label:"New Zealand",value:"NZ"},{label:"Nicaragua",value:"NI"},{label:"Niger",value:"NE"},{label:"Nigeria",value:"NG"},{label:"Niue",value:"NU"},{label:"Norfolk Island",value:"NF"},{label:"Northern Mariana Islands",value:"MP"},{label:"Norway",value:"NO"},{label:"Oman",value:"OM"},{label:"Pakistan",value:"PK"},{label:"Palau",value:"PW"},{label:"Palestinian Territory, Occupied",value:"PS"},{label:"Panama",value:"PA"},{label:"Papua New Guinea",value:"PG"},{label:"Paraguay",value:"PY"},{label:"Peru",value:"PE"},{label:"Philippines",value:"PH"},{label:"Pitcairn",value:"PN"},{label:"Poland",value:"PL"},{label:"Portugal",value:"PT"},{label:"Puerto Rico",value:"PR"},{label:"Qatar",value:"QA"},{label:"Reunion",value:"RE"},{label:"Romania",value:"RO"},{label:"Russian Federation",value:"RU"},{label:"Rwanda",value:"RW"},{label:"Saint Helena",value:"SH"},{label:"Saint Kitts and Nevis",value:"KN"},{label:"Saint Lucia",value:"LC"},{label:"Saint Pierre and Miquelon",value:"PM"},{label:"Saint Vincent and the Grenadines",value:"VC"},{label:"Samoa",value:"WS"},{label:"San Marino",value:"SM"},{label:"Sao Tome and Principe",value:"ST"},{label:"Saudi Arabia",value:"SA"},{label:"Senegal",value:"SN"},{label:"Serbia",value:"RS"},{label:"Seychelles",value:"SC"},{label:"Sierra Leone",value:"SL"},{label:"Singapore",value:"SG"},{label:"Slovakia",value:"SK"},{label:"Slovenia",value:"SI"},{label:"Solomon Islands",value:"SB"},{label:"Somalia",value:"SO"},{label:"South Africa",value:"ZA"},{label:"S. Georgia &amp; S. Sandwich Is.",value:"GS"},{label:"Spain",value:"ES"},{label:"Sri Lanka",value:"LK"},{label:"Sudan",value:"SD"},{label:"Suriname",value:"SR"},{label:"Svalbard &amp; Jan Mayen Is.",value:"SJ"},{label:"Swaziland",value:"SZ"},{label:"Sweden",value:"SE"},{label:"Switzerland",value:"CH"},{label:"Syrian Arab Rep.",value:"SY"},{label:"Taiwan",value:"TW"},{label:"Tajikistan",value:"TJ"},{label:"Tanzania",value:"TZ"},{label:"Thailand",value:"TH"},{label:"Timor-Leste",value:"TG"},{label:"Togo",value:"TG"},{label:"Tokelau",value:"TK"},{label:"Tonga",value:"TO"},{label:"Trinidad and Tobago",value:"TT"},{label:"Tunisia",value:"TN"},{label:"Turkey",value:"TR"},{label:"Turkmenistan",value:"TM"},{label:"Turks and Caicos Islands",value:"TC"},{label:"Tuvalu",value:"TU"},{label:"Uganda",value:"UG"},{label:"Ukraine",value:"UA"},{label:"United Kingdom",value:"GB"},{label:"United Arab Emirates",value:"AE"},{label:"US Minor Outlying Is.",value:"UM"},{label:"Uruguay",value:"UY"},{label:"Uzbekistan",value:"UZ"},{label:"Vanuatu",value:"VU"},{label:"Vatican City State",value:"VC"},{label:"Venezuela",value:"VE"},{label:"Viet Nam",value:"VN"},{label:"Virgin Islands British",value:"VG"},{label:"Virgin Islands US",value:"VI"},{label:"Wallis and Futuna Islnds",value:"WF"},{label:"Western Sahara",value:"EH"},{label:"Yemen",value:"YE"},{label:"Yugoslavia",value:"YU"},{label:"Zambia",value:"ZM"},{label:"Zimbabwe",value:"ZW"}],_states=[{label:"Alabama",value:"AL",country:"US"},{label:"Alaska",value:"AK",country:"US"},{label:"Arizona",value:"AZ",country:"US"},{label:"Arkansas",value:"AR",country:"US"},{label:"California",value:"CA",country:"US"},{label:"Colorado",value:"CO",country:"US"},{label:"Connecticut",value:"CT",country:"US"},{label:"Delaware",value:"DE",country:"US"},{label:"District of Columbia",value:"DC",country:"US"},{label:"Florida",value:"FL",country:"US"},{label:"Georgia",value:"GA",country:"US"},{label:"Hawaii",value:"HI",country:"US"},{label:"Idaho",value:"ID",country:"US"},{label:"Illinois",value:"IL",country:"US"},{label:"Indiana",value:"IN",country:"US"},{label:"Iowa",value:"IA",country:"US"},{label:"Kansas",value:"KS",country:"US"},{label:"Kentucky",value:"KY",country:"US"},{label:"Louisiana",value:"LA",country:"US"},{label:"Maine",value:"ME",country:"US"},{label:"Maryland",value:"MD",country:"US"},{label:"Massachusetts",value:"MA",country:"US"},{label:"Michigan",value:"MI",country:"US"},{label:"Minnesota",value:"MN",country:"US"},{label:"Mississippi",value:"MS",country:"US"},{label:"Missouri",value:"MO",country:"US"},{label:"Montana",value:"MT",country:"US"},{label:"Nebraska",value:"NE",country:"US"},{label:"Nevada",value:"NV",country:"US"},{label:"New Hampshire",value:"NH",country:"US"},{label:"New Jersey",value:"NJ",country:"US"},{label:"New Mexico",value:"NM",country:"US"},{label:"New York",value:"NY",country:"US"},{label:"North Carolina",value:"NC",country:"US"},{label:"North Dakota",value:"ND",country:"US"},{label:"Ohio",value:"OH",country:"US"},{label:"Oklahoma",value:"OK",country:"US"},{label:"Oregon",value:"OR",country:"US"},{label:"Pennsylvania",value:"PA",country:"US"},{label:"Rhode Island",value:"RI",country:"US"},{label:"South Carolina",value:"SC",country:"US"},{label:"South Dakota",value:"SD",country:"US"},{label:"Tennessee",value:"TN",country:"US"},{label:"Texas",value:"TX",country:"US"},{label:"Utah",value:"UT",country:"US"},{label:"Vermont",value:"VT",country:"US"},{label:"Virginia",value:"VA",country:"US"},{label:"Washington",value:"WA",country:"US"},{label:"West Virginia",value:"WV",country:"US"},{label:"Wisconsin",value:"WI",country:"US"},{label:"Wyoming",value:"WY",country:"US"},{label:"Armed Forces Americas (AA)",value:"AA",country:"US"},{label:"Armed Forces Africa/Canada/Europe/Middle East (AE)",value:"AE",country:"US"},{label:"Armed Forces Pacific (AP)",value:"AP",country:"US"},{label:"American Samoa",value:"AS",country:"US"},{label:"Federated States of Micronesia",value:"FM",country:"US"},{label:"Guam",value:"GU",country:"US"},{label:"Marshall Islands",value:"MH",country:"US"},{label:"Northern Mariana Islands",value:"MP",country:"US"},{label:"Palau",value:"PW",country:"US"},{label:"Puerto Rico",value:"PR",country:"US"},{label:"Virgin Islands",value:"VI",country:"US"},{label:"Drenthe",value:"Drenthe",country:"NL"},{label:"Flevoland",value:"Flevoland",country:"NL"},{label:"Friesland",value:"Friesland",country:"NL"},{label:"Gelderland",value:"Gelderland",country:"NL"},{label:"Groningen",value:"Groningen",country:"NL"},{label:"Limburg",value:"Limburg",country:"NL"},{label:"Noord-Brabant",value:"Noord-Brabant",country:"NL"},{label:"Noord-Holland",value:"Noord-Holland",country:"NL"},{label:"Overijssel",value:"Overijssel",country:"NL"},{label:"Utrecht",value:"Utrecht",country:"NL"},{label:"Zeeland",value:"Zeeland",country:"NL"},{label:"Zuid-Holland",value:"Zuid-Holland",country:"NL"},{label:"Alberta",value:"AB",country:"CA"},{label:"British Columbia",value:"BC",country:"CA"},{label:"Manitoba",value:"MB",country:"CA"},{label:"New Brunswick",value:"NB",country:"CA"},{label:"Newfoundland and Labrador",value:"NL",country:"CA"},{label:"Northwest Territories",value:"NT",country:"CA"},{label:"Nova Scotia",value:"NS",country:"CA"},{label:"Nunavut",value:"NU",country:"CA"},{label:"Ontario",value:"ON",country:"CA"},{label:"Prince Edward Island",value:"PE",country:"CA"},{label:"Quebec",value:"QC",country:"CA"},{label:"Saskatchewan",value:"SK",country:"CA"},{label:"Yukon",value:"YT",country:"CA"}];return{Countries:_countries,States:_states}}angular.module("ordercloud-geography",[]).factory("OCGeography",OCGeography)}(),function(){"use strict";function fileReader($q){function onLoad(reader,deferred,scope){return function(){scope.$apply(function(){deferred.resolve(reader)})}}function onError(reader,deferred,scope){return function(){scope.$apply(function(){deferred.reject(reader)})}}function onProgress(reader,scope){return function(event){scope.$broadcast("fileProgress",{total:event.total,loaded:event.loaded})}}function getReader(deferred,scope){var reader=new FileReader;return reader.onload=onLoad(reader,deferred,scope),reader.onerror=onError(reader,deferred,scope),reader.onprogress=onProgress(reader,scope),reader}function _readAsDataURL(file,scope){var deferred=$q.defer(),reader=getReader(deferred,scope);return reader.readAsDataURL(file),deferred.promise}var service={ReadAsDataUrl:_readAsDataURL};return service}function FilesService($q,$http,OrderCloud,apiurl){function _upload(file,fileName){var deferred=$q.defer(),fd=new FormData;return fd.append("file",file),$http.post(fileURL+"?filename="+fileName,fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0,Authorization:"Bearer "+OrderCloud.Auth.ReadToken()}}).success(function(data){deferred.resolve(data)}).error(function(error){deferred.reject(error)}),deferred.promise}var service={Upload:_upload},fileURL=apiurl+"/v1/files";return service}function ordercloudFileUpload($parse,Underscore,FileReader,FilesService){function link(scope,element,attrs){function afterSelection(file,fileName){FilesService.Upload(file,fileName).then(function(fileData){scope.model.xp||(scope.model.xp={}),scope.model.xp[scope.keyname]=fileData,scope.model.xp[scope.keyname].Type=file.type})}function updateModel(event){switch(event.target.name){case"upload":if(null==event.target.files[0])return;var fileName=event.target.files[0].name,valid=!0;if((allowed.Extensions.length||allowed.Types.length)&&fileName){var ext=fileName.split(".").pop().toLowerCase();valid=allowed.Extensions.indexOf(ext)!=-1||allowed.Types.indexOf(event.target.files[0].type.split("/")[0])>-1}valid?(scope.invalidExtension=!1,scope.$apply(function(){FileReader.ReadAsDataUrl(event.target.files[0],scope).then(function(f){afterSelection(event.target.files[0],fileName)}),file_input.assign(scope,event.target.files[0])})):scope.$apply(function(){scope.invalidExtension=!0;var input;event.target.files[0]=null,el.find("input").replaceWith(input=el.find("input").clone(!0)),scope.model.xp||(scope.model.xp={}),scope.model.xp[scope.keyname]=null})}}var file_input=$parse("file"),el=(angular.element(element.find("input"))[0],element);scope.invalidExtension=!1,scope.upload=function(){$("#orderCloudUpload").click()},scope.remove=function(){delete scope.model.xp[scope.keyname]};var allowed={Extensions:[],Types:[]};if(scope.extensions){var items=Underscore.map(scope.extensions.split(","),function(ext){return ext.replace(/ /g,"").replace(/\./g,"").toLowerCase()});angular.forEach(items,function(item){item.indexOf("/")>-1?item.indexOf("*")>-1?allowed.Types.push(item.split("/")[0]):allowed.Extensions.push(item.split("/")[1]):allowed.Extensions.push(item)})}element.bind("change",updateModel)}var directive={scope:{model:"=",keyname:"@",label:"@",extensions:"@",invalidExtension:"@"},restrict:"E",templateUrl:"common/files/templates/files.tpl.html",replace:!0,link:link};return directive}fileReader.$inject=["$q"],FilesService.$inject=["$q","$http","OrderCloud","apiurl"],ordercloudFileUpload.$inject=["$parse","Underscore","FileReader","FilesService"],angular.module("orderCloud").factory("FileReader",fileReader).factory("FilesService",FilesService).directive("ordercloudFileUpload",ordercloudFileUpload)}(),function(){"use strict";function CurrentOrderService($q,$localForage,OrderCloud,appname){function _get(){var dfd=$q.defer();return _getID().then(function(OrderID){OrderCloud.Orders.Get(OrderID).then(function(order){dfd.resolve(order)})["catch"](function(){_remove(),dfd.reject()})})["catch"](function(){dfd.reject()}),dfd.promise}function _getID(){var dfd=$q.defer();return $localForage.getItem(StorageName).then(function(orderID){orderID?dfd.resolve(orderID):(_remove(),dfd.reject())})["catch"](function(){dfd.reject()}),dfd.promise}function _set(OrderID){$localForage.setItem(StorageName,OrderID).then(function(data){return data})["catch"](function(error){return error})}function _remove(){return $localForage.removeItem(StorageName)}function _getLineItems(orderID){var deferred=$q.defer(),lineItems=[],queue=[];return _getID().then(function(OrderID){OrderCloud.LineItems.List(OrderID,1,100).then(function(data){lineItems=lineItems.concat(data.Items);for(var i=2;i<=data.Meta.TotalPages;i++)queue.push(OrderCloud.LineItems.List(OrderID,i,100));$q.all(queue).then(function(results){angular.forEach(results,function(result){lineItems=lineItems.concat(result.Items)}),deferred.resolve(lineItems)})})}),deferred.promise}var StorageName=appname+".CurrentOrderID";return{Get:_get,GetID:_getID,Set:_set,Remove:_remove,GetLineItems:_getLineItems}}CurrentOrderService.$inject=["$q","$localForage","OrderCloud","appname"],angular.module("ordercloud-current-order",[]).factory("CurrentOrder",CurrentOrderService)}(),function(){"use strict";function confirmpassword(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){if(ngModel){scope.$watch(attrs.ngModel,function(){validate()}),attrs.$observe("confirmpassword",function(val){validate()});var validate=function(){var val1=ngModel.$viewValue,val2=attrs.confirmpassword;val1&&val2&&val1!==val2?ngModel.$setValidity("confirmpassword",!1):ngModel.$setValidity("confirmpassword",!0)}}}}}angular.module("orderCloud").directive("confirmpassword",confirmpassword)}(),function(){"use strict";function SelectBuyerDirective(){return{scope:{align:"@"},restrict:"E",templateUrl:"common/buyer-select/templates/buyer-select.tpl.html",controller:"SelectBuyerCtrl",controllerAs:"selectBuyer"}}function SelectBuyerController($scope,$state,OrderCloud){var vm=this;vm.align=$scope.align,OrderCloud.Buyers.List().then(function(data){vm.BuyerList=data}),OrderCloud.Buyers.Get(OrderCloud.BuyerID.Get()).then(function(data){vm.selectedBuyer=data}),vm.ChangeBuyer=function(buyer){OrderCloud.Buyers.Get(buyer.ID).then(function(data){vm.selectedBuyer=data,OrderCloud.BuyerID.Set(data.ID),$state.reload($state.current)})},vm.pagingfunction=function(){vm.BuyerList.Meta.Page<=vm.BuyerList.Meta.TotalPages&&OrderCloud.Buyers.List(null,vm.BuyerList.Meta.Page+1,vm.BuyerList.Meta.PageSize).then(function(data){vm.BuyerList.Meta=data.Meta,vm.BuyerList.Items=[].concat(vm.BuyerList.Items,data.Items)})}}SelectBuyerController.$inject=["$scope","$state","OrderCloud"],angular.module("ordercloud-buyer-select",[]).directive("ordercloudSelectBuyer",SelectBuyerDirective).controller("SelectBuyerCtrl",SelectBuyerController)}(),function(){"use strict";function ordercloudAutoIdDirective($compile){return{restrict:"A",require:"ngModel",scope:{boxtext:"@"},link:function(scope,element,attrs,ngModel){scope.boxtext=scope.boxtext||"Auto-Gen. ID";var autoID_element=angular.element("<span class='input-group-addon'><input ng-click='autoID.autoID()' type='checkbox' checked> {{boxtext}} </span>");0==element.parent().hasClass("input-group")&&element.wrap("<div class='input-group'></div>"),autoID_element.attr("checked",!0),autoID_element.find("input").prop("checked")&&element.attr("disabled",!0),autoID_element.find("input").bind("click",function(){autoID_element.attr("checked",!autoID_element.prop("checked")),autoID_element.find("input").prop("checked")?(element.attr("disabled",!0),element.attr("required",!1),element.attr("ng-required",!1),element.removeClass("ng-invalid"),element.removeClass("ng-invalid-required"),ngModel.$setViewValue(null),ngModel.$render()):(element.attr("disabled",!1),element.attr("required",!0),element.attr("ng-required",!0))}),element.after(autoID_element),$compile(autoID_element)(scope)}}}ordercloudAutoIdDirective.$inject=["$compile"],angular.module("ordercloud-auto-id",[]),angular.module("ordercloud-auto-id").directive("ordercloudAutoId",ordercloudAutoIdDirective)}(),function(){"use strict";function AddressFormDirective(OCGeography){return{restrict:"E",scope:{address:"=",isbilling:"="},templateUrl:"common/address/templates/address.form.tpl.html",link:function(scope){scope.countries=OCGeography.Countries,scope.states=OCGeography.States}}}function AddressInfoDirective(){return{restrict:"E",scope:{addressid:"@"},templateUrl:"common/address/templates/address.info.tpl.html",controller:"AddressInfoCtrl",controllerAs:"addressInfo"}}function AddressFilter(){return function(address,option){if(!address)return null;if("full"===option){var result=[];return address.AddressName&&result.push(address.AddressName),result.push((address.FirstName?address.FirstName+" ":"")+address.LastName),result.push(address.Street1),address.Street2&&result.push(address.Street2),result.push(address.City+", "+address.State+" "+address.Zip),result.join("\n")}return address.Street1+(address.Street2?", "+address.Street2:"")}}AddressFormDirective.$inject=["OCGeography"],angular.module("ordercloud-address",[]).directive("ordercloudAddressForm",AddressFormDirective).directive("ordercloudAddressInfo",AddressInfoDirective).filter("address",AddressFilter)}(),function(){"use strict";function LoginConfig($stateProvider){$stateProvider.state("login",{url:"/login/:token",templateUrl:"login/templates/login.tpl.html",controller:"LoginCtrl",controllerAs:"login"})}function LoginService($q,$window,$state,toastr,OrderCloud,TokenRefresh,clientid,buyerid,anonymous){function _sendVerificationCode(email){var deferred=$q.defer(),passwordResetRequest={Email:email,ClientID:clientid,URL:encodeURIComponent($window.location.href)+"{0}"};return OrderCloud.PasswordResets.SendVerificationCode(passwordResetRequest).then(function(){deferred.resolve()})["catch"](function(ex){deferred.reject(ex)}),deferred.promise}function _resetPassword(resetPasswordCredentials,verificationCode){var deferred=$q.defer(),passwordReset={ClientID:clientid,Username:resetPasswordCredentials.ResetUsername,Password:resetPasswordCredentials.NewPassword};return OrderCloud.PasswordResets.ResetPassword(verificationCode,passwordReset).then(function(){deferred.resolve()})["catch"](function(ex){deferred.reject(ex)}),deferred.promise}function _logout(){OrderCloud.Auth.RemoveToken(),OrderCloud.Auth.RemoveImpersonationToken(),OrderCloud.BuyerID.Set(null),TokenRefresh.RemoveToken(),$state.go(anonymous?"home":"login",{},{reload:!0})}function _rememberMe(){TokenRefresh.GetToken().then(function(refreshToken){refreshToken?TokenRefresh.Refresh(refreshToken).then(function(token){OrderCloud.BuyerID.Set(buyerid),OrderCloud.Auth.SetToken(token.access_token),$state.go("home")})["catch"](function(){toastr.error("Your token has expired, please log in again.")}):_logout()})}return{SendVerificationCode:_sendVerificationCode,ResetPassword:_resetPassword,RememberMe:_rememberMe,Logout:_logout}}function LoginController($state,$stateParams,$exceptionHandler,OrderCloud,LoginService,TokenRefresh,buyerid){var vm=this;vm.credentials={Username:null,Password:null},vm.token=$stateParams.token,vm.form=vm.token?"reset":"login",vm.setForm=function(form){vm.form=form},vm.rememberStatus=!1,vm.submit=function(){OrderCloud.Auth.GetToken(vm.credentials).then(function(data){vm.rememberStatus?TokenRefresh.SetToken(data.refresh_token):angular.noop(),OrderCloud.BuyerID.Set(buyerid),OrderCloud.Auth.SetToken(data.access_token),$state.go("home")})["catch"](function(ex){$exceptionHandler(ex)})},vm.forgotPassword=function(){LoginService.SendVerificationCode(vm.credentials.Email).then(function(){vm.setForm("verificationCodeSuccess"),vm.credentials.Email=null})["catch"](function(ex){$exceptionHandler(ex)})},vm.resetPassword=function(){LoginService.ResetPassword(vm.credentials,vm.token).then(function(){vm.setForm("resetSuccess"),vm.token=null,vm.credentials.ResetUsername=null,vm.credentials.NewPassword=null,vm.credentials.ConfirmPassword=null})["catch"](function(ex){$exceptionHandler(ex),vm.credentials.ResetUsername=null,vm.credentials.NewPassword=null,vm.credentials.ConfirmPassword=null})}}LoginConfig.$inject=["$stateProvider"],LoginService.$inject=["$q","$window","$state","toastr","OrderCloud","TokenRefresh","clientid","buyerid","anonymous"],LoginController.$inject=["$state","$stateParams","$exceptionHandler","OrderCloud","LoginService","TokenRefresh","buyerid"],angular.module("orderCloud").config(LoginConfig).factory("LoginService",LoginService).controller("LoginCtrl",LoginController)}(),function(){"use strict";function HomeConfig($stateProvider){$stateProvider.state("home",{parent:"base",url:"/home",templateUrl:"home/templates/home.tpl.html",controller:"HomeCtrl",controllerAs:"home"})}function HomeController(){}HomeConfig.$inject=["$stateProvider"],angular.module("orderCloud").config(HomeConfig).controller("HomeCtrl",HomeController)}(),function(){"use strict";function BaseConfig($stateProvider,$injector){var baseViews={"":{templateUrl:"base/templates/base.tpl.html",controller:"BaseCtrl",controllerAs:"base"}};if($injector.has("base")){var baseConfig=$injector.get("base");baseConfig.left?baseViews["left@base"]={templateUrl:"base/templates/base.left.tpl.html"}:angular.noop(),baseConfig.right?baseViews["right@base"]={templateUrl:"base/templates/base.right.tpl.html"}:angular.noop(),baseConfig.top?baseViews["top@base"]={templateUrl:"base/templates/base.top.tpl.html"}:angular.noop(),baseConfig.bottom?baseViews["bottom@base"]={templateUrl:"base/templates/base.bottom.tpl.html"}:angular.noop()}var baseState={url:"","abstract":!0,views:baseViews,resolve:{CurrentUser:function($q,$state,OrderCloud,buyerid,anonymous){var dfd=$q.defer();return OrderCloud.Me.Get().then(function(data){dfd.resolve(data)})["catch"](function(){anonymous?OrderCloud.Auth.ReadToken()||OrderCloud.Auth.GetToken("").then(function(data){OrderCloud.Auth.SetToken(data.access_token)})["finally"](function(){OrderCloud.BuyerID.Set(buyerid),dfd.resolve({})}):(OrderCloud.Auth.RemoveToken(),OrderCloud.Auth.RemoveImpersonationToken(),OrderCloud.BuyerID.Set(null),$state.go("login"),dfd.resolve())}),dfd.promise},AnonymousUser:function($q,OrderCloud,CurrentUser){CurrentUser.Anonymous=angular.isDefined(JSON.parse(atob(OrderCloud.Auth.ReadToken().split(".")[1])).orderid)},ComponentList:function($state,$q,Underscore,CurrentUser){var deferred=$q.defer(),nonSpecific=["Buyers","Products","Specs","Price Schedules","Admin Users","Product Facets"],components={nonSpecific:[],buyerSpecific:[]};return angular.forEach($state.get(),function(state){state.data&&state.data.componentName&&(nonSpecific.indexOf(state.data.componentName)>-1?void 0==Underscore.findWhere(components.nonSpecific,{Display:state.data.componentName})&&components.nonSpecific.push({Display:state.data.componentName,StateRef:state.name}):void 0==Underscore.findWhere(components.buyerSpecific,{Display:state.data.componentName})&&components.buyerSpecific.push({Display:state.data.componentName,StateRef:state.name}))}),deferred.resolve(components),deferred.promise}}};$stateProvider.state("base",baseState)}function BaseController($rootScope,$ocMedia,Underscore,snapRemote,defaultErrorMessageResolver,CurrentUser,ComponentList,base){function _isMobile(){return $ocMedia("max-width:991px")}function _initDrawers(isMobile){snapRemote.close("MAIN"),isMobile&&(base.left||base.right)?snapRemote.enable("MAIN"):snapRemote.disable("MAIN")}var vm=this;vm.left=base.left,vm.right=base.right,vm.currentUser=CurrentUser,vm.catalogItems=ComponentList.nonSpecific,vm.organizationItems=ComponentList.buyerSpecific,vm.registrationAvailable=Underscore.filter(vm.organizationItems,function(item){return"registration"==item.StateRef}).length,defaultErrorMessageResolver.getErrorMessages().then(function(errorMessages){errorMessages.customPassword="Password must be at least eight characters long and include at least one letter and one number",errorMessages.positiveInteger="Please enter a positive integer",errorMessages.ID_Name="Only Alphanumeric characters, hyphens and underscores are allowed",errorMessages.confirmpassword="Your passwords do not match",errorMessages.noSpecialChars="Only Alphanumeric characters are allowed"}),vm.snapOptions={disable:!base.left&&base.right?"left":base.left&&!base.right?"right":"none"},_initDrawers(_isMobile()),$rootScope.$watch(_isMobile,function(n,o){n!==o&&_initDrawers(n)})}function occomponents(){return function(components){var filtered=["registration"],result=[];return angular.forEach(components,function(component){filtered.indexOf(component.StateRef)==-1&&result.push(component)}),result}}BaseConfig.$inject=["$stateProvider","$injector"],BaseController.$inject=["$rootScope","$ocMedia","Underscore","snapRemote","defaultErrorMessageResolver","CurrentUser","ComponentList","base"],
angular.module("orderCloud").config(BaseConfig).controller("BaseCtrl",BaseController).filter("occomponents",occomponents)}(),function(){"use strict";function AccountConfig($stateProvider){$stateProvider.state("account",{parent:"base",url:"/account",templateUrl:"account/templates/account.tpl.html",controller:"AccountCtrl",controllerAs:"account"}).state("account.changePassword",{url:"/changepassword",templateUrl:"account/templates/changePassword.tpl.html",controller:"ChangePasswordCtrl",controllerAs:"changePassword"})}function AccountService($q,$uibModal,OrderCloud){function _update(currentProfile,newProfile){function updateUser(){OrderCloud.Me.Update(newProfile).then(function(data){deferred.resolve(data)})["catch"](function(ex){deferred.reject(ex)})}var deferred=$q.defer();return $uibModal.open({animation:!0,templateUrl:"account/templates/confirmPassword.modal.tpl.html",controller:"ConfirmPasswordCtrl",controllerAs:"confirmPassword",size:"sm"}).result.then(function(password){var checkPasswordCredentials={Username:currentProfile.Username,Password:password};OrderCloud.Auth.GetToken(checkPasswordCredentials).then(function(){updateUser()})["catch"](function(ex){deferred.reject(ex)})},function(){angular.noop()}),deferred.promise}function _changePassword(currentUser){function changePassword(){currentUser.Password=currentUser.NewPassword,OrderCloud.Me.Update(currentUser).then(function(){deferred.resolve()})}var deferred=$q.defer(),checkPasswordCredentials={Username:currentUser.Username,Password:currentUser.CurrentPassword};return OrderCloud.Auth.GetToken(checkPasswordCredentials).then(function(){changePassword()})["catch"](function(ex){deferred.reject(ex)}),deferred.promise}var service={Update:_update,ChangePassword:_changePassword};return service}function AccountController($exceptionHandler,toastr,AccountService,CurrentUser){var vm=this;vm.profile=angular.copy(CurrentUser);var currentProfile=CurrentUser;vm.update=function(){AccountService.Update(currentProfile,vm.profile).then(function(data){vm.profile=angular.copy(data),currentProfile=data,toastr.success("Account changes were saved.","Success!")})["catch"](function(ex){vm.profile=currentProfile,$exceptionHandler(ex)})},vm.resetForm=function(form){vm.profile=currentProfile,form.$setPristine(!0)}}function ConfirmPasswordController($uibModalInstance){var vm=this;vm.submit=function(){$uibModalInstance.close(vm.password)},vm.cancel=function(){$uibModalInstance.dismiss("cancel")}}function ChangePasswordController($state,$exceptionHandler,toastr,AccountService,CurrentUser){var vm=this;vm.currentUser=CurrentUser,vm.changePassword=function(){AccountService.ChangePassword(vm.currentUser).then(function(){toastr.success("Password successfully changed","Success!"),vm.currentUser.CurrentPassword=null,vm.currentUser.NewPassword=null,vm.currentUser.ConfirmPassword=null,$state.go("account")})["catch"](function(ex){$exceptionHandler(ex)})}}AccountConfig.$inject=["$stateProvider"],AccountController.$inject=["$exceptionHandler","toastr","AccountService","CurrentUser"],AccountService.$inject=["$q","$uibModal","OrderCloud"],ConfirmPasswordController.$inject=["$uibModalInstance"],ChangePasswordController.$inject=["$state","$exceptionHandler","toastr","AccountService","CurrentUser"],angular.module("orderCloud").config(AccountConfig).controller("AccountCtrl",AccountController).factory("AccountService",AccountService).controller("ConfirmPasswordCtrl",ConfirmPasswordController).controller("ChangePasswordCtrl",ChangePasswordController)}();